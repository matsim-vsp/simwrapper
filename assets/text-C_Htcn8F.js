import{d as g,g as y,n as b}from"./index-D_sw2g-2.js";import{m as k,c as _,k as x}from"./ErrorPanel-BiGfKPxL.js";import{H as p}from"./HTTPFileSystem-ChhivMzi.js";import"./index-DFKcNkqO.js";import"./index-CCqgbF9K.js";import"./SW_logo_white-BC-0sXUm.js";import"./TopSheet-D3y6zxfo.js";import"./DashboardDataManager-mkjvCydQ.js";import"./group-hI8ly2Wr.js";import"./index-_doEQLKC.js";import"./fxp-DjoqftHf.js";const f=new k({html:!0,linkify:!0,typographer:!0}).use(_,{engine:x,delimiters:"dollars",katexOptions:{macros:{"\\RR":"\\mathbb{R}"}}}),$=g({name:"TextPanel",props:{fileSystemConfig:{type:Object,required:!0},subfolder:{type:String,required:!0},split:{type:Object,required:!0},files:{type:Array,required:!0},config:{type:Object,required:!0}},directives:{markdownLinks:{unbind(t){t._markdownHandler&&(t.removeEventListener("click",t._markdownHandler),delete t._markdownHandler)},inserted(t,e,r){const o=a=>{try{const s=a.target?.closest("a");if(s){const l=r?.context?.$route?.path||"";if(l.startsWith("/split/")){const c=s.getAttribute("href");if(!c.startsWith("http")){const i=r.context,d=i.$props.split,m=JSON.parse(atob(l.slice(7))),n=m[d.row][d.col];n.key=Math.random();const h=`${i.$props.subfolder}/${c}`;n.key=Math.random(),n.props.xsubfolder=h;const u=btoa(JSON.stringify(m));a.preventDefault(),i.$router.push(`/split/${u}`)}}}}catch(s){console.error("FAILED special split nav; sorry: "+s)}};t._markdownHandler=o,t.addEventListener("click",o)}}},data:()=>({readmeContent:"",hasHeight:!1}),computed:{fileApi(){return new p(this.fileSystemConfig,y)},htmlWithProcessedRelativeImageTags(){return this.readmeContent.replace(/src="\.(\/.*?)"/g,(e,r)=>`src="${this.fileSystemConfig.baseURL}/${this.subfolder}/${r}"`)}},async mounted(){let t;try{if(this.hasHeight=!!this.config.height,this.config.content)this.readmeContent=f.render(this.config.content);else{const e=new p(this.fileSystemConfig);t=`${this.subfolder}/${this.config.file}`;const r=await e.getFileText(t);this.readmeContent=f.render(r)}}catch(e){this.$emit("error",`Error loading: ${t}`),console.error({e});let r=""+e;e.statusText&&(r=e.statusText),this.readmeContent=`${this.config.file}: ${r}`}this.$emit("isLoaded")}});var v=function(){var e=this,r=e._self._c;return e._self._setupProxy,r("div",{staticClass:"text-panel-element",class:{absolute:e.hasHeight}},[r("div",{staticClass:"scrollable"},[e.readmeContent?r("div",{directives:[{name:"markdown-links",rawName:"v-markdown-links"}],staticClass:"curate-content markdown",domProps:{innerHTML:e._s(e.htmlWithProcessedRelativeImageTags)}}):e._e()])])},w=[],C=b($,v,w,!1,null,"6955cb3f");const W=C.exports;export{W as default};
