const n="simwrapper-3d-buildings",a="building";const y="#e6e6e6",f="#2c2c2c",s="__simwrapper3dBuildingsRetryPending";function g(t){if(t.getSource("openmaptiles"))return"openmaptiles";if(t.getSource("openfreemap"))return"openfreemap"}function d(t){const o=(t.getStyle()?.layers||[]).find(i=>i.type==="background")?.paint?.["background-color"];return typeof o=="string"&&o.startsWith("rgb(")}function l(t){const e=["to-number",["get","render_height"],0],r=["to-number",["get","render_min_height"],0];return{"fill-extrusion-color":d(t)?f:y,"fill-extrusion-height":e,"fill-extrusion-base":r,"fill-extrusion-opacity":.85}}function u(t){const e=t;if(e[s]||(e[s]=!0,typeof t.once!="function"))return;const r=()=>{e[s]=!1,p(t)};t.once("style.load",r)}function p(t){const e=t;if(!e?.getStyle?.())return;if(!e.getStyle()?.layers?.length){u(e);return}if(e.getLayer(n)){const c=l(e);e.setPaintProperty(n,"fill-extrusion-color",c["fill-extrusion-color"]),e.setPaintProperty(n,"fill-extrusion-opacity",c["fill-extrusion-opacity"]);return}const i=g(e);if(!i){u(e);return}e.addLayer({id:n,source:i,"source-layer":a,type:"fill-extrusion",minzoom:14,paint:l(e)})}function _(t){const e=t;if(e?.getLayer?.(n))try{e.removeLayer(n)}catch{}}export{_ as d,p as e};
