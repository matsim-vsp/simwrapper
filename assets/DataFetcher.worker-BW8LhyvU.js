(function(){"use strict";const mt="AAK"+Object.keys({light:"mapbox://styles/mapbox/light-v10",dark:"mapbox://styles/vsp-tu-berlin/ckek59op0011219pbwfar1rex",transparentLight:"mapbox://styles/vsp-tu-berlin/clgxnk7m500dt01p687w8e693",transparentDark:"mapbox://styles/vsp-tu-berlin/clgwrqa0w00av01pg5jox0a35"}).length+"QRQ0EldfvmCW4Cyu";var le=(b=>(b[b.NUMBER=0]="NUMBER",b[b.STRING=1]="STRING",b[b.BOOLEAN=2]="BOOLEAN",b[b.DATE=3]="DATE",b[b.LOOKUP=4]="LOOKUP",b[b.UNKNOWN=5]="UNKNOWN",b))(le||{});function ur(){return this._source.cancel()}function yt(b){return/^[nf]$/i.test(b)?!1:/^[yt]$/i.test(b)?!0:null}function bt(b){return new Date(+b.substring(0,4),b.substring(4,6)-1,+b.substring(6,8))}function de(b){return!(b=b.trim())||isNaN(b=+b)?null:b}function At(b){return b.trim()||null}var lr={B:de,C:At,D:bt,F:de,L:yt,M:de,N:de};function cr(){var b=this,c=1;return b._source.slice(b._recordLength).then(function(h){return h&&h[0]!==26?{done:!1,value:b._fields.reduce(function(l,g){return l[g.name]=lr[g.type](b._decode(h.subarray(c,c+=g.length))),l},{})}:{done:!0,value:void 0}})}var Et={B:de,C:At,D:bt,F:de,L:yt,M:de,N:de};const fr={B:le.NUMBER,C:le.STRING,D:le.DATE,F:le.NUMBER,L:le.BOOLEAN,M:le.NUMBER,N:le.NUMBER};function hr(b,c){const h=new Uint8Array(b),l=new DataView(b.slice(0,32)),g=l.getUint16(8,!0),i=new DataView(b.slice(32,g)),e=new _t(h,c,l,i),r={},t=Math.round((h.byteLength-g-1)/e._recordLength);e._fields.length;for(const d of e._fields){const a=fr[d.type],N={values:Et[d.type]===de?new Float32Array(t):[],name:d.name,type:a};r[d.name]=N}let n=0;const s=h.byteLength;try{for(;;){const d=g+n*e._recordLength;if(d+e._recordLength>s)break;const a=h.slice(d,d+e._recordLength);if(a&&a[0]!==26){let R=1;e._fields.reduce(function(N,x){const $=Et[x.type](e._decode(a.slice(R,R+x.length)));r[x.name].values[n]=$,R=R+x.length},{})}else break;n++}}catch(d){console.warn(d)}return console.log("dbf total records",n),r}function _t(b,c,h,l){this._source=b,this._decode=c.decode.bind(c),this._recordLength=h.getUint16(10,!0),this._fields=[];for(var g=0;l.getUint8(g)!==13;g+=32){for(var i=0;i<11&&l.getUint8(g+i)!==0;++i);this._fields.push({name:this._decode(new Uint8Array(l.buffer,l.byteOffset+g,i)),type:String.fromCharCode(l.getUint8(g+11)),length:l.getUint8(g+16)})}}var Rt=_t.prototype;Rt.read=cr,Rt.cancel=ur;function xe(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b}function dr(b){if(Object.prototype.hasOwnProperty.call(b,"__esModule"))return b;var c=b.default;if(typeof c=="function"){var h=function l(){return this instanceof l?Reflect.construct(c,arguments,this.constructor):c.apply(this,arguments)};h.prototype=c.prototype}else h={};return Object.defineProperty(h,"__esModule",{value:!0}),Object.keys(b).forEach(function(l){var g=Object.getOwnPropertyDescriptor(b,l);Object.defineProperty(h,l,g.get?g:{enumerable:!0,get:function(){return b[l]}})}),h}var Re={exports:{}};/* @license
Papa Parse
v5.3.2
https://github.com/mholt/PapaParse
License: MIT
*/var pr=Re.exports,vt;function gr(){return vt||(vt=1,(function(b,c){(function(h,l){b.exports=l()})(pr,function h(){var l=typeof self<"u"?self:typeof window<"u"?window:l!==void 0?l:{},g=!l.document&&!!l.postMessage,i=g&&/blob:/i.test((l.location||{}).protocol),e={},r=0,t={},n=[];if(t.parse=function(o,u){var v=(u=u||{}).dynamicTyping||!1;if(w(v)&&(u.dynamicTypingFunction=v,v={}),u.dynamicTyping=v,u.transform=!!w(u.transform)&&u.transform,u.worker&&t.WORKERS_SUPPORTED){var C=(function(){if(!t.WORKERS_SUPPORTED)return!1;var k=(q=l.URL||l.webkitURL||null,G=h.toString(),t.BLOB_URL||(t.BLOB_URL=q.createObjectURL(new Blob(["(",G,")();"],{type:"text/javascript"})))),I=new l.Worker(k),q,G;return I.onmessage=m,I.id=r++,e[I.id]=I})();return C.userStep=u.step,C.userChunk=u.chunk,C.userComplete=u.complete,C.userError=u.error,u.step=w(u.step),u.chunk=w(u.chunk),u.complete=w(u.complete),u.error=w(u.error),delete u.worker,void C.postMessage({input:o,config:u,workerId:C.id})}var y=null;return t.NODE_STREAM_INPUT,typeof o=="string"?y=u.download?new a(u):new N(u):o.readable===!0&&w(o.read)&&w(o.on)?y=new x(u):(l.File&&o instanceof File||o instanceof Object)&&(y=new R(u)),y.stream(o)},t.unparse=function(o,u){var v=!1,C=!0,y=",",k=`\r
`,I='"',q=I+I,G=!1,P=null,Q=!1;(function(){if(typeof u=="object"){if(typeof u.delimiter!="string"||t.BAD_DELIMITERS.filter(function(M){return u.delimiter.indexOf(M)!==-1}).length||(y=u.delimiter),(typeof u.quotes=="boolean"||typeof u.quotes=="function"||Array.isArray(u.quotes))&&(v=u.quotes),typeof u.skipEmptyLines!="boolean"&&typeof u.skipEmptyLines!="string"||(G=u.skipEmptyLines),typeof u.newline=="string"&&(k=u.newline),typeof u.quoteChar=="string"&&(I=u.quoteChar),typeof u.header=="boolean"&&(C=u.header),Array.isArray(u.columns)){if(u.columns.length===0)throw new Error("Option columns is empty");P=u.columns}u.escapeChar!==void 0&&(q=u.escapeChar+I),(typeof u.escapeFormulae=="boolean"||u.escapeFormulae instanceof RegExp)&&(Q=u.escapeFormulae instanceof RegExp?u.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var B=new RegExp(f(I),"g");if(typeof o=="string"&&(o=JSON.parse(o)),Array.isArray(o)){if(!o.length||Array.isArray(o[0]))return L(null,o,G);if(typeof o[0]=="object")return L(P||Object.keys(o[0]),o,G)}else if(typeof o=="object")return typeof o.data=="string"&&(o.data=JSON.parse(o.data)),Array.isArray(o.data)&&(o.fields||(o.fields=o.meta&&o.meta.fields||P),o.fields||(o.fields=Array.isArray(o.data[0])?o.fields:typeof o.data[0]=="object"?Object.keys(o.data[0]):[]),Array.isArray(o.data[0])||typeof o.data[0]=="object"||(o.data=[o.data])),L(o.fields||[],o.data||[],G);throw new Error("Unable to serialize unrecognized input");function L(M,ee,O){var S="";typeof M=="string"&&(M=JSON.parse(M)),typeof ee=="string"&&(ee=JSON.parse(ee));var j=Array.isArray(M)&&0<M.length,W=!Array.isArray(ee[0]);if(j&&C){for(var ne=0;ne<M.length;ne++)0<ne&&(S+=y),S+=re(M[ne],ne);0<ee.length&&(S+=k)}for(var K=0;K<ee.length;K++){var X=j?M.length:ee[K].length,Y=!1,oe=j?Object.keys(ee[K]).length===0:ee[K].length===0;if(O&&!j&&(Y=O==="greedy"?ee[K].join("").trim()==="":ee[K].length===1&&ee[K][0].length===0),O==="greedy"&&j){for(var V=[],J=0;J<X;J++){var U=W?M[J]:J;V.push(ee[K][U])}Y=V.join("").trim()===""}if(!Y){for(var z=0;z<X;z++){0<z&&!oe&&(S+=y);var he=j&&W?M[z]:z;S+=re(ee[K][he],z)}K<ee.length-1&&(!O||0<X&&!oe)&&(S+=k)}}return S}function re(M,ee){if(M==null)return"";if(M.constructor===Date)return JSON.stringify(M).slice(1,25);var O=!1;Q&&typeof M=="string"&&Q.test(M)&&(M="'"+M,O=!0);var S=M.toString().replace(B,q);return(O=O||v===!0||typeof v=="function"&&v(M,ee)||Array.isArray(v)&&v[ee]||(function(j,W){for(var ne=0;ne<W.length;ne++)if(-1<j.indexOf(W[ne]))return!0;return!1})(S,t.BAD_DELIMITERS)||-1<S.indexOf(y)||S.charAt(0)===" "||S.charAt(S.length-1)===" ")?I+S+I:S}},t.RECORD_SEP="",t.UNIT_SEP="",t.BYTE_ORDER_MARK="\uFEFF",t.BAD_DELIMITERS=["\r",`
`,'"',t.BYTE_ORDER_MARK],t.WORKERS_SUPPORTED=!g&&!!l.Worker,t.NODE_STREAM_INPUT=1,t.LocalChunkSize=10485760,t.RemoteChunkSize=5242880,t.DefaultDelimiter=",",t.Parser=_,t.ParserHandle=$,t.NetworkStreamer=a,t.FileStreamer=R,t.StringStreamer=N,t.ReadableStreamStreamer=x,l.jQuery){var s=l.jQuery;s.fn.parse=function(o){var u=o.config||{},v=[];return this.each(function(k){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&l.FileReader)||!this.files||this.files.length===0)return!0;for(var I=0;I<this.files.length;I++)v.push({file:this.files[I],inputElem:this,instanceConfig:s.extend({},u)})}),C(),this;function C(){if(v.length!==0){var k,I,q,G,P=v[0];if(w(o.before)){var Q=o.before(P.file,P.inputElem);if(typeof Q=="object"){if(Q.action==="abort")return k="AbortError",I=P.file,q=P.inputElem,G=Q.reason,void(w(o.error)&&o.error({name:k},I,q,G));if(Q.action==="skip")return void y();typeof Q.config=="object"&&(P.instanceConfig=s.extend(P.instanceConfig,Q.config))}else if(Q==="skip")return void y()}var B=P.instanceConfig.complete;P.instanceConfig.complete=function(L){w(B)&&B(L,P.file,P.inputElem),y()},t.parse(P.file,P.instanceConfig)}else w(o.complete)&&o.complete()}function y(){v.splice(0,1),C()}}}function d(o){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],comments:[],meta:{}},function(u){var v=E(u);v.chunkSize=parseInt(v.chunkSize),u.step||u.chunk||(v.chunkSize=null),this._handle=new $(v),(this._handle.streamer=this)._config=v}.call(this,o),this.parseChunk=function(u,v){if(this.isFirstChunk&&w(this._config.beforeFirstChunk)){var C=this._config.beforeFirstChunk(u);C!==void 0&&(u=C)}this.isFirstChunk=!1,this._halted=!1;var y=this._partialLine+u;this._partialLine="";var k=this._handle.parse(y,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var I=k.meta.cursor;this._finished||(this._partialLine=y.substring(I-this._baseIndex),this._baseIndex=I),k&&k.data&&(this._rowCount+=k.data.length);var q=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(i)l.postMessage({results:k,workerId:t.WORKER_ID,finished:q});else if(w(this._config.chunk)&&!v){if(this._config.chunk(k,this._handle),n=[],this._handle.paused()||this._handle.aborted())return void(this._halted=!0);k=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(k.data),this._completeResults.errors=this._completeResults.errors.concat(k.errors),this._completeResults.comments=this._completeResults.comments.concat(k.comments),this._completeResults.meta=k.meta),this._completed||!q||!w(this._config.complete)||k&&k.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),q||k&&k.meta.paused||this._nextChunk(),k}this._halted=!0},this._sendError=function(u){w(this._config.error)?this._config.error(u):i&&this._config.error&&l.postMessage({workerId:t.WORKER_ID,error:u,finished:!1})}}function a(o){var u;(o=o||{}).chunkSize||(o.chunkSize=t.RemoteChunkSize),d.call(this,o),this._nextChunk=g?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(v){this._input=v,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(u=new XMLHttpRequest,this._config.withCredentials&&(u.withCredentials=this._config.withCredentials),g||(u.onload=A(this._chunkLoaded,this),u.onerror=A(this._chunkError,this)),u.open(this._config.downloadRequestBody?"POST":"GET",this._input,!g),this._config.downloadRequestHeaders){var v=this._config.downloadRequestHeaders;for(var C in v)u.setRequestHeader(C,v[C])}if(this._config.chunkSize){var y=this._start+this._config.chunkSize-1;u.setRequestHeader("Range","bytes="+this._start+"-"+y)}try{u.send(this._config.downloadRequestBody)}catch(k){this._chunkError(k.message)}g&&u.status===0&&this._chunkError()}},this._chunkLoaded=function(){var v;u.readyState===4&&(u.status<200||400<=u.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:u.responseText.length,this._finished=!this._config.chunkSize||this._start>=((v=u.getResponseHeader("Content-Range"))!==null?parseInt(v.substring(v.lastIndexOf("/")+1)):-1),this.parseChunk(u.responseText)))},this._chunkError=function(v){var C=u.statusText||v;this._sendError(new Error(C))}}function R(o){var u,v;(o=o||{}).chunkSize||(o.chunkSize=t.LocalChunkSize),d.call(this,o);var C=typeof FileReader<"u";this.stream=function(y){this._input=y,v=y.slice||y.webkitSlice||y.mozSlice,C?((u=new FileReader).onload=A(this._chunkLoaded,this),u.onerror=A(this._chunkError,this)):u=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var y=this._input;if(this._config.chunkSize){var k=Math.min(this._start+this._config.chunkSize,this._input.size);y=v.call(y,this._start,k)}var I=u.readAsText(y,this._config.encoding);C||this._chunkLoaded({target:{result:I}})},this._chunkLoaded=function(y){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(y.target.result)},this._chunkError=function(){this._sendError(u.error)}}function N(o){var u;d.call(this,o=o||{}),this.stream=function(v){return u=v,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var v,C=this._config.chunkSize;return u=C?(v=u.substring(0,C),u.substring(C)):(v=u,""),this._finished=!u,this.parseChunk(v)}}}function x(o){d.call(this,o=o||{});var u=[],v=!0,C=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(y){this._input=y,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){C&&u.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),u.length?this.parseChunk(u.shift()):v=!0},this._streamData=A(function(y){try{u.push(typeof y=="string"?y:y.toString(this._config.encoding)),v&&(v=!1,this._checkIsFinished(),this.parseChunk(u.shift()))}catch(k){this._streamError(k)}},this),this._streamError=A(function(y){this._streamCleanUp(),this._sendError(y)},this),this._streamEnd=A(function(){this._streamCleanUp(),C=!0,this._streamData("")},this),this._streamCleanUp=A(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function $(o){var u,v,C,y=Math.pow(2,53),k=-y,I=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,q=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,G=this,P=0,Q=0,B=!1,L=!1,re=[],M={data:[],errors:[],comments:[],meta:{}};if(w(o.step)){var ee=o.step;o.step=function(K){if(M=K,j())S();else{if(S(),M.data.length===0)return;P+=K.data.length,o.preview&&P>o.preview?v.abort():(M.data=M.data[0],ee(M,G))}}}function O(K){return o.skipEmptyLines==="greedy"?K.join("").trim()==="":K.length===1&&K[0].length===0}function S(){return M&&C&&(ne("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+t.DefaultDelimiter+"'"),C=!1),o.skipEmptyLines&&(M.data=M.data.filter(function(K){return!O(K)})),j()&&(function(){if(!M)return;function K(Y,oe){w(o.transformHeader)&&(Y=o.transformHeader(Y,oe)),re.push(Y)}if(Array.isArray(M.data[0])){for(var X=0;j()&&X<M.data.length;X++)M.data[X].forEach(K);M.data.splice(0,1)}else M.data.forEach(K)})(),(function(){if(!M||!o.header&&!o.dynamicTyping&&!o.transform)return M;function K(Y,oe){var V,J=o.header?{}:[];for(V=0;V<Y.length;V++){var U=V,z=Y[V];o.header&&(U=V>=re.length?"__parsed_extra":re[V]),o.transform&&(z=o.transform(z,U)),z=W(U,z),U==="__parsed_extra"?(J[U]=J[U]||[],J[U].push(z)):J[U]=z}return o.header&&(V>re.length?ne("FieldMismatch","TooManyFields","Too many fields: expected "+re.length+" fields but parsed "+V,Q+oe):V<re.length&&ne("FieldMismatch","TooFewFields","Too few fields: expected "+re.length+" fields but parsed "+V,Q+oe)),J}var X=1;return!M.data.length||Array.isArray(M.data[0])?(M.data=M.data.map(K),X=M.data.length):M.data=K(M.data,0),o.header&&M.meta&&(M.meta.fields=re),Q+=X,M})()}function j(){return o.header&&re.length===0}function W(K,X){return Y=K,o.dynamicTypingFunction&&o.dynamicTyping[Y]===void 0&&(o.dynamicTyping[Y]=o.dynamicTypingFunction(Y)),(o.dynamicTyping[Y]||o.dynamicTyping)===!0?X==="true"||X==="TRUE"||X!=="false"&&X!=="FALSE"&&(X.startsWith('"')?X.slice(1):(function(oe){if(I.test(oe)){var V=parseFloat(oe);if(k<V&&V<y)return!0}return!1})(X)?parseFloat(X):q.test(X)?new Date(X):X===""?null:X):X;var Y}function ne(K,X,Y,oe){var V={type:K,code:X,message:Y};oe!==void 0&&(V.row=oe),M.errors.push(V)}this.parse=function(K,X,Y){var oe=o.quoteChar||'"';if(o.newline||(o.newline=(function(U,z){U=U.substring(0,1048576);var he=new RegExp(f(z)+"([^]*?)"+f(z),"gm"),F=(U=U.replace(he,"")).split("\r"),D=U.split(`
`),H=1<D.length&&D[0].length<F[0].length;if(F.length===1||H)return`
`;for(var Z=0,te=0;te<F.length;te++)F[te][0]===`
`&&Z++;return Z>=F.length/2?`\r
`:"\r"})(K,oe)),C=!1,o.delimiter)w(o.delimiter)&&(o.delimiter=o.delimiter(K),M.meta.delimiter=o.delimiter);else{var V=(function(U,z,he,F,D){var H,Z,te,se;D=D||[",","	","|",";",t.RECORD_SEP,t.UNIT_SEP];for(var ie=0;ie<D.length;ie++){var ue=D[ie],fe=0,ge=0,ar=0;te=void 0;for(var Ee=new _({comments:F,delimiter:ue,newline:z,preview:10}).parse(U),Ne=0;Ne<Ee.data.length;Ne++)if(he&&O(Ee.data[Ne]))ar++;else{var _e=Ee.data[Ne].length;ge+=_e,te!==void 0?0<_e&&(fe+=Math.abs(_e-te),te=_e):te=_e}0<Ee.data.length&&(ge/=Ee.data.length-ar),(Z===void 0||fe<=Z)&&(se===void 0||se<ge)&&1.99<ge&&(Z=fe,H=ue,se=ge)}return{successful:!!(o.delimiter=H),bestDelimiter:H}})(K,o.newline,o.skipEmptyLines,o.comments,o.delimitersToGuess);V.successful?o.delimiter=V.bestDelimiter:(C=!0,o.delimiter=t.DefaultDelimiter),M.meta.delimiter=o.delimiter}var J=E(o);return o.preview&&o.header&&J.preview++,u=K,v=new _(J),M=v.parse(u,X,Y),S(),B?{meta:{paused:!0}}:M||{meta:{paused:!1}}},this.paused=function(){return B},this.pause=function(){B=!0,v.abort(),u=w(o.chunk)?"":u.substring(v.getCharIndex())},this.resume=function(){G.streamer._halted?(B=!1,G.streamer.parseChunk(u,!0)):setTimeout(G.resume,3)},this.aborted=function(){return L},this.abort=function(){L=!0,v.abort(),M.meta.aborted=!0,w(o.complete)&&o.complete(M),u=""}}function f(o){return o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(o){var u,v=(o=o||{}).delimiter,C=o.newline,y=o.comments,k=o.step,I=o.preview,q=o.fastMode,G=u=o.quoteChar===void 0||o.quoteChar===null?'"':o.quoteChar;if(o.escapeChar!==void 0&&(G=o.escapeChar),(typeof v!="string"||-1<t.BAD_DELIMITERS.indexOf(v))&&(v=","),y===v)throw new Error("Comment character same as delimiter");y===!0?y="#":(typeof y!="string"||-1<t.BAD_DELIMITERS.indexOf(y))&&(y=!1),C!==`
`&&C!=="\r"&&C!==`\r
`&&(C=`
`);var P=0,Q=!1;this.parse=function(B,L,re){if(typeof B!="string")throw new Error("Input must be a string");var M=B.length,ee=v.length,O=C.length,S=y.length,j=w(k),W=[],ne=[],K=[],X=P=0;if(!B)return se();if(q||q!==!1&&B.indexOf(u)===-1){for(var Y=B.split(C),oe=0;oe<Y.length;oe++){if(K=Y[oe],P+=K.length,oe!==Y.length-1)P+=C.length;else if(re)return se();if(y&&K.substring(0,S)===y)n.push(K);else{if(j){if(W=[],D(K.split(v)),ie(),Q)return se()}else D(K.split(v));if(I&&I<=oe)return W=W.slice(0,I),se(!0)}}return se()}for(var V=B.indexOf(v,P),J=B.indexOf(C,P),U=new RegExp(f(G)+f(u),"g"),z=B.indexOf(u,P);;)if(B[P]!==u)if(y&&K.length===0&&B.substring(P,P+S)===y){if(J===-1)return se();P=J+O,J=B.indexOf(C,P),V=B.indexOf(v,P)}else if(V!==-1&&(V<J||J===-1))K.push(B.substring(P,V)),P=V+ee,V=B.indexOf(v,P);else{if(J===-1)break;if(K.push(B.substring(P,J)),te(J+O),j&&(ie(),Q))return se();if(I&&W.length>=I)return se(!0)}else for(z=P,P++;;){if((z=B.indexOf(u,z+1))===-1)return re||ne.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:W.length,index:P}),Z();if(z===M-1)return Z(B.substring(P,z).replace(U,u));if(u!==G||B[z+1]!==G){if(u===G||z===0||B[z-1]!==G){V!==-1&&V<z+1&&(V=B.indexOf(v,z+1)),J!==-1&&J<z+1&&(J=B.indexOf(C,z+1));var he=H(J===-1?V:Math.min(V,J));if(B.substr(z+1+he,ee)===v){K.push(B.substring(P-1,z).replace(U,u)),B[P=z+1+he+ee]!==u&&(z=B.indexOf(u,P)),V=B.indexOf(v,P),J=B.indexOf(C,P);break}var F=H(J);if(B.substring(z+1+F,z+1+F+O)===C){if(K.push(B.substring(P-1,z).replace(U,u)),te(z+1+F+O),V=B.indexOf(v,P),z=B.indexOf(u,P),j&&(ie(),Q))return se();if(I&&W.length>=I)return se(!0);break}ne.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:W.length,index:P}),z++}}else z++}return Z();function D(ue){W.push(ue),X=P}function H(ue){var fe=0;if(ue!==-1){var ge=B.substring(z+1,ue);ge&&ge.trim()===""&&(fe=ge.length)}return fe}function Z(ue){return re||(ue===void 0&&(ue=B.substring(P)),K.push(ue),P=M,D(K),j&&ie()),se()}function te(ue){P=ue,D(K),K=[],J=B.indexOf(C,P)}function se(ue){var fe=JSON.parse(JSON.stringify(n));return{data:W,errors:ne,comments:fe,meta:{delimiter:v,linebreak:C,aborted:Q,truncated:!!ue,cursor:X+(L||0)}}}function ie(){k(se()),W=[],ne=[]}},this.abort=function(){Q=!0},this.getCharIndex=function(){return P}}function m(o){var u=o.data,v=e[u.workerId],C=!1;if(u.error)v.userError(u.error,u.file);else if(u.results&&u.results.data){var y={abort:function(){C=!0,T(u.workerId,{data:[],comments:[],errors:[],meta:{aborted:!0}})},pause:p,resume:p};if(w(v.userStep)){for(var k=0;k<u.results.data.length&&(v.userStep({data:u.results.data[k],errors:u.results.errors,comments:u.results.comments,meta:u.results.meta},y),!C);k++);delete u.results}else w(v.userChunk)&&(v.userChunk(u.results,y,u.file),delete u.results)}u.finished&&!C&&T(u.workerId,u.results)}function T(o,u){var v=e[o];w(v.userComplete)&&v.userComplete(u),v.terminate(),delete e[o]}function p(){throw new Error("Not implemented.")}function E(o){if(typeof o!="object"||o===null)return o;var u=Array.isArray(o)?[]:{};for(var v in o)u[v]=E(o[v]);return u}function A(o,u){return function(){o.apply(u,arguments)}}function w(o){return typeof o=="function"}return i&&(l.onmessage=function(o){var u=o.data;if(t.WORKER_ID===void 0&&u&&(t.WORKER_ID=u.workerId),typeof u.input=="string")l.postMessage({workerId:t.WORKER_ID,results:t.parse(u.input,u.config),finished:!0});else if(l.File&&u.input instanceof File||u.input instanceof Object){var v=t.parse(u.input,u.config);v&&l.postMessage({workerId:t.WORKER_ID,results:v,finished:!0})}}),(a.prototype=Object.create(d.prototype)).constructor=a,(R.prototype=Object.create(d.prototype)).constructor=R,(N.prototype=Object.create(N.prototype)).constructor=N,(x.prototype=Object.create(d.prototype)).constructor=x,t})})(Re)),Re.exports}var mr=gr(),yr=xe(mr),br={},Ar=Object.freeze({__proto__:null,default:br}),Ct=dr(Ar),Se={},wt;function Oe(){return wt||(wt=1,(function(b){b.isInteger=c=>typeof c=="number"?Number.isInteger(c):typeof c=="string"&&c.trim()!==""?Number.isInteger(Number(c)):!1,b.find=(c,h)=>c.nodes.find(l=>l.type===h),b.exceedsLimit=(c,h,l=1,g)=>g===!1||!b.isInteger(c)||!b.isInteger(h)?!1:(Number(h)-Number(c))/Number(l)>=g,b.escapeNode=(c,h=0,l)=>{const g=c.nodes[h];g&&(l&&g.type===l||g.type==="open"||g.type==="close")&&g.escaped!==!0&&(g.value="\\"+g.value,g.escaped=!0)},b.encloseBrace=c=>c.type!=="brace"?!1:c.commas>>0+c.ranges>>0===0?(c.invalid=!0,!0):!1,b.isInvalidBrace=c=>c.type!=="brace"?!1:c.invalid===!0||c.dollar?!0:c.commas>>0+c.ranges>>0===0||c.open!==!0||c.close!==!0?(c.invalid=!0,!0):!1,b.isOpenOrClose=c=>c.type==="open"||c.type==="close"?!0:c.open===!0||c.close===!0,b.reduce=c=>c.reduce((h,l)=>(l.type==="text"&&h.push(l.value),l.type==="range"&&(l.type="text"),h),[]),b.flatten=(...c)=>{const h=[],l=g=>{for(let i=0;i<g.length;i++){const e=g[i];if(Array.isArray(e)){l(e);continue}e!==void 0&&h.push(e)}return h};return l(c),h}})(Se)),Se}var Te,Nt;function Le(){if(Nt)return Te;Nt=1;const b=Oe();return Te=(c,h={})=>{const l=(g,i={})=>{const e=h.escapeInvalid&&b.isInvalidBrace(i),r=g.invalid===!0&&h.escapeInvalid===!0;let t="";if(g.value)return(e||r)&&b.isOpenOrClose(g)?"\\"+g.value:g.value;if(g.value)return g.value;if(g.nodes)for(const n of g.nodes)t+=l(n);return t};return l(c)},Te}/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */var $e,xt;function Er(){return xt||(xt=1,$e=function(b){return typeof b=="number"?b-b===0:typeof b=="string"&&b.trim()!==""?Number.isFinite?Number.isFinite(+b):isFinite(+b):!1}),$e}/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */var Ie,St;function _r(){if(St)return Ie;St=1;const b=Er(),c=($,f,_)=>{if(b($)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(f===void 0||$===f)return String($);if(b(f)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let m={relaxZeros:!0,..._};typeof m.strictZeros=="boolean"&&(m.relaxZeros=m.strictZeros===!1);let T=String(m.relaxZeros),p=String(m.shorthand),E=String(m.capture),A=String(m.wrap),w=$+":"+f+"="+T+p+E+A;if(c.cache.hasOwnProperty(w))return c.cache[w].result;let o=Math.min($,f),u=Math.max($,f);if(Math.abs(o-u)===1){let I=$+"|"+f;return m.capture?`(${I})`:m.wrap===!1?I:`(?:${I})`}let v=N($)||N(f),C={min:$,max:f,a:o,b:u},y=[],k=[];if(v&&(C.isPadded=v,C.maxLen=String(C.max).length),o<0){let I=u<0?Math.abs(u):1;k=i(I,Math.abs(o),C,m),o=C.a=0}return u>=0&&(y=i(o,u,C,m)),C.negatives=k,C.positives=y,C.result=h(k,y),m.capture===!0?C.result=`(${C.result})`:m.wrap!==!1&&y.length+k.length>1&&(C.result=`(?:${C.result})`),c.cache[w]=C,C.result};function h($,f,_){let m=e($,f,"-",!1)||[],T=e(f,$,"",!1)||[],p=e($,f,"-?",!0)||[];return m.concat(p).concat(T).join("|")}function l($,f){let _=1,m=1,T=s($,_),p=new Set([f]);for(;$<=T&&T<=f;)p.add(T),_+=1,T=s($,_);for(T=d(f+1,m)-1;$<T&&T<=f;)p.add(T),m+=1,T=d(f+1,m)-1;return p=[...p],p.sort(t),p}function g($,f,_){if($===f)return{pattern:$,count:[],digits:0};let m=r($,f),T=m.length,p="",E=0;for(let A=0;A<T;A++){let[w,o]=m[A];w===o?p+=w:w!=="0"||o!=="9"?p+=R(w,o):E++}return E&&(p+=_.shorthand===!0?"\\d":"[0-9]"),{pattern:p,count:[E],digits:T}}function i($,f,_,m){let T=l($,f),p=[],E=$,A;for(let w=0;w<T.length;w++){let o=T[w],u=g(String(E),String(o),m),v="";if(!_.isPadded&&A&&A.pattern===u.pattern){A.count.length>1&&A.count.pop(),A.count.push(u.count[0]),A.string=A.pattern+a(A.count),E=o+1;continue}_.isPadded&&(v=x(o,_,m)),u.string=v+u.pattern+a(u.count),p.push(u),E=o+1,A=u}return p}function e($,f,_,m,T){let p=[];for(let E of $){let{string:A}=E;!m&&!n(f,"string",A)&&p.push(_+A),m&&n(f,"string",A)&&p.push(_+A)}return p}function r($,f){let _=[];for(let m=0;m<$.length;m++)_.push([$[m],f[m]]);return _}function t($,f){return $>f?1:f>$?-1:0}function n($,f,_){return $.some(m=>m[f]===_)}function s($,f){return Number(String($).slice(0,-f)+"9".repeat(f))}function d($,f){return $-$%Math.pow(10,f)}function a($){let[f=0,_=""]=$;return _||f>1?`{${f+(_?","+_:"")}}`:""}function R($,f,_){return`[${$}${f-$===1?"":"-"}${f}]`}function N($){return/^-?(0+)\d/.test($)}function x($,f,_){if(!f.isPadded)return $;let m=Math.abs(f.maxLen-String($).length),T=_.relaxZeros!==!1;switch(m){case 0:return"";case 1:return T?"0?":"0";case 2:return T?"0{0,2}":"00";default:return T?`0{0,${m}}`:`0{${m}}`}}return c.cache={},c.clearCache=()=>c.cache={},Ie=c,Ie}/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */var ke,Ot;function Tt(){if(Ot)return ke;Ot=1;const b=Ct,c=_r(),h=m=>m!==null&&typeof m=="object"&&!Array.isArray(m),l=m=>T=>m===!0?Number(T):String(T),g=m=>typeof m=="number"||typeof m=="string"&&m!=="",i=m=>Number.isInteger(+m),e=m=>{let T=`${m}`,p=-1;if(T[0]==="-"&&(T=T.slice(1)),T==="0")return!1;for(;T[++p]==="0";);return p>0},r=(m,T,p)=>typeof m=="string"||typeof T=="string"?!0:p.stringify===!0,t=(m,T,p)=>{if(T>0){let E=m[0]==="-"?"-":"";E&&(m=m.slice(1)),m=E+m.padStart(E?T-1:T,"0")}return p===!1?String(m):m},n=(m,T)=>{let p=m[0]==="-"?"-":"";for(p&&(m=m.slice(1),T--);m.length<T;)m="0"+m;return p?"-"+m:m},s=(m,T,p)=>{m.negatives.sort((u,v)=>u<v?-1:u>v?1:0),m.positives.sort((u,v)=>u<v?-1:u>v?1:0);let E=T.capture?"":"?:",A="",w="",o;return m.positives.length&&(A=m.positives.map(u=>n(String(u),p)).join("|")),m.negatives.length&&(w=`-(${E}${m.negatives.map(u=>n(String(u),p)).join("|")})`),A&&w?o=`${A}|${w}`:o=A||w,T.wrap?`(${E}${o})`:o},d=(m,T,p,E)=>{if(p)return c(m,T,{wrap:!1,...E});let A=String.fromCharCode(m);if(m===T)return A;let w=String.fromCharCode(T);return`[${A}-${w}]`},a=(m,T,p)=>{if(Array.isArray(m)){let E=p.wrap===!0,A=p.capture?"":"?:";return E?`(${A}${m.join("|")})`:m.join("|")}return c(m,T,p)},R=(...m)=>new RangeError("Invalid range arguments: "+b.inspect(...m)),N=(m,T,p)=>{if(p.strictRanges===!0)throw R([m,T]);return[]},x=(m,T)=>{if(T.strictRanges===!0)throw new TypeError(`Expected step "${m}" to be a number`);return[]},$=(m,T,p=1,E={})=>{let A=Number(m),w=Number(T);if(!Number.isInteger(A)||!Number.isInteger(w)){if(E.strictRanges===!0)throw R([m,T]);return[]}A===0&&(A=0),w===0&&(w=0);let o=A>w,u=String(m),v=String(T),C=String(p);p=Math.max(Math.abs(p),1);let y=e(u)||e(v)||e(C),k=y?Math.max(u.length,v.length,C.length):0,I=y===!1&&r(m,T,E)===!1,q=E.transform||l(I);if(E.toRegex&&p===1)return d(n(m,k),n(T,k),!0,E);let G={negatives:[],positives:[]},P=L=>G[L<0?"negatives":"positives"].push(Math.abs(L)),Q=[],B=0;for(;o?A>=w:A<=w;)E.toRegex===!0&&p>1?P(A):Q.push(t(q(A,B),k,I)),A=o?A-p:A+p,B++;return E.toRegex===!0?p>1?s(G,E,k):a(Q,null,{wrap:!1,...E}):Q},f=(m,T,p=1,E={})=>{if(!i(m)&&m.length>1||!i(T)&&T.length>1)return N(m,T,E);let A=E.transform||(I=>String.fromCharCode(I)),w=`${m}`.charCodeAt(0),o=`${T}`.charCodeAt(0),u=w>o,v=Math.min(w,o),C=Math.max(w,o);if(E.toRegex&&p===1)return d(v,C,!1,E);let y=[],k=0;for(;u?w>=o:w<=o;)y.push(A(w,k)),w=u?w-p:w+p,k++;return E.toRegex===!0?a(y,null,{wrap:!1,options:E}):y},_=(m,T,p,E={})=>{if(T==null&&g(m))return[m];if(!g(m)||!g(T))return N(m,T,E);if(typeof p=="function")return _(m,T,1,{transform:p});if(h(p))return _(m,T,0,p);let A={...E};return A.capture===!0&&(A.wrap=!0),p=p||A.step||1,i(p)?i(m)&&i(T)?$(m,T,p,A):f(m,T,Math.max(Math.abs(p),1),A):p!=null&&!h(p)?x(p,A):_(m,T,1,p)};return ke=_,ke}var He,Lt;function Rr(){if(Lt)return He;Lt=1;const b=Tt(),c=Oe();return He=(l,g={})=>{const i=(e,r={})=>{const t=c.isInvalidBrace(r),n=e.invalid===!0&&g.escapeInvalid===!0,s=t===!0||n===!0,d=g.escapeInvalid===!0?"\\":"";let a="";if(e.isOpen===!0)return d+e.value;if(e.isClose===!0)return console.log("node.isClose",d,e.value),d+e.value;if(e.type==="open")return s?d+e.value:"(";if(e.type==="close")return s?d+e.value:")";if(e.type==="comma")return e.prev.type==="comma"?"":s?e.value:"|";if(e.value)return e.value;if(e.nodes&&e.ranges>0){const R=c.reduce(e.nodes),N=b(...R,{...g,wrap:!1,toRegex:!0,strictZeros:!0});if(N.length!==0)return R.length>1&&N.length>1?`(${N})`:N}if(e.nodes)for(const R of e.nodes)a+=i(R,e);return a};return i(l)},He}var Pe,$t;function vr(){if($t)return Pe;$t=1;const b=Tt(),c=Le(),h=Oe(),l=(i="",e="",r=!1)=>{const t=[];if(i=[].concat(i),e=[].concat(e),!e.length)return i;if(!i.length)return r?h.flatten(e).map(n=>`{${n}}`):e;for(const n of i)if(Array.isArray(n))for(const s of n)t.push(l(s,e,r));else for(let s of e)r===!0&&typeof s=="string"&&(s=`{${s}}`),t.push(Array.isArray(s)?l(n,s,r):n+s);return h.flatten(t)};return Pe=(i,e={})=>{const r=e.rangeLimit===void 0?1e3:e.rangeLimit,t=(n,s={})=>{n.queue=[];let d=s,a=s.queue;for(;d.type!=="brace"&&d.type!=="root"&&d.parent;)d=d.parent,a=d.queue;if(n.invalid||n.dollar){a.push(l(a.pop(),c(n,e)));return}if(n.type==="brace"&&n.invalid!==!0&&n.nodes.length===2){a.push(l(a.pop(),["{}"]));return}if(n.nodes&&n.ranges>0){const $=h.reduce(n.nodes);if(h.exceedsLimit(...$,e.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let f=b(...$,e);f.length===0&&(f=c(n,e)),a.push(l(a.pop(),f)),n.nodes=[];return}const R=h.encloseBrace(n);let N=n.queue,x=n;for(;x.type!=="brace"&&x.type!=="root"&&x.parent;)x=x.parent,N=x.queue;for(let $=0;$<n.nodes.length;$++){const f=n.nodes[$];if(f.type==="comma"&&n.type==="brace"){$===1&&N.push(""),N.push("");continue}if(f.type==="close"){a.push(l(a.pop(),N,R));continue}if(f.value&&f.type!=="open"){N.push(l(N.pop(),f.value));continue}f.nodes&&t(f,n)}return N};return h.flatten(t(i))},Pe}var Fe,It;function Cr(){return It||(It=1,Fe={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"Â ",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}),Fe}var Me,kt;function wr(){if(kt)return Me;kt=1;const b=Le(),{MAX_LENGTH:c,CHAR_BACKSLASH:h,CHAR_BACKTICK:l,CHAR_COMMA:g,CHAR_DOT:i,CHAR_LEFT_PARENTHESES:e,CHAR_RIGHT_PARENTHESES:r,CHAR_LEFT_CURLY_BRACE:t,CHAR_RIGHT_CURLY_BRACE:n,CHAR_LEFT_SQUARE_BRACKET:s,CHAR_RIGHT_SQUARE_BRACKET:d,CHAR_DOUBLE_QUOTE:a,CHAR_SINGLE_QUOTE:R,CHAR_NO_BREAK_SPACE:N,CHAR_ZERO_WIDTH_NOBREAK_SPACE:x}=Cr();return Me=(f,_={})=>{if(typeof f!="string")throw new TypeError("Expected a string");const m=_||{},T=typeof m.maxLength=="number"?Math.min(c,m.maxLength):c;if(f.length>T)throw new SyntaxError(`Input length (${f.length}), exceeds max characters (${T})`);const p={type:"root",input:f,nodes:[]},E=[p];let A=p,w=p,o=0;const u=f.length;let v=0,C=0,y;const k=()=>f[v++],I=q=>{if(q.type==="text"&&w.type==="dot"&&(w.type="text"),w&&w.type==="text"&&q.type==="text"){w.value+=q.value;return}return A.nodes.push(q),q.parent=A,q.prev=w,w=q,q};for(I({type:"bos"});v<u;)if(A=E[E.length-1],y=k(),!(y===x||y===N)){if(y===h){I({type:"text",value:(_.keepEscaping?y:"")+k()});continue}if(y===d){I({type:"text",value:"\\"+y});continue}if(y===s){o++;let q;for(;v<u&&(q=k());){if(y+=q,q===s){o++;continue}if(q===h){y+=k();continue}if(q===d&&(o--,o===0))break}I({type:"text",value:y});continue}if(y===e){A=I({type:"paren",nodes:[]}),E.push(A),I({type:"text",value:y});continue}if(y===r){if(A.type!=="paren"){I({type:"text",value:y});continue}A=E.pop(),I({type:"text",value:y}),A=E[E.length-1];continue}if(y===a||y===R||y===l){const q=y;let G;for(_.keepQuotes!==!0&&(y="");v<u&&(G=k());){if(G===h){y+=G+k();continue}if(G===q){_.keepQuotes===!0&&(y+=G);break}y+=G}I({type:"text",value:y});continue}if(y===t){C++;const G={type:"brace",open:!0,close:!1,dollar:w.value&&w.value.slice(-1)==="$"||A.dollar===!0,depth:C,commas:0,ranges:0,nodes:[]};A=I(G),E.push(A),I({type:"open",value:y});continue}if(y===n){if(A.type!=="brace"){I({type:"text",value:y});continue}const q="close";A=E.pop(),A.close=!0,I({type:q,value:y}),C--,A=E[E.length-1];continue}if(y===g&&C>0){if(A.ranges>0){A.ranges=0;const q=A.nodes.shift();A.nodes=[q,{type:"text",value:b(A)}]}I({type:"comma",value:y}),A.commas++;continue}if(y===i&&C>0&&A.commas===0){const q=A.nodes;if(C===0||q.length===0){I({type:"text",value:y});continue}if(w.type==="dot"){if(A.range=[],w.value+=y,w.type="range",A.nodes.length!==3&&A.nodes.length!==5){A.invalid=!0,A.ranges=0,w.type="text";continue}A.ranges++,A.args=[];continue}if(w.type==="range"){q.pop();const G=q[q.length-1];G.value+=w.value+y,w=G,A.ranges--;continue}I({type:"dot",value:y});continue}I({type:"text",value:y})}do if(A=E.pop(),A.type!=="root"){A.nodes.forEach(P=>{P.nodes||(P.type==="open"&&(P.isOpen=!0),P.type==="close"&&(P.isClose=!0),P.nodes||(P.type="text"),P.invalid=!0)});const q=E[E.length-1],G=q.nodes.indexOf(A);q.nodes.splice(G,1,...A.nodes)}while(E.length>0);return I({type:"eos"}),p},Me}var Be,Ht;function Nr(){if(Ht)return Be;Ht=1;const b=Le(),c=Rr(),h=vr(),l=wr(),g=(i,e={})=>{let r=[];if(Array.isArray(i))for(const t of i){const n=g.create(t,e);Array.isArray(n)?r.push(...n):r.push(n)}else r=[].concat(g.create(i,e));return e&&e.expand===!0&&e.nodupes===!0&&(r=[...new Set(r)]),r};return g.parse=(i,e={})=>l(i,e),g.stringify=(i,e={})=>b(typeof i=="string"?g.parse(i,e):i,e),g.compile=(i,e={})=>(typeof i=="string"&&(i=g.parse(i,e)),c(i,e)),g.expand=(i,e={})=>{typeof i=="string"&&(i=g.parse(i,e));let r=h(i,e);return e.noempty===!0&&(r=r.filter(Boolean)),e.nodupes===!0&&(r=[...new Set(r)]),r},g.create=(i,e={})=>i===""||i.length<3?[i]:e.expand!==!0?g.compile(i,e):g.expand(i,e),Be=g,Be}var Ue,Pt;function qe(){if(Pt)return Ue;Pt=1;function b(g){if(typeof g!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(g))}function c(g,i){for(var e="",r=0,t=-1,n=0,s,d=0;d<=g.length;++d){if(d<g.length)s=g.charCodeAt(d);else{if(s===47)break;s=47}if(s===47){if(!(t===d-1||n===1))if(t!==d-1&&n===2){if(e.length<2||r!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){var a=e.lastIndexOf("/");if(a!==e.length-1){a===-1?(e="",r=0):(e=e.slice(0,a),r=e.length-1-e.lastIndexOf("/")),t=d,n=0;continue}}else if(e.length===2||e.length===1){e="",r=0,t=d,n=0;continue}}i&&(e.length>0?e+="/..":e="..",r=2)}else e.length>0?e+="/"+g.slice(t+1,d):e=g.slice(t+1,d),r=d-t-1;t=d,n=0}else s===46&&n!==-1?++n:n=-1}return e}function h(g,i){var e=i.dir||i.root,r=i.base||(i.name||"")+(i.ext||"");return e?e===i.root?e+r:e+g+r:r}var l={resolve:function(){for(var i="",e=!1,r,t=arguments.length-1;t>=-1&&!e;t--){var n;t>=0?n=arguments[t]:(r===void 0&&(r=process.cwd()),n=r),b(n),n.length!==0&&(i=n+"/"+i,e=n.charCodeAt(0)===47)}return i=c(i,!e),e?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(b(i),i.length===0)return".";var e=i.charCodeAt(0)===47,r=i.charCodeAt(i.length-1)===47;return i=c(i,!e),i.length===0&&!e&&(i="."),i.length>0&&r&&(i+="/"),e?"/"+i:i},isAbsolute:function(i){return b(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,e=0;e<arguments.length;++e){var r=arguments[e];b(r),r.length>0&&(i===void 0?i=r:i+="/"+r)}return i===void 0?".":l.normalize(i)},relative:function(i,e){if(b(i),b(e),i===e||(i=l.resolve(i),e=l.resolve(e),i===e))return"";for(var r=1;r<i.length&&i.charCodeAt(r)===47;++r);for(var t=i.length,n=t-r,s=1;s<e.length&&e.charCodeAt(s)===47;++s);for(var d=e.length,a=d-s,R=n<a?n:a,N=-1,x=0;x<=R;++x){if(x===R){if(a>R){if(e.charCodeAt(s+x)===47)return e.slice(s+x+1);if(x===0)return e.slice(s+x)}else n>R&&(i.charCodeAt(r+x)===47?N=x:x===0&&(N=0));break}var $=i.charCodeAt(r+x),f=e.charCodeAt(s+x);if($!==f)break;$===47&&(N=x)}var _="";for(x=r+N+1;x<=t;++x)(x===t||i.charCodeAt(x)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+e.slice(s+N):(s+=N,e.charCodeAt(s)===47&&++s,e.slice(s))},_makeLong:function(i){return i},dirname:function(i){if(b(i),i.length===0)return".";for(var e=i.charCodeAt(0),r=e===47,t=-1,n=!0,s=i.length-1;s>=1;--s)if(e=i.charCodeAt(s),e===47){if(!n){t=s;break}}else n=!1;return t===-1?r?"/":".":r&&t===1?"//":i.slice(0,t)},basename:function(i,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');b(i);var r=0,t=-1,n=!0,s;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";var d=e.length-1,a=-1;for(s=i.length-1;s>=0;--s){var R=i.charCodeAt(s);if(R===47){if(!n){r=s+1;break}}else a===-1&&(n=!1,a=s+1),d>=0&&(R===e.charCodeAt(d)?--d===-1&&(t=s):(d=-1,t=a))}return r===t?t=a:t===-1&&(t=i.length),i.slice(r,t)}else{for(s=i.length-1;s>=0;--s)if(i.charCodeAt(s)===47){if(!n){r=s+1;break}}else t===-1&&(n=!1,t=s+1);return t===-1?"":i.slice(r,t)}},extname:function(i){b(i);for(var e=-1,r=0,t=-1,n=!0,s=0,d=i.length-1;d>=0;--d){var a=i.charCodeAt(d);if(a===47){if(!n){r=d+1;break}continue}t===-1&&(n=!1,t=d+1),a===46?e===-1?e=d:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||t===-1||s===0||s===1&&e===t-1&&e===r+1?"":i.slice(e,t)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return h("/",i)},parse:function(i){b(i);var e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;var r=i.charCodeAt(0),t=r===47,n;t?(e.root="/",n=1):n=0;for(var s=-1,d=0,a=-1,R=!0,N=i.length-1,x=0;N>=n;--N){if(r=i.charCodeAt(N),r===47){if(!R){d=N+1;break}continue}a===-1&&(R=!1,a=N+1),r===46?s===-1?s=N:x!==1&&(x=1):s!==-1&&(x=-1)}return s===-1||a===-1||x===0||x===1&&s===a-1&&s===d+1?a!==-1&&(d===0&&t?e.base=e.name=i.slice(1,a):e.base=e.name=i.slice(d,a)):(d===0&&t?(e.name=i.slice(1,s),e.base=i.slice(1,a)):(e.name=i.slice(d,s),e.base=i.slice(d,a)),e.ext=i.slice(s,a)),d>0?e.dir=i.slice(0,d-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};return l.posix=l,Ue=l,Ue}var Ge={},ze,Ft;function ve(){if(Ft)return ze;Ft=1;const b=qe(),c="\\\\/",h=`[^${c}]`,l="\\.",g="\\+",i="\\?",e="\\/",r="(?=.)",t="[^/]",n=`(?:${e}|$)`,s=`(?:^|${e})`,d=`${l}{1,2}${n}`,a=`(?!${l})`,R=`(?!${s}${d})`,N=`(?!${l}{0,1}${n})`,x=`(?!${d})`,$=`[^.${e}]`,f=`${t}*?`,_={DOT_LITERAL:l,PLUS_LITERAL:g,QMARK_LITERAL:i,SLASH_LITERAL:e,ONE_CHAR:r,QMARK:t,END_ANCHOR:n,DOTS_SLASH:d,NO_DOT:a,NO_DOTS:R,NO_DOT_SLASH:N,NO_DOTS_SLASH:x,QMARK_NO_DOT:$,STAR:f,START_ANCHOR:s},m={..._,SLASH_LITERAL:`[${c}]`,QMARK:h,STAR:`${h}*?`,DOTS_SLASH:`${l}{1,2}(?:[${c}]|$)`,NO_DOT:`(?!${l})`,NO_DOTS:`(?!(?:^|[${c}])${l}{1,2}(?:[${c}]|$))`,NO_DOT_SLASH:`(?!${l}{0,1}(?:[${c}]|$))`,NO_DOTS_SLASH:`(?!${l}{1,2}(?:[${c}]|$))`,QMARK_NO_DOT:`[^.${c}]`,START_ANCHOR:`(?:^|[${c}])`,END_ANCHOR:`(?:[${c}]|$)`},T={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};return ze={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:T,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:b.sep,extglobChars(p){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${p.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(p){return p===!0?m:_}},ze}var Mt;function Ce(){return Mt||(Mt=1,(function(b){const c=qe(),{REGEX_BACKSLASH:h,REGEX_REMOVE_BACKSLASH:l,REGEX_SPECIAL_CHARS:g,REGEX_SPECIAL_CHARS_GLOBAL:i}=ve();b.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),b.hasRegexChars=e=>g.test(e),b.isRegexChar=e=>e.length===1&&b.hasRegexChars(e),b.escapeRegex=e=>e.replace(i,"\\$1"),b.toPosixSlashes=e=>e.replace(h,"/"),b.removeBackslashes=e=>e.replace(l,r=>r==="\\"?"":r),b.supportsLookbehinds=()=>{const e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10},b.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:c.sep==="\\",b.escapeLast=(e,r,t)=>{const n=e.lastIndexOf(r,t);return n===-1?e:e[n-1]==="\\"?b.escapeLast(e,r,n-1):`${e.slice(0,n)}\\${e.slice(n)}`},b.removePrefix=(e,r={})=>{let t=e;return t.startsWith("./")&&(t=t.slice(2),r.prefix="./"),t},b.wrapOutput=(e,r={},t={})=>{const n=t.contains?"":"^",s=t.contains?"":"$";let d=`${n}(?:${e})${s}`;return r.negated===!0&&(d=`(?:^(?!${d}).*$)`),d}})(Ge)),Ge}var Ke,Bt;function xr(){if(Bt)return Ke;Bt=1;const b=Ce(),{CHAR_ASTERISK:c,CHAR_AT:h,CHAR_BACKWARD_SLASH:l,CHAR_COMMA:g,CHAR_DOT:i,CHAR_EXCLAMATION_MARK:e,CHAR_FORWARD_SLASH:r,CHAR_LEFT_CURLY_BRACE:t,CHAR_LEFT_PARENTHESES:n,CHAR_LEFT_SQUARE_BRACKET:s,CHAR_PLUS:d,CHAR_QUESTION_MARK:a,CHAR_RIGHT_CURLY_BRACE:R,CHAR_RIGHT_PARENTHESES:N,CHAR_RIGHT_SQUARE_BRACKET:x}=ve(),$=m=>m===r||m===l,f=m=>{m.isPrefix!==!0&&(m.depth=m.isGlobstar?1/0:1)};return Ke=(m,T)=>{const p=T||{},E=m.length-1,A=p.parts===!0||p.scanToEnd===!0,w=[],o=[],u=[];let v=m,C=-1,y=0,k=0,I=!1,q=!1,G=!1,P=!1,Q=!1,B=!1,L=!1,re=!1,M=!1,ee=!1,O=0,S,j,W={value:"",depth:0,isGlob:!1};const ne=()=>C>=E,K=()=>v.charCodeAt(C+1),X=()=>(S=j,v.charCodeAt(++C));for(;C<E;){j=X();let U;if(j===l){L=W.backslashes=!0,j=X(),j===t&&(B=!0);continue}if(B===!0||j===t){for(O++;ne()!==!0&&(j=X());){if(j===l){L=W.backslashes=!0,X();continue}if(j===t){O++;continue}if(B!==!0&&j===i&&(j=X())===i){if(I=W.isBrace=!0,G=W.isGlob=!0,ee=!0,A===!0)continue;break}if(B!==!0&&j===g){if(I=W.isBrace=!0,G=W.isGlob=!0,ee=!0,A===!0)continue;break}if(j===R&&(O--,O===0)){B=!1,I=W.isBrace=!0,ee=!0;break}}if(A===!0)continue;break}if(j===r){if(w.push(C),o.push(W),W={value:"",depth:0,isGlob:!1},ee===!0)continue;if(S===i&&C===y+1){y+=2;continue}k=C+1;continue}if(p.noext!==!0&&(j===d||j===h||j===c||j===a||j===e)===!0&&K()===n){if(G=W.isGlob=!0,P=W.isExtglob=!0,ee=!0,j===e&&C===y&&(M=!0),A===!0){for(;ne()!==!0&&(j=X());){if(j===l){L=W.backslashes=!0,j=X();continue}if(j===N){G=W.isGlob=!0,ee=!0;break}}continue}break}if(j===c){if(S===c&&(Q=W.isGlobstar=!0),G=W.isGlob=!0,ee=!0,A===!0)continue;break}if(j===a){if(G=W.isGlob=!0,ee=!0,A===!0)continue;break}if(j===s){for(;ne()!==!0&&(U=X());){if(U===l){L=W.backslashes=!0,X();continue}if(U===x){q=W.isBracket=!0,G=W.isGlob=!0,ee=!0;break}}if(A===!0)continue;break}if(p.nonegate!==!0&&j===e&&C===y){re=W.negated=!0,y++;continue}if(p.noparen!==!0&&j===n){if(G=W.isGlob=!0,A===!0){for(;ne()!==!0&&(j=X());){if(j===n){L=W.backslashes=!0,j=X();continue}if(j===N){ee=!0;break}}continue}break}if(G===!0){if(ee=!0,A===!0)continue;break}}p.noext===!0&&(P=!1,G=!1);let Y=v,oe="",V="";y>0&&(oe=v.slice(0,y),v=v.slice(y),k-=y),Y&&G===!0&&k>0?(Y=v.slice(0,k),V=v.slice(k)):G===!0?(Y="",V=v):Y=v,Y&&Y!==""&&Y!=="/"&&Y!==v&&$(Y.charCodeAt(Y.length-1))&&(Y=Y.slice(0,-1)),p.unescape===!0&&(V&&(V=b.removeBackslashes(V)),Y&&L===!0&&(Y=b.removeBackslashes(Y)));const J={prefix:oe,input:m,start:y,base:Y,glob:V,isBrace:I,isBracket:q,isGlob:G,isExtglob:P,isGlobstar:Q,negated:re,negatedExtglob:M};if(p.tokens===!0&&(J.maxDepth=0,$(j)||o.push(W),J.tokens=o),p.parts===!0||p.tokens===!0){let U;for(let z=0;z<w.length;z++){const he=U?U+1:y,F=w[z],D=m.slice(he,F);p.tokens&&(z===0&&y!==0?(o[z].isPrefix=!0,o[z].value=oe):o[z].value=D,f(o[z]),J.maxDepth+=o[z].depth),(z!==0||D!=="")&&u.push(D),U=F}if(U&&U+1<m.length){const z=m.slice(U+1);u.push(z),p.tokens&&(o[o.length-1].value=z,f(o[o.length-1]),J.maxDepth+=o[o.length-1].depth)}J.slashes=w,J.parts=u}return J},Ke}var We,Ut;function Sr(){if(Ut)return We;Ut=1;const b=ve(),c=Ce(),{MAX_LENGTH:h,POSIX_REGEX_SOURCE:l,REGEX_NON_SPECIAL_CHARS:g,REGEX_SPECIAL_CHARS_BACKREF:i,REPLACEMENTS:e}=b,r=(s,d)=>{if(typeof d.expandRange=="function")return d.expandRange(...s,d);s.sort();const a=`[${s.join("-")}]`;try{new RegExp(a)}catch{return s.map(N=>c.escapeRegex(N)).join("..")}return a},t=(s,d)=>`Missing ${s}: "${d}" - use "\\\\${d}" to match literal characters`,n=(s,d)=>{if(typeof s!="string")throw new TypeError("Expected a string");s=e[s]||s;const a={...d},R=typeof a.maxLength=="number"?Math.min(h,a.maxLength):h;let N=s.length;if(N>R)throw new SyntaxError(`Input length: ${N}, exceeds maximum allowed length: ${R}`);const x={type:"bos",value:"",output:a.prepend||""},$=[x],f=a.capture?"":"?:",_=c.isWindows(d),m=b.globChars(_),T=b.extglobChars(m),{DOT_LITERAL:p,PLUS_LITERAL:E,SLASH_LITERAL:A,ONE_CHAR:w,DOTS_SLASH:o,NO_DOT:u,NO_DOT_SLASH:v,NO_DOTS_SLASH:C,QMARK:y,QMARK_NO_DOT:k,STAR:I,START_ANCHOR:q}=m,G=F=>`(${f}(?:(?!${q}${F.dot?o:p}).)*?)`,P=a.dot?"":u,Q=a.dot?y:k;let B=a.bash===!0?G(a):I;a.capture&&(B=`(${B})`),typeof a.noext=="boolean"&&(a.noextglob=a.noext);const L={input:s,index:-1,start:0,dot:a.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:$};s=c.removePrefix(s,L),N=s.length;const re=[],M=[],ee=[];let O=x,S;const j=()=>L.index===N-1,W=L.peek=(F=1)=>s[L.index+F],ne=L.advance=()=>s[++L.index]||"",K=()=>s.slice(L.index+1),X=(F="",D=0)=>{L.consumed+=F,L.index+=D},Y=F=>{L.output+=F.output!=null?F.output:F.value,X(F.value)},oe=()=>{let F=1;for(;W()==="!"&&(W(2)!=="("||W(3)==="?");)ne(),L.start++,F++;return F%2===0?!1:(L.negated=!0,L.start++,!0)},V=F=>{L[F]++,ee.push(F)},J=F=>{L[F]--,ee.pop()},U=F=>{if(O.type==="globstar"){const D=L.braces>0&&(F.type==="comma"||F.type==="brace"),H=F.extglob===!0||re.length&&(F.type==="pipe"||F.type==="paren");F.type!=="slash"&&F.type!=="paren"&&!D&&!H&&(L.output=L.output.slice(0,-O.output.length),O.type="star",O.value="*",O.output=B,L.output+=O.output)}if(re.length&&F.type!=="paren"&&(re[re.length-1].inner+=F.value),(F.value||F.output)&&Y(F),O&&O.type==="text"&&F.type==="text"){O.value+=F.value,O.output=(O.output||"")+F.value;return}F.prev=O,$.push(F),O=F},z=(F,D)=>{const H={...T[D],conditions:1,inner:""};H.prev=O,H.parens=L.parens,H.output=L.output;const Z=(a.capture?"(":"")+H.open;V("parens"),U({type:F,value:D,output:L.output?"":w}),U({type:"paren",extglob:!0,value:ne(),output:Z}),re.push(H)},he=F=>{let D=F.close+(a.capture?")":""),H;if(F.type==="negate"){let Z=B;if(F.inner&&F.inner.length>1&&F.inner.includes("/")&&(Z=G(a)),(Z!==B||j()||/^\)+$/.test(K()))&&(D=F.close=`)$))${Z}`),F.inner.includes("*")&&(H=K())&&/^\.[^\\/.]+$/.test(H)){const te=n(H,{...d,fastpaths:!1}).output;D=F.close=`)${te})${Z})`}F.prev.type==="bos"&&(L.negatedExtglob=!0)}U({type:"paren",extglob:!0,value:S,output:D}),J("parens")};if(a.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(s)){let F=!1,D=s.replace(i,(H,Z,te,se,ie,ue)=>se==="\\"?(F=!0,H):se==="?"?Z?Z+se+(ie?y.repeat(ie.length):""):ue===0?Q+(ie?y.repeat(ie.length):""):y.repeat(te.length):se==="."?p.repeat(te.length):se==="*"?Z?Z+se+(ie?B:""):B:Z?H:`\\${H}`);return F===!0&&(a.unescape===!0?D=D.replace(/\\/g,""):D=D.replace(/\\+/g,H=>H.length%2===0?"\\\\":H?"\\":"")),D===s&&a.contains===!0?(L.output=s,L):(L.output=c.wrapOutput(D,L,d),L)}for(;!j();){if(S=ne(),S==="\0")continue;if(S==="\\"){const H=W();if(H==="/"&&a.bash!==!0||H==="."||H===";")continue;if(!H){S+="\\",U({type:"text",value:S});continue}const Z=/^\\+/.exec(K());let te=0;if(Z&&Z[0].length>2&&(te=Z[0].length,L.index+=te,te%2!==0&&(S+="\\")),a.unescape===!0?S=ne():S+=ne(),L.brackets===0){U({type:"text",value:S});continue}}if(L.brackets>0&&(S!=="]"||O.value==="["||O.value==="[^")){if(a.posix!==!1&&S===":"){const H=O.value.slice(1);if(H.includes("[")&&(O.posix=!0,H.includes(":"))){const Z=O.value.lastIndexOf("["),te=O.value.slice(0,Z),se=O.value.slice(Z+2),ie=l[se];if(ie){O.value=te+ie,L.backtrack=!0,ne(),!x.output&&$.indexOf(O)===1&&(x.output=w);continue}}}(S==="["&&W()!==":"||S==="-"&&W()==="]")&&(S=`\\${S}`),S==="]"&&(O.value==="["||O.value==="[^")&&(S=`\\${S}`),a.posix===!0&&S==="!"&&O.value==="["&&(S="^"),O.value+=S,Y({value:S});continue}if(L.quotes===1&&S!=='"'){S=c.escapeRegex(S),O.value+=S,Y({value:S});continue}if(S==='"'){L.quotes=L.quotes===1?0:1,a.keepQuotes===!0&&U({type:"text",value:S});continue}if(S==="("){V("parens"),U({type:"paren",value:S});continue}if(S===")"){if(L.parens===0&&a.strictBrackets===!0)throw new SyntaxError(t("opening","("));const H=re[re.length-1];if(H&&L.parens===H.parens+1){he(re.pop());continue}U({type:"paren",value:S,output:L.parens?")":"\\)"}),J("parens");continue}if(S==="["){if(a.nobracket===!0||!K().includes("]")){if(a.nobracket!==!0&&a.strictBrackets===!0)throw new SyntaxError(t("closing","]"));S=`\\${S}`}else V("brackets");U({type:"bracket",value:S});continue}if(S==="]"){if(a.nobracket===!0||O&&O.type==="bracket"&&O.value.length===1){U({type:"text",value:S,output:`\\${S}`});continue}if(L.brackets===0){if(a.strictBrackets===!0)throw new SyntaxError(t("opening","["));U({type:"text",value:S,output:`\\${S}`});continue}J("brackets");const H=O.value.slice(1);if(O.posix!==!0&&H[0]==="^"&&!H.includes("/")&&(S=`/${S}`),O.value+=S,Y({value:S}),a.literalBrackets===!1||c.hasRegexChars(H))continue;const Z=c.escapeRegex(O.value);if(L.output=L.output.slice(0,-O.value.length),a.literalBrackets===!0){L.output+=Z,O.value=Z;continue}O.value=`(${f}${Z}|${O.value})`,L.output+=O.value;continue}if(S==="{"&&a.nobrace!==!0){V("braces");const H={type:"brace",value:S,output:"(",outputIndex:L.output.length,tokensIndex:L.tokens.length};M.push(H),U(H);continue}if(S==="}"){const H=M[M.length-1];if(a.nobrace===!0||!H){U({type:"text",value:S,output:S});continue}let Z=")";if(H.dots===!0){const te=$.slice(),se=[];for(let ie=te.length-1;ie>=0&&($.pop(),te[ie].type!=="brace");ie--)te[ie].type!=="dots"&&se.unshift(te[ie].value);Z=r(se,a),L.backtrack=!0}if(H.comma!==!0&&H.dots!==!0){const te=L.output.slice(0,H.outputIndex),se=L.tokens.slice(H.tokensIndex);H.value=H.output="\\{",S=Z="\\}",L.output=te;for(const ie of se)L.output+=ie.output||ie.value}U({type:"brace",value:S,output:Z}),J("braces"),M.pop();continue}if(S==="|"){re.length>0&&re[re.length-1].conditions++,U({type:"text",value:S});continue}if(S===","){let H=S;const Z=M[M.length-1];Z&&ee[ee.length-1]==="braces"&&(Z.comma=!0,H="|"),U({type:"comma",value:S,output:H});continue}if(S==="/"){if(O.type==="dot"&&L.index===L.start+1){L.start=L.index+1,L.consumed="",L.output="",$.pop(),O=x;continue}U({type:"slash",value:S,output:A});continue}if(S==="."){if(L.braces>0&&O.type==="dot"){O.value==="."&&(O.output=p);const H=M[M.length-1];O.type="dots",O.output+=S,O.value+=S,H.dots=!0;continue}if(L.braces+L.parens===0&&O.type!=="bos"&&O.type!=="slash"){U({type:"text",value:S,output:p});continue}U({type:"dot",value:S,output:p});continue}if(S==="?"){if(!(O&&O.value==="(")&&a.noextglob!==!0&&W()==="("&&W(2)!=="?"){z("qmark",S);continue}if(O&&O.type==="paren"){const Z=W();let te=S;if(Z==="<"&&!c.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(O.value==="("&&!/[!=<:]/.test(Z)||Z==="<"&&!/<([!=]|\w+>)/.test(K()))&&(te=`\\${S}`),U({type:"text",value:S,output:te});continue}if(a.dot!==!0&&(O.type==="slash"||O.type==="bos")){U({type:"qmark",value:S,output:k});continue}U({type:"qmark",value:S,output:y});continue}if(S==="!"){if(a.noextglob!==!0&&W()==="("&&(W(2)!=="?"||!/[!=<:]/.test(W(3)))){z("negate",S);continue}if(a.nonegate!==!0&&L.index===0){oe();continue}}if(S==="+"){if(a.noextglob!==!0&&W()==="("&&W(2)!=="?"){z("plus",S);continue}if(O&&O.value==="("||a.regex===!1){U({type:"plus",value:S,output:E});continue}if(O&&(O.type==="bracket"||O.type==="paren"||O.type==="brace")||L.parens>0){U({type:"plus",value:S});continue}U({type:"plus",value:E});continue}if(S==="@"){if(a.noextglob!==!0&&W()==="("&&W(2)!=="?"){U({type:"at",extglob:!0,value:S,output:""});continue}U({type:"text",value:S});continue}if(S!=="*"){(S==="$"||S==="^")&&(S=`\\${S}`);const H=g.exec(K());H&&(S+=H[0],L.index+=H[0].length),U({type:"text",value:S});continue}if(O&&(O.type==="globstar"||O.star===!0)){O.type="star",O.star=!0,O.value+=S,O.output=B,L.backtrack=!0,L.globstar=!0,X(S);continue}let F=K();if(a.noextglob!==!0&&/^\([^?]/.test(F)){z("star",S);continue}if(O.type==="star"){if(a.noglobstar===!0){X(S);continue}const H=O.prev,Z=H.prev,te=H.type==="slash"||H.type==="bos",se=Z&&(Z.type==="star"||Z.type==="globstar");if(a.bash===!0&&(!te||F[0]&&F[0]!=="/")){U({type:"star",value:S,output:""});continue}const ie=L.braces>0&&(H.type==="comma"||H.type==="brace"),ue=re.length&&(H.type==="pipe"||H.type==="paren");if(!te&&H.type!=="paren"&&!ie&&!ue){U({type:"star",value:S,output:""});continue}for(;F.slice(0,3)==="/**";){const fe=s[L.index+4];if(fe&&fe!=="/")break;F=F.slice(3),X("/**",3)}if(H.type==="bos"&&j()){O.type="globstar",O.value+=S,O.output=G(a),L.output=O.output,L.globstar=!0,X(S);continue}if(H.type==="slash"&&H.prev.type!=="bos"&&!se&&j()){L.output=L.output.slice(0,-(H.output+O.output).length),H.output=`(?:${H.output}`,O.type="globstar",O.output=G(a)+(a.strictSlashes?")":"|$)"),O.value+=S,L.globstar=!0,L.output+=H.output+O.output,X(S);continue}if(H.type==="slash"&&H.prev.type!=="bos"&&F[0]==="/"){const fe=F[1]!==void 0?"|$":"";L.output=L.output.slice(0,-(H.output+O.output).length),H.output=`(?:${H.output}`,O.type="globstar",O.output=`${G(a)}${A}|${A}${fe})`,O.value+=S,L.output+=H.output+O.output,L.globstar=!0,X(S+ne()),U({type:"slash",value:"/",output:""});continue}if(H.type==="bos"&&F[0]==="/"){O.type="globstar",O.value+=S,O.output=`(?:^|${A}|${G(a)}${A})`,L.output=O.output,L.globstar=!0,X(S+ne()),U({type:"slash",value:"/",output:""});continue}L.output=L.output.slice(0,-O.output.length),O.type="globstar",O.output=G(a),O.value+=S,L.output+=O.output,L.globstar=!0,X(S);continue}const D={type:"star",value:S,output:B};if(a.bash===!0){D.output=".*?",(O.type==="bos"||O.type==="slash")&&(D.output=P+D.output),U(D);continue}if(O&&(O.type==="bracket"||O.type==="paren")&&a.regex===!0){D.output=S,U(D);continue}(L.index===L.start||O.type==="slash"||O.type==="dot")&&(O.type==="dot"?(L.output+=v,O.output+=v):a.dot===!0?(L.output+=C,O.output+=C):(L.output+=P,O.output+=P),W()!=="*"&&(L.output+=w,O.output+=w)),U(D)}for(;L.brackets>0;){if(a.strictBrackets===!0)throw new SyntaxError(t("closing","]"));L.output=c.escapeLast(L.output,"["),J("brackets")}for(;L.parens>0;){if(a.strictBrackets===!0)throw new SyntaxError(t("closing",")"));L.output=c.escapeLast(L.output,"("),J("parens")}for(;L.braces>0;){if(a.strictBrackets===!0)throw new SyntaxError(t("closing","}"));L.output=c.escapeLast(L.output,"{"),J("braces")}if(a.strictSlashes!==!0&&(O.type==="star"||O.type==="bracket")&&U({type:"maybe_slash",value:"",output:`${A}?`}),L.backtrack===!0){L.output="";for(const F of L.tokens)L.output+=F.output!=null?F.output:F.value,F.suffix&&(L.output+=F.suffix)}return L};return n.fastpaths=(s,d)=>{const a={...d},R=typeof a.maxLength=="number"?Math.min(h,a.maxLength):h,N=s.length;if(N>R)throw new SyntaxError(`Input length: ${N}, exceeds maximum allowed length: ${R}`);s=e[s]||s;const x=c.isWindows(d),{DOT_LITERAL:$,SLASH_LITERAL:f,ONE_CHAR:_,DOTS_SLASH:m,NO_DOT:T,NO_DOTS:p,NO_DOTS_SLASH:E,STAR:A,START_ANCHOR:w}=b.globChars(x),o=a.dot?p:T,u=a.dot?E:T,v=a.capture?"":"?:",C={negated:!1,prefix:""};let y=a.bash===!0?".*?":A;a.capture&&(y=`(${y})`);const k=P=>P.noglobstar===!0?y:`(${v}(?:(?!${w}${P.dot?m:$}).)*?)`,I=P=>{switch(P){case"*":return`${o}${_}${y}`;case".*":return`${$}${_}${y}`;case"*.*":return`${o}${y}${$}${_}${y}`;case"*/*":return`${o}${y}${f}${_}${u}${y}`;case"**":return o+k(a);case"**/*":return`(?:${o}${k(a)}${f})?${u}${_}${y}`;case"**/*.*":return`(?:${o}${k(a)}${f})?${u}${y}${$}${_}${y}`;case"**/.*":return`(?:${o}${k(a)}${f})?${$}${_}${y}`;default:{const Q=/^(.*?)\.(\w+)$/.exec(P);if(!Q)return;const B=I(Q[1]);return B?B+$+Q[2]:void 0}}},q=c.removePrefix(s,C);let G=I(q);return G&&a.strictSlashes!==!0&&(G+=`${f}?`),G},We=n,We}var je,qt;function Or(){if(qt)return je;qt=1;const b=qe(),c=xr(),h=Sr(),l=Ce(),g=ve(),i=r=>r&&typeof r=="object"&&!Array.isArray(r),e=(r,t,n=!1)=>{if(Array.isArray(r)){const f=r.map(m=>e(m,t,n));return m=>{for(const T of f){const p=T(m);if(p)return p}return!1}}const s=i(r)&&r.tokens&&r.input;if(r===""||typeof r!="string"&&!s)throw new TypeError("Expected pattern to be a non-empty string");const d=t||{},a=l.isWindows(t),R=s?e.compileRe(r,t):e.makeRe(r,t,!1,!0),N=R.state;delete R.state;let x=()=>!1;if(d.ignore){const f={...t,ignore:null,onMatch:null,onResult:null};x=e(d.ignore,f,n)}const $=(f,_=!1)=>{const{isMatch:m,match:T,output:p}=e.test(f,R,t,{glob:r,posix:a}),E={glob:r,state:N,regex:R,posix:a,input:f,output:p,match:T,isMatch:m};return typeof d.onResult=="function"&&d.onResult(E),m===!1?(E.isMatch=!1,_?E:!1):x(f)?(typeof d.onIgnore=="function"&&d.onIgnore(E),E.isMatch=!1,_?E:!1):(typeof d.onMatch=="function"&&d.onMatch(E),_?E:!0)};return n&&($.state=N),$};return e.test=(r,t,n,{glob:s,posix:d}={})=>{if(typeof r!="string")throw new TypeError("Expected input to be a string");if(r==="")return{isMatch:!1,output:""};const a=n||{},R=a.format||(d?l.toPosixSlashes:null);let N=r===s,x=N&&R?R(r):r;return N===!1&&(x=R?R(r):r,N=x===s),(N===!1||a.capture===!0)&&(a.matchBase===!0||a.basename===!0?N=e.matchBase(r,t,n,d):N=t.exec(x)),{isMatch:!!N,match:N,output:x}},e.matchBase=(r,t,n,s=l.isWindows(n))=>(t instanceof RegExp?t:e.makeRe(t,n)).test(b.basename(r)),e.isMatch=(r,t,n)=>e(t,n)(r),e.parse=(r,t)=>Array.isArray(r)?r.map(n=>e.parse(n,t)):h(r,{...t,fastpaths:!1}),e.scan=(r,t)=>c(r,t),e.compileRe=(r,t,n=!1,s=!1)=>{if(n===!0)return r.output;const d=t||{},a=d.contains?"":"^",R=d.contains?"":"$";let N=`${a}(?:${r.output})${R}`;r&&r.negated===!0&&(N=`^(?!${N}).*$`);const x=e.toRegex(N,t);return s===!0&&(x.state=r),x},e.makeRe=(r,t={},n=!1,s=!1)=>{if(!r||typeof r!="string")throw new TypeError("Expected a non-empty string");let d={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(r[0]==="."||r[0]==="*")&&(d.output=h.fastpaths(r,t)),d.output||(d=h(r,t)),e.compileRe(d,t,n,s)},e.toRegex=(r,t)=>{try{const n=t||{};return new RegExp(r,n.flags||(n.nocase?"i":""))}catch(n){if(t&&t.debug===!0)throw n;return/$^/}},e.constants=g,je=e,je}var Xe,Gt;function Tr(){return Gt||(Gt=1,Xe=Or()),Xe}var Ve,zt;function Lr(){if(zt)return Ve;zt=1;const b=Ct,c=Nr(),h=Tr(),l=Ce(),g=r=>r===""||r==="./",i=r=>{const t=r.indexOf("{");return t>-1&&r.indexOf("}",t)>-1},e=(r,t,n)=>{t=[].concat(t),r=[].concat(r);let s=new Set,d=new Set,a=new Set,R=0,N=f=>{a.add(f.output),n&&n.onResult&&n.onResult(f)};for(let f=0;f<t.length;f++){let _=h(String(t[f]),{...n,onResult:N},!0),m=_.state.negated||_.state.negatedExtglob;m&&R++;for(let T of r){let p=_(T,!0);(m?!p.isMatch:p.isMatch)&&(m?s.add(p.output):(s.delete(p.output),d.add(p.output)))}}let $=(R===t.length?[...a]:[...d]).filter(f=>!s.has(f));if(n&&$.length===0){if(n.failglob===!0)throw new Error(`No matches found for "${t.join(", ")}"`);if(n.nonull===!0||n.nullglob===!0)return n.unescape?t.map(f=>f.replace(/\\/g,"")):t}return $};return e.match=e,e.matcher=(r,t)=>h(r,t),e.isMatch=(r,t,n)=>h(t,n)(r),e.any=e.isMatch,e.not=(r,t,n={})=>{t=[].concat(t).map(String);let s=new Set,d=[],a=N=>{n.onResult&&n.onResult(N),d.push(N.output)},R=new Set(e(r,t,{...n,onResult:a}));for(let N of d)R.has(N)||s.add(N);return[...s]},e.contains=(r,t,n)=>{if(typeof r!="string")throw new TypeError(`Expected a string: "${b.inspect(r)}"`);if(Array.isArray(t))return t.some(s=>e.contains(r,s,n));if(typeof t=="string"){if(g(r)||g(t))return!1;if(r.includes(t)||r.startsWith("./")&&r.slice(2).includes(t))return!0}return e.isMatch(r,t,{...n,contains:!0})},e.matchKeys=(r,t,n)=>{if(!l.isObject(r))throw new TypeError("Expected the first argument to be an object");let s=e(Object.keys(r),t,n),d={};for(let a of s)d[a]=r[a];return d},e.some=(r,t,n)=>{let s=[].concat(r);for(let d of[].concat(t)){let a=h(String(d),n);if(s.some(R=>a(R)))return!0}return!1},e.every=(r,t,n)=>{let s=[].concat(r);for(let d of[].concat(t)){let a=h(String(d),n);if(!s.every(R=>a(R)))return!1}return!0},e.all=(r,t,n)=>{if(typeof r!="string")throw new TypeError(`Expected a string: "${b.inspect(r)}"`);return[].concat(t).every(s=>h(s,n)(r))},e.capture=(r,t,n)=>{let s=l.isWindows(n),a=h.makeRe(String(r),{...n,capture:!0}).exec(s?l.toPosixSlashes(t):t);if(a)return a.slice(1).map(R=>R===void 0?"":R)},e.makeRe=(...r)=>h.makeRe(...r),e.scan=(...r)=>h.scan(...r),e.parse=(r,t)=>{let n=[];for(let s of[].concat(r||[]))for(let d of c(String(s),t))n.push(h.parse(d,t));return n},e.braces=(r,t)=>{if(typeof r!="string")throw new TypeError("Expected a string");return t&&t.nobrace===!0||!i(r)?[r]:c(r,t)},e.braceExpand=(r,t)=>{if(typeof r!="string")throw new TypeError("Expected a string");return e.braces(r,{...t,expand:!0})},e.hasBraces=i,Ve=e,Ve}var $r=Lr(),ye=xe($r),Ze,Kt;function Ir(){return Kt||(Kt=1,Ze=function b(c,h){var l=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,g=/(^[ ]*|[ ]*$)/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,e=/^0x[0-9a-f]+$/i,r=/^0/,t=function(m){return b.insensitive&&(""+m).toLowerCase()||""+m},n=t(c).replace(g,"")||"",s=t(h).replace(g,"")||"",d=n.replace(l,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),a=s.replace(l,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),R=parseInt(n.match(e),16)||d.length!==1&&n.match(i)&&Date.parse(n),N=parseInt(s.match(e),16)||R&&s.match(i)&&Date.parse(s)||null,x,$;if(N){if(R<N)return-1;if(R>N)return 1}for(var f=0,_=Math.max(d.length,a.length);f<_;f++){if(x=!(d[f]||"").match(r)&&parseFloat(d[f])||d[f]||0,$=!(a[f]||"").match(r)&&parseFloat(a[f])||a[f]||0,isNaN(x)!==isNaN($))return isNaN(x)?1:-1;if(typeof x!=typeof $&&(x+="",$+=""),x<$)return-1;if(x>$)return 1}return 0}),Ze}var kr=Ir(),Qe=xe(kr),Ye={},Je={},Wt;function De(){return Wt||(Wt=1,(function(b){const c=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",h=c+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",l="["+c+"]["+h+"]*",g=new RegExp("^"+l+"$"),i=function(r,t){const n=[];let s=t.exec(r);for(;s;){const d=[];d.startIndex=t.lastIndex-s[0].length;const a=s.length;for(let R=0;R<a;R++)d.push(s[R]);n.push(d),s=t.exec(r)}return n},e=function(r){const t=g.exec(r);return!(t===null||typeof t>"u")};b.isExist=function(r){return typeof r<"u"},b.isEmptyObject=function(r){return Object.keys(r).length===0},b.merge=function(r,t,n){if(t){const s=Object.keys(t),d=s.length;for(let a=0;a<d;a++)n==="strict"?r[s[a]]=[t[s[a]]]:r[s[a]]=t[s[a]]}},b.getValue=function(r){return b.isExist(r)?r:""},b.isName=e,b.getAllMatches=i,b.nameRegexp=l})(Je)),Je}var jt;function Xt(){if(jt)return Ye;jt=1;const b=De(),c={allowBooleanAttributes:!1,unpairedTags:[]};Ye.validate=function(f,_){_=Object.assign({},c,_);const m=[];let T=!1,p=!1;f[0]==="\uFEFF"&&(f=f.substr(1));for(let E=0;E<f.length;E++)if(f[E]==="<"&&f[E+1]==="?"){if(E+=2,E=l(f,E),E.err)return E}else if(f[E]==="<"){let A=E;if(E++,f[E]==="!"){E=g(f,E);continue}else{let w=!1;f[E]==="/"&&(w=!0,E++);let o="";for(;E<f.length&&f[E]!==">"&&f[E]!==" "&&f[E]!=="	"&&f[E]!==`
`&&f[E]!=="\r";E++)o+=f[E];if(o=o.trim(),o[o.length-1]==="/"&&(o=o.substring(0,o.length-1),E--),!N(o)){let C;return o.trim().length===0?C="Invalid space after '<'.":C="Tag '"+o+"' is an invalid name.",a("InvalidTag",C,x(f,E))}const u=r(f,E);if(u===!1)return a("InvalidAttr","Attributes for '"+o+"' have open quote.",x(f,E));let v=u.value;if(E=u.index,v[v.length-1]==="/"){const C=E-v.length;v=v.substring(0,v.length-1);const y=n(v,_);if(y===!0)T=!0;else return a(y.err.code,y.err.msg,x(f,C+y.err.line))}else if(w)if(u.tagClosed){if(v.trim().length>0)return a("InvalidTag","Closing tag '"+o+"' can't have attributes or invalid starting.",x(f,A));if(m.length===0)return a("InvalidTag","Closing tag '"+o+"' has not been opened.",x(f,A));{const C=m.pop();if(o!==C.tagName){let y=x(f,C.tagStartPos);return a("InvalidTag","Expected closing tag '"+C.tagName+"' (opened in line "+y.line+", col "+y.col+") instead of closing tag '"+o+"'.",x(f,A))}m.length==0&&(p=!0)}}else return a("InvalidTag","Closing tag '"+o+"' doesn't have proper closing.",x(f,E));else{const C=n(v,_);if(C!==!0)return a(C.err.code,C.err.msg,x(f,E-v.length+C.err.line));if(p===!0)return a("InvalidXml","Multiple possible root nodes found.",x(f,E));_.unpairedTags.indexOf(o)!==-1||m.push({tagName:o,tagStartPos:A}),T=!0}for(E++;E<f.length;E++)if(f[E]==="<")if(f[E+1]==="!"){E++,E=g(f,E);continue}else if(f[E+1]==="?"){if(E=l(f,++E),E.err)return E}else break;else if(f[E]==="&"){const C=d(f,E);if(C==-1)return a("InvalidChar","char '&' is not expected.",x(f,E));E=C}else if(p===!0&&!h(f[E]))return a("InvalidXml","Extra text at the end",x(f,E));f[E]==="<"&&E--}}else{if(h(f[E]))continue;return a("InvalidChar","char '"+f[E]+"' is not expected.",x(f,E))}if(T){if(m.length==1)return a("InvalidTag","Unclosed tag '"+m[0].tagName+"'.",x(f,m[0].tagStartPos));if(m.length>0)return a("InvalidXml","Invalid '"+JSON.stringify(m.map(E=>E.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return a("InvalidXml","Start tag expected.",1);return!0};function h(f){return f===" "||f==="	"||f===`
`||f==="\r"}function l(f,_){const m=_;for(;_<f.length;_++)if(f[_]=="?"||f[_]==" "){const T=f.substr(m,_-m);if(_>5&&T==="xml")return a("InvalidXml","XML declaration allowed only at the start of the document.",x(f,_));if(f[_]=="?"&&f[_+1]==">"){_++;break}else continue}return _}function g(f,_){if(f.length>_+5&&f[_+1]==="-"&&f[_+2]==="-"){for(_+=3;_<f.length;_++)if(f[_]==="-"&&f[_+1]==="-"&&f[_+2]===">"){_+=2;break}}else if(f.length>_+8&&f[_+1]==="D"&&f[_+2]==="O"&&f[_+3]==="C"&&f[_+4]==="T"&&f[_+5]==="Y"&&f[_+6]==="P"&&f[_+7]==="E"){let m=1;for(_+=8;_<f.length;_++)if(f[_]==="<")m++;else if(f[_]===">"&&(m--,m===0))break}else if(f.length>_+9&&f[_+1]==="["&&f[_+2]==="C"&&f[_+3]==="D"&&f[_+4]==="A"&&f[_+5]==="T"&&f[_+6]==="A"&&f[_+7]==="["){for(_+=8;_<f.length;_++)if(f[_]==="]"&&f[_+1]==="]"&&f[_+2]===">"){_+=2;break}}return _}const i='"',e="'";function r(f,_){let m="",T="",p=!1;for(;_<f.length;_++){if(f[_]===i||f[_]===e)T===""?T=f[_]:T!==f[_]||(T="");else if(f[_]===">"&&T===""){p=!0;break}m+=f[_]}return T!==""?!1:{value:m,index:_,tagClosed:p}}const t=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function n(f,_){const m=b.getAllMatches(f,t),T={};for(let p=0;p<m.length;p++){if(m[p][1].length===0)return a("InvalidAttr","Attribute '"+m[p][2]+"' has no space in starting.",$(m[p]));if(m[p][3]!==void 0&&m[p][4]===void 0)return a("InvalidAttr","Attribute '"+m[p][2]+"' is without value.",$(m[p]));if(m[p][3]===void 0&&!_.allowBooleanAttributes)return a("InvalidAttr","boolean attribute '"+m[p][2]+"' is not allowed.",$(m[p]));const E=m[p][2];if(!R(E))return a("InvalidAttr","Attribute '"+E+"' is an invalid name.",$(m[p]));if(!T.hasOwnProperty(E))T[E]=1;else return a("InvalidAttr","Attribute '"+E+"' is repeated.",$(m[p]))}return!0}function s(f,_){let m=/\d/;for(f[_]==="x"&&(_++,m=/[\da-fA-F]/);_<f.length;_++){if(f[_]===";")return _;if(!f[_].match(m))break}return-1}function d(f,_){if(_++,f[_]===";")return-1;if(f[_]==="#")return _++,s(f,_);let m=0;for(;_<f.length;_++,m++)if(!(f[_].match(/\w/)&&m<20)){if(f[_]===";")break;return-1}return _}function a(f,_,m){return{err:{code:f,msg:_,line:m.line||m,col:m.col}}}function R(f){return b.isName(f)}function N(f){return b.isName(f)}function x(f,_){const m=f.substring(0,_).split(/\r?\n/);return{line:m.length,col:m[m.length-1].length+1}}function $(f){return f.startIndex+f[1].length}return Ye}var we={},Vt;function Hr(){if(Vt)return we;Vt=1;const b={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(h,l){return l},attributeValueProcessor:function(h,l){return l},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(h,l,g){return h}},c=function(h){return Object.assign({},b,h)};return we.buildOptions=c,we.defaultOptions=b,we}var et,Zt;function Pr(){if(Zt)return et;Zt=1;class b{constructor(h){this.tagname=h,this.child=[],this[":@"]={}}add(h,l){h==="__proto__"&&(h="#__proto__"),this.child.push({[h]:l})}addChild(h){h.tagname==="__proto__"&&(h.tagname="#__proto__"),h[":@"]&&Object.keys(h[":@"]).length>0?this.child.push({[h.tagname]:h.child,":@":h[":@"]}):this.child.push({[h.tagname]:h.child})}}return et=b,et}var tt,Qt;function Fr(){if(Qt)return tt;Qt=1;const b=De();function c(n,s){const d={};if(n[s+3]==="O"&&n[s+4]==="C"&&n[s+5]==="T"&&n[s+6]==="Y"&&n[s+7]==="P"&&n[s+8]==="E"){s=s+9;let a=1,R=!1,N=!1,x="";for(;s<n.length;s++)if(n[s]==="<"&&!N){if(R&&g(n,s)){s+=7;let $,f;[$,f,s]=h(n,s+1),f.indexOf("&")===-1&&(d[t($)]={regx:RegExp(`&${$};`,"g"),val:f})}else if(R&&i(n,s))s+=8;else if(R&&e(n,s))s+=8;else if(R&&r(n,s))s+=9;else if(l)N=!0;else throw new Error("Invalid DOCTYPE");a++,x=""}else if(n[s]===">"){if(N?n[s-1]==="-"&&n[s-2]==="-"&&(N=!1,a--):a--,a===0)break}else n[s]==="["?R=!0:x+=n[s];if(a!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:d,i:s}}function h(n,s){let d="";for(;s<n.length&&n[s]!=="'"&&n[s]!=='"';s++)d+=n[s];if(d=d.trim(),d.indexOf(" ")!==-1)throw new Error("External entites are not supported");const a=n[s++];let R="";for(;s<n.length&&n[s]!==a;s++)R+=n[s];return[d,R,s]}function l(n,s){return n[s+1]==="!"&&n[s+2]==="-"&&n[s+3]==="-"}function g(n,s){return n[s+1]==="!"&&n[s+2]==="E"&&n[s+3]==="N"&&n[s+4]==="T"&&n[s+5]==="I"&&n[s+6]==="T"&&n[s+7]==="Y"}function i(n,s){return n[s+1]==="!"&&n[s+2]==="E"&&n[s+3]==="L"&&n[s+4]==="E"&&n[s+5]==="M"&&n[s+6]==="E"&&n[s+7]==="N"&&n[s+8]==="T"}function e(n,s){return n[s+1]==="!"&&n[s+2]==="A"&&n[s+3]==="T"&&n[s+4]==="T"&&n[s+5]==="L"&&n[s+6]==="I"&&n[s+7]==="S"&&n[s+8]==="T"}function r(n,s){return n[s+1]==="!"&&n[s+2]==="N"&&n[s+3]==="O"&&n[s+4]==="T"&&n[s+5]==="A"&&n[s+6]==="T"&&n[s+7]==="I"&&n[s+8]==="O"&&n[s+9]==="N"}function t(n){if(b.isName(n))return n;throw new Error(`Invalid entity name ${n}`)}return tt=c,tt}var rt,Yt;function Mr(){if(Yt)return rt;Yt=1;const b=/^[-+]?0x[a-fA-F0-9]+$/,c=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,h={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function l(e,r={}){if(r=Object.assign({},h,r),!e||typeof e!="string")return e;let t=e.trim();if(r.skipLike!==void 0&&r.skipLike.test(t))return e;if(e==="0")return 0;if(r.hex&&b.test(t))return i(t,16);if(t.search(/[eE]/)!==-1){const n=t.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(n){if(r.leadingZeros)t=(n[1]||"")+n[3];else if(!(n[2]==="0"&&n[3][0]==="."))return e;return r.eNotation?Number(t):e}else return e}else{const n=c.exec(t);if(n){const s=n[1],d=n[2];let a=g(n[3]);if(!r.leadingZeros&&d.length>0&&s&&t[2]!==".")return e;if(!r.leadingZeros&&d.length>0&&!s&&t[1]!==".")return e;if(r.leadingZeros&&d===e)return 0;{const R=Number(t),N=""+R;return N.search(/[eE]/)!==-1?r.eNotation?R:e:t.indexOf(".")!==-1?N==="0"&&a===""||N===a||s&&N==="-"+a?R:e:d?a===N||s+a===N?R:e:t===N||t===s+N?R:e}}else return e}}function g(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}function i(e,r){if(parseInt)return parseInt(e,r);if(Number.parseInt)return Number.parseInt(e,r);if(window&&window.parseInt)return window.parseInt(e,r);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}return rt=l,rt}var nt,Jt;function Dt(){if(Jt)return nt;Jt=1;function b(c){return typeof c=="function"?c:Array.isArray(c)?h=>{for(const l of c)if(typeof l=="string"&&h===l||l instanceof RegExp&&l.test(h))return!0}:()=>!1}return nt=b,nt}var st,er;function Br(){if(er)return st;er=1;const b=De(),c=Pr(),h=Fr(),l=Mr(),g=Dt();class i{constructor(E){this.options=E,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"Â¢"},pound:{regex:/&(pound|#163);/g,val:"Â£"},yen:{regex:/&(yen|#165);/g,val:"Â¥"},euro:{regex:/&(euro|#8364);/g,val:"â¬"},copyright:{regex:/&(copy|#169);/g,val:"Â©"},reg:{regex:/&(reg|#174);/g,val:"Â®"},inr:{regex:/&(inr|#8377);/g,val:"â¹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(A,w)=>String.fromCharCode(Number.parseInt(w,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(A,w)=>String.fromCharCode(Number.parseInt(w,16))}},this.addExternalEntities=e,this.parseXml=d,this.parseTextData=r,this.resolveNameSpace=t,this.buildAttributesMap=s,this.isItStopNode=x,this.replaceEntitiesValue=R,this.readStopNodeData=m,this.saveTextToParentTag=N,this.addChild=a,this.ignoreAttributesFn=g(this.options.ignoreAttributes)}}function e(p){const E=Object.keys(p);for(let A=0;A<E.length;A++){const w=E[A];this.lastEntities[w]={regex:new RegExp("&"+w+";","g"),val:p[w]}}}function r(p,E,A,w,o,u,v){if(p!==void 0&&(this.options.trimValues&&!w&&(p=p.trim()),p.length>0)){v||(p=this.replaceEntitiesValue(p));const C=this.options.tagValueProcessor(E,p,A,o,u);return C==null?p:typeof C!=typeof p||C!==p?C:this.options.trimValues?T(p,this.options.parseTagValue,this.options.numberParseOptions):p.trim()===p?T(p,this.options.parseTagValue,this.options.numberParseOptions):p}}function t(p){if(this.options.removeNSPrefix){const E=p.split(":"),A=p.charAt(0)==="/"?"/":"";if(E[0]==="xmlns")return"";E.length===2&&(p=A+E[1])}return p}const n=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function s(p,E,A){if(this.options.ignoreAttributes!==!0&&typeof p=="string"){const w=b.getAllMatches(p,n),o=w.length,u={};for(let v=0;v<o;v++){const C=this.resolveNameSpace(w[v][1]);if(this.ignoreAttributesFn(C,E))continue;let y=w[v][4],k=this.options.attributeNamePrefix+C;if(C.length)if(this.options.transformAttributeName&&(k=this.options.transformAttributeName(k)),k==="__proto__"&&(k="#__proto__"),y!==void 0){this.options.trimValues&&(y=y.trim()),y=this.replaceEntitiesValue(y);const I=this.options.attributeValueProcessor(C,y,E);I==null?u[k]=y:typeof I!=typeof y||I!==y?u[k]=I:u[k]=T(y,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(u[k]=!0)}if(!Object.keys(u).length)return;if(this.options.attributesGroupName){const v={};return v[this.options.attributesGroupName]=u,v}return u}}const d=function(p){p=p.replace(/\r\n?/g,`
`);const E=new c("!xml");let A=E,w="",o="";for(let u=0;u<p.length;u++)if(p[u]==="<")if(p[u+1]==="/"){const C=f(p,">",u,"Closing Tag is not closed.");let y=p.substring(u+2,C).trim();if(this.options.removeNSPrefix){const q=y.indexOf(":");q!==-1&&(y=y.substr(q+1))}this.options.transformTagName&&(y=this.options.transformTagName(y)),A&&(w=this.saveTextToParentTag(w,A,o));const k=o.substring(o.lastIndexOf(".")+1);if(y&&this.options.unpairedTags.indexOf(y)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${y}>`);let I=0;k&&this.options.unpairedTags.indexOf(k)!==-1?(I=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):I=o.lastIndexOf("."),o=o.substring(0,I),A=this.tagsNodeStack.pop(),w="",u=C}else if(p[u+1]==="?"){let C=_(p,u,!1,"?>");if(!C)throw new Error("Pi Tag is not closed.");if(w=this.saveTextToParentTag(w,A,o),!(this.options.ignoreDeclaration&&C.tagName==="?xml"||this.options.ignorePiTags)){const y=new c(C.tagName);y.add(this.options.textNodeName,""),C.tagName!==C.tagExp&&C.attrExpPresent&&(y[":@"]=this.buildAttributesMap(C.tagExp,o,C.tagName)),this.addChild(A,y,o)}u=C.closeIndex+1}else if(p.substr(u+1,3)==="!--"){const C=f(p,"-->",u+4,"Comment is not closed.");if(this.options.commentPropName){const y=p.substring(u+4,C-2);w=this.saveTextToParentTag(w,A,o),A.add(this.options.commentPropName,[{[this.options.textNodeName]:y}])}u=C}else if(p.substr(u+1,2)==="!D"){const C=h(p,u);this.docTypeEntities=C.entities,u=C.i}else if(p.substr(u+1,2)==="!["){const C=f(p,"]]>",u,"CDATA is not closed.")-2,y=p.substring(u+9,C);w=this.saveTextToParentTag(w,A,o);let k=this.parseTextData(y,A.tagname,o,!0,!1,!0,!0);k==null&&(k=""),this.options.cdataPropName?A.add(this.options.cdataPropName,[{[this.options.textNodeName]:y}]):A.add(this.options.textNodeName,k),u=C+2}else{let C=_(p,u,this.options.removeNSPrefix),y=C.tagName;const k=C.rawTagName;let I=C.tagExp,q=C.attrExpPresent,G=C.closeIndex;this.options.transformTagName&&(y=this.options.transformTagName(y)),A&&w&&A.tagname!=="!xml"&&(w=this.saveTextToParentTag(w,A,o,!1));const P=A;if(P&&this.options.unpairedTags.indexOf(P.tagname)!==-1&&(A=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),y!==E.tagname&&(o+=o?"."+y:y),this.isItStopNode(this.options.stopNodes,o,y)){let Q="";if(I.length>0&&I.lastIndexOf("/")===I.length-1)y[y.length-1]==="/"?(y=y.substr(0,y.length-1),o=o.substr(0,o.length-1),I=y):I=I.substr(0,I.length-1),u=C.closeIndex;else if(this.options.unpairedTags.indexOf(y)!==-1)u=C.closeIndex;else{const L=this.readStopNodeData(p,k,G+1);if(!L)throw new Error(`Unexpected end of ${k}`);u=L.i,Q=L.tagContent}const B=new c(y);y!==I&&q&&(B[":@"]=this.buildAttributesMap(I,o,y)),Q&&(Q=this.parseTextData(Q,y,o,!0,q,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),B.add(this.options.textNodeName,Q),this.addChild(A,B,o)}else{if(I.length>0&&I.lastIndexOf("/")===I.length-1){y[y.length-1]==="/"?(y=y.substr(0,y.length-1),o=o.substr(0,o.length-1),I=y):I=I.substr(0,I.length-1),this.options.transformTagName&&(y=this.options.transformTagName(y));const Q=new c(y);y!==I&&q&&(Q[":@"]=this.buildAttributesMap(I,o,y)),this.addChild(A,Q,o),o=o.substr(0,o.lastIndexOf("."))}else{const Q=new c(y);this.tagsNodeStack.push(A),y!==I&&q&&(Q[":@"]=this.buildAttributesMap(I,o,y)),this.addChild(A,Q,o),A=Q}w="",u=G}}else w+=p[u];return E.child};function a(p,E,A){const w=this.options.updateTag(E.tagname,A,E[":@"]);w===!1||(typeof w=="string"&&(E.tagname=w),p.addChild(E))}const R=function(p){if(this.options.processEntities){for(let E in this.docTypeEntities){const A=this.docTypeEntities[E];p=p.replace(A.regx,A.val)}for(let E in this.lastEntities){const A=this.lastEntities[E];p=p.replace(A.regex,A.val)}if(this.options.htmlEntities)for(let E in this.htmlEntities){const A=this.htmlEntities[E];p=p.replace(A.regex,A.val)}p=p.replace(this.ampEntity.regex,this.ampEntity.val)}return p};function N(p,E,A,w){return p&&(w===void 0&&(w=E.child.length===0),p=this.parseTextData(p,E.tagname,A,!1,E[":@"]?Object.keys(E[":@"]).length!==0:!1,w),p!==void 0&&p!==""&&E.add(this.options.textNodeName,p),p=""),p}function x(p,E,A){const w="*."+A;for(const o in p){const u=p[o];if(w===u||E===u)return!0}return!1}function $(p,E,A=">"){let w,o="";for(let u=E;u<p.length;u++){let v=p[u];if(w)v===w&&(w="");else if(v==='"'||v==="'")w=v;else if(v===A[0])if(A[1]){if(p[u+1]===A[1])return{data:o,index:u}}else return{data:o,index:u};else v==="	"&&(v=" ");o+=v}}function f(p,E,A,w){const o=p.indexOf(E,A);if(o===-1)throw new Error(w);return o+E.length-1}function _(p,E,A,w=">"){const o=$(p,E+1,w);if(!o)return;let u=o.data;const v=o.index,C=u.search(/\s/);let y=u,k=!0;C!==-1&&(y=u.substring(0,C),u=u.substring(C+1).trimStart());const I=y;if(A){const q=y.indexOf(":");q!==-1&&(y=y.substr(q+1),k=y!==o.data.substr(q+1))}return{tagName:y,tagExp:u,closeIndex:v,attrExpPresent:k,rawTagName:I}}function m(p,E,A){const w=A;let o=1;for(;A<p.length;A++)if(p[A]==="<")if(p[A+1]==="/"){const u=f(p,">",A,`${E} is not closed`);if(p.substring(A+2,u).trim()===E&&(o--,o===0))return{tagContent:p.substring(w,A),i:u};A=u}else if(p[A+1]==="?")A=f(p,"?>",A+1,"StopNode is not closed.");else if(p.substr(A+1,3)==="!--")A=f(p,"-->",A+3,"StopNode is not closed.");else if(p.substr(A+1,2)==="![")A=f(p,"]]>",A,"StopNode is not closed.")-2;else{const u=_(p,A,">");u&&((u&&u.tagName)===E&&u.tagExp[u.tagExp.length-1]!=="/"&&o++,A=u.closeIndex)}}function T(p,E,A){if(E&&typeof p=="string"){const w=p.trim();return w==="true"?!0:w==="false"?!1:l(p,A)}else return b.isExist(p)?p:""}return st=i,st}var it={},tr;function Ur(){if(tr)return it;tr=1;function b(i,e){return c(i,e)}function c(i,e,r){let t;const n={};for(let s=0;s<i.length;s++){const d=i[s],a=h(d);let R="";if(r===void 0?R=a:R=r+"."+a,a===e.textNodeName)t===void 0?t=d[a]:t+=""+d[a];else{if(a===void 0)continue;if(d[a]){let N=c(d[a],e,R);const x=g(N,e);d[":@"]?l(N,d[":@"],R,e):Object.keys(N).length===1&&N[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?N=N[e.textNodeName]:Object.keys(N).length===0&&(e.alwaysCreateTextNode?N[e.textNodeName]="":N=""),n[a]!==void 0&&n.hasOwnProperty(a)?(Array.isArray(n[a])||(n[a]=[n[a]]),n[a].push(N)):e.isArray(a,R,x)?n[a]=[N]:n[a]=N}}}return typeof t=="string"?t.length>0&&(n[e.textNodeName]=t):t!==void 0&&(n[e.textNodeName]=t),n}function h(i){const e=Object.keys(i);for(let r=0;r<e.length;r++){const t=e[r];if(t!==":@")return t}}function l(i,e,r,t){if(e){const n=Object.keys(e),s=n.length;for(let d=0;d<s;d++){const a=n[d];t.isArray(a,r+"."+a,!0,!0)?i[a]=[e[a]]:i[a]=e[a]}}}function g(i,e){const{textNodeName:r}=e,t=Object.keys(i).length;return!!(t===0||t===1&&(i[r]||typeof i[r]=="boolean"||i[r]===0))}return it.prettify=b,it}var ot,rr;function qr(){if(rr)return ot;rr=1;const{buildOptions:b}=Hr(),c=Br(),{prettify:h}=Ur(),l=Xt();class g{constructor(e){this.externalEntities={},this.options=b(e)}parse(e,r){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});const s=l.validate(e,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const t=new c(this.options);t.addExternalEntities(this.externalEntities);const n=t.parseXml(e);return this.options.preserveOrder||n===void 0?n:h(n,this.options)}addEntity(e,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=r}}return ot=g,ot}var at,nr;function Gr(){if(nr)return at;nr=1;const b=`
`;function c(r,t){let n="";return t.format&&t.indentBy.length>0&&(n=b),h(r,t,"",n)}function h(r,t,n,s){let d="",a=!1;for(let R=0;R<r.length;R++){const N=r[R],x=l(N);if(x===void 0)continue;let $="";if(n.length===0?$=x:$=`${n}.${x}`,x===t.textNodeName){let p=N[x];i($,t)||(p=t.tagValueProcessor(x,p),p=e(p,t)),a&&(d+=s),d+=p,a=!1;continue}else if(x===t.cdataPropName){a&&(d+=s),d+=`<![CDATA[${N[x][0][t.textNodeName]}]]>`,a=!1;continue}else if(x===t.commentPropName){d+=s+`<!--${N[x][0][t.textNodeName]}-->`,a=!0;continue}else if(x[0]==="?"){const p=g(N[":@"],t),E=x==="?xml"?"":s;let A=N[x][0][t.textNodeName];A=A.length!==0?" "+A:"",d+=E+`<${x}${A}${p}?>`,a=!0;continue}let f=s;f!==""&&(f+=t.indentBy);const _=g(N[":@"],t),m=s+`<${x}${_}`,T=h(N[x],t,$,f);t.unpairedTags.indexOf(x)!==-1?t.suppressUnpairedNode?d+=m+">":d+=m+"/>":(!T||T.length===0)&&t.suppressEmptyNode?d+=m+"/>":T&&T.endsWith(">")?d+=m+`>${T}${s}</${x}>`:(d+=m+">",T&&s!==""&&(T.includes("/>")||T.includes("</"))?d+=s+t.indentBy+T+s:d+=T,d+=`</${x}>`),a=!0}return d}function l(r){const t=Object.keys(r);for(let n=0;n<t.length;n++){const s=t[n];if(r.hasOwnProperty(s)&&s!==":@")return s}}function g(r,t){let n="";if(r&&!t.ignoreAttributes)for(let s in r){if(!r.hasOwnProperty(s))continue;let d=t.attributeValueProcessor(s,r[s]);d=e(d,t),d===!0&&t.suppressBooleanAttributes?n+=` ${s.substr(t.attributeNamePrefix.length)}`:n+=` ${s.substr(t.attributeNamePrefix.length)}="${d}"`}return n}function i(r,t){r=r.substr(0,r.length-t.textNodeName.length-1);let n=r.substr(r.lastIndexOf(".")+1);for(let s in t.stopNodes)if(t.stopNodes[s]===r||t.stopNodes[s]==="*."+n)return!0;return!1}function e(r,t){if(r&&r.length>0&&t.processEntities)for(let n=0;n<t.entities.length;n++){const s=t.entities[n];r=r.replace(s.regex,s.val)}return r}return at=c,at}var ut,sr;function zr(){if(sr)return ut;sr=1;const b=Gr(),c=Dt(),h={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(r,t){return t},attributeValueProcessor:function(r,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function l(r){this.options=Object.assign({},h,r),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=c(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=e),this.processTextOrObjNode=g,this.options.format?(this.indentate=i,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}l.prototype.build=function(r){return this.options.preserveOrder?b(r,this.options):(Array.isArray(r)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(r={[this.options.arrayNodeName]:r}),this.j2x(r,0,[]).val)},l.prototype.j2x=function(r,t,n){let s="",d="";const a=n.join(".");for(let R in r)if(Object.prototype.hasOwnProperty.call(r,R))if(typeof r[R]>"u")this.isAttribute(R)&&(d+="");else if(r[R]===null)this.isAttribute(R)||R===this.options.cdataPropName?d+="":R[0]==="?"?d+=this.indentate(t)+"<"+R+"?"+this.tagEndChar:d+=this.indentate(t)+"<"+R+"/"+this.tagEndChar;else if(r[R]instanceof Date)d+=this.buildTextValNode(r[R],R,"",t);else if(typeof r[R]!="object"){const N=this.isAttribute(R);if(N&&!this.ignoreAttributesFn(N,a))s+=this.buildAttrPairStr(N,""+r[R]);else if(!N)if(R===this.options.textNodeName){let x=this.options.tagValueProcessor(R,""+r[R]);d+=this.replaceEntitiesValue(x)}else d+=this.buildTextValNode(r[R],R,"",t)}else if(Array.isArray(r[R])){const N=r[R].length;let x="",$="";for(let f=0;f<N;f++){const _=r[R][f];if(!(typeof _>"u"))if(_===null)R[0]==="?"?d+=this.indentate(t)+"<"+R+"?"+this.tagEndChar:d+=this.indentate(t)+"<"+R+"/"+this.tagEndChar;else if(typeof _=="object")if(this.options.oneListGroup){const m=this.j2x(_,t+1,n.concat(R));x+=m.val,this.options.attributesGroupName&&_.hasOwnProperty(this.options.attributesGroupName)&&($+=m.attrStr)}else x+=this.processTextOrObjNode(_,R,t,n);else if(this.options.oneListGroup){let m=this.options.tagValueProcessor(R,_);m=this.replaceEntitiesValue(m),x+=m}else x+=this.buildTextValNode(_,R,"",t)}this.options.oneListGroup&&(x=this.buildObjectNode(x,R,$,t)),d+=x}else if(this.options.attributesGroupName&&R===this.options.attributesGroupName){const N=Object.keys(r[R]),x=N.length;for(let $=0;$<x;$++)s+=this.buildAttrPairStr(N[$],""+r[R][N[$]])}else d+=this.processTextOrObjNode(r[R],R,t,n);return{attrStr:s,val:d}},l.prototype.buildAttrPairStr=function(r,t){return t=this.options.attributeValueProcessor(r,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+r:" "+r+'="'+t+'"'};function g(r,t,n,s){const d=this.j2x(r,n+1,s.concat(t));return r[this.options.textNodeName]!==void 0&&Object.keys(r).length===1?this.buildTextValNode(r[this.options.textNodeName],t,d.attrStr,n):this.buildObjectNode(d.val,t,d.attrStr,n)}l.prototype.buildObjectNode=function(r,t,n,s){if(r==="")return t[0]==="?"?this.indentate(s)+"<"+t+n+"?"+this.tagEndChar:this.indentate(s)+"<"+t+n+this.closeTag(t)+this.tagEndChar;{let d="</"+t+this.tagEndChar,a="";return t[0]==="?"&&(a="?",d=""),(n||n==="")&&r.indexOf("<")===-1?this.indentate(s)+"<"+t+n+a+">"+r+d:this.options.commentPropName!==!1&&t===this.options.commentPropName&&a.length===0?this.indentate(s)+`<!--${r}-->`+this.newLine:this.indentate(s)+"<"+t+n+a+this.tagEndChar+r+this.indentate(s)+d}},l.prototype.closeTag=function(r){let t="";return this.options.unpairedTags.indexOf(r)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${r}`,t},l.prototype.buildTextValNode=function(r,t,n,s){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(s)+`<![CDATA[${r}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(s)+`<!--${r}-->`+this.newLine;if(t[0]==="?")return this.indentate(s)+"<"+t+n+"?"+this.tagEndChar;{let d=this.options.tagValueProcessor(t,r);return d=this.replaceEntitiesValue(d),d===""?this.indentate(s)+"<"+t+n+this.closeTag(t)+this.tagEndChar:this.indentate(s)+"<"+t+n+">"+d+"</"+t+this.tagEndChar}},l.prototype.replaceEntitiesValue=function(r){if(r&&r.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const n=this.options.entities[t];r=r.replace(n.regex,n.val)}return r};function i(r){return this.options.indentBy.repeat(r)}function e(r){return r.startsWith(this.options.attributeNamePrefix)&&r!==this.options.textNodeName?r.substr(this.attrPrefixLen):!1}return ut=l,ut}var lt,ir;function Kr(){if(ir)return lt;ir=1;const b=Xt(),c=qr(),h=zr();return lt={XMLParser:c,XMLValidator:b,XMLBuilder:h},lt}Kr();function Wr(b,c){if(b.indexOf(c)>-1)return[c];const h=ye(b,c);return h.length?h:[]}async function ct(b){if(new Uint16Array(b,0,2)[0]===35615)try{const h=new Response(b),l=new DecompressionStream("gzip"),g=await h.body?.pipeThrough(l),i=await new Response(g).arrayBuffer();return await ct(i)}catch(h){console.error("eee",h)}return b}Qe.insensitive=!0;const jr=/.*\.(avro|dbf|gpkg|gz|h5|jpg|jpeg|omx|png|shp|shx|sqlite|zip|zst)$/,Xr=["simwrapper",".simwrapper"],be={};class Vr{baseUrl;urlId;slug;needsAuth;fsHandle;store;isGithub;isZIB;isFlask;type;fileLinkLookup={};constructor(c,h){this.urlId=c.slug,this.slug=c.slug,this.needsAuth=!!c.needPassword,this.fsHandle=c.handle||null,this.store=h||null,this.isGithub=!!c.isGithub,this.isFlask=!!c.flask,this.isZIB=!!c.isZIB,this.type=0,this.fsHandle&&(this.type=1),this.isGithub&&(this.type=2),this.isFlask&&(this.type=3),this.isZIB&&(this.type=4),this.baseUrl=c.baseURL,c.baseURL.endsWith("/")||(this.baseUrl+="/"),be[this.urlId]||(be[this.urlId]={})}hasHandle(){return!!this.fsHandle}async getChromePermission(c){return c&&await c.queryPermission({mode:"read"})!=="granted"&&this.store?await new Promise(i=>{this.store.commit("setFileHandleForPermissionRequest",{handle:c,resolve:i})}):!0}clearCache(){be[this.urlId]={}}cleanURL(c){let h=this.baseUrl+c.replace(/^0-9a-zA-Z_\-\/:+/i,"");return h=h.replaceAll("//","/"),h=h.replaceAll("//","/"),h=h.replace("https:/","https://"),h=h.replace("http:/","http://"),h=new URL(h).href,h}async _getFileResponse(c){switch(this.type){case 1:return this._getFileFromChromeFileSystem(c);case 2:return this._getFileFromGitHub(c);case 4:return this._getFileFromLakeFS(c);case 3:return this._getFileFromAzure(c);case 0:default:return this._getFileFetchResponse(c)}}async _getFileFromLakeFS(c,h){let l=c.replaceAll("//","/");l=c.replaceAll("//","/"),console.log({betterPath:l});let g=this.baseUrl+l;g.endsWith("/")&&(g=g.slice(0,-1));const i=l.slice(l.lastIndexOf("/")+1),e=this.fileLinkLookup[i];return e&&(g=e),console.log({lookup:e}),await fetch(g).then(t=>{if(t.status>=300)throw console.warn("Status:",t.status),t;return t})}async _getFileFetchResponse(c,h){const l=this.cleanURL(c),g={};h?.maxBytes&&(g.Range=`bytes=0-${h.maxBytes-1}`);const i=new Request(l,{headers:g});return await fetch(i).then(r=>{if(r.status>=300)throw console.warn("Status:",r.status),r;return r})}async _getDirectoryFromAzure(c){let h=c.replace(/^0-9a-zA-Z_\-\/:+/i,"");h=h.replaceAll("//","/"),h=h.replaceAll("//","/");let l=`${this.baseUrl}list/${this.slug}?prefix=${h}`;const g=new URL(l).href,i={};if(this.needsAuth){let n=localStorage.getItem(`auth-token-${this.slug}`);if(n||(n=prompt("This server requires an access token to continue")),n)localStorage.setItem(`auth-token-${this.slug}`,n),i.AZURETOKEN=n;else return{dirs:[],files:[],handles:{}}}const e=new Request(g,{headers:i}),r=await fetch(e);if(r.status==400){let n=prompt("Authorization failure. This server requires a valid access token to continue");return n?(localStorage.setItem(`auth-token-${this.slug}`,n),i.AZURETOKEN=n,await this._getDirectoryFromAzure(c)):{dirs:[],files:[],handles:{}}}if(r.status!=200)throw console.log("Status:",r.status),r;return await r.json()}getSlug(){return this.slug}async _getFileFromAzure(c){let h=c.replace(/^0-9a-zA-Z_\-\/:+/i,"");h=h.replaceAll("//","/"),h=h.replaceAll("//","/");let l=`${this.baseUrl}file/${this.slug}?prefix=${h}`;const g=new URL(l).href,i={},e=new Request(g,{headers:i}),r=await fetch(e);if(r.status!=200)throw console.log("Status:",r.status),r;return r}async _getFileFromChromeFileSystem(c,h){let l=c.replace(/^0-9a-zA-Z_\-\/:+/i,"");l=l.replaceAll("//","/"),l=new URL(`http://local/${l}`).href,l=l.substring(13);const g=l.lastIndexOf("/"),i=l.substring(0,g),e=decodeURIComponent(l.substring(g+1)),t=(await this.getDirectory(i)).handles[e];if(!t)throw Error(`File ${e} missing`);const n=await t.getFile();return n.json=()=>new Promise(async(s,d)=>{const a=await n.text(),R=JSON.parse(a);s(R)}),n.blob=()=>new Promise(async(s,d)=>{s(n)}),new Promise((s,d)=>{s(n)})}async _getFileFromGitHub(c){let h=c.replace(/^0-9a-zA-Z_\-\/:+/i,"");h=h.replaceAll("//","/"),h.startsWith("/")&&(h=h.slice(1));const l=h.split("/").filter(a=>!!a);if(l.length<2)return new Promise((a,R)=>{a(null)});const g=`${l[0]}/${l[1]}`;let i=`https://api.github.com/repos/${g}/contents/`;l.shift(),l.shift(),i+=l.join("/");const t={Authorization:`Bearer ${["11","pat","github"].reverse().join("_")}${mt}_SyKezxQUoOKXAx3HwTH51I4funGUSFfxdbGG2X4l3WvUHIW62GOOmO0OMWZ`};let n=await await fetch(i,{headers:t}).then(a=>a.json()),s=n.content;if(s||(i=`https://api.github.com/repos/${g}/git/blobs/${n.sha}`,n=await await fetch(i,{headers:t}).then(a=>a.json()),s=n.content),n.encoding=="base64"){const a=Uint8Array.from(atob(n.content),R=>R.charCodeAt(0));jr.test(c.toLocaleLowerCase())?s=a:s=new TextDecoder().decode(a)}else n.encoding=="utf-8"?s=new TextDecoder().decode(n.content):s=n.content;return{text:()=>new Promise((a,R)=>{a(s)}),json:()=>new Promise(async(a,R)=>{const N=JSON.parse(s);a(N)}),blob:()=>new Promise(async(a,R)=>{a(new Blob([s],{type:"application/octet-stream"}))})}}async _getDirectoryFromGitHub(c){let h=c.replace(/^0-9a-zA-Z_\-\/:+/i,"");h=h.replaceAll("//","/"),h.startsWith("/")&&(h=h.slice(1));const l={dirs:[],files:[],handles:{}},g=h.split("/").filter(s=>!!s);if(g.length<2)return l;let i=`https://api.github.com/repos/${g[0]}/${g[1]}/contents/`;g.shift(),g.shift(),i+=g.join("/");const t={Authorization:`Bearer ${["11","pat","github"].reverse().join("_")}${mt}_SyKezxQUoOKXAx3HwTH51I4funGUSFfxdbGG2X4l3WvUHIW62GOOmO0OMWZ`};return(await await fetch(i,{headers:t}).then(s=>s.json())).forEach(s=>{s.type=="file"&&l.files.push(s.name),s.type=="dir"&&l.dirs.push(s.name)}),l}async getFileText(c){return(await this._getFileResponse(c)).text()}async getFileJson(c){const g=await(await(await this._getFileResponse(c)).blob()).arrayBuffer(),i=await ct(g),e=new TextDecoder("utf-8").decode(i);return JSON.parse(e)}async getFileBlob(c){return(await this._getFileResponse(c)).blob()}async probeXmlFileType(c){let h=await this.getFileStream(c,{maxBytes:1024});c.toLocaleLowerCase().endsWith(".gz")&&(h=h.pipeThrough(new DecompressionStream("gzip")));const l=await h.getReader().read(),g=new Uint8Array(l.value),e=new TextDecoder("utf-8").decode(g.slice(0,Math.min(g.length,1024))).match(/<!DOCTYPE\s+(\w+)\s*(?:\[\s*([^\]]*)\s*\])?(?:\s+PUBLIC\s+"([^"]+)"\s+"([^"]+)"|(?:\s+SYSTEM\s+)?"([^"]+)")?/is);return e?e[1]:null}async getFileStream(c,h){let l;switch(this.type){case 1:return l=await this._getFileFromChromeFileSystem(c,h).then(i=>i.blob()).then(i=>i.stream()),l;case 0:return l=await this._getFileFetchResponse(c,h).then(i=>i.body),l;case 3:const g=`/file/${this.slug}?prefix=${c}`;return l=await this._getFileFetchResponse(g,h).then(i=>i.body),l;case 4:return l=await this._getFileFromLakeFS(c,h).then(i=>i.body),l;default:throw Error(`FileSystemType ${this.type} not implemented`)}}async getDirectory(c){let h=c.replaceAll("//","/");h.endsWith("/")||(h+="/");const l=be[this.urlId][h];if(l)return l;h=h.replaceAll("/./","/");try{let g;switch(this.type){case 1:g=await this._getDirectoryFromHandle(h);break;case 2:g=await this._getDirectoryFromGitHub(h);break;case 3:g=await this._getDirectoryFromAzure(h);break;case 4:case 0:default:g=await this._getDirectoryFromURL(h);break}return g.dirs.sort((i,e)=>Qe(i,e)),g.files.sort((i,e)=>Qe(i,e)),this.type!==4&&(be[this.urlId][h]=g),g}catch(g){throw Error(""+g)}}async _getDirectoryFromHandle(c,h){const l={files:[],dirs:[],handles:{}};if(!this.fsHandle||!await this.getChromePermission(this.fsHandle))return l;let i=c.split("/").filter(n=>!!n);function e(n){const s=n.indexOf("..");if(s<=0)return n;const d=n.filter((a,R)=>R!==s-1&&R!==s);return e(d)}const r=e(i);let t=this.fsHandle;if(r.length)for(const n of r){let s=!1;for await(let[d,a]of t)if(d===n){t=a,s=!0;break}if(!s)throw Error(`Could not find folder "${n}"`)}for await(let n of t.values())l.handles&&(l.handles[n.name]=n),n.kind==="file"?l.files.push(n.name):l.dirs.push(n.name);return l}async _getDirectoryFromURL(c){const l=await(await this._getFileResponse(c)).text();return this.buildListFromHtml(l)}async findAllYamlConfigs(c){const h={dashboards:{},topsheets:{},vizes:{},configs:{}},l=[];let g="/";const e=(c.startsWith("/")?c:"/"+c).split("/");for(const d of e.slice(0,e.length-1)){g=`${g}${d}/`.replaceAll("//","/");try{const{dirs:a}=await this.getDirectory(g);for(const R of a)Xr.includes(R.toLocaleLowerCase())&&l.push(`${g}/${R}`.replaceAll("//","/"))}catch{}}l.push(c);const r="dashboard*.y?(a)ml",t="(topsheet|table)*.y?(a)ml",n="viz*.y?(a)ml",s="simwrapper-config.y?(a)ml";for(const d of l){const{files:a}=await this.getDirectory(d);ye.match(a,r).map(R=>h.dashboards[R]=`${d}/${R}`.replaceAll("//","/")),ye.match(a,t).map(R=>h.topsheets[R]=`${d}/${R}`.replaceAll("//","/")),ye.match(a,n).map(R=>h.vizes[R]=`${d}/${R}`.replaceAll("//","/")),ye.match(a,s).map(R=>h.configs[R]=`${d}/${R}`.replaceAll("//","/"))}return h}buildListFromHtml(c){return c.indexOf("<title>lakeFS File Browser")>-1?this.buildListFromLakeFS(c):c.indexOf("SimpleWebServer")>-1?this.buildListFromSimpleWebServer(c):c.indexOf("<ul>")>-1?this.buildListFromSVN(c):c.indexOf('<ul id="files">')>-1?this.buildListFromNpxServe(c):c.indexOf("<table>")>-1?this.buildListFromApache24(c):c.indexOf(`
<a `)>-1?this.buildListFromNGINX(c):{dirs:[],files:[],handles:{}}}buildListFromLakeFS(c){const h=/">(.*?)<\/a/,l=/href="(.*?)" target/,g=[],i=[];return c.split(`
`).filter(t=>t.startsWith("<li>")).forEach(t=>{if(t.indexOf('<a href="')<0)return;const s=t.match(h);if(!s)return;const d=s[1];if(t.startsWith("<li>[DIR]"))g.push(d.substring(0,d.length));else{const a=t.match(l);if(!a)return;const R=a[1];i.push(d),this.fileLinkLookup[d]=R}}),console.log({dirs:g,files:i,lookup:this.fileLinkLookup}),{dirs:g,files:i,handles:{}}}buildListFromSimpleWebServer(c){const h=/">(.*?)<\/a/,l=[],g=[],i=c.split(`
`);for(const e of i){if(e.indexOf('<li><a href="')<0)continue;const t=e.match(h);if(!t)continue;const n=t[1];n.endsWith("/")?l.push(n.substring(0,n.length-1)):g.push(n)}return{dirs:l,files:g,handles:{}}}buildListFromNpxServe(c){const h=/"(.*?)"/;let l=[],g=[];const i=c.split("</li>").map(e=>e.slice(e.lastIndexOf("<li")));for(const e of i){const r=e.indexOf('<li> <a href="');if(r<0||r>512)continue;const t=e.match(h);if(!t)continue;let n=t[1];n=n.replaceAll("&#47;","/"),n!=="/"&&n!=="../"&&(n.endsWith("/")?l.push(n.substring(0,n.length-1)):g.push(n))}return l=l.map(e=>e.slice(1+e.lastIndexOf("/"))),g=g.map(e=>e.slice(1+e.lastIndexOf("/"))),{dirs:l,files:g,handles:{}}}buildListFromSVN(c){const h=/"(.*?)"/,l=[],g=[],i=c.split(`
`);for(const e of i){if(e.indexOf('<li><a href="')<0)continue;const t=e.match(h);if(!t)continue;let n=t[1];n!=="../"&&(n.startsWith("./")&&(n=n.substring(2)),n.endsWith("/")?l.push(n.substring(0,n.length-1)):g.push(n))}return{dirs:l,files:g,handles:{}}}buildListFromApache24(c){const h=/"(.*?)"/,l=[],g=[],i=c.split(`
`);for(const e of i){if(e.indexOf('<th "')>-1||e.indexOf("[PARENTDIR]")>-1)continue;const r=e.indexOf('<td><a href="');if(r<0)continue;const t=e.substring(r).match(h);if(!t)continue;const n=t[1];n!=="../"&&(n.endsWith("/")?l.push(n.substring(0,n.length-1)):g.push(n))}return{dirs:l,files:g,handles:{}}}buildListFromNGINX(c){const h=/"(.*?)"/,l=[],g=[],i=c.split(`
`);for(const e of i){const r=e.indexOf('<a href="');if(r<0)continue;const t=e.substring(r).match(h);if(!t)continue;const n=t[1];n!=="../"&&(n.endsWith("/")?l.push(n.substring(0,n.length-1)):g.push(n))}return{dirs:l,files:g,handles:{}}}}let ft,me="",ht=[],ae={},ce="",dt,pt=!1,Ae=[];const pe={};onmessage=function(b){Zr(b.data)},postMessage({ready:!0});async function Zr(b){if(ae=b.config,ce=ae.dataset,b.options?.highPrecision&&(pt=!0),b.featureProperties){Qr(b.featureProperties),postMessage(pe[ce]);return}if(b.buffer){dt=b.buffer,or(ce,dt),postMessage(pe[ce]);return}ft=new Vr(b.fileSystemConfig),me=b.subfolder,ht=b.files,dt=b.buffer;try{const c=ae.dataset.indexOf("/");if(c>-1){let h=me;me&&(h+="/");const l=c===0?ae.dataset:`${h}${ae.dataset}`;ce=l.substring(1+l.lastIndexOf("/")),me=l.substring(0,l.lastIndexOf("/"));let g=me.startsWith("./")?me.slice(2):me;const{files:i}=await ft.getDirectory(g);ht=i}await Yr(),Ae.length&&(pe[ce]._comments=Ae),postMessage(pe[ce])}catch(c){const h=""+c;postMessage({error:h})}}function Qr(b){const c={},h=b[0];let l=Object.keys(h).sort();if(ae.drop){let g=Array.isArray(ae.drop)?ae.drop:ae.drop.split(",");g.length&&(console.log("DROPPING",g),l=l.filter(i=>g.indexOf(i)==-1))}if(ae.keep){let g=Array.isArray(ae.keep)?ae.keep:ae.keep.split(",");g.length&&(console.log("KEEPING",g),l=l.filter(i=>g.indexOf(i)>-1))}for(const g of l){let i,e=le.NUMBER;typeof h[g]=="number"?(i=pt?new Float64Array(b.length):new Float32Array(b.length),i.fill(NaN)):(i=[],e=le.STRING),c[g]={name:g,values:i,type:e}}for(let g=0;g<b.length;g++){const i=b[g];for(const e of l){const r=i[e];c[e].values[g]=r}}pe[ce]=c,gt(ce,c)}async function Yr(){const b=ce,c=Wr(ht,b);if(c.length==0)throw Error(`File not found: "${b}"`);if(c.length>1)throw Error(`More than one file matched "${b}": ${c}`);const h=c[0],l=await en(h);or(h,l)}async function or(b,c){try{if(b&&b.toLocaleLowerCase().endsWith(".dbf")){const h=hr(c,new TextDecoder("windows-1252"));gt(ce,h),pe[ce]=h}else{const h=new TextDecoder().decode(c);await Jr(ce,b,h)}}catch(h){const l=(""+h).replaceAll("Error: ","");postMessage({error:l})}}async function Jr(b,c,h){function l(g,i){return Array.isArray(i)&&i.length>0?l(g[i[0]],i.slice(1)):g}if(c.indexOf(".xml")>-1){const g={},i=ae;if(i.xmlElements){const e=i.xmlElements.split(".");l(g,e),pe[b]={}}else pe[b]={};return}Dr(b,c,h)}function Dr(b,c,h){const l={},g={},i=yr.parse(h,{delimitersToGuess:["	",";",","," "],comments:"#",skipEmptyLines:!0,dynamicTyping:!0,header:!0,transformHeader:(r,t)=>(g[r]||(g[r]=0),g[r]+=1,g[r]>1?`${r.trim()}_${g[r]-1}`:r.trim())});if(!i.data?.length)throw console.error("NODATA - Papaparse returned nothing!"),Error("Bad format, no data, or too large - Error loading");let e=i.meta.fields||[];if(ae.drop){let r=Array.isArray(ae.drop)?ae.drop:ae.drop.split(",");r.length&&(console.log("DROPPING",r),e=e.filter(t=>r.indexOf(t)==-1))}if(ae.keep){let r=Array.isArray(ae.keep)?ae.keep:ae.keep.split(",");r.length&&(console.log("KEEPING",r),e=e.filter(t=>r.indexOf(t)>-1))}for(const r of e){const t=pt?new Float64Array(i.data.length).fill(NaN):new Float32Array(i.data.length).fill(NaN);l[r]={name:r,values:t,type:le.NUMBER}}for(let r=0;r<i.data.length;r++){const t=i.data[r];for(const n of e){const s=t[n];if(s!=="")if(Number.isFinite(s))l[n].values[r]=s;else if(Array.isArray(l[n].values))l[n].values[r]=s;else{const d=Array.from(l[n].values.slice(0,r));typeof s=="string"&&(l[n].type=le.STRING),typeof s=="boolean"&&(l[n].type=le.BOOLEAN),d[r]=s,l[n].values=d}}}gt(b,l),pe[b]=l,Ae=[...new Set(i.comments)],Ae.length&&console.log({_comments:Ae})}function gt(b,c){for(const h of Object.values(c)){if(h.type!==le.NUMBER)continue;let l=-1/0;for(const g of h.values)l=Math.max(l,g);h.max=l}}async function en(b){const c=`${me}/${b}`,h=await ft.getFileBlob(c);if(!h)throw Error("BLOB IS NULL");const l=await h.arrayBuffer();return await ct(l)}})();
