import{b as Dt,j as In,d as ig,g as Bi,n as ag}from"./index-BSRT1qCd.js";import{Y as og}from"./index-r3K0jT4B.js";import{m as lt,e as Nn,w as sg,o as ug,q as fg,p as cg,a as qi}from"./cubehelix-Bg3rkAQA.js";import{j as Ln,a as Dn,d as aa,k as lg,l as hg,n as oa,o as sa,r as dg,i as vg,c as pg,b as gg,m as yg,v as _g,f as mg,h as wg,w as bg,q as xg,x as Eg,e as Ag,u as Tg,y as Mg,T as Sg,s as Cg,g as Og,t as Pg,z as Ig,A as $g,B as Ng}from"./timer-Cti_wRY7.js";import{e as Ce}from"./extent-Ccx1MofX.js";import{m as ua,A as Lg,f as Dg,a as Rg}from"./min-C6O82vcA.js";import{r as fa,g as ca,i as Fg,f as kg,a as zg,b as Ug,c as jg,d as Vg,e as Bg}from"./group-DobYzF2-.js";import{d as $e,c as la,t as qg,a as Hg,g as Kg}from"./round-D-ROWHlE.js";import{I as ha,a as Bn}from"./index-_doEQLKC.js";import{r as Wg}from"./range-OtVwhkKS.js";import{c as Hi}from"./color-DZRtpOAM.js";import{P as Yg}from"./papaparse.min-CHKAvxeS.js";import{H as Zg}from"./HTTPFileSystem-CM0ZTrcf.js";import{i as Xg}from"./rainbow-Dz4seJAz.js";import"./hcl-BuAPUl0w.js";import"./fxp-DXsl1rlp.js";function Jg(e,i){if(!((i=+i)>=0))throw new RangeError("invalid r");let o=e.length;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid length");if(!o||!i)return e;const s=qn(i),u=e.slice();return s(e,u,0,o,1),s(u,e,0,o,1),s(e,u,0,o,1),e}const Qg=da(qn),Gg=da(ty);function da(e){return function(i,o,s=o){if(!((o=+o)>=0))throw new RangeError("invalid rx");if(!((s=+s)>=0))throw new RangeError("invalid ry");let{data:u,width:l,height:h}=i;if(!((l=Math.floor(l))>=0))throw new RangeError("invalid width");if(!((h=Math.floor(h!==void 0?h:u.length/l))>=0))throw new RangeError("invalid height");if(!l||!h||!o&&!s)return i;const g=o&&e(o),_=s&&e(s),b=u.slice();return g&&_?(Kt(g,b,u,l,h),Kt(g,u,b,l,h),Kt(g,b,u,l,h),Wt(_,u,b,l,h),Wt(_,b,u,l,h),Wt(_,u,b,l,h)):g?(Kt(g,u,b,l,h),Kt(g,b,u,l,h),Kt(g,u,b,l,h)):_&&(Wt(_,u,b,l,h),Wt(_,b,u,l,h),Wt(_,u,b,l,h)),i}}function Kt(e,i,o,s,u){for(let l=0,h=s*u;l<h;)e(i,o,l,l+=s,1)}function Wt(e,i,o,s,u){for(let l=0,h=s*u;l<s;++l)e(i,o,l,l+h,s)}function ty(e){const i=qn(e);return(o,s,u,l,h)=>{u<<=2,l<<=2,h<<=2,i(o,s,u+0,l+0,h),i(o,s,u+1,l+1,h),i(o,s,u+2,l+2,h),i(o,s,u+3,l+3,h)}}function qn(e){const i=Math.floor(e);if(i===e)return ey(e);const o=e-i,s=2*e+1;return(u,l,h,g,_)=>{if(!((g-=_)>=h))return;let b=i*l[h];const T=_*i,S=T+_;for(let O=h,D=h+T;O<D;O+=_)b+=l[Math.min(g,O)];for(let O=h,D=g;O<=D;O+=_)b+=l[Math.min(g,O+T)],u[O]=(b+o*(l[Math.max(h,O-S)]+l[Math.min(g,O+S)]))/s,b-=l[Math.max(h,O-T)]}}function ey(e){const i=2*e+1;return(o,s,u,l,h)=>{if(!((l-=h)>=u))return;let g=e*s[u];const _=h*e;for(let b=u,T=u+_;b<T;b+=h)g+=s[Math.min(l,b)];for(let b=u,T=l;b<=T;b+=h)g+=s[Math.min(l,b+_)],o[b]=g/i,g-=s[Math.max(u,b-_)]}}function ke(e,i){let o=0;if(i===void 0)for(let s of e)s!=null&&(s=+s)>=s&&++o;else{let s=-1;for(let u of e)(u=i(u,++s,e))!=null&&(u=+u)>=u&&++o}return o}function ny(e){return e.length|0}function ry(e){return!(e>0)}function iy(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function ay(e){return i=>e(...i)}function oy(...e){const i=typeof e[e.length-1]=="function"&&ay(e.pop());e=e.map(iy);const o=e.map(ny),s=e.length-1,u=new Array(s+1).fill(0),l=[];if(s<0||o.some(ry))return l;for(;;){l.push(u.map((g,_)=>e[_][g]));let h=s;for(;++u[h]===o[h];){if(h===0)return i?l.map(i):l;u[h--]=0}}}function sy(e,i){var o=0,s=0;return Float64Array.from(e,i===void 0?u=>o+=+u||0:u=>o+=+i(u,s++,e)||0)}function uy(e,i,o){return(i.length!==2?Ln(fa(e,i,o),([s,u],[l,h])=>lt(u,h)||lt(s,l)):Ln(ca(e,o),([s,u],[l,h])=>i(u,h)||lt(s,l))).map(([s])=>s)}var fy=Array.prototype,cy=fy.slice;function $n(e){return()=>e}function va(e,i,o){let s;for(;;){const u=$e(e,i,o);if(u===s||u===0||!isFinite(u))return[e,i];u>0?(e=Math.floor(e/u)*u,i=Math.ceil(i/u)*u):u<0&&(e=Math.ceil(e*u)/u,i=Math.floor(i*u)/u),s=u}}function pa(e){return Math.max(1,Math.ceil(Math.log(ke(e))/Math.LN2)+1)}function Ki(){var e=Fg,i=Ce,o=pa;function s(u){Array.isArray(u)||(u=Array.from(u));var l,h=u.length,g,_,b=new Array(h);for(l=0;l<h;++l)b[l]=e(u[l],l,u);var T=i(b),S=T[0],O=T[1],D=o(b,S,O);if(!Array.isArray(D)){const G=O,ot=+D;if(i===Ce&&([S,O]=va(S,O,ot)),D=la(S,O,ot),D[0]<=S&&(_=$e(S,O,ot)),D[D.length-1]>=O)if(G>=O&&i===Ce){const Z=$e(S,O,ot);isFinite(Z)&&(Z>0?O=(Math.floor(O/Z)+1)*Z:Z<0&&(O=(Math.ceil(O*-Z)+1)/-Z))}else D.pop()}for(var j=D.length,W=0,Y=j;D[W]<=S;)++W;for(;D[Y-1]>O;)--Y;(W||Y<j)&&(D=D.slice(W,Y),j=Y-W);var rt=new Array(j+1),Q;for(l=0;l<=j;++l)Q=rt[l]=[],Q.x0=l>0?D[l-1]:S,Q.x1=l<j?D[l]:O;if(isFinite(_)){if(_>0)for(l=0;l<h;++l)(g=b[l])!=null&&S<=g&&g<=O&&rt[Math.min(j,Math.floor((g-S)/_))].push(u[l]);else if(_<0){for(l=0;l<h;++l)if((g=b[l])!=null&&S<=g&&g<=O){const G=Math.floor((S-g)*_);rt[Math.min(j,G+(D[G]<=g))].push(u[l])}}}else for(l=0;l<h;++l)(g=b[l])!=null&&S<=g&&g<=O&&rt[Nn(D,g,0,j)].push(u[l]);return rt}return s.value=function(u){return arguments.length?(e=typeof u=="function"?u:$n(u),s):e},s.domain=function(u){return arguments.length?(i=typeof u=="function"?u:$n([u[0],u[1]]),s):i},s.thresholds=function(u){return arguments.length?(o=typeof u=="function"?u:$n(Array.isArray(u)?cy.call(u):u),s):o},s}function ly(e,i,o){const s=ke(e),u=Dn(e,.75)-Dn(e,.25);return s&&u?Math.ceil((o-i)/(2*u*Math.pow(s,-1/3))):1}function hy(e,i,o){const s=ke(e),u=aa(e);return s&&u?Math.ceil((o-i)*Math.cbrt(s)/(3.49*u)):1}function dy(e,i){const o=new ha;if(i===void 0)for(let l of e)l!=null&&l>=l&&o.set(l,(o.get(l)||0)+1);else{let l=-1;for(let h of e)(h=i(h,++l,e))!=null&&h>=h&&o.set(h,(o.get(h)||0)+1)}let s,u=0;for(const[l,h]of o)h>u&&(u=h,s=l);return s}function vy(e,i=py){const o=[];let s,u=!1;for(const l of e)u&&o.push(i(s,l)),s=l,u=!0;return o}function py(e,i){return[e,i]}function gy(e,i=lt){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let o=Array.from(e);const s=new Float64Array(o.length);i.length!==2&&(o=o.map(i),i=lt);const u=(g,_)=>i(o[g],o[_]);let l,h;return e=Uint32Array.from(o,(g,_)=>_),e.sort(i===lt?(g,_)=>lg(o[g],o[_]):hg(u)),e.forEach((g,_)=>{const b=u(g,l===void 0?g:l);b>=0?((l===void 0||b>0)&&(l=g,h=_),s[g]=h):s[g]=NaN}),s}function yy(e,i=lt){let o,s=!1;if(i.length===1){let u;for(const l of e){const h=i(l);(s?lt(h,u)<0:lt(h,h)===0)&&(o=l,u=h,s=!0)}}else for(const u of e)(s?i(u,o)<0:i(u,u)===0)&&(o=u,s=!0);return o}function ga(e,i=lt){if(i.length===1)return oa(e,i);let o,s=-1,u=-1;for(const l of e)++u,(s<0?i(l,l)===0:i(l,o)<0)&&(o=l,s=u);return s}function _y(e,i=lt){if(i.length===1)return sa(e,i);let o,s=-1,u=-1;for(const l of e)++u,(s<0?i(l,l)===0:i(l,o)>0)&&(o=l,s=u);return s}function my(e,i){const o=ga(e,i);return o<0?void 0:o}const wy=ya(Math.random);function ya(e){return function(o,s=0,u=o.length){let l=u-(s=+s);for(;l;){const h=e()*l--|0,g=o[l+s];o[l+s]=o[h+s],o[h+s]=g}return o}}function _a(e){if(!(l=e.length))return[];for(var i=-1,o=ua(e,by),s=new Array(o);++i<o;)for(var u=-1,l,h=s[i]=new Array(l);++u<l;)h[u]=e[u][i];return s}function by(e){return e.length}function xy(){return _a(arguments)}function Ey(e,i){if(typeof i!="function")throw new TypeError("test is not a function");let o=-1;for(const s of e)if(!i(s,++o,e))return!1;return!0}function Ay(e,i){if(typeof i!="function")throw new TypeError("test is not a function");let o=-1;for(const s of e)if(i(s,++o,e))return!0;return!1}function Ty(e,i){if(typeof i!="function")throw new TypeError("test is not a function");const o=[];let s=-1;for(const u of e)i(u,++s,e)&&o.push(u);return o}function My(e,i){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof i!="function")throw new TypeError("mapper is not a function");return Array.from(e,(o,s)=>i(o,s,e))}function Sy(e,i,o){if(typeof i!="function")throw new TypeError("reducer is not a function");const s=e[Symbol.iterator]();let u,l,h=-1;if(arguments.length<3){if({done:u,value:o}=s.next(),u)return;++h}for(;{done:u,value:l}=s.next(),!u;)o=i(o,l,++h,e);return o}function Cy(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function Oy(e,...i){e=new Bn(e);for(const o of i)for(const s of o)e.delete(s);return e}function Py(e,i){const o=i[Symbol.iterator](),s=new Bn;for(const u of e){if(s.has(u))return!1;let l,h;for(;({value:l,done:h}=o.next())&&!h;){if(Object.is(u,l))return!1;s.add(l)}}return!0}function ma(e,i){const o=e[Symbol.iterator](),s=new Set;for(const u of i){const l=Wi(u);if(s.has(l))continue;let h,g;for(;{value:h,done:g}=o.next();){if(g)return!1;const _=Wi(h);if(s.add(_),Object.is(l,_))break}}return!0}function Wi(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Iy(e,i){return ma(i,e)}const $y=Object.freeze(Object.defineProperty({__proto__:null,Adder:Lg,InternMap:ha,InternSet:Bn,ascending:lt,bin:Ki,bisect:Nn,bisectCenter:sg,bisectLeft:ug,bisectRight:Nn,bisector:fg,blur:Jg,blur2:Qg,blurImage:Gg,count:ke,cross:oy,cumsum:sy,descending:cg,deviation:aa,difference:Oy,disjoint:Py,every:Ey,extent:Ce,fcumsum:Dg,filter:Ty,flatGroup:kg,flatRollup:zg,fsum:Rg,greatest:dg,greatestIndex:_y,group:ca,groupSort:uy,groups:Ug,histogram:Ki,index:jg,indexes:Vg,intersection:vg,least:yy,leastIndex:ga,map:My,max:pg,maxIndex:sa,mean:gg,median:yg,medianIndex:_g,merge:mg,min:ua,minIndex:oa,mode:dy,nice:va,pairs:vy,permute:wg,quantile:Dn,quantileIndex:bg,quantileSorted:xg,quickselect:Eg,range:Wg,rank:gy,reduce:Sy,reverse:Cy,rollup:fa,rollups:Bg,scan:my,shuffle:wy,shuffler:ya,some:Ay,sort:Ln,subset:Iy,sum:Ag,superset:ma,thresholdFreedmanDiaconis:ly,thresholdScott:hy,thresholdSturges:pa,tickIncrement:$e,tickStep:qg,ticks:la,transpose:_a,union:Tg,variance:Mg,zip:xy},Symbol.toStringTag,{value:"Module"}));function Yi(e,i,o){var s=new Sg;return i=i==null?0:+i,s.restart(function(u){s.stop(),e(u+i)},i,o),s}var Rn={exports:{}};const Ny=Dt($y);var ct="$";function Ne(){}Ne.prototype=te.prototype={constructor:Ne,has:function(e){return ct+e in this},get:function(e){return this[ct+e]},set:function(e,i){return this[ct+e]=i,this},remove:function(e){var i=ct+e;return i in this&&delete this[i]},clear:function(){for(var e in this)e[0]===ct&&delete this[e]},keys:function(){var e=[];for(var i in this)i[0]===ct&&e.push(i.slice(1));return e},values:function(){var e=[];for(var i in this)i[0]===ct&&e.push(this[i]);return e},entries:function(){var e=[];for(var i in this)i[0]===ct&&e.push({key:i.slice(1),value:this[i]});return e},size:function(){var e=0;for(var i in this)i[0]===ct&&++e;return e},empty:function(){for(var e in this)if(e[0]===ct)return!1;return!0},each:function(e){for(var i in this)i[0]===ct&&e(this[i],i.slice(1),this)}};function te(e,i){var o=new Ne;if(e instanceof Ne)e.each(function(g,_){o.set(_,g)});else if(Array.isArray(e)){var s=-1,u=e.length,l;if(i==null)for(;++s<u;)o.set(s,e[s]);else for(;++s<u;)o.set(i(l=e[s],s,e),l)}else if(e)for(var h in e)o.set(h,e[h]);return o}function Ly(){var e=[],i=[],o,s,u;function l(g,_,b,T){if(_>=e.length)return o!=null&&g.sort(o),s!=null?s(g):g;for(var S=-1,O=g.length,D=e[_++],j,W,Y=te(),rt,Q=b();++S<O;)(rt=Y.get(j=D(W=g[S])+""))?rt.push(W):Y.set(j,[W]);return Y.each(function(G,ot){T(Q,ot,l(G,_,b,T))}),Q}function h(g,_){if(++_>e.length)return g;var b,T=i[_-1];return s!=null&&_>=e.length?b=g.entries():(b=[],g.each(function(S,O){b.push({key:O,values:h(S,_)})})),T!=null?b.sort(function(S,O){return T(S.key,O.key)}):b}return u={object:function(g){return l(g,0,Dy,Ry)},map:function(g){return l(g,0,Zi,Xi)},entries:function(g){return h(l(g,0,Zi,Xi),0)},key:function(g){return e.push(g),u},sortKeys:function(g){return i[e.length-1]=g,u},sortValues:function(g){return o=g,u},rollup:function(g){return s=g,u}}}function Dy(){return{}}function Ry(e,i,o){e[i]=o}function Zi(){return te()}function Xi(e,i,o){e.set(i,o)}function Le(){}var Nt=te.prototype;Le.prototype=wa.prototype={constructor:Le,has:Nt.has,add:function(e){return e+="",this[ct+e]=e,this},remove:Nt.remove,clear:Nt.clear,values:Nt.keys,size:Nt.size,empty:Nt.empty,each:Nt.each};function wa(e,i){var o=new Le;if(e instanceof Le)e.each(function(l){o.add(l)});else if(e){var s=-1,u=e.length;if(i==null)for(;++s<u;)o.add(e[s]);else for(;++s<u;)o.add(i(e[s],s,e))}return o}function Fy(e){var i=[];for(var o in e)i.push(o);return i}function ky(e){var i=[];for(var o in e)i.push(e[o]);return i}function zy(e){var i=[];for(var o in e)i.push({key:o,value:e[o]});return i}const Uy=Object.freeze(Object.defineProperty({__proto__:null,entries:zy,keys:Fy,map:te,nest:Ly,set:wa,values:ky},Symbol.toStringTag,{value:"Module"})),jy=Dt(Uy),Vy=Dt(Cg);var Fn="http://www.w3.org/1999/xhtml";const kn={svg:"http://www.w3.org/2000/svg",xhtml:Fn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ee(e){var i=e+="",o=i.indexOf(":");return o>=0&&(i=e.slice(0,o))!=="xmlns"&&(e=e.slice(o+1)),kn.hasOwnProperty(i)?{space:kn[i],local:e}:e}function By(e){return function(){var i=this.ownerDocument,o=this.namespaceURI;return o===Fn&&i.documentElement.namespaceURI===Fn?i.createElement(e):i.createElementNS(o,e)}}function qy(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ze(e){var i=ee(e);return(i.local?qy:By)(i)}function Hy(){}function Ue(e){return e==null?Hy:function(){return this.querySelector(e)}}function Ky(e){typeof e!="function"&&(e=Ue(e));for(var i=this._groups,o=i.length,s=new Array(o),u=0;u<o;++u)for(var l=i[u],h=l.length,g=s[u]=new Array(h),_,b,T=0;T<h;++T)(_=l[T])&&(b=e.call(_,_.__data__,T,l))&&("__data__"in _&&(b.__data__=_.__data__),g[T]=b);return new at(s,this._parents)}function ba(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Wy(){return[]}function Hn(e){return e==null?Wy:function(){return this.querySelectorAll(e)}}function Yy(e){return function(){return ba(e.apply(this,arguments))}}function Zy(e){typeof e=="function"?e=Yy(e):e=Hn(e);for(var i=this._groups,o=i.length,s=[],u=[],l=0;l<o;++l)for(var h=i[l],g=h.length,_,b=0;b<g;++b)(_=h[b])&&(s.push(e.call(_,_.__data__,b,h)),u.push(_));return new at(s,u)}function Kn(e){return function(){return this.matches(e)}}function xa(e){return function(i){return i.matches(e)}}var Xy=Array.prototype.find;function Jy(e){return function(){return Xy.call(this.children,e)}}function Qy(){return this.firstElementChild}function Gy(e){return this.select(e==null?Qy:Jy(typeof e=="function"?e:xa(e)))}var t_=Array.prototype.filter;function e_(){return Array.from(this.children)}function n_(e){return function(){return t_.call(this.children,e)}}function r_(e){return this.selectAll(e==null?e_:n_(typeof e=="function"?e:xa(e)))}function i_(e){typeof e!="function"&&(e=Kn(e));for(var i=this._groups,o=i.length,s=new Array(o),u=0;u<o;++u)for(var l=i[u],h=l.length,g=s[u]=[],_,b=0;b<h;++b)(_=l[b])&&e.call(_,_.__data__,b,l)&&g.push(_);return new at(s,this._parents)}function Ea(e){return new Array(e.length)}function a_(){return new at(this._enter||this._groups.map(Ea),this._parents)}function De(e,i){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=i}De.prototype={constructor:De,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,i){return this._parent.insertBefore(e,i)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function o_(e){return function(){return e}}function s_(e,i,o,s,u,l){for(var h=0,g,_=i.length,b=l.length;h<b;++h)(g=i[h])?(g.__data__=l[h],s[h]=g):o[h]=new De(e,l[h]);for(;h<_;++h)(g=i[h])&&(u[h]=g)}function u_(e,i,o,s,u,l,h){var g,_,b=new Map,T=i.length,S=l.length,O=new Array(T),D;for(g=0;g<T;++g)(_=i[g])&&(O[g]=D=h.call(_,_.__data__,g,i)+"",b.has(D)?u[g]=_:b.set(D,_));for(g=0;g<S;++g)D=h.call(e,l[g],g,l)+"",(_=b.get(D))?(s[g]=_,_.__data__=l[g],b.delete(D)):o[g]=new De(e,l[g]);for(g=0;g<T;++g)(_=i[g])&&b.get(O[g])===_&&(u[g]=_)}function f_(e){return e.__data__}function c_(e,i){if(!arguments.length)return Array.from(this,f_);var o=i?u_:s_,s=this._parents,u=this._groups;typeof e!="function"&&(e=o_(e));for(var l=u.length,h=new Array(l),g=new Array(l),_=new Array(l),b=0;b<l;++b){var T=s[b],S=u[b],O=S.length,D=l_(e.call(T,T&&T.__data__,b,s)),j=D.length,W=g[b]=new Array(j),Y=h[b]=new Array(j),rt=_[b]=new Array(O);o(T,S,W,Y,rt,D,i);for(var Q=0,G=0,ot,Z;Q<j;++Q)if(ot=W[Q]){for(Q>=G&&(G=Q+1);!(Z=Y[G])&&++G<j;);ot._next=Z||null}}return h=new at(h,s),h._enter=g,h._exit=_,h}function l_(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function h_(){return new at(this._exit||this._groups.map(Ea),this._parents)}function d_(e,i,o){var s=this.enter(),u=this,l=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),i!=null&&(u=i(u),u&&(u=u.selection())),o==null?l.remove():o(l),s&&u?s.merge(u).order():u}function v_(e){for(var i=e.selection?e.selection():e,o=this._groups,s=i._groups,u=o.length,l=s.length,h=Math.min(u,l),g=new Array(u),_=0;_<h;++_)for(var b=o[_],T=s[_],S=b.length,O=g[_]=new Array(S),D,j=0;j<S;++j)(D=b[j]||T[j])&&(O[j]=D);for(;_<u;++_)g[_]=o[_];return new at(g,this._parents)}function p_(){for(var e=this._groups,i=-1,o=e.length;++i<o;)for(var s=e[i],u=s.length-1,l=s[u],h;--u>=0;)(h=s[u])&&(l&&h.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(h,l),l=h);return this}function g_(e){e||(e=y_);function i(S,O){return S&&O?e(S.__data__,O.__data__):!S-!O}for(var o=this._groups,s=o.length,u=new Array(s),l=0;l<s;++l){for(var h=o[l],g=h.length,_=u[l]=new Array(g),b,T=0;T<g;++T)(b=h[T])&&(_[T]=b);_.sort(i)}return new at(u,this._parents).order()}function y_(e,i){return e<i?-1:e>i?1:e>=i?0:NaN}function __(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function m_(){return Array.from(this)}function w_(){for(var e=this._groups,i=0,o=e.length;i<o;++i)for(var s=e[i],u=0,l=s.length;u<l;++u){var h=s[u];if(h)return h}return null}function b_(){let e=0;for(const i of this)++e;return e}function x_(){return!this.node()}function E_(e){for(var i=this._groups,o=0,s=i.length;o<s;++o)for(var u=i[o],l=0,h=u.length,g;l<h;++l)(g=u[l])&&e.call(g,g.__data__,l,u);return this}function A_(e){return function(){this.removeAttribute(e)}}function T_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function M_(e,i){return function(){this.setAttribute(e,i)}}function S_(e,i){return function(){this.setAttributeNS(e.space,e.local,i)}}function C_(e,i){return function(){var o=i.apply(this,arguments);o==null?this.removeAttribute(e):this.setAttribute(e,o)}}function O_(e,i){return function(){var o=i.apply(this,arguments);o==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,o)}}function P_(e,i){var o=ee(e);if(arguments.length<2){var s=this.node();return o.local?s.getAttributeNS(o.space,o.local):s.getAttribute(o)}return this.each((i==null?o.local?T_:A_:typeof i=="function"?o.local?O_:C_:o.local?S_:M_)(o,i))}function Wn(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function I_(e){return function(){this.style.removeProperty(e)}}function $_(e,i,o){return function(){this.style.setProperty(e,i,o)}}function N_(e,i,o){return function(){var s=i.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,o)}}function L_(e,i,o){return arguments.length>1?this.each((i==null?I_:typeof i=="function"?N_:$_)(e,i,o??"")):Lt(this.node(),e)}function Lt(e,i){return e.style.getPropertyValue(i)||Wn(e).getComputedStyle(e,null).getPropertyValue(i)}function D_(e){return function(){delete this[e]}}function R_(e,i){return function(){this[e]=i}}function F_(e,i){return function(){var o=i.apply(this,arguments);o==null?delete this[e]:this[e]=o}}function k_(e,i){return arguments.length>1?this.each((i==null?D_:typeof i=="function"?F_:R_)(e,i)):this.node()[e]}function Aa(e){return e.trim().split(/^|\s+/)}function Yn(e){return e.classList||new Ta(e)}function Ta(e){this._node=e,this._names=Aa(e.getAttribute("class")||"")}Ta.prototype={add:function(e){var i=this._names.indexOf(e);i<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var i=this._names.indexOf(e);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ma(e,i){for(var o=Yn(e),s=-1,u=i.length;++s<u;)o.add(i[s])}function Sa(e,i){for(var o=Yn(e),s=-1,u=i.length;++s<u;)o.remove(i[s])}function z_(e){return function(){Ma(this,e)}}function U_(e){return function(){Sa(this,e)}}function j_(e,i){return function(){(i.apply(this,arguments)?Ma:Sa)(this,e)}}function V_(e,i){var o=Aa(e+"");if(arguments.length<2){for(var s=Yn(this.node()),u=-1,l=o.length;++u<l;)if(!s.contains(o[u]))return!1;return!0}return this.each((typeof i=="function"?j_:i?z_:U_)(o,i))}function B_(){this.textContent=""}function q_(e){return function(){this.textContent=e}}function H_(e){return function(){var i=e.apply(this,arguments);this.textContent=i??""}}function K_(e){return arguments.length?this.each(e==null?B_:(typeof e=="function"?H_:q_)(e)):this.node().textContent}function W_(){this.innerHTML=""}function Y_(e){return function(){this.innerHTML=e}}function Z_(e){return function(){var i=e.apply(this,arguments);this.innerHTML=i??""}}function X_(e){return arguments.length?this.each(e==null?W_:(typeof e=="function"?Z_:Y_)(e)):this.node().innerHTML}function J_(){this.nextSibling&&this.parentNode.appendChild(this)}function Q_(){return this.each(J_)}function G_(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tm(){return this.each(G_)}function em(e){var i=typeof e=="function"?e:ze(e);return this.select(function(){return this.appendChild(i.apply(this,arguments))})}function nm(){return null}function rm(e,i){var o=typeof e=="function"?e:ze(e),s=i==null?nm:typeof i=="function"?i:Ue(i);return this.select(function(){return this.insertBefore(o.apply(this,arguments),s.apply(this,arguments)||null)})}function im(){var e=this.parentNode;e&&e.removeChild(this)}function am(){return this.each(im)}function om(){var e=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(e,this.nextSibling):e}function sm(){var e=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(e,this.nextSibling):e}function um(e){return this.select(e?sm:om)}function fm(e){return arguments.length?this.property("__data__",e):this.node().__data__}function cm(e){return function(i){e.call(this,i,this.__data__)}}function lm(e){return e.trim().split(/^|\s+/).map(function(i){var o="",s=i.indexOf(".");return s>=0&&(o=i.slice(s+1),i=i.slice(0,s)),{type:i,name:o}})}function hm(e){return function(){var i=this.__on;if(i){for(var o=0,s=-1,u=i.length,l;o<u;++o)l=i[o],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):i[++s]=l;++s?i.length=s:delete this.__on}}}function dm(e,i,o){return function(){var s=this.__on,u,l=cm(i);if(s){for(var h=0,g=s.length;h<g;++h)if((u=s[h]).type===e.type&&u.name===e.name){this.removeEventListener(u.type,u.listener,u.options),this.addEventListener(u.type,u.listener=l,u.options=o),u.value=i;return}}this.addEventListener(e.type,l,o),u={type:e.type,name:e.name,value:i,listener:l,options:o},s?s.push(u):this.__on=[u]}}function vm(e,i,o){var s=lm(e+""),u,l=s.length,h;if(arguments.length<2){var g=this.node().__on;if(g){for(var _=0,b=g.length,T;_<b;++_)for(u=0,T=g[_];u<l;++u)if((h=s[u]).type===T.type&&h.name===T.name)return T.value}return}for(g=i?dm:hm,u=0;u<l;++u)this.each(g(s[u],i,o));return this}function Ca(e,i,o){var s=Wn(e),u=s.CustomEvent;typeof u=="function"?u=new u(i,o):(u=s.document.createEvent("Event"),o?(u.initEvent(i,o.bubbles,o.cancelable),u.detail=o.detail):u.initEvent(i,!1,!1)),e.dispatchEvent(u)}function pm(e,i){return function(){return Ca(this,e,i)}}function gm(e,i){return function(){return Ca(this,e,i.apply(this,arguments))}}function ym(e,i){return this.each((typeof i=="function"?gm:pm)(e,i))}function*_m(){for(var e=this._groups,i=0,o=e.length;i<o;++i)for(var s=e[i],u=0,l=s.length,h;u<l;++u)(h=s[u])&&(yield h)}var Zn=[null];function at(e,i){this._groups=e,this._parents=i}function Rt(){return new at([[document.documentElement]],Zn)}function mm(){return this}at.prototype=Rt.prototype={constructor:at,select:Ky,selectAll:Zy,selectChild:Gy,selectChildren:r_,filter:i_,data:c_,enter:a_,exit:h_,join:d_,merge:v_,selection:mm,order:p_,sort:g_,call:__,nodes:m_,node:w_,size:b_,empty:x_,each:E_,attr:P_,style:L_,property:k_,classed:V_,text:K_,html:X_,raise:Q_,lower:tm,append:em,insert:rm,remove:am,clone:um,datum:fm,on:vm,dispatch:ym,[Symbol.iterator]:_m};function Xn(e){return typeof e=="string"?new at([[document.querySelector(e)]],[document.documentElement]):new at([[e]],Zn)}function wm(e){return Xn(ze(e).call(document.documentElement))}var bm=0;function Oa(){return new zn}function zn(){this._="@"+(++bm).toString(36)}zn.prototype=Oa.prototype={constructor:zn,get:function(e){for(var i=this._;!(i in e);)if(!(e=e.parentNode))return;return e[i]},set:function(e,i){return e[this._]=i},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};function Pa(e){let i;for(;i=e.sourceEvent;)e=i;return e}function Ia(e,i){if(e=Pa(e),i===void 0&&(i=e.currentTarget),i){var o=i.ownerSVGElement||i;if(o.createSVGPoint){var s=o.createSVGPoint();return s.x=e.clientX,s.y=e.clientY,s=s.matrixTransform(i.getScreenCTM().inverse()),[s.x,s.y]}if(i.getBoundingClientRect){var u=i.getBoundingClientRect();return[e.clientX-u.left-i.clientLeft,e.clientY-u.top-i.clientTop]}}return[e.pageX,e.pageY]}function xm(e,i){return e.target&&(e=Pa(e),i===void 0&&(i=e.currentTarget),e=e.touches||[e]),Array.from(e,o=>Ia(o,i))}function Em(e){return typeof e=="string"?new at([document.querySelectorAll(e)],[document.documentElement]):new at([ba(e)],Zn)}const Am=Object.freeze(Object.defineProperty({__proto__:null,create:wm,creator:ze,local:Oa,matcher:Kn,namespace:ee,namespaces:kn,pointer:Ia,pointers:xm,select:Xn,selectAll:Em,selection:Rt,selector:Ue,selectorAll:Hn,style:Lt,window:Wn},Symbol.toStringTag,{value:"Module"})),Tm=Dt(Am);var Mm=Og("start","end","cancel","interrupt"),Sm=[],$a=0,Un=1,jn=2,Oe=3,Ji=4,Vn=5,Pe=6;function je(e,i,o,s,u,l){var h=e.__transition;if(!h)e.__transition={};else if(o in h)return;Cm(e,o,{name:i,index:s,group:u,on:Mm,tween:Sm,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:$a})}function Jn(e,i){var o=vt(e,i);if(o.state>$a)throw new Error("too late; already scheduled");return o}function _t(e,i){var o=vt(e,i);if(o.state>Oe)throw new Error("too late; already running");return o}function vt(e,i){var o=e.__transition;if(!o||!(o=o[i]))throw new Error("transition not found");return o}function Cm(e,i,o){var s=e.__transition,u;s[i]=o,o.timer=Pg(l,0,o.time);function l(b){o.state=Un,o.timer.restart(h,o.delay,o.time),o.delay<=b&&h(b-o.delay)}function h(b){var T,S,O,D;if(o.state!==Un)return _();for(T in s)if(D=s[T],D.name===o.name){if(D.state===Oe)return Yi(h);D.state===Ji?(D.state=Pe,D.timer.stop(),D.on.call("interrupt",e,e.__data__,D.index,D.group),delete s[T]):+T<i&&(D.state=Pe,D.timer.stop(),D.on.call("cancel",e,e.__data__,D.index,D.group),delete s[T])}if(Yi(function(){o.state===Oe&&(o.state=Ji,o.timer.restart(g,o.delay,o.time),g(b))}),o.state=jn,o.on.call("start",e,e.__data__,o.index,o.group),o.state===jn){for(o.state=Oe,u=new Array(O=o.tween.length),T=0,S=-1;T<O;++T)(D=o.tween[T].value.call(e,e.__data__,o.index,o.group))&&(u[++S]=D);u.length=S+1}}function g(b){for(var T=b<o.duration?o.ease.call(null,b/o.duration):(o.timer.restart(_),o.state=Vn,1),S=-1,O=u.length;++S<O;)u[S].call(e,T);o.state===Vn&&(o.on.call("end",e,e.__data__,o.index,o.group),_())}function _(){o.state=Pe,o.timer.stop(),delete s[i];for(var b in s)return;delete e.__transition}}function Na(e,i){var o=e.__transition,s,u,l=!0,h;if(o){i=i==null?null:i+"";for(h in o){if((s=o[h]).name!==i){l=!1;continue}u=s.state>jn&&s.state<Vn,s.state=Pe,s.timer.stop(),s.on.call(u?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete o[h]}l&&delete e.__transition}}function Om(e){return this.each(function(){Na(this,e)})}function Pm(e,i){var o,s;return function(){var u=_t(this,e),l=u.tween;if(l!==o){s=o=l;for(var h=0,g=s.length;h<g;++h)if(s[h].name===i){s=s.slice(),s.splice(h,1);break}}u.tween=s}}function Im(e,i,o){var s,u;if(typeof o!="function")throw new Error;return function(){var l=_t(this,e),h=l.tween;if(h!==s){u=(s=h).slice();for(var g={name:i,value:o},_=0,b=u.length;_<b;++_)if(u[_].name===i){u[_]=g;break}_===b&&u.push(g)}l.tween=u}}function $m(e,i){var o=this._id;if(e+="",arguments.length<2){for(var s=vt(this.node(),o).tween,u=0,l=s.length,h;u<l;++u)if((h=s[u]).name===e)return h.value;return null}return this.each((i==null?Pm:Im)(o,e,i))}function Qn(e,i,o){var s=e._id;return e.each(function(){var u=_t(this,s);(u.value||(u.value={}))[i]=o.apply(this,arguments)}),function(u){return vt(u,s).value[i]}}function La(e,i){var o;return(typeof i=="number"?Hg:i instanceof Hi?qi:(o=Hi(i))?(i=o,qi):Kg)(e,i)}function Nm(e){return function(){this.removeAttribute(e)}}function Lm(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Dm(e,i,o){var s,u=o+"",l;return function(){var h=this.getAttribute(e);return h===u?null:h===s?l:l=i(s=h,o)}}function Rm(e,i,o){var s,u=o+"",l;return function(){var h=this.getAttributeNS(e.space,e.local);return h===u?null:h===s?l:l=i(s=h,o)}}function Fm(e,i,o){var s,u,l;return function(){var h,g=o(this),_;return g==null?void this.removeAttribute(e):(h=this.getAttribute(e),_=g+"",h===_?null:h===s&&_===u?l:(u=_,l=i(s=h,g)))}}function km(e,i,o){var s,u,l;return function(){var h,g=o(this),_;return g==null?void this.removeAttributeNS(e.space,e.local):(h=this.getAttributeNS(e.space,e.local),_=g+"",h===_?null:h===s&&_===u?l:(u=_,l=i(s=h,g)))}}function zm(e,i){var o=ee(e),s=o==="transform"?Ig:La;return this.attrTween(e,typeof i=="function"?(o.local?km:Fm)(o,s,Qn(this,"attr."+e,i)):i==null?(o.local?Lm:Nm)(o):(o.local?Rm:Dm)(o,s,i))}function Um(e,i){return function(o){this.setAttribute(e,i.call(this,o))}}function jm(e,i){return function(o){this.setAttributeNS(e.space,e.local,i.call(this,o))}}function Vm(e,i){var o,s;function u(){var l=i.apply(this,arguments);return l!==s&&(o=(s=l)&&jm(e,l)),o}return u._value=i,u}function Bm(e,i){var o,s;function u(){var l=i.apply(this,arguments);return l!==s&&(o=(s=l)&&Um(e,l)),o}return u._value=i,u}function qm(e,i){var o="attr."+e;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(i==null)return this.tween(o,null);if(typeof i!="function")throw new Error;var s=ee(e);return this.tween(o,(s.local?Vm:Bm)(s,i))}function Hm(e,i){return function(){Jn(this,e).delay=+i.apply(this,arguments)}}function Km(e,i){return i=+i,function(){Jn(this,e).delay=i}}function Wm(e){var i=this._id;return arguments.length?this.each((typeof e=="function"?Hm:Km)(i,e)):vt(this.node(),i).delay}function Ym(e,i){return function(){_t(this,e).duration=+i.apply(this,arguments)}}function Zm(e,i){return i=+i,function(){_t(this,e).duration=i}}function Xm(e){var i=this._id;return arguments.length?this.each((typeof e=="function"?Ym:Zm)(i,e)):vt(this.node(),i).duration}function Jm(e,i){if(typeof i!="function")throw new Error;return function(){_t(this,e).ease=i}}function Qm(e){var i=this._id;return arguments.length?this.each(Jm(i,e)):vt(this.node(),i).ease}function Gm(e,i){return function(){var o=i.apply(this,arguments);if(typeof o!="function")throw new Error;_t(this,e).ease=o}}function t0(e){if(typeof e!="function")throw new Error;return this.each(Gm(this._id,e))}function e0(e){typeof e!="function"&&(e=Kn(e));for(var i=this._groups,o=i.length,s=new Array(o),u=0;u<o;++u)for(var l=i[u],h=l.length,g=s[u]=[],_,b=0;b<h;++b)(_=l[b])&&e.call(_,_.__data__,b,l)&&g.push(_);return new yt(s,this._parents,this._name,this._id)}function n0(e){if(e._id!==this._id)throw new Error;for(var i=this._groups,o=e._groups,s=i.length,u=o.length,l=Math.min(s,u),h=new Array(s),g=0;g<l;++g)for(var _=i[g],b=o[g],T=_.length,S=h[g]=new Array(T),O,D=0;D<T;++D)(O=_[D]||b[D])&&(S[D]=O);for(;g<s;++g)h[g]=i[g];return new yt(h,this._parents,this._name,this._id)}function r0(e){return(e+"").trim().split(/^|\s+/).every(function(i){var o=i.indexOf(".");return o>=0&&(i=i.slice(0,o)),!i||i==="start"})}function i0(e,i,o){var s,u,l=r0(i)?Jn:_t;return function(){var h=l(this,e),g=h.on;g!==s&&(u=(s=g).copy()).on(i,o),h.on=u}}function a0(e,i){var o=this._id;return arguments.length<2?vt(this.node(),o).on.on(e):this.each(i0(o,e,i))}function o0(e){return function(){var i=this.parentNode;for(var o in this.__transition)if(+o!==e)return;i&&i.removeChild(this)}}function s0(){return this.on("end.remove",o0(this._id))}function u0(e){var i=this._name,o=this._id;typeof e!="function"&&(e=Ue(e));for(var s=this._groups,u=s.length,l=new Array(u),h=0;h<u;++h)for(var g=s[h],_=g.length,b=l[h]=new Array(_),T,S,O=0;O<_;++O)(T=g[O])&&(S=e.call(T,T.__data__,O,g))&&("__data__"in T&&(S.__data__=T.__data__),b[O]=S,je(b[O],i,o,O,b,vt(T,o)));return new yt(l,this._parents,i,o)}function f0(e){var i=this._name,o=this._id;typeof e!="function"&&(e=Hn(e));for(var s=this._groups,u=s.length,l=[],h=[],g=0;g<u;++g)for(var _=s[g],b=_.length,T,S=0;S<b;++S)if(T=_[S]){for(var O=e.call(T,T.__data__,S,_),D,j=vt(T,o),W=0,Y=O.length;W<Y;++W)(D=O[W])&&je(D,i,o,W,O,j);l.push(O),h.push(T)}return new yt(l,h,i,o)}var c0=Rt.prototype.constructor;function l0(){return new c0(this._groups,this._parents)}function h0(e,i){var o,s,u;return function(){var l=Lt(this,e),h=(this.style.removeProperty(e),Lt(this,e));return l===h?null:l===o&&h===s?u:u=i(o=l,s=h)}}function Da(e){return function(){this.style.removeProperty(e)}}function d0(e,i,o){var s,u=o+"",l;return function(){var h=Lt(this,e);return h===u?null:h===s?l:l=i(s=h,o)}}function v0(e,i,o){var s,u,l;return function(){var h=Lt(this,e),g=o(this),_=g+"";return g==null&&(_=g=(this.style.removeProperty(e),Lt(this,e))),h===_?null:h===s&&_===u?l:(u=_,l=i(s=h,g))}}function p0(e,i){var o,s,u,l="style."+i,h="end."+l,g;return function(){var _=_t(this,e),b=_.on,T=_.value[l]==null?g||(g=Da(i)):void 0;(b!==o||u!==T)&&(s=(o=b).copy()).on(h,u=T),_.on=s}}function g0(e,i,o){var s=(e+="")=="transform"?$g:La;return i==null?this.styleTween(e,h0(e,s)).on("end.style."+e,Da(e)):typeof i=="function"?this.styleTween(e,v0(e,s,Qn(this,"style."+e,i))).each(p0(this._id,e)):this.styleTween(e,d0(e,s,i),o).on("end.style."+e,null)}function y0(e,i,o){return function(s){this.style.setProperty(e,i.call(this,s),o)}}function _0(e,i,o){var s,u;function l(){var h=i.apply(this,arguments);return h!==u&&(s=(u=h)&&y0(e,h,o)),s}return l._value=i,l}function m0(e,i,o){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(i==null)return this.tween(s,null);if(typeof i!="function")throw new Error;return this.tween(s,_0(e,i,o??""))}function w0(e){return function(){this.textContent=e}}function b0(e){return function(){var i=e(this);this.textContent=i??""}}function x0(e){return this.tween("text",typeof e=="function"?b0(Qn(this,"text",e)):w0(e==null?"":e+""))}function E0(e){return function(i){this.textContent=e.call(this,i)}}function A0(e){var i,o;function s(){var u=e.apply(this,arguments);return u!==o&&(i=(o=u)&&E0(u)),i}return s._value=e,s}function T0(e){var i="text";if(arguments.length<1)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,A0(e))}function M0(){for(var e=this._name,i=this._id,o=Fa(),s=this._groups,u=s.length,l=0;l<u;++l)for(var h=s[l],g=h.length,_,b=0;b<g;++b)if(_=h[b]){var T=vt(_,i);je(_,e,o,b,h,{time:T.time+T.delay+T.duration,delay:0,duration:T.duration,ease:T.ease})}return new yt(s,this._parents,e,o)}function S0(){var e,i,o=this,s=o._id,u=o.size();return new Promise(function(l,h){var g={value:h},_={value:function(){--u===0&&l()}};o.each(function(){var b=_t(this,s),T=b.on;T!==e&&(i=(e=T).copy(),i._.cancel.push(g),i._.interrupt.push(g),i._.end.push(_)),b.on=i}),u===0&&l()})}var C0=0;function yt(e,i,o,s){this._groups=e,this._parents=i,this._name=o,this._id=s}function Ra(e){return Rt().transition(e)}function Fa(){return++C0}var bt=Rt.prototype;yt.prototype=Ra.prototype={constructor:yt,select:u0,selectAll:f0,selectChild:bt.selectChild,selectChildren:bt.selectChildren,filter:e0,merge:n0,selection:l0,transition:M0,call:bt.call,nodes:bt.nodes,node:bt.node,size:bt.size,empty:bt.empty,each:bt.each,on:a0,attr:zm,attrTween:qm,style:g0,styleTween:m0,text:x0,textTween:T0,remove:s0,tween:$m,delay:Wm,duration:Xm,ease:Qm,easeVarying:t0,end:S0,[Symbol.iterator]:bt[Symbol.iterator]};function O0(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var P0={time:null,delay:0,duration:250,ease:O0};function I0(e,i){for(var o;!(o=e.__transition)||!(o=o[i]);)if(!(e=e.parentNode))throw new Error(`transition ${i} not found`);return o}function $0(e){var i,o;e instanceof yt?(i=e._id,e=e._name):(i=Fa(),(o=P0).time=Ng(),e=e==null?null:e+"");for(var s=this._groups,u=s.length,l=0;l<u;++l)for(var h=s[l],g=h.length,_,b=0;b<g;++b)(_=h[b])&&je(_,e,i,b,h,o||I0(_,i));return new yt(s,this._parents,e,i)}Rt.prototype.interrupt=Om;Rt.prototype.transition=$0;var N0=[null];function L0(e,i){var o=e.__transition,s,u;if(o){i=i==null?null:i+"";for(u in o)if((s=o[u]).state>Un&&s.name===i)return new yt([[e]],N0,i,+u)}return null}const D0=Object.freeze(Object.defineProperty({__proto__:null,active:L0,interrupt:Na,transition:Ra},Symbol.toStringTag,{value:"Module"})),R0=Dt(D0);var F0={value:()=>{}};function ka(){for(var e=0,i=arguments.length,o={},s;e<i;++e){if(!(s=arguments[e]+"")||s in o||/[\s.]/.test(s))throw new Error("illegal type: "+s);o[s]=[]}return new Ie(o)}function Ie(e){this._=e}function k0(e,i){return e.trim().split(/^|\s+/).map(function(o){var s="",u=o.indexOf(".");if(u>=0&&(s=o.slice(u+1),o=o.slice(0,u)),o&&!i.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:s}})}Ie.prototype=ka.prototype={constructor:Ie,on:function(e,i){var o=this._,s=k0(e+"",o),u,l=-1,h=s.length;if(arguments.length<2){for(;++l<h;)if((u=(e=s[l]).type)&&(u=z0(o[u],e.name)))return u;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++l<h;)if(u=(e=s[l]).type)o[u]=Qi(o[u],e.name,i);else if(i==null)for(u in o)o[u]=Qi(o[u],e.name,null);return this},copy:function(){var e={},i=this._;for(var o in i)e[o]=i[o].slice();return new Ie(e)},call:function(e,i){if((u=arguments.length-2)>0)for(var o=new Array(u),s=0,u,l;s<u;++s)o[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],s=0,u=l.length;s<u;++s)l[s].value.apply(i,o)},apply:function(e,i,o){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],u=0,l=s.length;u<l;++u)s[u].value.apply(i,o)}};function z0(e,i){for(var o=0,s=e.length,u;o<s;++o)if((u=e[o]).name===i)return u.value}function Qi(e,i,o){for(var s=0,u=e.length;s<u;++s)if(e[s].name===i){e[s]=F0,e=e.slice(0,s).concat(e.slice(s+1));break}return o!=null&&e.push({name:i,value:o}),e}const U0=Object.freeze(Object.defineProperty({__proto__:null,dispatch:ka},Symbol.toStringTag,{value:"Module"})),j0=Dt(U0);function V0(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Re(e,i){if((o=(e=i?e.toExponential(i-1):e.toExponential()).indexOf("e"))<0)return null;var o,s=e.slice(0,o);return[s.length>1?s[0]+s.slice(2):s,+e.slice(o+1)]}function Yt(e){return e=Re(Math.abs(e)),e?e[1]:NaN}function B0(e,i){return function(o,s){for(var u=o.length,l=[],h=0,g=e[0],_=0;u>0&&g>0&&(_+g+1>s&&(g=Math.max(1,s-_)),l.push(o.substring(u-=g,u+g)),!((_+=g+1)>s));)g=e[h=(h+1)%e.length];return l.reverse().join(i)}}function q0(e){return function(i){return i.replace(/[0-9]/g,function(o){return e[+o]})}}var H0=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fe(e){if(!(i=H0.exec(e)))throw new Error("invalid format: "+e);var i;return new Ve({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}Fe.prototype=Ve.prototype;function Ve(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ve.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function K0(e){t:for(var i=e.length,o=1,s=-1,u;o<i;++o)switch(e[o]){case".":s=u=o;break;case"0":s===0&&(s=o),u=o;break;default:if(!+e[o])break t;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(u+1):e}var za;function W0(e,i){var o=Re(e,i);if(!o)return e+"";var s=o[0],u=o[1],l=u-(za=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,h=s.length;return l===h?s:l>h?s+new Array(l-h+1).join("0"):l>0?s.slice(0,l)+"."+s.slice(l):"0."+new Array(1-l).join("0")+Re(e,Math.max(0,i+l-1))[0]}function Gi(e,i){var o=Re(e,i);if(!o)return e+"";var s=o[0],u=o[1];return u<0?"0."+new Array(-u).join("0")+s:s.length>u+1?s.slice(0,u+1)+"."+s.slice(u+1):s+new Array(u-s.length+2).join("0")}const ta={"%":(e,i)=>(e*100).toFixed(i),b:e=>Math.round(e).toString(2),c:e=>e+"",d:V0,e:(e,i)=>e.toExponential(i),f:(e,i)=>e.toFixed(i),g:(e,i)=>e.toPrecision(i),o:e=>Math.round(e).toString(8),p:(e,i)=>Gi(e*100,i),r:Gi,s:W0,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ea(e){return e}var na=Array.prototype.map,ra=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ua(e){var i=e.grouping===void 0||e.thousands===void 0?ea:B0(na.call(e.grouping,Number),e.thousands+""),o=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",u=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?ea:q0(na.call(e.numerals,String)),h=e.percent===void 0?"%":e.percent+"",g=e.minus===void 0?"−":e.minus+"",_=e.nan===void 0?"NaN":e.nan+"";function b(S){S=Fe(S);var O=S.fill,D=S.align,j=S.sign,W=S.symbol,Y=S.zero,rt=S.width,Q=S.comma,G=S.precision,ot=S.trim,Z=S.type;Z==="n"?(Q=!0,Z="g"):ta[Z]||(G===void 0&&(G=12),ot=!0,Z="g"),(Y||O==="0"&&D==="=")&&(Y=!0,O="0",D="=");var Be=W==="$"?o:W==="#"&&/[boxX]/.test(Z)?"0"+Z.toLowerCase():"",qe=W==="$"?s:/[%p]/.test(Z)?h:"",ne=ta[Z],He=/[defgprs%]/.test(Z);G=G===void 0?6:/[gprs]/.test(Z)?Math.max(1,Math.min(21,G)):Math.max(0,Math.min(20,G));function re(B){var mt=Be,tt=qe,ht,ie,Ft;if(Z==="c")tt=ne(B)+tt,B="";else{B=+B;var kt=B<0||1/B<0;if(B=isNaN(B)?_:ne(Math.abs(B),G),ot&&(B=K0(B)),kt&&+B==0&&j!=="+"&&(kt=!1),mt=(kt?j==="("?j:g:j==="-"||j==="("?"":j)+mt,tt=(Z==="s"?ra[8+za/3]:"")+tt+(kt&&j==="("?")":""),He){for(ht=-1,ie=B.length;++ht<ie;)if(Ft=B.charCodeAt(ht),48>Ft||Ft>57){tt=(Ft===46?u+B.slice(ht+1):B.slice(ht))+tt,B=B.slice(0,ht);break}}}Q&&!Y&&(B=i(B,1/0));var zt=mt.length+B.length+tt.length,dt=zt<rt?new Array(rt-zt+1).join(O):"";switch(Q&&Y&&(B=i(dt+B,dt.length?rt-tt.length:1/0),dt=""),D){case"<":B=mt+B+tt+dt;break;case"=":B=mt+dt+B+tt;break;case"^":B=dt.slice(0,zt=dt.length>>1)+mt+B+tt+dt.slice(zt);break;default:B=dt+mt+B+tt;break}return l(B)}return re.toString=function(){return S+""},re}function T(S,O){var D=b((S=Fe(S),S.type="f",S)),j=Math.max(-8,Math.min(8,Math.floor(Yt(O)/3)))*3,W=Math.pow(10,-j),Y=ra[8+j/3];return function(rt){return D(W*rt)+Y}}return{format:b,formatPrefix:T}}var Se,ja,Va;Ba({thousands:",",grouping:[3],currency:["$",""]});function Ba(e){return Se=Ua(e),ja=Se.format,Va=Se.formatPrefix,Se}function Y0(e){return Math.max(0,-Yt(Math.abs(e)))}function Z0(e,i){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Yt(i)/3)))*3-Yt(Math.abs(e)))}function X0(e,i){return e=Math.abs(e),i=Math.abs(i)-e,Math.max(0,Yt(i)-Yt(e))+1}const J0=Object.freeze(Object.defineProperty({__proto__:null,FormatSpecifier:Ve,get format(){return ja},formatDefaultLocale:Ba,formatLocale:Ua,get formatPrefix(){return Va},formatSpecifier:Fe,precisionFixed:Y0,precisionPrefix:Z0,precisionRound:X0},Symbol.toStringTag,{value:"Module"})),Q0=Dt(J0);(function(e,i){(function(o,s){s(i,Ny,jy,Vy,Tm,R0,j0,Q0)})(In,function(o,s,u,l,h,g,_,b){var T=typeof window<"u"?window:typeof In<"u"?In:typeof self<"u"?self:{};function S(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function O(t,n){return n={exports:{}},t(n,n.exports),n.exports}function D(){this.__data__=[],this.size=0}var j=D;function W(t,n){return t===n||t!==t&&n!==n}var Y=W;function rt(t,n){for(var r=t.length;r--;)if(Y(t[r][0],n))return r;return-1}var Q=rt,G=Array.prototype,ot=G.splice;function Z(t){var n=this.__data__,r=Q(n,t);if(r<0)return!1;var a=n.length-1;return r==a?n.pop():ot.call(n,r,1),--this.size,!0}var Be=Z;function qe(t){var n=this.__data__,r=Q(n,t);return r<0?void 0:n[r][1]}var ne=qe;function He(t){return Q(this.__data__,t)>-1}var re=He;function B(t,n){var r=this.__data__,a=Q(r,t);return a<0?(++this.size,r.push([t,n])):r[a][1]=n,this}var mt=B;function tt(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var a=t[n];this.set(a[0],a[1])}}tt.prototype.clear=j,tt.prototype.delete=Be,tt.prototype.get=ne,tt.prototype.has=re,tt.prototype.set=mt;var ht=tt;function ie(){this.__data__=new ht,this.size=0}var Ft=ie;function kt(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}var zt=kt;function dt(t){return this.__data__.get(t)}var qa=dt;function Ha(t){return this.__data__.has(t)}var Ka=Ha,Wa=typeof T=="object"&&T&&T.Object===Object&&T,Gn=Wa,Ya=typeof self=="object"&&self&&self.Object===Object&&self,Za=Gn||Ya||Function("return this")(),pt=Za,Xa=pt.Symbol,ut=Xa,tr=Object.prototype,Ja=tr.hasOwnProperty,Qa=tr.toString,Zt=ut?ut.toStringTag:void 0;function Ga(t){var n=Ja.call(t,Zt),r=t[Zt];try{t[Zt]=void 0;var a=!0}catch{}var f=Qa.call(t);return a&&(n?t[Zt]=r:delete t[Zt]),f}var to=Ga,eo=Object.prototype,no=eo.toString;function ro(t){return no.call(t)}var io=ro,ao="[object Null]",oo="[object Undefined]",er=ut?ut.toStringTag:void 0;function so(t){return t==null?t===void 0?oo:ao:er&&er in Object(t)?to(t):io(t)}var Et=so;function uo(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var At=uo,fo="[object AsyncFunction]",co="[object Function]",lo="[object GeneratorFunction]",ho="[object Proxy]";function vo(t){if(!At(t))return!1;var n=Et(t);return n==co||n==lo||n==fo||n==ho}var ae=vo,po=pt["__core-js_shared__"],Ke=po,nr=function(){var t=/[^.]+$/.exec(Ke&&Ke.keys&&Ke.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function go(t){return!!nr&&nr in t}var yo=go,_o=Function.prototype,mo=_o.toString;function wo(t){if(t!=null){try{return mo.call(t)}catch{}try{return t+""}catch{}}return""}var Tt=wo,bo=/[\\^$.*+?()[\]{}|]/g,xo=/^\[object .+?Constructor\]$/,Eo=Function.prototype,Ao=Object.prototype,To=Eo.toString,Mo=Ao.hasOwnProperty,So=RegExp("^"+To.call(Mo).replace(bo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Co(t){if(!At(t)||yo(t))return!1;var n=ae(t)?So:xo;return n.test(Tt(t))}var Oo=Co;function Po(t,n){return t?.[n]}var Io=Po;function $o(t,n){var r=Io(t,n);return Oo(r)?r:void 0}var Mt=$o,No=Mt(pt,"Map"),Xt=No,Lo=Mt(Object,"create"),Jt=Lo;function Do(){this.__data__=Jt?Jt(null):{},this.size=0}var Ro=Do;function Fo(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var ko=Fo,zo="__lodash_hash_undefined__",Uo=Object.prototype,jo=Uo.hasOwnProperty;function Vo(t){var n=this.__data__;if(Jt){var r=n[t];return r===zo?void 0:r}return jo.call(n,t)?n[t]:void 0}var Bo=Vo,qo=Object.prototype,Ho=qo.hasOwnProperty;function Ko(t){var n=this.__data__;return Jt?n[t]!==void 0:Ho.call(n,t)}var Wo=Ko,Yo="__lodash_hash_undefined__";function Zo(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Jt&&n===void 0?Yo:n,this}var Xo=Zo;function Ut(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var a=t[n];this.set(a[0],a[1])}}Ut.prototype.clear=Ro,Ut.prototype.delete=ko,Ut.prototype.get=Bo,Ut.prototype.has=Wo,Ut.prototype.set=Xo;var rr=Ut;function Jo(){this.size=0,this.__data__={hash:new rr,map:new(Xt||ht),string:new rr}}var Qo=Jo;function Go(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}var ts=Go;function es(t,n){var r=t.__data__;return ts(n)?r[typeof n=="string"?"string":"hash"]:r.map}var oe=es;function ns(t){var n=oe(this,t).delete(t);return this.size-=n?1:0,n}var rs=ns;function is(t){return oe(this,t).get(t)}var as=is;function os(t){return oe(this,t).has(t)}var ss=os;function us(t,n){var r=oe(this,t),a=r.size;return r.set(t,n),this.size+=r.size==a?0:1,this}var fs=us;function jt(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var a=t[n];this.set(a[0],a[1])}}jt.prototype.clear=Qo,jt.prototype.delete=rs,jt.prototype.get=as,jt.prototype.has=ss,jt.prototype.set=fs;var se=jt,cs=200;function ls(t,n){var r=this.__data__;if(r instanceof ht){var a=r.__data__;if(!Xt||a.length<cs-1)return a.push([t,n]),this.size=++r.size,this;r=this.__data__=new se(a)}return r.set(t,n),this.size=r.size,this}var hs=ls;function Vt(t){var n=this.__data__=new ht(t);this.size=n.size}Vt.prototype.clear=Ft,Vt.prototype.delete=zt,Vt.prototype.get=qa,Vt.prototype.has=Ka,Vt.prototype.set=hs;var Qt=Vt;function ds(t,n){for(var r=-1,a=t==null?0:t.length;++r<a&&n(t[r],r,t)!==!1;);return t}var We=ds,vs=function(){try{var t=Mt(Object,"defineProperty");return t({},"",{}),t}catch{}}(),ue=vs;function ps(t,n,r){n=="__proto__"&&ue?ue(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r}var ir=ps,gs=Object.prototype,ys=gs.hasOwnProperty;function _s(t,n,r){var a=t[n];(!(ys.call(t,n)&&Y(a,r))||r===void 0&&!(n in t))&&ir(t,n,r)}var ar=_s;function ms(t,n,r,a){var f=!r;r||(r={});for(var c=-1,d=n.length;++c<d;){var v=n[c],m=a?a(r[v],t[v],v,r,t):void 0;m===void 0&&(m=t[v]),f?ir(r,v,m):ar(r,v,m)}return r}var fe=ms;function ws(t,n){for(var r=-1,a=Array(t);++r<t;)a[r]=n(r);return a}var bs=ws;function xs(t){return t!=null&&typeof t=="object"}var gt=xs,Es="[object Arguments]";function As(t){return gt(t)&&Et(t)==Es}var or=As,sr=Object.prototype,Ts=sr.hasOwnProperty,Ms=sr.propertyIsEnumerable,Ss=or(function(){return arguments}())?or:function(t){return gt(t)&&Ts.call(t,"callee")&&!Ms.call(t,"callee")},ce=Ss,Cs=Array.isArray,et=Cs;function Os(){return!1}var Ps=Os,Bt=O(function(t,n){var r=n&&!n.nodeType&&n,a=r&&!0&&t&&!t.nodeType&&t,f=a&&a.exports===r,c=f?pt.Buffer:void 0,d=c?c.isBuffer:void 0,v=d||Ps;t.exports=v}),Is=9007199254740991,$s=/^(?:0|[1-9]\d*)$/;function Ns(t,n){var r=typeof t;return n=n??Is,!!n&&(r=="number"||r!="symbol"&&$s.test(t))&&t>-1&&t%1==0&&t<n}var ur=Ns,Ls=9007199254740991;function Ds(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Ls}var Ye=Ds,Rs="[object Arguments]",Fs="[object Array]",ks="[object Boolean]",zs="[object Date]",Us="[object Error]",js="[object Function]",Vs="[object Map]",Bs="[object Number]",qs="[object Object]",Hs="[object RegExp]",Ks="[object Set]",Ws="[object String]",Ys="[object WeakMap]",Zs="[object ArrayBuffer]",Xs="[object DataView]",Js="[object Float32Array]",Qs="[object Float64Array]",Gs="[object Int8Array]",tu="[object Int16Array]",eu="[object Int32Array]",nu="[object Uint8Array]",ru="[object Uint8ClampedArray]",iu="[object Uint16Array]",au="[object Uint32Array]",X={};X[Js]=X[Qs]=X[Gs]=X[tu]=X[eu]=X[nu]=X[ru]=X[iu]=X[au]=!0,X[Rs]=X[Fs]=X[Zs]=X[ks]=X[Xs]=X[zs]=X[Us]=X[js]=X[Vs]=X[Bs]=X[qs]=X[Hs]=X[Ks]=X[Ws]=X[Ys]=!1;function ou(t){return gt(t)&&Ye(t.length)&&!!X[Et(t)]}var su=ou;function uu(t){return function(n){return t(n)}}var Ze=uu,qt=O(function(t,n){var r=n&&!n.nodeType&&n,a=r&&!0&&t&&!t.nodeType&&t,f=a&&a.exports===r,c=f&&Gn.process,d=function(){try{var v=a&&a.require&&a.require("util").types;return v||c&&c.binding&&c.binding("util")}catch{}}();t.exports=d}),fr=qt&&qt.isTypedArray,fu=fr?Ze(fr):su,le=fu,cu=Object.prototype,lu=cu.hasOwnProperty;function hu(t,n){var r=et(t),a=!r&&ce(t),f=!r&&!a&&Bt(t),c=!r&&!a&&!f&&le(t),d=r||a||f||c,v=d?bs(t.length,String):[],m=v.length;for(var w in t)(n||lu.call(t,w))&&!(d&&(w=="length"||f&&(w=="offset"||w=="parent")||c&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||ur(w,m)))&&v.push(w);return v}var cr=hu,du=Object.prototype;function vu(t){var n=t&&t.constructor,r=typeof n=="function"&&n.prototype||du;return t===r}var he=vu;function pu(t,n){return function(r){return t(n(r))}}var lr=pu,gu=lr(Object.keys,Object),yu=gu,_u=Object.prototype,mu=_u.hasOwnProperty;function wu(t){if(!he(t))return yu(t);var n=[];for(var r in Object(t))mu.call(t,r)&&r!="constructor"&&n.push(r);return n}var Xe=wu;function bu(t){return t!=null&&Ye(t.length)&&!ae(t)}var St=bu;function xu(t){return St(t)?cr(t):Xe(t)}var Ct=xu;function Eu(t,n){return t&&fe(n,Ct(n),t)}var Au=Eu;function Tu(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}var Mu=Tu,Su=Object.prototype,Cu=Su.hasOwnProperty;function Ou(t){if(!At(t))return Mu(t);var n=he(t),r=[];for(var a in t)a=="constructor"&&(n||!Cu.call(t,a))||r.push(a);return r}var Pu=Ou;function Iu(t){return St(t)?cr(t,!0):Pu(t)}var Je=Iu;function $u(t,n){return t&&fe(n,Je(n),t)}var Nu=$u,Lu=O(function(t,n){var r=n&&!n.nodeType&&n,a=r&&!0&&t&&!t.nodeType&&t,f=a&&a.exports===r,c=f?pt.Buffer:void 0,d=c?c.allocUnsafe:void 0;function v(m,w){if(w)return m.slice();var p=m.length,y=d?d(p):new m.constructor(p);return m.copy(y),y}t.exports=v});function Du(t,n){var r=-1,a=t.length;for(n||(n=Array(a));++r<a;)n[r]=t[r];return n}var Ru=Du;function Fu(t,n){for(var r=-1,a=t==null?0:t.length,f=0,c=[];++r<a;){var d=t[r];n(d,r,t)&&(c[f++]=d)}return c}var hr=Fu;function ku(){return[]}var dr=ku,zu=Object.prototype,Uu=zu.propertyIsEnumerable,vr=Object.getOwnPropertySymbols,ju=vr?function(t){return t==null?[]:(t=Object(t),hr(vr(t),function(n){return Uu.call(t,n)}))}:dr,Qe=ju;function Vu(t,n){return fe(t,Qe(t),n)}var Bu=Vu;function qu(t,n){for(var r=-1,a=n.length,f=t.length;++r<a;)t[f+r]=n[r];return t}var Ge=qu,Hu=lr(Object.getPrototypeOf,Object),tn=Hu,Ku=Object.getOwnPropertySymbols,Wu=Ku?function(t){for(var n=[];t;)Ge(n,Qe(t)),t=tn(t);return n}:dr,pr=Wu;function Yu(t,n){return fe(t,pr(t),n)}var Zu=Yu;function Xu(t,n,r){var a=n(t);return et(t)?a:Ge(a,r(t))}var gr=Xu;function Ju(t){return gr(t,Ct,Qe)}var en=Ju;function Qu(t){return gr(t,Je,pr)}var Gu=Qu,tf=Mt(pt,"DataView"),nn=tf,ef=Mt(pt,"Promise"),rn=ef,nf=Mt(pt,"Set"),Ht=nf,rf=Mt(pt,"WeakMap"),an=rf,yr="[object Map]",af="[object Object]",_r="[object Promise]",mr="[object Set]",wr="[object WeakMap]",br="[object DataView]",of=Tt(nn),sf=Tt(Xt),uf=Tt(rn),ff=Tt(Ht),cf=Tt(an),Ot=Et;(nn&&Ot(new nn(new ArrayBuffer(1)))!=br||Xt&&Ot(new Xt)!=yr||rn&&Ot(rn.resolve())!=_r||Ht&&Ot(new Ht)!=mr||an&&Ot(new an)!=wr)&&(Ot=function(t){var n=Et(t),r=n==af?t.constructor:void 0,a=r?Tt(r):"";if(a)switch(a){case of:return br;case sf:return yr;case uf:return _r;case ff:return mr;case cf:return wr}return n});var Pt=Ot,lf=Object.prototype,hf=lf.hasOwnProperty;function df(t){var n=t.length,r=new t.constructor(n);return n&&typeof t[0]=="string"&&hf.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var vf=df,pf=pt.Uint8Array,de=pf;function gf(t){var n=new t.constructor(t.byteLength);return new de(n).set(new de(t)),n}var on=gf;function yf(t,n){var r=n?on(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var _f=yf,mf=/\w*$/;function wf(t){var n=new t.constructor(t.source,mf.exec(t));return n.lastIndex=t.lastIndex,n}var bf=wf,xr=ut?ut.prototype:void 0,Er=xr?xr.valueOf:void 0;function xf(t){return Er?Object(Er.call(t)):{}}var Ef=xf;function Af(t,n){var r=n?on(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var Tf=Af,Mf="[object Boolean]",Sf="[object Date]",Cf="[object Map]",Of="[object Number]",Pf="[object RegExp]",If="[object Set]",$f="[object String]",Nf="[object Symbol]",Lf="[object ArrayBuffer]",Df="[object DataView]",Rf="[object Float32Array]",Ff="[object Float64Array]",kf="[object Int8Array]",zf="[object Int16Array]",Uf="[object Int32Array]",jf="[object Uint8Array]",Vf="[object Uint8ClampedArray]",Bf="[object Uint16Array]",qf="[object Uint32Array]";function Hf(t,n,r){var a=t.constructor;switch(n){case Lf:return on(t);case Mf:case Sf:return new a(+t);case Df:return _f(t,r);case Rf:case Ff:case kf:case zf:case Uf:case jf:case Vf:case Bf:case qf:return Tf(t,r);case Cf:return new a;case Of:case $f:return new a(t);case Pf:return bf(t);case If:return new a;case Nf:return Ef(t)}}var Kf=Hf,Ar=Object.create,Wf=function(){function t(){}return function(n){if(!At(n))return{};if(Ar)return Ar(n);t.prototype=n;var r=new t;return t.prototype=void 0,r}}(),Tr=Wf;function Yf(t){return typeof t.constructor=="function"&&!he(t)?Tr(tn(t)):{}}var Zf=Yf,Xf="[object Map]";function Jf(t){return gt(t)&&Pt(t)==Xf}var Qf=Jf,Mr=qt&&qt.isMap,Gf=Mr?Ze(Mr):Qf,tc=Gf,ec="[object Set]";function nc(t){return gt(t)&&Pt(t)==ec}var rc=nc,Sr=qt&&qt.isSet,ic=Sr?Ze(Sr):rc,ac=ic,oc=1,sc=2,uc=4,Cr="[object Arguments]",fc="[object Array]",cc="[object Boolean]",lc="[object Date]",hc="[object Error]",Or="[object Function]",dc="[object GeneratorFunction]",vc="[object Map]",pc="[object Number]",Pr="[object Object]",gc="[object RegExp]",yc="[object Set]",_c="[object String]",mc="[object Symbol]",wc="[object WeakMap]",bc="[object ArrayBuffer]",xc="[object DataView]",Ec="[object Float32Array]",Ac="[object Float64Array]",Tc="[object Int8Array]",Mc="[object Int16Array]",Sc="[object Int32Array]",Cc="[object Uint8Array]",Oc="[object Uint8ClampedArray]",Pc="[object Uint16Array]",Ic="[object Uint32Array]",K={};K[Cr]=K[fc]=K[bc]=K[xc]=K[cc]=K[lc]=K[Ec]=K[Ac]=K[Tc]=K[Mc]=K[Sc]=K[vc]=K[pc]=K[Pr]=K[gc]=K[yc]=K[_c]=K[mc]=K[Cc]=K[Oc]=K[Pc]=K[Ic]=!0,K[hc]=K[Or]=K[wc]=!1;function ve(t,n,r,a,f,c){var d,v=n&oc,m=n&sc,w=n&uc;if(r&&(d=f?r(t,a,f,c):r(t)),d!==void 0)return d;if(!At(t))return t;var p=et(t);if(p){if(d=vf(t),!v)return Ru(t,d)}else{var y=Pt(t),x=y==Or||y==dc;if(Bt(t))return Lu(t,v);if(y==Pr||y==Cr||x&&!f){if(d=m||x?{}:Zf(t),!v)return m?Zu(t,Nu(d,t)):Bu(t,Au(d,t))}else{if(!K[y])return f?t:{};d=Kf(t,y,v)}}c||(c=new Qt);var E=c.get(t);if(E)return E;c.set(t,d),ac(t)?t.forEach(function(R){d.add(ve(R,n,r,R,t,c))}):tc(t)&&t.forEach(function(R,M){d.set(M,ve(R,n,r,M,t,c))});var $=w?m?Gu:en:m?Je:Ct,N=p?void 0:$(t);return We(N||t,function(R,M){N&&(M=R,R=t[M]),ar(d,M,ve(R,n,r,M,t,c))}),d}var $c=ve,Nc=4;function Lc(t){return $c(t,Nc)}var Dc=Lc;function Rc(t){return function(){return t}}var Ir=Rc;function Fc(t){return function(n,r,a){for(var f=-1,c=Object(n),d=a(n),v=d.length;v--;){var m=d[t?v:++f];if(r(c[m],m,c)===!1)break}return n}}var kc=Fc,zc=kc(),Uc=zc;function jc(t,n){return t&&Uc(t,n,Ct)}var $r=jc;function Vc(t,n){return function(r,a){if(r==null)return r;if(!St(r))return t(r,a);for(var f=r.length,c=n?f:-1,d=Object(r);(n?c--:++c<f)&&a(d[c],c,d)!==!1;);return r}}var Bc=Vc,qc=Bc($r),pe=qc;function Hc(t){return t}var ge=Hc;function Kc(t){return typeof t=="function"?t:ge}var Wc=Kc;function Yc(t,n){var r=et(t)?We:pe;return r(t,Wc(n))}var Zc=Yc,Xc=Zc;function Jc(t,n){var r=[];return pe(t,function(a,f,c){n(a,f,c)&&r.push(a)}),r}var Qc=Jc,Gc="__lodash_hash_undefined__";function tl(t){return this.__data__.set(t,Gc),this}var el=tl;function nl(t){return this.__data__.has(t)}var rl=nl;function ye(t){var n=-1,r=t==null?0:t.length;for(this.__data__=new se;++n<r;)this.add(t[n])}ye.prototype.add=ye.prototype.push=el,ye.prototype.has=rl;var Nr=ye;function il(t,n){for(var r=-1,a=t==null?0:t.length;++r<a;)if(n(t[r],r,t))return!0;return!1}var al=il;function ol(t,n){return t.has(n)}var Lr=ol,sl=1,ul=2;function fl(t,n,r,a,f,c){var d=r&sl,v=t.length,m=n.length;if(v!=m&&!(d&&m>v))return!1;var w=c.get(t),p=c.get(n);if(w&&p)return w==n&&p==t;var y=-1,x=!0,E=r&ul?new Nr:void 0;for(c.set(t,n),c.set(n,t);++y<v;){var $=t[y],N=n[y];if(a)var R=d?a(N,$,y,n,t,c):a($,N,y,t,n,c);if(R!==void 0){if(R)continue;x=!1;break}if(E){if(!al(n,function(M,k){if(!Lr(E,k)&&($===M||f($,M,r,a,c)))return E.push(k)})){x=!1;break}}else if(!($===N||f($,N,r,a,c))){x=!1;break}}return c.delete(t),c.delete(n),x}var Dr=fl;function cl(t){var n=-1,r=Array(t.size);return t.forEach(function(a,f){r[++n]=[f,a]}),r}var ll=cl;function hl(t){var n=-1,r=Array(t.size);return t.forEach(function(a){r[++n]=a}),r}var sn=hl,dl=1,vl=2,pl="[object Boolean]",gl="[object Date]",yl="[object Error]",_l="[object Map]",ml="[object Number]",wl="[object RegExp]",bl="[object Set]",xl="[object String]",El="[object Symbol]",Al="[object ArrayBuffer]",Tl="[object DataView]",Rr=ut?ut.prototype:void 0,un=Rr?Rr.valueOf:void 0;function Ml(t,n,r,a,f,c,d){switch(r){case Tl:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case Al:return!(t.byteLength!=n.byteLength||!c(new de(t),new de(n)));case pl:case gl:case ml:return Y(+t,+n);case yl:return t.name==n.name&&t.message==n.message;case wl:case xl:return t==n+"";case _l:var v=ll;case bl:var m=a&dl;if(v||(v=sn),t.size!=n.size&&!m)return!1;var w=d.get(t);if(w)return w==n;a|=vl,d.set(t,n);var p=Dr(v(t),v(n),a,f,c,d);return d.delete(t),p;case El:if(un)return un.call(t)==un.call(n)}return!1}var Sl=Ml,Cl=1,Ol=Object.prototype,Pl=Ol.hasOwnProperty;function Il(t,n,r,a,f,c){var d=r&Cl,v=en(t),m=v.length,w=en(n),p=w.length;if(m!=p&&!d)return!1;for(var y=m;y--;){var x=v[y];if(!(d?x in n:Pl.call(n,x)))return!1}var E=c.get(t),$=c.get(n);if(E&&$)return E==n&&$==t;var N=!0;c.set(t,n),c.set(n,t);for(var R=d;++y<m;){x=v[y];var M=t[x],k=n[x];if(a)var A=d?a(k,M,x,n,t,c):a(M,k,x,t,n,c);if(!(A===void 0?M===k||f(M,k,r,a,c):A)){N=!1;break}R||(R=x=="constructor")}if(N&&!R){var L=t.constructor,P=n.constructor;L!=P&&"constructor"in t&&"constructor"in n&&!(typeof L=="function"&&L instanceof L&&typeof P=="function"&&P instanceof P)&&(N=!1)}return c.delete(t),c.delete(n),N}var $l=Il,Nl=1,Fr="[object Arguments]",kr="[object Array]",_e="[object Object]",Ll=Object.prototype,zr=Ll.hasOwnProperty;function Dl(t,n,r,a,f,c){var d=et(t),v=et(n),m=d?kr:Pt(t),w=v?kr:Pt(n);m=m==Fr?_e:m,w=w==Fr?_e:w;var p=m==_e,y=w==_e,x=m==w;if(x&&Bt(t)){if(!Bt(n))return!1;d=!0,p=!1}if(x&&!p)return c||(c=new Qt),d||le(t)?Dr(t,n,r,a,f,c):Sl(t,n,m,r,a,f,c);if(!(r&Nl)){var E=p&&zr.call(t,"__wrapped__"),$=y&&zr.call(n,"__wrapped__");if(E||$){var N=E?t.value():t,R=$?n.value():n;return c||(c=new Qt),f(N,R,r,a,c)}}return x?(c||(c=new Qt),$l(t,n,r,a,f,c)):!1}var Rl=Dl;function Ur(t,n,r,a,f){return t===n?!0:t==null||n==null||!gt(t)&&!gt(n)?t!==t&&n!==n:Rl(t,n,r,a,Ur,f)}var jr=Ur,Fl=1,kl=2;function zl(t,n,r,a){var f=r.length,c=f,d=!a;if(t==null)return!c;for(t=Object(t);f--;){var v=r[f];if(d&&v[2]?v[1]!==t[v[0]]:!(v[0]in t))return!1}for(;++f<c;){v=r[f];var m=v[0],w=t[m],p=v[1];if(d&&v[2]){if(w===void 0&&!(m in t))return!1}else{var y=new Qt;if(a)var x=a(w,p,m,t,n,y);if(!(x===void 0?jr(p,w,Fl|kl,a,y):x))return!1}}return!0}var Ul=zl;function jl(t){return t===t&&!At(t)}var Vr=jl;function Vl(t){for(var n=Ct(t),r=n.length;r--;){var a=n[r],f=t[a];n[r]=[a,f,Vr(f)]}return n}var Bl=Vl;function ql(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}var Br=ql;function Hl(t){var n=Bl(t);return n.length==1&&n[0][2]?Br(n[0][0],n[0][1]):function(r){return r===t||Ul(r,t,n)}}var Kl=Hl,Wl="[object Symbol]";function Yl(t){return typeof t=="symbol"||gt(t)&&Et(t)==Wl}var fn=Yl,Zl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xl=/^\w*$/;function Jl(t,n){if(et(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||fn(t)?!0:Xl.test(t)||!Zl.test(t)||n!=null&&t in Object(n)}var cn=Jl,Ql="Expected a function";function ln(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new TypeError(Ql);var r=function(){var a=arguments,f=n?n.apply(this,a):a[0],c=r.cache;if(c.has(f))return c.get(f);var d=t.apply(this,a);return r.cache=c.set(f,d)||c,d};return r.cache=new(ln.Cache||se),r}ln.Cache=se;var Gl=ln,th=500;function eh(t){var n=Gl(t,function(a){return r.size===th&&r.clear(),a}),r=n.cache;return n}var nh=eh,rh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ih=/\\(\\)?/g,ah=nh(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(rh,function(r,a,f,c){n.push(f?c.replace(ih,"$1"):a||r)}),n}),oh=ah;function sh(t,n){for(var r=-1,a=t==null?0:t.length,f=Array(a);++r<a;)f[r]=n(t[r],r,t);return f}var hn=sh,uh=1/0,qr=ut?ut.prototype:void 0,Hr=qr?qr.toString:void 0;function Kr(t){if(typeof t=="string")return t;if(et(t))return hn(t,Kr)+"";if(fn(t))return Hr?Hr.call(t):"";var n=t+"";return n=="0"&&1/t==-uh?"-0":n}var fh=Kr;function ch(t){return t==null?"":fh(t)}var lh=ch;function hh(t,n){return et(t)?t:cn(t,n)?[t]:oh(lh(t))}var Wr=hh,dh=1/0;function vh(t){if(typeof t=="string"||fn(t))return t;var n=t+"";return n=="0"&&1/t==-dh?"-0":n}var me=vh;function ph(t,n){n=Wr(n,t);for(var r=0,a=n.length;t!=null&&r<a;)t=t[me(n[r++])];return r&&r==a?t:void 0}var Yr=ph;function gh(t,n,r){var a=t==null?void 0:Yr(t,n);return a===void 0?r:a}var yh=gh;function _h(t,n){return t!=null&&n in Object(t)}var mh=_h;function wh(t,n,r){n=Wr(n,t);for(var a=-1,f=n.length,c=!1;++a<f;){var d=me(n[a]);if(!(c=t!=null&&r(t,d)))break;t=t[d]}return c||++a!=f?c:(f=t==null?0:t.length,!!f&&Ye(f)&&ur(d,f)&&(et(t)||ce(t)))}var Zr=wh;function bh(t,n){return t!=null&&Zr(t,n,mh)}var xh=bh,Eh=1,Ah=2;function Th(t,n){return cn(t)&&Vr(n)?Br(me(t),n):function(r){var a=yh(r,t);return a===void 0&&a===n?xh(r,t):jr(n,a,Eh|Ah)}}var Mh=Th;function Sh(t){return function(n){return n?.[t]}}var Xr=Sh;function Ch(t){return function(n){return Yr(n,t)}}var Oh=Ch;function Ph(t){return cn(t)?Xr(me(t)):Oh(t)}var Ih=Ph;function $h(t){return typeof t=="function"?t:t==null?ge:typeof t=="object"?et(t)?Mh(t[0],t[1]):Kl(t):Ih(t)}var we=$h;function Nh(t,n){var r=et(t)?hr:Qc;return r(t,we(n))}var Lh=Nh,Dh=Object.prototype,Rh=Dh.hasOwnProperty;function Fh(t,n){return t!=null&&Rh.call(t,n)}var kh=Fh;function zh(t,n){return t!=null&&Zr(t,n,kh)}var Uh=zh,jh="[object Map]",Vh="[object Set]",Bh=Object.prototype,qh=Bh.hasOwnProperty;function Hh(t){if(t==null)return!0;if(St(t)&&(et(t)||typeof t=="string"||typeof t.splice=="function"||Bt(t)||le(t)||ce(t)))return!t.length;var n=Pt(t);if(n==jh||n==Vh)return!t.size;if(he(t))return!Xe(t).length;for(var r in t)if(qh.call(t,r))return!1;return!0}var Kh=Hh;function Wh(t){return t===void 0}var Yh=Wh;function Zh(t,n){var r=-1,a=St(t)?Array(t.length):[];return pe(t,function(f,c,d){a[++r]=n(f,c,d)}),a}var Xh=Zh;function Jh(t,n){var r=et(t)?hn:Xh;return r(t,we(n))}var Qh=Jh;function Gh(t,n,r,a){var f=-1,c=t==null?0:t.length;for(a&&c&&(r=t[++f]);++f<c;)r=n(r,t[f],f,t);return r}var td=Gh;function ed(t,n,r,a,f){return f(t,function(c,d,v){r=a?(a=!1,c):n(r,c,d,v)}),r}var nd=ed;function rd(t,n,r){var a=et(t)?td:nd,f=arguments.length<3;return a(t,we(n),r,f,pe)}var id=rd,ad="[object String]";function od(t){return typeof t=="string"||!et(t)&&gt(t)&&Et(t)==ad}var sd=od,ud=Xr("length"),fd=ud,cd="\\ud800-\\udfff",ld="\\u0300-\\u036f",hd="\\ufe20-\\ufe2f",dd="\\u20d0-\\u20ff",vd=ld+hd+dd,pd="\\ufe0e\\ufe0f",gd="\\u200d",yd=RegExp("["+gd+cd+vd+pd+"]");function _d(t){return yd.test(t)}var md=_d,Jr="\\ud800-\\udfff",wd="\\u0300-\\u036f",bd="\\ufe20-\\ufe2f",xd="\\u20d0-\\u20ff",Ed=wd+bd+xd,Ad="\\ufe0e\\ufe0f",Td="["+Jr+"]",dn="["+Ed+"]",vn="\\ud83c[\\udffb-\\udfff]",Md="(?:"+dn+"|"+vn+")",Qr="[^"+Jr+"]",Gr="(?:\\ud83c[\\udde6-\\uddff]){2}",ti="[\\ud800-\\udbff][\\udc00-\\udfff]",Sd="\\u200d",ei=Md+"?",ni="["+Ad+"]?",Cd="(?:"+Sd+"(?:"+[Qr,Gr,ti].join("|")+")"+ni+ei+")*",Od=ni+ei+Cd,Pd="(?:"+[Qr+dn+"?",dn,Gr,ti,Td].join("|")+")",ri=RegExp(vn+"(?="+vn+")|"+Pd+Od,"g");function Id(t){for(var n=ri.lastIndex=0;ri.test(t);)++n;return n}var $d=Id;function Nd(t){return md(t)?$d(t):fd(t)}var Ld=Nd,Dd="[object Map]",Rd="[object Set]";function Fd(t){if(t==null)return 0;if(St(t))return sd(t)?Ld(t):t.length;var n=Pt(t);return n==Dd||n==Rd?t.size:Xe(t).length}var kd=Fd;function zd(t,n,r){var a=et(t),f=a||Bt(t)||le(t);if(n=we(n),r==null){var c=t&&t.constructor;f?r=a?new c:[]:At(t)?r=ae(c)?Tr(tn(t)):{}:r={}}return(f?We:$r)(t,function(d,v,m){return n(r,d,v,m)}),r}var Ud=zd,ii=ut?ut.isConcatSpreadable:void 0;function jd(t){return et(t)||ce(t)||!!(ii&&t&&t[ii])}var Vd=jd;function ai(t,n,r,a,f){var c=-1,d=t.length;for(r||(r=Vd),f||(f=[]);++c<d;){var v=t[c];n>0&&r(v)?n>1?ai(v,n-1,r,a,f):Ge(f,v):a||(f[f.length]=v)}return f}var Bd=ai;function qd(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}var Hd=qd,oi=Math.max;function Kd(t,n,r){return n=oi(n===void 0?t.length-1:n,0),function(){for(var a=arguments,f=-1,c=oi(a.length-n,0),d=Array(c);++f<c;)d[f]=a[n+f];f=-1;for(var v=Array(n+1);++f<n;)v[f]=a[f];return v[n]=r(d),Hd(t,this,v)}}var Wd=Kd,Yd=ue?function(t,n){return ue(t,"toString",{configurable:!0,enumerable:!1,value:Ir(n),writable:!0})}:ge,Zd=Yd,Xd=800,Jd=16,Qd=Date.now;function Gd(t){var n=0,r=0;return function(){var a=Qd(),f=Jd-(a-r);if(r=a,f>0){if(++n>=Xd)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}var tv=Gd,ev=tv(Zd),nv=ev;function rv(t,n){return nv(Wd(t,n,ge),t+"")}var iv=rv;function av(t,n,r,a){for(var f=t.length,c=r+(a?1:-1);a?c--:++c<f;)if(n(t[c],c,t))return c;return-1}var ov=av;function sv(t){return t!==t}var uv=sv;function fv(t,n,r){for(var a=r-1,f=t.length;++a<f;)if(t[a]===n)return a;return-1}var cv=fv;function lv(t,n,r){return n===n?cv(t,n,r):ov(t,uv,r)}var hv=lv;function dv(t,n){var r=t==null?0:t.length;return!!r&&hv(t,n,0)>-1}var vv=dv;function pv(t,n,r){for(var a=-1,f=t==null?0:t.length;++a<f;)if(r(n,t[a]))return!0;return!1}var gv=pv;function yv(){}var _v=yv,mv=1/0,wv=Ht&&1/sn(new Ht([,-0]))[1]==mv?function(t){return new Ht(t)}:_v,bv=wv,xv=200;function Ev(t,n,r){var a=-1,f=vv,c=t.length,d=!0,v=[],m=v;if(r)d=!1,f=gv;else if(c>=xv){var w=n?null:bv(t);if(w)return sn(w);d=!1,f=Lr,m=new Nr}else m=n?[]:v;t:for(;++a<c;){var p=t[a],y=n?n(p):p;if(p=r||p!==0?p:0,d&&y===y){for(var x=m.length;x--;)if(m[x]===y)continue t;n&&m.push(y),v.push(p)}else f(m,y,r)||(m!==v&&m.push(y),v.push(p))}return v}var Av=Ev;function Tv(t){return gt(t)&&St(t)}var Mv=Tv,Sv=iv(function(t){return Av(Bd(t,1,Mv,!0))}),Cv=Sv;function Ov(t,n){return hn(n,function(r){return t[r]})}var Pv=Ov;function Iv(t){return t==null?[]:Pv(t,Ct(t))}var $v=Iv,be;if(typeof S=="function")try{be={clone:Dc,constant:Ir,each:Xc,filter:Lh,has:Uh,isArray:et,isEmpty:Kh,isFunction:ae,isUndefined:Yh,keys:Ct,map:Qh,reduce:id,size:kd,transform:Ud,union:Cv,values:$v}}catch{}be||(be=window._);var I=be,pn=V,Nv="\0",It="\0",si="";function V(t){this._isDirected=I.has(t,"directed")?t.directed:!0,this._isMultigraph=I.has(t,"multigraph")?t.multigraph:!1,this._isCompound=I.has(t,"compound")?t.compound:!1,this._label=void 0,this._defaultNodeLabelFn=I.constant(void 0),this._defaultEdgeLabelFn=I.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[It]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}V.prototype._nodeCount=0,V.prototype._edgeCount=0,V.prototype.isDirected=function(){return this._isDirected},V.prototype.isMultigraph=function(){return this._isMultigraph},V.prototype.isCompound=function(){return this._isCompound},V.prototype.setGraph=function(t){return this._label=t,this},V.prototype.graph=function(){return this._label},V.prototype.setDefaultNodeLabel=function(t){return I.isFunction(t)||(t=I.constant(t)),this._defaultNodeLabelFn=t,this},V.prototype.nodeCount=function(){return this._nodeCount},V.prototype.nodes=function(){return I.keys(this._nodes)},V.prototype.sources=function(){var t=this;return I.filter(this.nodes(),function(n){return I.isEmpty(t._in[n])})},V.prototype.sinks=function(){var t=this;return I.filter(this.nodes(),function(n){return I.isEmpty(t._out[n])})},V.prototype.setNodes=function(t,n){var r=arguments,a=this;return I.each(t,function(f){r.length>1?a.setNode(f,n):a.setNode(f)}),this},V.prototype.setNode=function(t,n){return I.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=n),this):(this._nodes[t]=arguments.length>1?n:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=It,this._children[t]={},this._children[It][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},V.prototype.node=function(t){return this._nodes[t]},V.prototype.hasNode=function(t){return I.has(this._nodes,t)},V.prototype.removeNode=function(t){var n=this;if(I.has(this._nodes,t)){var r=function(a){n.removeEdge(n._edgeObjs[a])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],I.each(this.children(t),function(a){n.setParent(a)}),delete this._children[t]),I.each(I.keys(this._in[t]),r),delete this._in[t],delete this._preds[t],I.each(I.keys(this._out[t]),r),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},V.prototype.setParent=function(t,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(I.isUndefined(n))n=It;else{n+="";for(var r=n;!I.isUndefined(r);r=this.parent(r))if(r===t)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");this.setNode(n)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=n,this._children[n][t]=!0,this},V.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},V.prototype.parent=function(t){if(this._isCompound){var n=this._parent[t];if(n!==It)return n}},V.prototype.children=function(t){if(I.isUndefined(t)&&(t=It),this._isCompound){var n=this._children[t];if(n)return I.keys(n)}else{if(t===It)return this.nodes();if(this.hasNode(t))return[]}},V.prototype.predecessors=function(t){var n=this._preds[t];if(n)return I.keys(n)},V.prototype.successors=function(t){var n=this._sucs[t];if(n)return I.keys(n)},V.prototype.neighbors=function(t){var n=this.predecessors(t);if(n)return I.union(n,this.successors(t))},V.prototype.isLeaf=function(t){var n;return this.isDirected()?n=this.successors(t):n=this.neighbors(t),n.length===0},V.prototype.filterNodes=function(t){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var r=this;I.each(this._nodes,function(c,d){t(d)&&n.setNode(d,c)}),I.each(this._edgeObjs,function(c){n.hasNode(c.v)&&n.hasNode(c.w)&&n.setEdge(c,r.edge(c))});var a={};function f(c){var d=r.parent(c);return d===void 0||n.hasNode(d)?(a[c]=d,d):d in a?a[d]:f(d)}return this._isCompound&&I.each(n.nodes(),function(c){n.setParent(c,f(c))}),n},V.prototype.setDefaultEdgeLabel=function(t){return I.isFunction(t)||(t=I.constant(t)),this._defaultEdgeLabelFn=t,this},V.prototype.edgeCount=function(){return this._edgeCount},V.prototype.edges=function(){return I.values(this._edgeObjs)},V.prototype.setPath=function(t,n){var r=this,a=arguments;return I.reduce(t,function(f,c){return a.length>1?r.setEdge(f,c,n):r.setEdge(f,c),c}),this},V.prototype.setEdge=function(){var t,n,r,a,f=!1,c=arguments[0];typeof c=="object"&&c!==null&&"v"in c?(t=c.v,n=c.w,r=c.name,arguments.length===2&&(a=arguments[1],f=!0)):(t=c,n=arguments[1],r=arguments[3],arguments.length>2&&(a=arguments[2],f=!0)),t=""+t,n=""+n,I.isUndefined(r)||(r=""+r);var d=Gt(this._isDirected,t,n,r);if(I.has(this._edgeLabels,d))return f&&(this._edgeLabels[d]=a),this;if(!I.isUndefined(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(n),this._edgeLabels[d]=f?a:this._defaultEdgeLabelFn(t,n,r);var v=Lv(this._isDirected,t,n,r);return t=v.v,n=v.w,Object.freeze(v),this._edgeObjs[d]=v,ui(this._preds[n],t),ui(this._sucs[t],n),this._in[n][d]=v,this._out[t][d]=v,this._edgeCount++,this},V.prototype.edge=function(t,n,r){var a=arguments.length===1?gn(this._isDirected,arguments[0]):Gt(this._isDirected,t,n,r);return this._edgeLabels[a]},V.prototype.hasEdge=function(t,n,r){var a=arguments.length===1?gn(this._isDirected,arguments[0]):Gt(this._isDirected,t,n,r);return I.has(this._edgeLabels,a)},V.prototype.removeEdge=function(t,n,r){var a=arguments.length===1?gn(this._isDirected,arguments[0]):Gt(this._isDirected,t,n,r),f=this._edgeObjs[a];return f&&(t=f.v,n=f.w,delete this._edgeLabels[a],delete this._edgeObjs[a],fi(this._preds[n],t),fi(this._sucs[t],n),delete this._in[n][a],delete this._out[t][a],this._edgeCount--),this},V.prototype.inEdges=function(t,n){var r=this._in[t];if(r){var a=I.values(r);return n?I.filter(a,function(f){return f.v===n}):a}},V.prototype.outEdges=function(t,n){var r=this._out[t];if(r){var a=I.values(r);return n?I.filter(a,function(f){return f.w===n}):a}},V.prototype.nodeEdges=function(t,n){var r=this.inEdges(t,n);if(r)return r.concat(this.outEdges(t,n))};function ui(t,n){t[n]?t[n]++:t[n]=1}function fi(t,n){--t[n]||delete t[n]}function Gt(t,n,r,a){var f=""+n,c=""+r;if(!t&&f>c){var d=f;f=c,c=d}return f+si+c+si+(I.isUndefined(a)?Nv:a)}function Lv(t,n,r,a){var f=""+n,c=""+r;if(!t&&f>c){var d=f;f=c,c=d}var v={v:f,w:c};return a&&(v.name=a),v}function gn(t,n){return Gt(t,n.v,n.w,n.name)}var Dv="2.1.8",ci={Graph:pn,version:Dv},Rv={write:Fv,read:Uv};function Fv(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:kv(t),edges:zv(t)};return I.isUndefined(t.graph())||(n.value=I.clone(t.graph())),n}function kv(t){return I.map(t.nodes(),function(n){var r=t.node(n),a=t.parent(n),f={v:n};return I.isUndefined(r)||(f.value=r),I.isUndefined(a)||(f.parent=a),f})}function zv(t){return I.map(t.edges(),function(n){var r=t.edge(n),a={v:n.v,w:n.w};return I.isUndefined(n.name)||(a.name=n.name),I.isUndefined(r)||(a.value=r),a})}function Uv(t){var n=new pn(t.options).setGraph(t.value);return I.each(t.nodes,function(r){n.setNode(r.v,r.value),r.parent&&n.setParent(r.v,r.parent)}),I.each(t.edges,function(r){n.setEdge({v:r.v,w:r.w,name:r.name},r.value)}),n}var jv=Vv;function Vv(t){var n={},r=[],a;function f(c){I.has(n,c)||(n[c]=!0,a.push(c),I.each(t.successors(c),f),I.each(t.predecessors(c),f))}return I.each(t.nodes(),function(c){a=[],f(c),a.length&&r.push(a)}),r}var li=ft;function ft(){this._arr=[],this._keyIndices={}}ft.prototype.size=function(){return this._arr.length},ft.prototype.keys=function(){return this._arr.map(function(t){return t.key})},ft.prototype.has=function(t){return I.has(this._keyIndices,t)},ft.prototype.priority=function(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority},ft.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},ft.prototype.add=function(t,n){var r=this._keyIndices;if(t=String(t),!I.has(r,t)){var a=this._arr,f=a.length;return r[t]=f,a.push({key:t,priority:n}),this._decrease(f),!0}return!1},ft.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},ft.prototype.decrease=function(t,n){var r=this._keyIndices[t];if(n>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[r].priority+" New: "+n);this._arr[r].priority=n,this._decrease(r)},ft.prototype._heapify=function(t){var n=this._arr,r=2*t,a=r+1,f=t;r<n.length&&(f=n[r].priority<n[f].priority?r:f,a<n.length&&(f=n[a].priority<n[f].priority?a:f),f!==t&&(this._swap(t,f),this._heapify(f)))},ft.prototype._decrease=function(t){for(var n=this._arr,r=n[t].priority,a;t!==0&&(a=t>>1,!(n[a].priority<r));)this._swap(t,a),t=a},ft.prototype._swap=function(t,n){var r=this._arr,a=this._keyIndices,f=r[t],c=r[n];r[t]=c,r[n]=f,a[c.key]=t,a[f.key]=n};var hi=qv,Bv=I.constant(1);function qv(t,n,r,a){return Hv(t,String(n),r||Bv,a||function(f){return t.outEdges(f)})}function Hv(t,n,r,a){var f={},c=new li,d,v,m=function(w){var p=w.v!==d?w.v:w.w,y=f[p],x=r(w),E=v.distance+x;if(x<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+w+" Weight: "+x);E<y.distance&&(y.distance=E,y.predecessor=d,c.decrease(p,E))};for(t.nodes().forEach(function(w){var p=w===n?0:Number.POSITIVE_INFINITY;f[w]={distance:p},c.add(w,p)});c.size()>0&&(d=c.removeMin(),v=f[d],v.distance!==Number.POSITIVE_INFINITY);)a(d).forEach(m);return f}var Kv=Wv;function Wv(t,n,r){return I.transform(t.nodes(),function(a,f){a[f]=hi(t,f,n,r)},{})}var di=Yv;function Yv(t){var n=0,r=[],a={},f=[];function c(d){var v=a[d]={onStack:!0,lowlink:n,index:n++};if(r.push(d),t.successors(d).forEach(function(p){I.has(a,p)?a[p].onStack&&(v.lowlink=Math.min(v.lowlink,a[p].index)):(c(p),v.lowlink=Math.min(v.lowlink,a[p].lowlink))}),v.lowlink===v.index){var m=[],w;do w=r.pop(),a[w].onStack=!1,m.push(w);while(d!==w);f.push(m)}}return t.nodes().forEach(function(d){I.has(a,d)||c(d)}),f}var Zv=Xv;function Xv(t){return I.filter(di(t),function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})}var Jv=Gv,Qv=I.constant(1);function Gv(t,n,r){return tp(t,n||Qv,r||function(a){return t.outEdges(a)})}function tp(t,n,r){var a={},f=t.nodes();return f.forEach(function(c){a[c]={},a[c][c]={distance:0},f.forEach(function(d){c!==d&&(a[c][d]={distance:Number.POSITIVE_INFINITY})}),r(c).forEach(function(d){var v=d.v===c?d.w:d.v,m=n(d);a[c][v]={distance:m,predecessor:c}})}),f.forEach(function(c){var d=a[c];f.forEach(function(v){var m=a[v];f.forEach(function(w){var p=m[c],y=d[w],x=m[w],E=p.distance+y.distance;E<x.distance&&(x.distance=E,x.predecessor=y.predecessor)})})}),a}var yn=vi;vi.CycleException=xe;function vi(t){var n={},r={},a=[];function f(c){if(I.has(r,c))throw new xe;I.has(n,c)||(r[c]=!0,n[c]=!0,I.each(t.predecessors(c),f),delete r[c],a.push(c))}if(I.each(t.sinks(),f),I.size(n)!==t.nodeCount())throw new xe;return a}function xe(){}xe.prototype=new Error;var ep=np;function np(t){try{yn(t)}catch(n){if(n instanceof yn.CycleException)return!1;throw n}return!0}var pi=rp;function rp(t,n,r){I.isArray(n)||(n=[n]);var a=(t.isDirected()?t.successors:t.neighbors).bind(t),f=[],c={};return I.each(n,function(d){if(!t.hasNode(d))throw new Error("Graph does not have node: "+d);gi(t,d,r==="post",c,a,f)}),f}function gi(t,n,r,a,f,c){I.has(a,n)||(a[n]=!0,r||c.push(n),I.each(f(n),function(d){gi(t,d,r,a,f,c)}),r&&c.push(n))}var ip=ap;function ap(t,n){return pi(t,n,"post")}var op=sp;function sp(t,n){return pi(t,n,"pre")}var up=fp;function fp(t,n){var r=new pn,a={},f=new li,c;function d(m){var w=m.v===c?m.w:m.v,p=f.priority(w);if(p!==void 0){var y=n(m);y<p&&(a[w]=c,f.decrease(w,y))}}if(t.nodeCount()===0)return r;I.each(t.nodes(),function(m){f.add(m,Number.POSITIVE_INFINITY),r.setNode(m)}),f.decrease(t.nodes()[0],0);for(var v=!1;f.size()>0;){if(c=f.removeMin(),I.has(a,c))r.setEdge(c,a[c]);else{if(v)throw new Error("Input graph is not connected: "+t);v=!0}t.nodeEdges(c).forEach(d)}return r}var cp={components:jv,dijkstra:hi,dijkstraAll:Kv,findCycles:Zv,floydWarshall:Jv,isAcyclic:ep,postorder:ip,preorder:op,prim:up,tarjan:di,topsort:yn},yi={Graph:ci.Graph,json:Rv,alg:cp,version:ci.version},_n=yi.Graph,lp=yi.alg;function hp(t,n){n===void 0&&(n=[]);var r=new _n({directed:!0});if(t.nodes().length===0)return r;n=dp(t,n);var a=u.map(),f,c,d,v;for(d=0;d<n.length;++d)if(f=n[d],!(!f.nodes||f.nodes.length===0)){for(c=""+d,v=0;v<f.nodes.length;++v)a.set(f.nodes[v],c);r.setNode(c,{type:f.type,nodes:f.nodes})}return t.nodes(),t.nodes().forEach(function(m){t.node(m),a.has(m)||(c=""+d++,f={type:"same",nodes:[m]},a.set(m,c),r.setNode(c,f))}),t.edges().forEach(function(m){t.edge(m);var w=a.get(m.v),p=a.get(m.w),y=r.edge(w,p)||{delta:0};w===p?(y.delta=0,r.setEdge(w,p,y)):t.node(m.v).backwards?(y.delta=Math.max(y.delta,t.node(m.w).backwards?1:0),r.setEdge(p,w,y)):(y.delta=Math.max(y.delta,t.node(m.w).backwards?0:1),r.setEdge(w,p,y))}),r}function dp(t,n){for(var r=0;r<n.length;++r)if(n[r].type==="min")return n;var a=t.sources(),f=a.length?a[0]:t.nodes()[0];return[{type:"min",nodes:[f]}].concat(n)}function vp(t,n){var r=pp(t,n);return t.edges().forEach(function(a){var f=gp(r,a.v,a.w);if(f<0){var c=t.edge(a)||{};c.reversed=!0,t.removeEdge(a),t.setEdge(a.w,a.v,c)}}),t}function pp(t,n){var r=u.set(),a=new _n({directed:!0}),f=[];if(!t.hasNode(n))throw Error("node not in graph");return mn(t,n,r,a,f),t.nodes().forEach(function(c){r.has(c)||mn(t,c,r,a,f)}),f.forEach(function(c,d){a.node(c).thread=d+1<f.length?f[d+1]:f[0]}),a}function gp(t,n,r){var a=t.node(n),f=t.node(r);if(a.depth<f.depth)for(var c=a.thread;t.node(c).depth>a.depth;){if(c===r)return 1;c=t.node(c).thread}else if(f.depth<a.depth)for(var d=f.thread;t.node(d).depth>f.depth;){if(d===n)return-1;d=t.node(d).thread}return 0}function mn(t,n,r,a,f,c){if(c===void 0&&(c=0),!r.has(n)){r.add(n),f.push(n),a.setNode(n,{depth:c});var d=t.outEdges(n).map(function(v){return v.w});d.forEach(function(v,m){r.has(v)||a.setEdge(n,v,{delta:1}),mn(t,v,r,a,f,c+1)})}}function yp(t){var n=t.sources(),r=u.set(),a=u.set();t.edges().forEach(function(c){c.v===c.w&&a.add(wn(c))}),t.nodes().forEach(function(c){t.node(c).rank=0});for(var f=function(){var c=n.shift();r.add(c);var d=t.node(c);d||t.setNode(c,d={}),d.rank=0,t.inEdges(c).forEach(function(v){var m=t.edge(v).delta===void 0?1:t.edge(v).delta;d.rank=Math.max(d.rank,t.node(v.v).rank+m)}),t.outEdges(c).forEach(function(v){a.add(wn(v))}),t.nodes().forEach(function(v){n.indexOf(v)<0&&!r.has(v)&&!t.inEdges(v).some(function(m){return!a.has(wn(m))})&&n.push(v)})};n.length>0;)f()}function wn(t){return t.v+""+t.w+""+t.name}function _p(t,n){var r=hp(t,n);r.nodeCount()!==0&&(mp(r),vp(r,"0"),yp(r),wp(r),r.nodes().forEach(function(a){var f=r.node(a);f.nodes.forEach(function(c){t.node(c).rank=f.rank})}))}function mp(t){t.sources().forEach(function(n){n!=="0"&&t.setEdge("0",n,{temp:!0,delta:0})})}function wp(t){t.edges().forEach(function(r){var a=t.edge(r);a.temp&&n(r.w)});function n(r){var a=t.node(r),f=s.min(t.outEdges(r),function(c){return t.node(c.w).rank-t.edge(c).delta});f!==void 0&&(a.rank=f)}}function bp(t,n){var r=[];if(n.length===0)return r;var a=t.sources(),f=u.map();return n.forEach(function(c,d){r.push([]),c.forEach(function(v){d===0&&a.indexOf(v)<0&&a.push(v),f.set(v,d)})}),lp.preorder(t,a).forEach(function(c){r[f.get(c)].push(c)}),r}function bn(t,n,r){return xp(t,n,r)}function xp(t,n,r){var a,f,c;n.length>r.length?(a=n,f=r):(a=r,f=n),c=f.length;var d=[];a.forEach(function(x){f.forEach(function(E,$){(t.hasEdge(x,E)||t.hasEdge(E,x))&&d.push($)})});for(var v=1;v<c;)v*=2;var m=2*v-1;v-=1;for(var w=new Array(m),p=0;p<m;p++)w[p]=0;var y=0;return d.forEach(function(x){var E=x+v;for(w[E]++;E>0;)E%2&&(y+=w[E+1]),E=Math.floor((E-1)/2),w[E]++}),y}function Ep(t,n){for(var r=!0;r;){r=!1;for(var a=0;a<n.length;++a)for(var f=0;f<n[a].length-1;++f){var c=_i(t,n,a);mi(n[a],f,f+1);var d=_i(t,n,a);d<c?r=!0:mi(n[a],f,f+1)}}}function _i(t,n,r){var a=0;return r>0&&(a+=bn(t,n[r-1],n[r])),r+1<n.length&&(a+=bn(t,n[r],n[r+1])),a}function mi(t,n,r){var a=t[n];t[n]=t[r],t[r]=a}function wi(t){var n=Math.floor(t.length/2);if(t.length===0)return-1;if(t.length%2===1)return t[n];if(t.length===2)return(t[0]+t[1])/2;var r=t[n-1]-t[0],a=t[t.length-1]-t[n];return(t[n-1]*a+t[n]*r)/(r+a)}function bi(t,n,r,a,f,c){c===void 0&&(c=!1);var d=n[r],v=n[a],m=[];return v.forEach(function(w,p){t.nodeEdges(w,f).length>0&&m.push(p)}),m.length===0&&c&&d.forEach(function(w,p){t.nodeEdges(w,f).length>0&&m.push(p+.5)}),m.sort(function(w,p){return w-p}),m}function xi(t,n){for(var r=u.map(t.map(function(w,p){return[w,p]}),function(w){return w[0]}),a=1;a<t.length;++a)for(var f=a;f>0;--f){for(var c=f-1,d=n.get(t[c]),v=n.get(t[f]);(d=n.get(t[c]))===-1&&c>0;)c--;if(v===-1||d===-1||(d===v&&(d=r.get(t[c]),v=r.get(t[f])),v>=d))break;var m;m=[t[c],t[f]],t[f]=m[0],t[c]=m[1]}}function Ap(t,n,r,a){if(r===void 0&&(r=1),a===void 0&&(a=!1),r>0)for(var f=function(m){var w=u.map();n[m].forEach(function(p){var y=wi(bi(t,n,m,m-1,p,a));w.set(p,y)}),xi(n[m],w)},c=1;c<n.length;++c)f(c);else for(var d=function(m){var w=u.map();n[m].forEach(function(p){var y=wi(bi(t,n,m,m+1,p,a));w.set(p,y)}),xi(n[m],w)},v=n.length-2;v>=0;--v)d(v)}function Ei(t,n){for(var r=Tp(t),a=bp(t,r),f=a,c=0;c++<n;)Ap(t,a,c%2===0),Ep(t,a),Ai(t,a)<Ai(t,f)&&(f=Mp(a));f.forEach(function(d){d.forEach(function(v,m){t.node(v).depth=m})})}function Tp(t){var n=[];return t.nodes().forEach(function(r){for(var a=t.node(r).rank||0;a>=n.length;)n.push([]);n[a].push(r)}),n}function Ai(t,n){for(var r=0,a=0;a<n.length-1;++a)r+=bn(t,n[a],n[a+1]);return r}function Mp(t){var n=[];return t.forEach(function(r){n.push(r.map(function(a){return a}))}),n}function Sp(t){typeof t.graph()!="object"&&t.setGraph({}),t.graph().dummyChains=[],t.edges().forEach(function(n){return Cp(t,n)})}function Cp(t,n){var r=t.edge(n),a=Pp(t.node(n.v),t.node(n.w));if(a.length===0)return;t.removeEdge(n);var f=n.v;a.forEach(function(d,v){var m="__"+n.v+"_"+n.w+"_"+v;t.hasNode(m)||(d.dummy="edge",t.setNode(m,d),v===0&&t.graph().dummyChains.push(m)),c(f,f=m)}),c(f,n.w);function c(d,v){var m={points:[],value:r.value,origEdge:n,origLabel:r};t.setEdge(d,v,m,n.name)}}function Op(t){var n=t.graph().dummyChains||[];n.forEach(function(r){var a=t.node(r),f=t.inEdges(r).map(function(v){return t.edge(v)});f.forEach(function(v){v.origLabel.dy=v.dy,v.origLabel.x0=v.x0,v.origLabel.y0=v.y0,v.origLabel.r0=v.r0,v.origLabel.d0=v.d0,t.setEdge(v.origEdge,v.origLabel)});for(var c=f.map(function(v){return v.r1}),d;a.dummy;)f=t.outEdges(r).map(function(v){return t.edge(v)}),f.forEach(function(v,m){v.origLabel.points.push({x:(a.x0+a.x1)/2,y:v.y0,d:v.d0,ro:v.r0,ri:c[m]})}),c=f.map(function(v){return v.r1}),d=t.successors(r)[0],t.removeNode(r),a=t.node(r=d);f.forEach(function(v){v.origLabel.x1=v.x1,v.origLabel.y1=v.y1,v.origLabel.r1=v.r1,v.origLabel.d1=v.d1})})}function Pp(t,n){var r=[],a=t.rank;if(a+1<=n.rank){for(t.backwards&&r.push({rank:a,backwards:!1});++a<n.rank;)r.push({rank:a,backwards:!1});n.backwards&&r.push({rank:a,backwards:!1})}else if(a>n.rank){for(t.backwards||r.push({rank:a,backwards:!0});a-- >n.rank+1;)r.push({rank:a,backwards:!0});n.backwards||r.push({rank:a,backwards:!0})}return r}function Ti(t){for(var n=s.max(t,function(w){return w.rank||0})||0,r=s.max(t,function(w){return w.band||0})||0,a=u.nest().key(function(w){return w.rank||0}).key(function(w){return w.band||0}).sortValues(function(w,p){return w.depth-p.depth}).map(t),f=new Array(n+1),c,d=0;d<=n;++d)if(f[d]=new Array(r+1),c=a.get(d),c)for(var v=0;v<=r;++v)f[d][v]=c.get(v)||[];else for(var m=0;m<=r;++m)f[d][m]=[];return f.bandValues=Ip(f),f}function Ip(t){if(t.length===0||t[0].length===0)return[];for(var n=t[0].length,r=new Array(n),a=0;a<n;a++)r[a]=0;return t.forEach(function(f){f.forEach(function(c,d){var v=s.sum(c,function(m){return m.value});r[d]=Math.max(r[d],v)})}),r}function $p(t,n,r){var a=s.max(t.nodes(),function(c){return t.node(c).rank||0})||0,f=(n-r)/a;t.nodes().forEach(function(c){var d=t.node(c);d.x0=f*(d.rank||0),d.x1=d.x0+r})}function Np(t,n){return 1}function Mi(){var t=Np;function n(r,a,f){r.forEach(function(c){var d=0;c.forEach(function(v,m){var w=r.bandValues[m]/s.sum(r.bandValues)*a,p=f*w/5,y=w-2*p,x=s.sum(v,function(k){return k.dy}),E=v.map(function(k,A){return k.value&&v[A+1]?t(v[A],v[A+1],n):0}),$=Math.max(0,y-x),N=s.sum(E)?$/s.sum(E):0,R=d+p;v.length===1&&(R+=(y-v[0].dy)/2);var M=Number.MAX_VALUE;v.forEach(function(k,A){k.y=R,k.spaceAbove=M,k.spaceBelow=E[A]*N,R+=k.dy+k.spaceBelow,M=k.spaceBelow,k.data&&k.data.forceY!==void 0&&(k.y=p+k.data.forceY*(y-k.dy))}),v.length>0&&(v[v.length-1].spaceBelow=Number.MAX_VALUE),d+=w})})}return n.separation=function(r){return arguments.length?(t=Lp(r),n):t},n}function Lp(t){if(typeof t!="function")throw new Error;return t}function Si(t,n){t.nodes().forEach(function(r){var a=t.node(r),f=u.map();function c(w,p){if(f.has(w))return f.get(w);var y={id:w,node:a.data,side:p,incoming:[],outgoing:[]};return f.set(w,y),y}t.inEdges(r).forEach(function(w){var p=t.edge(w),y=c(p.targetPortId||"in",a.direction!=="l"?"west":"east");y.incoming.push(w),p.targetPort=y}),t.outEdges(r).forEach(function(w){var p=t.edge(w),y=c(p.sourcePortId||"out",a.direction!=="l"?"east":"west");y.outgoing.push(w),p.sourcePort=y}),a.ports=f.values(),a.ports.sort(n),a.fromElsewhere=a.fromElsewhere||[],a.toElsewhere=a.toElsewhere||[];var d=0;a.fromElsewhere.forEach(function(w){w.x1=a.x0,d+=w.dy});var v={west:d,east:0},m={west:0,east:0};a.ports.forEach(function(w){w.y=v[w.side],w.index=m[w.side],w.dy=Math.max(s.sum(w.incoming,function(y){return t.edge(y).dy}),s.sum(w.outgoing,function(y){return t.edge(y).dy}));var p=w.side==="west"?a.x0:a.x1;w.outgoing.forEach(function(y){var x=t.edge(y);x.x0=p,x.y0=a.y+w.y+x.dy/2}),w.incoming.forEach(function(y){var x=t.edge(y);x.x1=p,x.y1=a.y+w.y+x.dy/2}),v[w.side]+=w.dy,m[w.side]+=1}),a.toElsewhere.forEach(function(w){w.x0=a.x1})})}function Ci(t,n,r){if(r===void 0&&(r=!0),n.v===n.w)return Math.PI/2*(r?1:-1);var a=t.edge(n);return Math.atan2(a.y1-a.y0,a.x1-a.x0)}function Oi(t,n){t.nodes().forEach(function(r){return Dp(t,r)})}function Dp(t,n){var r=t.node(n);r.ports.forEach(function(a){a.incoming.sort(Pi(t,r,!1)),a.outgoing.sort(Pi(t,r,!0))})}function Pi(t,n,r){return r===void 0&&(r=!0),function(a,f){var c=Ci(t,a,r),d=Ci(t,f,r),v=r?1:-1;return a.v===f.v&&a.w===f.w&&Math.abs(c-d)<.001?typeof a.name=="number"&&typeof f.name=="number"?a.name-f.name:typeof a.name=="string"&&typeof f.name=="string"?a.name.localeCompare(f.name):0:Math.abs(c-d)<.001?a.w===f.w?t.node(f.v).y-t.node(a.v).y:a.v===f.v?t.node(f.w).y-t.node(a.w).y:0:v*(c-d)}}function Ii(t,n){for(var r=null,a=0;a<t.length;++a)if(n(t[a])){r=a;break}return r}function $i(t,n){if(t.length!==0){for(var r=0,a,f=t.length-1;f>=0;--f)a=t[f].dy/2,t[f][n]-a<r&&(t[f][n]=Math.min(t[f].Rmax,r+a)),r=t[f][n]+a;for(var c=t[0].Rmax+t[0].dy/2,d=0;d<t.length;++d)a=t[d].dy/2,t[d][n]+a>c&&(t[d][n]=Math.max(a,c-a)),c=t[d][n]-a}}function Ni(t){return Rp(t),Fp(t),t}function Rp(t){t.nodes().forEach(function(n){var r=t.node(n),a=r.y,f=r.y;r.fromElsewhere.forEach(function(c){c.y1=f+c.dy/2,c.d1=r.backwards?"l":"r",c.dy=c.dy,f+=c.dy}),r.ports.forEach(function(c){a=r.y+c.y,f=r.y+c.y,c.outgoing.forEach(function(d){var v=t.edge(d);v.y0=a+v.dy/2,v.d0=r.backwards?"l":"r",v.dy=v.dy,a+=v.dy}),c.incoming.forEach(function(d){var v=t.edge(d);v.y1=f+v.dy/2,v.d1=r.backwards?"l":"r",v.dy=v.dy,f+=v.dy})}),r.toElsewhere.forEach(function(c){c.y0=a+c.dy/2,c.d0=r.backwards?"l":"r",c.dy=c.dy,a+=c.dy})})}function Fp(t){t.nodes().forEach(function(n){var r=t.node(n);Ee(r.toElsewhere,"r0"),Ee(r.fromElsewhere,"r1"),r.ports.forEach(function(a){Ee(a.outgoing.map(function(f){return t.edge(f)}),"r0"),Ee(a.incoming.map(function(f){return t.edge(f)}),"r1")})})}function kp(t){var n=t.x1-t.x0,r=t.y1-t.y0;return t.d0!==t.d1?Math.abs(r)/2.1:r!==0?(n*n+r*r)/Math.abs(4*r):1/0}function Ee(t,n){t.forEach(function(c){c.Rmax=kp(c),c[n]=Math.max(c.dy/2,c.d0===c.d1?c.Rmax*.6:5+c.dy/2)});var r=n==="r0"?Ii(t,function(c){return c.y1>c.y0}):Ii(t,function(c){return c.y0>c.y1});if(r===null&&(r=t.length),$i(t.slice(r),n),r>0){for(var a=[],f=r-1;f>=0;f--)a.push(t[f]);$i(a,n)}}function Li(t,n,r,a,f,c,d){var v=new _n({directed:!0,multigraph:!0});return t.nodes.forEach(function(m,w){var p=n(m,w);if(v.hasNode(p))throw new Error("duplicate: "+p);v.setNode(p,{data:m,index:w,backwards:r(m,w),fromElsewhere:m.fromElsewhere||[],toElsewhere:m.toElsewhere||[],x0:m.x0,x1:m.x1,y:m.y0})}),t.links.forEach(function(m,w){var p=Di(a(m,w)),y=Di(f(m,w)),x={data:m,sourcePortId:p.port,targetPortId:y.port,index:w,points:[],value:d(m,w),type:c(m,w)};if(!v.hasNode(p.id))throw new Error("missing: "+p.id);if(!v.hasNode(y.id))throw new Error("missing: "+y.id);v.setEdge(p.id,y.id,x,c(m,w))}),v.setGraph({}),v}function Di(t){return typeof t=="object"?t:{id:t,port:void 0}}function zp(t){return t.nodes}function Up(t){return t.links}function jp(t){return t.id}function Vp(t){return t.direction&&t.direction.toLowerCase()==="l"}function Bp(t){return{id:typeof t.source=="object"?t.source.id:t.source,port:typeof t.sourcePort=="object"?t.sourcePort.id:t.sourcePort}}function qp(t){return{id:typeof t.target=="object"?t.target.id:t.target,port:typeof t.targetPort=="object"?t.targetPort.id:t.targetPort}}function Hp(t){return t.type}function Kp(t,n){return t.id.localeCompare(n.id)}function Wp(){var t=zp,n=Up,r=jp,a=Vp,f=Bp,c=qp,d=Hp,v=null,m=[],w=25,p=null,y=Kp,x=0,E=0,$=1,N=1,R=1,M=null,k=function(C){return C.value},A=.5,L=Mi();function P(){var C={nodes:t.apply(null,arguments),links:n.apply(null,arguments)},U=Li(C,r,a,f,c,d,k);if(xn(U,k),p)U.nodes().forEach(function(J){var q=U.node(J),st=p(q.data);q.x0=st[0],q.x1=st[0]+R,q.y=st[1]}),En(U,M);else{v!==null?z(U,v):(_p(U,m),Ei(U,w)),Sp(U),xn(U,k),v===null&&Ei(U,w);var H=Ti(U.nodes().map(function(J){return U.node(J)}));F(U,H),En(U,M),L(H,N-E,A),$p(U,$-x,R),U.nodes().forEach(function(J){var q=U.node(J);q.x0+=x,q.x1+=x,q.y+=E})}return Si(U,y),Oi(U),Ni(U),Op(U),Ri(U),Fi(U),C}P.update=function(C,U){var H=Li(C,r,a,f,c,d,k);xn(H,k);var J=Ti(H.nodes().map(function(q){return H.node(q)}));return F(H,J),En(H,M),Si(H,y),Oi(H),Ni(H),Ri(H),Fi(H),C},P.nodes=function(C){return arguments.length?(t=wt(C),P):t},P.links=function(C){return arguments.length?(n=wt(C),P):n},P.nodeId=function(C){return arguments.length?(r=wt(C),P):r},P.nodeBackwards=function(C){return arguments.length?(a=wt(C),P):a},P.sourceId=function(C){return arguments.length?(f=wt(C),P):f},P.targetId=function(C){return arguments.length?(c=wt(C),P):c},P.linkType=function(C){return arguments.length?(d=wt(C),P):d},P.sortPorts=function(C){return arguments.length?(y=wt(C),P):y};function F(C,U){if(M===null){var H=s.sum(U.bandValues);H<=0?M=1:(M=(N-E)/H,A!==1&&(M*=1-A))}}P.ordering=function(C){return arguments.length?(v=C,P):v},P.rankSets=function(C){return arguments.length?(m=C,P):m},P.nodeWidth=function(C){return arguments.length?(R=C,P):R},P.nodePosition=function(C){return arguments.length?(p=C,P):p},P.size=function(C){return arguments.length?(x=E=0,$=+C[0],N=+C[1],P):[$-x,N-E]},P.extent=function(C){return arguments.length?(x=+C[0][0],E=+C[0][1],$=+C[1][0],N=+C[1][1],P):[[x,E],[$,N]]},P.whitespace=function(C){return arguments.length?(A=C,P):A},P.scale=function(C){return arguments.length?(M=C,P):M},P.linkValue=function(C){return arguments.length?(k=C,P):k},P.verticalLayout=function(C){return arguments.length?(L=wt(C),P):L};function z(C,U){U.forEach(function(H,J){H.forEach(function(q,st){if(q.forEach)q.forEach(function(it,$t){var xt=C.node(it);xt&&(xt.rank=J,xt.band=st,xt.depth=$t)});else{var nt=C.node(q);nt&&(nt.rank=J,nt.depth=st)}})})}return P}function xn(t,n){t.nodes().forEach(function(r){var a=t.node(r),f=s.sum(t.inEdges(r),function(d){return t.edge(d).value}),c=s.sum(t.outEdges(r),function(d){return t.edge(d).value});f+=s.sum(a.fromElsewhere||[],function(d){return n(d)}),c+=s.sum(a.toElsewhere||[],function(d){return n(d)}),a.value=Math.max(f,c)})}function En(t,n){t.edges().forEach(function(r){var a=t.edge(r);a.dy=a.value*n}),t.nodes().forEach(function(r){var a=t.node(r);a.dy=a.value*n,a.fromElsewhere=a.fromElsewhere||[],a.toElsewhere=a.toElsewhere||[],a.fromElsewhere.forEach(function(f){f.dy=f.value*n,f.source={id:"__from_elsewhere_"+r},f.target=a.data}),a.toElsewhere.forEach(function(f){f.dy=f.value*n,f.source=a.data,f.target={id:"__to_elsewhere_"+r}})})}function wt(t){if(typeof t!="function")throw new Error;return t}function Ri(t){t.edges().forEach(function(n){var r=t.edge(n);r.points.unshift({x:r.x0,y:r.y0,ro:r.r0,d:r.d0}),r.points.push({x:r.x1,y:r.y1,ri:r.r1,d:r.d1})}),t.nodes().forEach(function(n){var r=t.node(n);r.fromElsewhere.forEach(function(a){a.points=[{x:a.x1,y:a.y1,ri:a.r1,d:a.d1,style:"down-right"}]}),r.toElsewhere.forEach(function(a){a.points=[{x:a.x0,y:a.y0,ri:a.r0,d:a.d0,style:"right-down"}]})})}function Fi(t,n){t.nodes().forEach(function(r){var a=t.node(r);a.data.incoming=[],a.data.outgoing=[],a.data.ports=a.ports,a.data.ports.forEach(function(f){f.incoming=[],f.outgoing=[]}),a.data.dy=a.dy,a.data.x0=a.x0,a.data.x1=a.x1,a.data.y0=a.y,a.data.y1=a.y+a.dy,a.data.rank=a.rank,a.data.band=a.band,a.data.depth=a.depth,a.data.value=a.value,a.data.spaceAbove=a.spaceAbove,a.data.spaceBelow=a.spaceBelow}),t.edges().forEach(function(r){var a=t.edge(r);a.data.source=t.node(r.v).data,a.data.target=t.node(r.w).data,a.data.sourcePort=a.sourcePort,a.data.targetPort=a.targetPort,a.data.source.outgoing.push(a.data),a.data.target.incoming.push(a.data),a.data.sourcePort&&a.data.sourcePort.outgoing.push(a.data),a.data.targetPort&&a.data.targetPort.incoming.push(a.data),a.data.value=a.value,a.data.type=a.type,a.data.dy=a.dy,a.data.points=a.points||[]})}function Yp(){var t=25,n=8;function r(a,f){v(),p();for(var c=1,d=t;d>0;--d)w(c*=.99),p(),m(c),p();function v(){a.forEach(function(y){var x=0;y.forEach(function(E){E.forEach(function($){$.y=x++})})})}function m(y){a.forEach(function(E){E.forEach(function($){$.forEach(function(N){var R=N.incoming||N.edges;if(R.length){var M=s.sum(R,x)/s.sum(R,ki);N.y+=(M-Ae(N))*y}})})});function x(E){return Ae(E.source)*E.value}}function w(y){a.slice().reverse().forEach(function(E){E.forEach(function($){$.forEach(function(N){var R=N.outgoing||N.edges;if(R.length){var M=s.sum(R,x)/s.sum(R,ki);N.y+=(M-Ae(N))*y}})})});function x(E){return Ae(E.target)*E.value}}function p(){a.forEach(function(y){y.forEach(function(x){var E,$,N=0,R=x.length,M;for(x.sort(Zp),M=0;M<R;++M)E=x[M],$=N-E.y,$>0&&(E.y+=$),N=E.y+E.dy+n;if($=N-n-f,$>0)for(N=E.y-=$,M=R-2;M>=0;--M)E=x[M],$=E.y+E.dy+n-N,$>0&&(E.y-=$),N=E.y})})}}return r.iterations=function(a){return arguments.length?(t=+a,r):t},r.padding=function(a){return arguments.length?(n=+a,r):n},r}function Ae(t){return t.y+t.dy/2}function ki(t){return t.value}function Zp(t,n){return t.y-n.y}function Xp(t){return t.dy===0?0:2}function zi(){var t=Xp;function n(p){var y=p.x1-p.x0,x=p.y1-p.y0,E=p.dy/2,$=(y*y+x*x)/Math.abs(4*x);return[E,$]}function r(p){if(p.points.length===1)return w(p);for(var y="",x,E=0;E<p.points.length-1;++E)x={x0:p.points[E].x,y0:p.points[E].y,x1:p.points[E+1].x,y1:p.points[E+1].y,r0:p.points[E].ro,r1:p.points[E+1].ri,d0:p.points[E].d,d1:p.points[E+1].d,dy:p.dy},y+=a(x);return y}function a(p){var y=(p.d0||"r")+(p.d1||"r");if(p.source&&p.source===p.target)return f(p);if(y==="rl")return c(p);if(y==="rd")return d(p);if(y==="dr")return v(p);if(y==="lr")return m(p);var x=Math.max(t(p),p.dy)/2,E=p.x0,$=p.x1,N=p.y0,R=p.y1;if($<E){var M;M=[$,E],E=M[0],$=M[1];var k;k=[R,N],N=k[0],R=k[1]}var A=R>N?1:-1,L=1,P=n(p),F=Math.max(P[0],Math.min(P[1],($-E)/3)),z=Math.max(P[0],Math.min(P[1],p.r0||F)),C=Math.max(P[0],Math.min(P[1],p.r1||F)),U=$-E,H=R-N-A*(z+C),J=Math.sqrt(U*U+H*H),q=-A*Math.acos(Math.min(1,(z+C)/J)),st=Math.atan2(H,U),nt=Math.PI/2+A*(st+q),it=x*A*Math.sin(nt),$t=x*Math.cos(nt),xt=E+L*z*Math.sin(Math.abs(nt)),Mn=$-L*C*Math.sin(Math.abs(nt)),Sn=N+z*A*(1-Math.cos(nt)),Cn=R-C*A*(1-Math.cos(nt));(isNaN(nt)||Math.abs(nt)<.001)&&(nt=z=C=0,xt=E,Mn=$,Sn=N,Cn=R,it=0,$t=x);function Te(Vi,On){var rg=Vi*(R-N)>0?1:0,Pn=L*Vi*(R-N)>0?On+x:On-x;return nt===0&&(Pn=On),"A"+Pn+" "+Pn+" "+Math.abs(nt)+" 0 "+rg+" "}var Me;return Me="M"+[E,N-x]+" "+Te(1,z)+[xt+it,Sn-$t]+" L"+[Mn+it,Cn-$t]+" "+Te(-1,C)+[$,R-x]+" L"+[$,R+x]+" "+Te(1,C)+[Mn-it,Cn+$t]+" L"+[xt-it,Sn+$t]+" "+Te(-1,z)+[E,N+x]+" Z",/NaN/.test(Me)&&console.error("path NaN",p,Me),Me}function f(p){var y=Math.max(t(p),p.dy)/2,x=y*1.5,E=2*Math.PI,$=p.x0,N=p.y0;function R(M){var k=M>0?1:0,A=M>0?x+y:x-y;return"A"+A+" "+A+" "+Math.abs(E)+" 1 "+k+" "}return"M"+[$+.1,N-y]+" "+R(1)+[$-.1,N-y]+" L"+[$-.1,N+y]+" "+R(-1)+[$+.1,N+y]+" Z"}function c(p){var y=Math.max(t(p),p.dy)/2,x=p.x0,E=p.x1,$=p.y0,N=p.y1,R=p.x1-p.x0,M=p.y1-p.y0,k=(p.r0+p.r1)/2||5+y,A=Math.min(Math.abs(N-$)/2.1,k),L=Math.atan2(M-2*A,R),P=p.y1>p.y0?1:-1,F=y*Math.sin(L),z=y*Math.cos(L),C=p.x0+A*Math.sin(Math.abs(L)),U=p.x1+A*Math.sin(Math.abs(L)),H=p.y0+A*P*(1-Math.cos(L)),J=p.y1-A*P*(1-Math.cos(L));function q(st){var nt=st*L>0?1:0,it=st*L>0?A+y:A-y;return L===0&&(it=A),"A"+it+" "+it+" "+Math.abs(L)+" 0 "+nt+" "}return"M"+[x,$-y]+" "+q(1)+[C+F,H-z]+" L"+[U+F,J-z]+" "+q(1)+[E,N+y]+" L"+[E,N-y]+" "+q(-1)+[U-F,J+z]+" L"+[C-F,H+z]+" "+q(-1)+[x,$+y]+" Z"}function d(p){var y=Math.max(t(p),p.dy)/2,x=p.x0,E=p.x1,$=p.y0,N=p.y1;p.x1-p.x0,p.y1-p.y0;var R=Math.PI/2,M=Math.max(0,E-x);p.y1>p.y0;var k=$+M;function A(L){var P=L*R>0?1:0,F=L*R>0?M+y:M-y;return R===0&&(F=M),"A"+F+" "+F+" "+Math.abs(R)+" 0 "+P+" "}return"M"+[x,$-y]+" "+A(1)+[E+y,k]+" L"+[E+y,N]+" "+[E-y,N]+" "+[E-y,k]+" "+A(-1)+[x,$+y]+" Z"}function v(p){var y=Math.max(t(p),p.dy)/2,x=p.x0,E=p.x1,$=p.y0,N=p.y1;p.x1-p.x0,p.y1-p.y0;var R=Math.PI/2,M=Math.max(0,E-x);p.y1>p.y0;var k=N-M;function A(L){var P=L*R>0?1:0,F=L*R>0?M+y:M-y;return R===0&&(F=M),"A"+F+" "+F+" "+Math.abs(R)+" 0 "+P+" "}return"M"+[x-y,$]+" L"+[x+y,$]+" "+[x+y,k]+" "+A(-1)+[E,N-y]+" L"+[E,N+y]+" "+A(1)+[x-y,k]+" Z"}function m(p){var y=Math.max(t(p),p.dy)/2,x=p.x0,E=p.x1,$=p.y0,N=p.y1,R=p.x1-p.x0,M=p.y1-p.y0,k=(p.r0+p.r1)/2||5+y,A=Math.min(Math.abs(M)/2.1,k),L=Math.atan2(M-2*A,R),P=p.y1>p.y0?1:-1,F=y*Math.sin(L),z=y*Math.cos(L),C=p.x0-A*Math.sin(Math.abs(L)),U=p.x1-A*Math.sin(Math.abs(L)),H=p.y0+A*P*(1-Math.cos(L)),J=p.y1-A*P*(1-Math.cos(L));function q(st){var nt=st*L>0?1:0,it=-st*L>0?A+y:A-y;return L===0&&(it=A),"A"+it+" "+it+" "+Math.abs(L)+" 0 "+nt+" "}return"M"+[x,$-y]+" "+q(-1)+[C-F,H-z]+" L"+[U-F,J-z]+" "+q(-1)+[E,N+y]+" L"+[E,N-y]+" "+q(1)+[U+F,J-z]+" L"+[C+F,H-z]+" "+q(1)+[x,$+y]+" Z"}function w(p){var y=p.points[0],x=Math.max(t(p),p.dy)/2;if(y.style==="down-right")return"M"+[y.x-20,y.y-x]+" L"+[y.x,y.y-x]+" L"+[y.x,y.y+x]+" L"+[y.x-20,y.y+x]+" Z";if(y.style==="right-down")return"M"+[y.x,y.y-x]+" L"+[y.x+20,y.y-x]+" L"+[y.x+20,y.y+x]+" L"+[y.x,y.y+x]+" Z"}return r.minWidth=function(p){return arguments.length?(t=Jp(p),r):t},r}function Jp(t){if(typeof t!="function")throw new Error;return t}var Ui=function(){var t=function(f){return f.title!==void 0?f.title:f.id},n=function(f){return null},r=function(f){return!!t(f)};function a(f){var c=f.selection?f.selection():f;c.select("text").empty()&&(c.append("title"),c.append("line").attr("x1",0).attr("x2",0),c.append("rect").attr("class","node-body"),c.append("text").attr("class","node-value").attr("dy",".35em").attr("text-anchor","middle"),c.append("text").attr("class","node-title").attr("dy",".35em"),c.append("rect").attr("class","node-click-target").attr("x",-5).attr("y",-5).attr("width",10).style("fill","none").style("visibility","hidden").style("pointer-events","all"),c.attr("transform",ji)),c.each(function(d){var v=h.select(this).select("title"),m=h.select(this).select(".node-value"),w=h.select(this).select(".node-title"),p=h.select(this).select("line"),y=h.select(this).select(".node-body"),x=h.select(this).select(".node-click-target"),E=Qp(d);E.dy=d.y0===d.y1?0:Math.max(1,d.y1-d.y0);var $=d.x1-d.x0>2,N=t(d)+(!$&&n(d)?" ("+n(d)+")":"");v.text(N),m.text(n).style("display",$?"inline":"none"),w.attr("text-anchor",E.right?"end":"start").text(N).each(Gp,100),f!==c&&(w=w.transition(f),p=p.transition(f),y=y.transition(f),x=x.transition(f)),f.attr("transform",ji),p.attr("y1",function(M){return E.titleAbove?-5:0}).attr("y2",function(M){return E.dy}).style("display",function(M){return M.y0===M.y1||!r(M)?"none":"inline"}),x.attr("height",function(M){return E.dy+5}),y.attr("width",function(M){return M.x1-M.x0}).attr("height",function(M){return E.dy}),w.attr("transform",R).style("display",function(M){return M.y0===M.y1||!r(M)?"none":"inline"}),m.style("font-size",function(M){return Math.min(M.x1-M.x0-4,M.y1-M.y0-4)+"px"}).attr("transform",function(M){var k=M.x1-M.x0,A=M.y1-M.y0,L=k>A?0:-90;return"translate("+k/2+","+A/2+") rotate("+L+")"});function R(M){var k=E,A=k.titleAbove?-10:(M.y1-M.y0)/2,L;return k.titleAbove?L=k.right?4:-4:L=k.right?-4:M.x1-M.x0+4,"translate("+L+","+A+")"}})}return a.nodeVisible=function(f){return arguments.length?(r=An(f),a):r},a.nodeTitle=function(f){return arguments.length?(t=An(f),a):t},a.nodeValue=function(f){return arguments.length?(n=An(f),a):n},a};function ji(t){return"translate("+t.x0+","+t.y0+")"}function Qp(t){var n=!1,r=!1;return t.spaceAbove>20&&t.style!=="type"?n=!0:n=!1,t.incoming.length===0?(r=!0,n=!1):t.outgoing.length===0&&(r=!1,n=!1),{titleAbove:n,right:r}}function Gp(t,n){var r=h.select(this),a=r.text().split(/\n/),f=1.1;a.length!==1&&(r.text(null),a.forEach(function(c,d){r.append("tspan").attr("x",0).attr("dy",(d===0?.7-a.length/2:1)*f+"em").text(c)}))}function An(t){if(typeof t!="function")throw new Error;return t}function tg(t,n){var r={top:Number.MAX_VALUE,left:Number.MAX_VALUE,bottom:0,right:0};return n.nodes.forEach(function(a){var f=t.get(a);f&&(f.x0<r.left&&(r.left=f.x0),f.x1>r.right&&(r.right=f.x1),f.y0<r.top&&(r.top=f.y0),f.y1>r.bottom&&(r.bottom=f.y1))}),n.rect=r,n}function Tn(t,n,r){return function(a){var f=[],c=t(a.source),d=t(a.target),v=n(a);return f.push(c+" → "+d),v&&f.push(v),f.push(r(a.value)),f.join(`
`)}}function eg(){var t={top:0,right:0,bottom:0,left:0},n=null,r=[],a=b.format(".3s"),f=Ui(),c=zi(),d=function(A){return null},v=Tn(f.nodeTitle(),function(A){return A.type},a),m=ng,w=_.dispatch("selectNode","selectGroup","selectLink");function p(A){var L=A.selection?A.selection():A;L.each(function(P){var F=h.select(this),z=F.selectAll(".sankey").data([{type:"sankey"}]),C=z.enter().append("g").classed("sankey",!0);C.append("g").classed("groups",!0),C.append("g").classed("links",!0),C.append("g").classed("nodes",!0),C.append("g").classed("slice-titles",!0),z=z.merge(C),z.attr("transform","translate("+t.left+","+t.top+")");var U=u.map(P.nodes,function(q){return q.id}),H=(r||[]).map(function(q){return tg(U,q)}),J=Array.from(P.links);P.nodes.forEach(function(q){Array.prototype.push.apply(J,q.fromElsewhere||[]),Array.prototype.push.apply(J,q.toElsewhere||[])}),y(z,A,P.nodes),x(z,A,J),E(F,H),F.on("click",function(){w.call("selectNode",this,null),w.call("selectLink",this,null)})})}function y(A,L,P){var F=A.select(".nodes").selectAll(".node").data(P,function(z){return z.id});F.exit().remove(),F=F.merge(F.enter().append("g").attr("class","node").call(f).on("click",k)),L instanceof g.transition?F.transition(L).call(f):F.call(f)}function x(A,L,P){var F=A.select(".links").selectAll(".link").data(P,function(C){return C.source.id+"-"+C.target.id+"-"+C.type});F.exit().remove();var z=F.enter().append("g").attr("class","link").on("click",M);z.append("path").attr("d",c).style("fill","white").each(function(C){this._current=C}),z.append("title"),z.append("text").attr("class","label").attr("dy","0.35em").attr("x",function(C){return C.points[0].x+4}).attr("y",function(C){return C.points[0].y}),F=F.merge(z),F.classed("selected",function(C){return C.id===n}),F.sort(R),L instanceof g.transition?(F=F.transition(L),F.select("path").style("fill",d).each(function(C){h.select(this).transition(L).attrTween("d",$)})):F.select("path").style("fill",d).attr("d",c),F.select("title").text(v),F.select(".label").text(m).attr("x",function(C){return C.points[0].x+4}).attr("y",function(C){return C.points[0].y})}function E(A,L){var P=A.select(".groups").selectAll(".group").data(L);P.exit().remove();var F=P.enter().append("g").attr("class","group");F.append("rect"),F.append("text").attr("x",-10).attr("y",-25),P=P.merge(F),P.style("display",function(z){return z.title?"inline":"none"}).attr("transform",function(z){return"translate("+z.rect.left+","+z.rect.top+")"}).select("rect").attr("x",-10).attr("y",-20).attr("width",function(z){return z.rect.right-z.rect.left+20}).attr("height",function(z){return z.rect.bottom-z.rect.top+30}),P.select("text").text(function(z){return z.title})}function $(A){A.points.forEach(function(F){F.ri>1e3&&(F.ri=1e3),F.ro>1e3&&(F.ro=1e3)});var L=l.interpolate(N(this._current),A),P=this;return function(F){return P._current=L(F),c(P._current)}}function N(A){return{points:A.points,dy:A.dy}}function R(A,L){return A.id===n?1:L.id===n||!A.source||A.target&&A.target.direction==="d"?-1:!L.source||L.target&&L.target.direction==="d"?1:!A.target||A.source&&A.source.direction==="d"?-1:!L.target||L.source&&L.source.direction==="d"?1:A.dy-L.dy}function M(A){h.event.stopPropagation();var L=h.select(this).node();w.call("selectLink",L,A)}function k(A){h.event.stopPropagation();var L=h.select(this).node();w.call("selectNode",L,A)}return p.margins=function(A){return arguments.length?(t={top:A.top===void 0?t.top:A.top,left:A.left===void 0?t.left:A.left,bottom:A.bottom===void 0?t.bottom:A.bottom,right:A.right===void 0?t.right:A.right},this):t},p.groups=function(A){return arguments.length?(r=A,this):r},p.nodeTitle=function(A){return arguments.length?(f.nodeTitle(A),v=Tn(A,function(L){return L.type},a),this):f.nodeTitle()},p.nodeValue=function(A){return arguments.length?(f.nodeValue(A),this):f.nodeValue()},p.linkTitle=function(A){return arguments.length?(v=A,this):v},p.linkLabel=function(A){return arguments.length?(m=A,this):m},p.linkColor=function(A){return arguments.length?(d=A,this):d},p.linkMinWidth=function(A){return arguments.length?(c.minWidth(A),this):c.minWidth()},p.selectNode=function(A){return this},p.selectLink=function(A){return n=A,this},p.on=function(){var A=w.on.apply(w,arguments);return A===w?p:A},p}function ng(t){return null}o.sankey=Wp,o.sankeyPositionJustified=Mi,o.sankeyPositionRelaxation=Yp,o.sankeyLink=zi,o.sankeyNode=Ui,o.sankeyDiagram=eg,o.sankeyLinkTitle=Tn,Object.defineProperty(o,"__esModule",{value:!0})})})(Rn,Rn.exports);var ia=Rn.exports;const G0={messages:{en:{total:"total",showChanges:"Only show changes"},de:{total:"Insgesamt",showChanges:"Nur Änderungen zeigen"}}},t1=ig({name:"SankeyPlugin",i18n:G0,props:{root:{type:String,required:!0},subfolder:{type:String,required:!0},yamlConfig:String,thumbnail:Boolean,config:Object},data(){return{globalState:Bi.state,vizDetails:{csv:"",dataset:"",title:"",description:""},loadingText:"",jsonChart:{},totalTrips:0,cleanConfigId:`sankey-${Math.floor(1e12*Math.random())}`,onlyShowChanges:!1,csvData:[],colorRamp:[],textSize:0,resizeObserver:null}},computed:{fileApi(){return new Zg(this.fileSystem,Bi)},fileSystem(){const e=this.$store.state.svnProjects.filter(i=>i.slug===this.root);if(e.length===0)throw console.log("no such project"),Error;return e[0]}},watch:{"globalState.resizeEvents"(){this.changeDimensions()},yamlConfig(){this.getVizDetails()},subfolder(){this.getVizDetails()},onlyShowChanges(){this.jsonChart=this.processInputs(),this.doD3()}},methods:{changeDimensions(){const e=document.querySelector(`#${this.cleanConfigId}`);e&&(this.textSize=e.clientWidth>900?2:e.clientWidth>600?1:0),this.jsonChart?.nodes&&this.doD3()},async getVizDetails(){if(this.config){this.vizDetails=Object.assign({},this.config),this.$emit("title",this.vizDetails.title);return}this.loadingText="Loading config...";const e=this.yamlConfig??"",i=e.indexOf("/")>-1?e:this.subfolder+"/"+e,o=await this.fileApi.getFileText(i);this.vizDetails=og.parse(o),this.$emit("title",this.vizDetails.title)},async loadFiles(){const e=this.vizDetails.csv||this.vizDetails.dataset;if(!e)return this.$emit("error",'YAML must specify csv "dataset" filename'),[];this.loadingText="Loading files...";let i;try{i=await this.fileApi.getFileText(this.subfolder+"/"+e)}catch{return this.$emit("error","File not found: "+this.subfolder+"/"+e),[]}try{return Yg.parse(i,{header:!1,dynamicTyping:!0,skipEmptyLines:!0,delimitersToGuess:["	",";",","," "],comments:"#"}).data}catch(o){const s=o;console.error({e:s}),this.loadingText=""+s,this.$emit("error","File loaded but could not parse: "+this.subfolder+"/"+this.vizDetails.csv)}return[]},processInputs(){this.loadingText="Building node graph...";const e=[],i=[],o=[];this.totalTrips=0;try{for(const T of this.csvData.slice(1)){e.includes(T[0])||e.push(T[0]),i.includes(T[1])||i.push(T[1]);const S=T[2];if(S!==0){if(S<0){console.warn("Data contains NEGATIVE numbers!!!");continue}this.onlyShowChanges&&T[0]===T[1]||(o.push([T[0],T[1],S]),this.totalTrips+=S)}}}catch(T){console.error(T)}const s=[],u=[],l={nodes:[],links:[],ordering:[[s],[u]]},h={},g={};e.forEach((T,S)=>{l.nodes.push({id:S,title:T}),h[T]=S,s.push(S)}),i.forEach((T,S)=>{const O=S+e.length;l.nodes.push({id:O,title:T}),g[T]=O,u.push(O)});for(const T of o)l.links.push({source:h[T[0]],target:g[T[1]],value:T[2]});const _=e.length,b=[...Array(_).keys()].map(T=>Xg(T/_).replace(/rgb(.*)\)/,"rgba$1, 0.7)"));return this.colorRamp=b,l},getMaxLabelWidth(){const i=document.createElement("canvas").getContext("2d");if(!i)return 120;i.font=this.textSize==2?"bold 33px Arial":this.textSize==1?"24px Arial":"16px Arial";let o=0;for(const s of this.jsonChart.nodes){const u=s.title,l=i.measureText(u).width;o=Math.max(o,l)}return o},doD3(){const e=this.jsonChart;let i=document.querySelector(`#${this.cleanConfigId}`),o=i?i.clientWidth:100,s=i?i.clientHeight:100,u=10+this.getMaxLabelWidth();const l=ia.sankey().nodeWidth(8).ordering(e.ordering).extent([[u,0],[o-u,s]]),h=ia.sankeyDiagram().linkColor(g=>this.colorRamp[g.source.id]);Xn("#"+this.cleanConfigId).datum(l(e)).call(h).attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${o} ${s}`)}},beforeDestroy(){this.resizeObserver&&this.resizeObserver.disconnect()},async mounted(){try{await this.getVizDetails(),this.csvData=await this.loadFiles(),this.jsonChart=this.processInputs()}catch(i){this.$emit("error",""+i)}this.resizeObserver=new ResizeObserver(()=>{this.changeDimensions()});const e=document.querySelector(`#${this.cleanConfigId}`);e&&this.resizeObserver.observe(e),this.doD3()}});var e1=function(){var i=this,o=i._self._c;return i._self._setupProxy,o("div",{staticClass:"sankey-container",class:{"is-thumbnail":i.thumbnail,"is-large":i.textSize==2,"is-medium":i.textSize==1}},[o("svg",{staticClass:"chart-area",class:{"is-thumbnail":i.thumbnail},attrs:{id:i.cleanConfigId}}),i.thumbnail?i._e():o("div",{staticClass:"labels"},[o("p",{staticClass:"center"},[o("b",[i._v(i._s(i.totalTrips.toLocaleString())+" "+i._s(i.$t("total")))])])]),i.thumbnail?i._e():o("b-switch",{staticClass:"switcher",attrs:{size:"is-small"},model:{value:i.onlyShowChanges,callback:function(s){i.onlyShowChanges=s},expression:"onlyShowChanges"}},[i._v(i._s(i.$t("showChanges")))])],1)},n1=[],r1=ag(t1,e1,n1,!1,null,"860e2bb7");const w1=r1.exports;export{w1 as default};
