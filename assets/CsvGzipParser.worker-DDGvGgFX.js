(function(){"use strict";function De(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function zt(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Qt={},Vt=Object.freeze({__proto__:null,default:Qt}),Ye=zt(Vt),Re={};(function(t){t.isInteger=e=>typeof e=="number"?Number.isInteger(e):typeof e=="string"&&e.trim()!==""?Number.isInteger(Number(e)):!1,t.find=(e,r)=>e.nodes.find(n=>n.type===r),t.exceedsLimit=(e,r,n=1,s)=>s===!1||!t.isInteger(e)||!t.isInteger(r)?!1:(Number(r)-Number(e))/Number(n)>=s,t.escapeNode=(e,r=0,n)=>{const s=e.nodes[r];s&&(n&&s.type===n||s.type==="open"||s.type==="close")&&s.escaped!==!0&&(s.value="\\"+s.value,s.escaped=!0)},t.encloseBrace=e=>e.type!=="brace"||e.commas>>0+e.ranges>>0?!1:(e.invalid=!0,!0),t.isInvalidBrace=e=>e.type!=="brace"?!1:e.invalid===!0||e.dollar?!0:!(e.commas>>0+e.ranges>>0)||e.open!==!0||e.close!==!0?(e.invalid=!0,!0):!1,t.isOpenOrClose=e=>e.type==="open"||e.type==="close"?!0:e.open===!0||e.close===!0,t.reduce=e=>e.reduce((r,n)=>(n.type==="text"&&r.push(n.value),n.type==="range"&&(n.type="text"),r),[]),t.flatten=(...e)=>{const r=[],n=s=>{for(let o=0;o<s.length;o++){const i=s[o];if(Array.isArray(i)){n(i);continue}i!==void 0&&r.push(i)}return r};return n(e),r}})(Re);const Je=Re;var Ne=(t,e={})=>{const r=(n,s={})=>{const o=e.escapeInvalid&&Je.isInvalidBrace(s),i=n.invalid===!0&&e.escapeInvalid===!0;let a="";if(n.value)return(o||i)&&Je.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(const u of n.nodes)a+=r(u);return a};return r(t)};/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */var Zt=function(t){return typeof t=="number"?t-t===0:typeof t=="string"&&t.trim()!==""?Number.isFinite?Number.isFinite(+t):isFinite(+t):!1};/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const et=Zt,ne=(t,e,r)=>{if(et(t)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(e===void 0||t===e)return String(t);if(et(e)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let n={relaxZeros:!0,...r};typeof n.strictZeros=="boolean"&&(n.relaxZeros=n.strictZeros===!1);let s=String(n.relaxZeros),o=String(n.shorthand),i=String(n.capture),a=String(n.wrap),u=t+":"+e+"="+s+o+i+a;if(ne.cache.hasOwnProperty(u))return ne.cache[u].result;let l=Math.min(t,e),c=Math.max(t,e);if(Math.abs(l-c)===1){let b=t+"|"+e;return n.capture?`(${b})`:n.wrap===!1?b:`(?:${b})`}let h=ot(t)||ot(e),f={min:t,max:e,a:l,b:c},A=[],R=[];if(h&&(f.isPadded=h,f.maxLen=String(f.max).length),l<0){let b=c<0?Math.abs(c):1;R=tt(b,Math.abs(l),f,n),l=f.a=0}return c>=0&&(A=tt(l,c,f,n)),f.negatives=R,f.positives=A,f.result=qt(R,A),n.capture===!0?f.result=`(${f.result})`:n.wrap!==!1&&A.length+R.length>1&&(f.result=`(?:${f.result})`),ne.cache[u]=f,f.result};function qt(t,e,r){let n=He(t,e,"-",!1)||[],s=He(e,t,"",!1)||[],o=He(t,e,"-?",!0)||[];return n.concat(o).concat(s).join("|")}function jt(t,e){let r=1,n=1,s=nt(t,r),o=new Set([e]);for(;t<=s&&s<=e;)o.add(s),r+=1,s=nt(t,r);for(s=st(e+1,n)-1;t<s&&s<=e;)o.add(s),n+=1,s=st(e+1,n)-1;return o=[...o],o.sort(Jt),o}function Dt(t,e,r){if(t===e)return{pattern:t,count:[],digits:0};let n=Yt(t,e),s=n.length,o="",i=0;for(let a=0;a<s;a++){let[u,l]=n[a];u===l?o+=u:u!=="0"||l!=="9"?o+=er(u,l):i++}return i&&(o+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:o,count:[i],digits:s}}function tt(t,e,r,n){let s=jt(t,e),o=[],i=t,a;for(let u=0;u<s.length;u++){let l=s[u],c=Dt(String(i),String(l),n),h="";if(!r.isPadded&&a&&a.pattern===c.pattern){a.count.length>1&&a.count.pop(),a.count.push(c.count[0]),a.string=a.pattern+it(a.count),i=l+1;continue}r.isPadded&&(h=tr(l,r,n)),c.string=h+c.pattern+it(c.count),o.push(c),i=l+1,a=c}return o}function He(t,e,r,n,s){let o=[];for(let i of t){let{string:a}=i;!n&&!rt(e,"string",a)&&o.push(r+a),n&&rt(e,"string",a)&&o.push(r+a)}return o}function Yt(t,e){let r=[];for(let n=0;n<t.length;n++)r.push([t[n],e[n]]);return r}function Jt(t,e){return t>e?1:e>t?-1:0}function rt(t,e,r){return t.some(n=>n[e]===r)}function nt(t,e){return Number(String(t).slice(0,-e)+"9".repeat(e))}function st(t,e){return t-t%Math.pow(10,e)}function it(t){let[e=0,r=""]=t;return r||e>1?`{${e+(r?","+r:"")}}`:""}function er(t,e,r){return`[${t}${e-t===1?"":"-"}${e}]`}function ot(t){return/^-?(0+)\d/.test(t)}function tr(t,e,r){if(!e.isPadded)return t;let n=Math.abs(e.maxLen-String(t).length),s=r.relaxZeros!==!1;switch(n){case 0:return"";case 1:return s?"0?":"0";case 2:return s?"0{0,2}":"00";default:return s?`0{0,${n}}`:`0{${n}}`}}ne.cache={},ne.clearCache=()=>ne.cache={};var rr=ne;/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const nr=Ye,at=rr,ut=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),sr=t=>e=>t===!0?Number(e):String(e),Te=t=>typeof t=="number"||typeof t=="string"&&t!=="",fe=t=>Number.isInteger(+t),Oe=t=>{let e=`${t}`,r=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++r]==="0";);return r>0},ir=(t,e,r)=>typeof t=="string"||typeof e=="string"?!0:r.stringify===!0,or=(t,e,r)=>{if(e>0){let n=t[0]==="-"?"-":"";n&&(t=t.slice(1)),t=n+t.padStart(n?e-1:e,"0")}return r===!1?String(t):t},ye=(t,e)=>{let r=t[0]==="-"?"-":"";for(r&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return r?"-"+t:t},ar=(t,e,r)=>{t.negatives.sort((a,u)=>a<u?-1:a>u?1:0),t.positives.sort((a,u)=>a<u?-1:a>u?1:0);let n=e.capture?"":"?:",s="",o="",i;return t.positives.length&&(s=t.positives.map(a=>ye(String(a),r)).join("|")),t.negatives.length&&(o=`-(${n}${t.negatives.map(a=>ye(String(a),r)).join("|")})`),s&&o?i=`${s}|${o}`:i=s||o,e.wrap?`(${n}${i})`:i},lt=(t,e,r,n)=>{if(r)return at(t,e,{wrap:!1,...n});let s=String.fromCharCode(t);if(t===e)return s;let o=String.fromCharCode(e);return`[${s}-${o}]`},ct=(t,e,r)=>{if(Array.isArray(t)){let n=r.wrap===!0,s=r.capture?"":"?:";return n?`(${s}${t.join("|")})`:t.join("|")}return at(t,e,r)},ft=(...t)=>new RangeError("Invalid range arguments: "+nr.inspect(...t)),ht=(t,e,r)=>{if(r.strictRanges===!0)throw ft([t,e]);return[]},ur=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},lr=(t,e,r=1,n={})=>{let s=Number(t),o=Number(e);if(!Number.isInteger(s)||!Number.isInteger(o)){if(n.strictRanges===!0)throw ft([t,e]);return[]}s===0&&(s=0),o===0&&(o=0);let i=s>o,a=String(t),u=String(e),l=String(r);r=Math.max(Math.abs(r),1);let c=Oe(a)||Oe(u)||Oe(l),h=c?Math.max(a.length,u.length,l.length):0,f=c===!1&&ir(t,e,n)===!1,A=n.transform||sr(f);if(n.toRegex&&r===1)return lt(ye(t,h),ye(e,h),!0,n);let R={negatives:[],positives:[]},b=P=>R[P<0?"negatives":"positives"].push(Math.abs(P)),m=[],S=0;for(;i?s>=o:s<=o;)n.toRegex===!0&&r>1?b(s):m.push(or(A(s,S),h,f)),s=i?s-r:s+r,S++;return n.toRegex===!0?r>1?ar(R,n,h):ct(m,null,{wrap:!1,...n}):m},cr=(t,e,r=1,n={})=>{if(!fe(t)&&t.length>1||!fe(e)&&e.length>1)return ht(t,e,n);let s=n.transform||(f=>String.fromCharCode(f)),o=`${t}`.charCodeAt(0),i=`${e}`.charCodeAt(0),a=o>i,u=Math.min(o,i),l=Math.max(o,i);if(n.toRegex&&r===1)return lt(u,l,!1,n);let c=[],h=0;for(;a?o>=i:o<=i;)c.push(s(o,h)),o=a?o-r:o+r,h++;return n.toRegex===!0?ct(c,null,{wrap:!1,options:n}):c},be=(t,e,r,n={})=>{if(e==null&&Te(t))return[t];if(!Te(t)||!Te(e))return ht(t,e,n);if(typeof r=="function")return be(t,e,1,{transform:r});if(ut(r))return be(t,e,0,r);let s={...n};return s.capture===!0&&(s.wrap=!0),r=r||s.step||1,fe(r)?fe(t)&&fe(e)?lr(t,e,r,s):cr(t,e,Math.max(Math.abs(r),1),s):r!=null&&!ut(r)?ur(r,s):be(t,e,1,r)};var pt=be;const fr=pt,gt=Re;var hr=(t,e={})=>{const r=(n,s={})=>{const o=gt.isInvalidBrace(s),i=n.invalid===!0&&e.escapeInvalid===!0,a=o===!0||i===!0,u=e.escapeInvalid===!0?"\\":"";let l="";if(n.isOpen===!0)return u+n.value;if(n.isClose===!0)return console.log("node.isClose",u,n.value),u+n.value;if(n.type==="open")return a?u+n.value:"(";if(n.type==="close")return a?u+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":a?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){const c=gt.reduce(n.nodes),h=fr(...c,{...e,wrap:!1,toRegex:!0,strictZeros:!0});if(h.length!==0)return c.length>1&&h.length>1?`(${h})`:h}if(n.nodes)for(const c of n.nodes)l+=r(c,n);return l};return r(t)};const pr=pt,dt=Ne,ue=Re,se=(t="",e="",r=!1)=>{const n=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return r?ue.flatten(e).map(s=>`{${s}}`):e;for(const s of t)if(Array.isArray(s))for(const o of s)n.push(se(o,e,r));else for(let o of e)r===!0&&typeof o=="string"&&(o=`{${o}}`),n.push(Array.isArray(o)?se(s,o,r):s+o);return ue.flatten(n)};var gr=(t,e={})=>{const r=e.rangeLimit===void 0?1e3:e.rangeLimit,n=(s,o={})=>{s.queue=[];let i=o,a=o.queue;for(;i.type!=="brace"&&i.type!=="root"&&i.parent;)i=i.parent,a=i.queue;if(s.invalid||s.dollar){a.push(se(a.pop(),dt(s,e)));return}if(s.type==="brace"&&s.invalid!==!0&&s.nodes.length===2){a.push(se(a.pop(),["{}"]));return}if(s.nodes&&s.ranges>0){const h=ue.reduce(s.nodes);if(ue.exceedsLimit(...h,e.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let f=pr(...h,e);f.length===0&&(f=dt(s,e)),a.push(se(a.pop(),f)),s.nodes=[];return}const u=ue.encloseBrace(s);let l=s.queue,c=s;for(;c.type!=="brace"&&c.type!=="root"&&c.parent;)c=c.parent,l=c.queue;for(let h=0;h<s.nodes.length;h++){const f=s.nodes[h];if(f.type==="comma"&&s.type==="brace"){h===1&&l.push(""),l.push("");continue}if(f.type==="close"){a.push(se(a.pop(),l,u));continue}if(f.value&&f.type!=="open"){l.push(se(l.pop(),f.value));continue}f.nodes&&n(f,s)}return l};return ue.flatten(n(t))},dr={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:" ",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"};const Ar=Ne,{MAX_LENGTH:At,CHAR_BACKSLASH:Le,CHAR_BACKTICK:Rr,CHAR_COMMA:yr,CHAR_DOT:br,CHAR_LEFT_PARENTHESES:_r,CHAR_RIGHT_PARENTHESES:Er,CHAR_LEFT_CURLY_BRACE:mr,CHAR_RIGHT_CURLY_BRACE:Cr,CHAR_LEFT_SQUARE_BRACKET:Rt,CHAR_RIGHT_SQUARE_BRACKET:yt,CHAR_DOUBLE_QUOTE:Sr,CHAR_SINGLE_QUOTE:vr,CHAR_NO_BREAK_SPACE:$r,CHAR_ZERO_WIDTH_NOBREAK_SPACE:wr}=dr;var xr=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");const r=e||{},n=typeof r.maxLength=="number"?Math.min(At,r.maxLength):At;if(t.length>n)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${n})`);const s={type:"root",input:t,nodes:[]},o=[s];let i=s,a=s,u=0;const l=t.length;let c=0,h=0,f;const A=()=>t[c++],R=b=>{if(b.type==="text"&&a.type==="dot"&&(a.type="text"),a&&a.type==="text"&&b.type==="text"){a.value+=b.value;return}return i.nodes.push(b),b.parent=i,b.prev=a,a=b,b};for(R({type:"bos"});c<l;)if(i=o[o.length-1],f=A(),!(f===wr||f===$r)){if(f===Le){R({type:"text",value:(e.keepEscaping?f:"")+A()});continue}if(f===yt){R({type:"text",value:"\\"+f});continue}if(f===Rt){u++;let b;for(;c<l&&(b=A());){if(f+=b,b===Rt){u++;continue}if(b===Le){f+=A();continue}if(b===yt&&(u--,u===0))break}R({type:"text",value:f});continue}if(f===_r){i=R({type:"paren",nodes:[]}),o.push(i),R({type:"text",value:f});continue}if(f===Er){if(i.type!=="paren"){R({type:"text",value:f});continue}i=o.pop(),R({type:"text",value:f}),i=o[o.length-1];continue}if(f===Sr||f===vr||f===Rr){const b=f;let m;for(e.keepQuotes!==!0&&(f="");c<l&&(m=A());){if(m===Le){f+=m+A();continue}if(m===b){e.keepQuotes===!0&&(f+=m);break}f+=m}R({type:"text",value:f});continue}if(f===mr){h++;const m={type:"brace",open:!0,close:!1,dollar:a.value&&a.value.slice(-1)==="$"||i.dollar===!0,depth:h,commas:0,ranges:0,nodes:[]};i=R(m),o.push(i),R({type:"open",value:f});continue}if(f===Cr){if(i.type!=="brace"){R({type:"text",value:f});continue}const b="close";i=o.pop(),i.close=!0,R({type:b,value:f}),h--,i=o[o.length-1];continue}if(f===yr&&h>0){if(i.ranges>0){i.ranges=0;const b=i.nodes.shift();i.nodes=[b,{type:"text",value:Ar(i)}]}R({type:"comma",value:f}),i.commas++;continue}if(f===br&&h>0&&i.commas===0){const b=i.nodes;if(h===0||b.length===0){R({type:"text",value:f});continue}if(a.type==="dot"){if(i.range=[],a.value+=f,a.type="range",i.nodes.length!==3&&i.nodes.length!==5){i.invalid=!0,i.ranges=0,a.type="text";continue}i.ranges++,i.args=[];continue}if(a.type==="range"){b.pop();const m=b[b.length-1];m.value+=a.value+f,a=m,i.ranges--;continue}R({type:"dot",value:f});continue}R({type:"text",value:f})}do if(i=o.pop(),i.type!=="root"){i.nodes.forEach(S=>{S.nodes||(S.type==="open"&&(S.isOpen=!0),S.type==="close"&&(S.isClose=!0),S.nodes||(S.type="text"),S.invalid=!0)});const b=o[o.length-1],m=b.nodes.indexOf(i);b.nodes.splice(m,1,...i.nodes)}while(o.length>0);return R({type:"eos"}),s};const bt=Ne,Nr=hr,Hr=gr,Tr=xr,z=(t,e={})=>{let r=[];if(Array.isArray(t))for(const n of t){const s=z.create(n,e);Array.isArray(s)?r.push(...s):r.push(s)}else r=[].concat(z.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(r=[...new Set(r)]),r};z.parse=(t,e={})=>Tr(t,e),z.stringify=(t,e={})=>bt(typeof t=="string"?z.parse(t,e):t,e),z.compile=(t,e={})=>(typeof t=="string"&&(t=z.parse(t,e)),Nr(t,e)),z.expand=(t,e={})=>{typeof t=="string"&&(t=z.parse(t,e));let r=Hr(t,e);return e.noempty===!0&&(r=r.filter(Boolean)),e.nodupes===!0&&(r=[...new Set(r)]),r},z.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?z.compile(t,e):z.expand(t,e);var Or=z;function Z(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function _t(t,e){for(var r="",n=0,s=-1,o=0,i,a=0;a<=t.length;++a){if(a<t.length)i=t.charCodeAt(a);else{if(i===47)break;i=47}if(i===47){if(!(s===a-1||o===1))if(s!==a-1&&o===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var u=r.lastIndexOf("/");if(u!==r.length-1){u===-1?(r="",n=0):(r=r.slice(0,u),n=r.length-1-r.lastIndexOf("/")),s=a,o=0;continue}}else if(r.length===2||r.length===1){r="",n=0,s=a,o=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+t.slice(s+1,a):r=t.slice(s+1,a),n=a-s-1;s=a,o=0}else i===46&&o!==-1?++o:o=-1}return r}function Lr(t,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+t+n:n}var le={resolve:function(){for(var e="",r=!1,n,s=arguments.length-1;s>=-1&&!r;s--){var o;s>=0?o=arguments[s]:(n===void 0&&(n=process.cwd()),o=n),Z(o),o.length!==0&&(e=o+"/"+e,r=o.charCodeAt(0)===47)}return e=_t(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Z(e),e.length===0)return".";var r=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=_t(e,!r),e.length===0&&!r&&(e="."),e.length>0&&n&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return Z(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];Z(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":le.normalize(e)},relative:function(e,r){if(Z(e),Z(r),e===r||(e=le.resolve(e),r=le.resolve(r),e===r))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var s=e.length,o=s-n,i=1;i<r.length&&r.charCodeAt(i)===47;++i);for(var a=r.length,u=a-i,l=o<u?o:u,c=-1,h=0;h<=l;++h){if(h===l){if(u>l){if(r.charCodeAt(i+h)===47)return r.slice(i+h+1);if(h===0)return r.slice(i+h)}else o>l&&(e.charCodeAt(n+h)===47?c=h:h===0&&(c=0));break}var f=e.charCodeAt(n+h),A=r.charCodeAt(i+h);if(f!==A)break;f===47&&(c=h)}var R="";for(h=n+c+1;h<=s;++h)(h===s||e.charCodeAt(h)===47)&&(R.length===0?R+="..":R+="/..");return R.length>0?R+r.slice(i+c):(i+=c,r.charCodeAt(i)===47&&++i,r.slice(i))},_makeLong:function(e){return e},dirname:function(e){if(Z(e),e.length===0)return".";for(var r=e.charCodeAt(0),n=r===47,s=-1,o=!0,i=e.length-1;i>=1;--i)if(r=e.charCodeAt(i),r===47){if(!o){s=i;break}}else o=!1;return s===-1?n?"/":".":n&&s===1?"//":e.slice(0,s)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');Z(e);var n=0,s=-1,o=!0,i;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var a=r.length-1,u=-1;for(i=e.length-1;i>=0;--i){var l=e.charCodeAt(i);if(l===47){if(!o){n=i+1;break}}else u===-1&&(o=!1,u=i+1),a>=0&&(l===r.charCodeAt(a)?--a===-1&&(s=i):(a=-1,s=u))}return n===s?s=u:s===-1&&(s=e.length),e.slice(n,s)}else{for(i=e.length-1;i>=0;--i)if(e.charCodeAt(i)===47){if(!o){n=i+1;break}}else s===-1&&(o=!1,s=i+1);return s===-1?"":e.slice(n,s)}},extname:function(e){Z(e);for(var r=-1,n=0,s=-1,o=!0,i=0,a=e.length-1;a>=0;--a){var u=e.charCodeAt(a);if(u===47){if(!o){n=a+1;break}continue}s===-1&&(o=!1,s=a+1),u===46?r===-1?r=a:i!==1&&(i=1):r!==-1&&(i=-1)}return r===-1||s===-1||i===0||i===1&&r===s-1&&r===n+1?"":e.slice(r,s)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Lr("/",e)},parse:function(e){Z(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var n=e.charCodeAt(0),s=n===47,o;s?(r.root="/",o=1):o=0;for(var i=-1,a=0,u=-1,l=!0,c=e.length-1,h=0;c>=o;--c){if(n=e.charCodeAt(c),n===47){if(!l){a=c+1;break}continue}u===-1&&(l=!1,u=c+1),n===46?i===-1?i=c:h!==1&&(h=1):i!==-1&&(h=-1)}return i===-1||u===-1||h===0||h===1&&i===u-1&&i===a+1?u!==-1&&(a===0&&s?r.base=r.name=e.slice(1,u):r.base=r.name=e.slice(a,u)):(a===0&&s?(r.name=e.slice(1,i),r.base=e.slice(1,u)):(r.name=e.slice(a,i),r.base=e.slice(a,u)),r.ext=e.slice(i,u)),a>0?r.dir=e.slice(0,a-1):s&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};le.posix=le;var Ie=le,he={};const Ir=Ie,q="\\\\/",Et=`[^${q}]`,J="\\.",Fr="\\+",Pr="\\?",_e="\\/",kr="(?=.)",mt="[^/]",Fe=`(?:${_e}|$)`,Ct=`(?:^|${_e})`,Pe=`${J}{1,2}${Fe}`,Mr=`(?!${J})`,Br=`(?!${Ct}${Pe})`,Gr=`(?!${J}{0,1}${Fe})`,Ur=`(?!${Pe})`,Kr=`[^.${_e}]`,Wr=`${mt}*?`,St={DOT_LITERAL:J,PLUS_LITERAL:Fr,QMARK_LITERAL:Pr,SLASH_LITERAL:_e,ONE_CHAR:kr,QMARK:mt,END_ANCHOR:Fe,DOTS_SLASH:Pe,NO_DOT:Mr,NO_DOTS:Br,NO_DOT_SLASH:Gr,NO_DOTS_SLASH:Ur,QMARK_NO_DOT:Kr,STAR:Wr,START_ANCHOR:Ct},Xr={...St,SLASH_LITERAL:`[${q}]`,QMARK:Et,STAR:`${Et}*?`,DOTS_SLASH:`${J}{1,2}(?:[${q}]|$)`,NO_DOT:`(?!${J})`,NO_DOTS:`(?!(?:^|[${q}])${J}{1,2}(?:[${q}]|$))`,NO_DOT_SLASH:`(?!${J}{0,1}(?:[${q}]|$))`,NO_DOTS_SLASH:`(?!${J}{1,2}(?:[${q}]|$))`,QMARK_NO_DOT:`[^.${q}]`,START_ANCHOR:`(?:^|[${q}])`,END_ANCHOR:`(?:[${q}]|$)`},zr={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};var Ee={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:zr,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:Ir.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?Xr:St}};(function(t){const e=Ie,{REGEX_BACKSLASH:r,REGEX_REMOVE_BACKSLASH:n,REGEX_SPECIAL_CHARS:s,REGEX_SPECIAL_CHARS_GLOBAL:o}=Ee;t.isObject=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t.hasRegexChars=i=>s.test(i),t.isRegexChar=i=>i.length===1&&t.hasRegexChars(i),t.escapeRegex=i=>i.replace(o,"\\$1"),t.toPosixSlashes=i=>i.replace(r,"/"),t.removeBackslashes=i=>i.replace(n,a=>a==="\\"?"":a),t.supportsLookbehinds=()=>{const i=process.version.slice(1).split(".").map(Number);return i.length===3&&i[0]>=9||i[0]===8&&i[1]>=10},t.isWindows=i=>i&&typeof i.windows=="boolean"?i.windows:e.sep==="\\",t.escapeLast=(i,a,u)=>{const l=i.lastIndexOf(a,u);return l===-1?i:i[l-1]==="\\"?t.escapeLast(i,a,l-1):`${i.slice(0,l)}\\${i.slice(l)}`},t.removePrefix=(i,a={})=>{let u=i;return u.startsWith("./")&&(u=u.slice(2),a.prefix="./"),u},t.wrapOutput=(i,a={},u={})=>{const l=u.contains?"":"^",c=u.contains?"":"$";let h=`${l}(?:${i})${c}`;return a.negated===!0&&(h=`(?:^(?!${h}).*$)`),h}})(he);const vt=he,{CHAR_ASTERISK:ke,CHAR_AT:Qr,CHAR_BACKWARD_SLASH:pe,CHAR_COMMA:Vr,CHAR_DOT:Me,CHAR_EXCLAMATION_MARK:Be,CHAR_FORWARD_SLASH:$t,CHAR_LEFT_CURLY_BRACE:Ge,CHAR_LEFT_PARENTHESES:Ue,CHAR_LEFT_SQUARE_BRACKET:Zr,CHAR_PLUS:qr,CHAR_QUESTION_MARK:wt,CHAR_RIGHT_CURLY_BRACE:jr,CHAR_RIGHT_PARENTHESES:xt,CHAR_RIGHT_SQUARE_BRACKET:Dr}=Ee,Nt=t=>t===$t||t===pe,Ht=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)};var Yr=(t,e)=>{const r=e||{},n=t.length-1,s=r.parts===!0||r.scanToEnd===!0,o=[],i=[],a=[];let u=t,l=-1,c=0,h=0,f=!1,A=!1,R=!1,b=!1,m=!1,S=!1,P=!1,w=!1,X=!1,k=!1,te=0,U,E,x={value:"",depth:0,isGlob:!1};const B=()=>l>=n,d=()=>u.charCodeAt(l+1),O=()=>(U=E,u.charCodeAt(++l));for(;l<n;){E=O();let K;if(E===pe){P=x.backslashes=!0,E=O(),E===Ge&&(S=!0);continue}if(S===!0||E===Ge){for(te++;B()!==!0&&(E=O());){if(E===pe){P=x.backslashes=!0,O();continue}if(E===Ge){te++;continue}if(S!==!0&&E===Me&&(E=O())===Me){if(f=x.isBrace=!0,R=x.isGlob=!0,k=!0,s===!0)continue;break}if(S!==!0&&E===Vr){if(f=x.isBrace=!0,R=x.isGlob=!0,k=!0,s===!0)continue;break}if(E===jr&&(te--,te===0)){S=!1,f=x.isBrace=!0,k=!0;break}}if(s===!0)continue;break}if(E===$t){if(o.push(l),i.push(x),x={value:"",depth:0,isGlob:!1},k===!0)continue;if(U===Me&&l===c+1){c+=2;continue}h=l+1;continue}if(r.noext!==!0&&(E===qr||E===Qr||E===ke||E===wt||E===Be)===!0&&d()===Ue){if(R=x.isGlob=!0,b=x.isExtglob=!0,k=!0,E===Be&&l===c&&(X=!0),s===!0){for(;B()!==!0&&(E=O());){if(E===pe){P=x.backslashes=!0,E=O();continue}if(E===xt){R=x.isGlob=!0,k=!0;break}}continue}break}if(E===ke){if(U===ke&&(m=x.isGlobstar=!0),R=x.isGlob=!0,k=!0,s===!0)continue;break}if(E===wt){if(R=x.isGlob=!0,k=!0,s===!0)continue;break}if(E===Zr){for(;B()!==!0&&(K=O());){if(K===pe){P=x.backslashes=!0,O();continue}if(K===Dr){A=x.isBracket=!0,R=x.isGlob=!0,k=!0;break}}if(s===!0)continue;break}if(r.nonegate!==!0&&E===Be&&l===c){w=x.negated=!0,c++;continue}if(r.noparen!==!0&&E===Ue){if(R=x.isGlob=!0,s===!0){for(;B()!==!0&&(E=O());){if(E===Ue){P=x.backslashes=!0,E=O();continue}if(E===xt){k=!0;break}}continue}break}if(R===!0){if(k=!0,s===!0)continue;break}}r.noext===!0&&(b=!1,R=!1);let H=u,re="",p="";c>0&&(re=u.slice(0,c),u=u.slice(c),h-=c),H&&R===!0&&h>0?(H=u.slice(0,h),p=u.slice(h)):R===!0?(H="",p=u):H=u,H&&H!==""&&H!=="/"&&H!==u&&Nt(H.charCodeAt(H.length-1))&&(H=H.slice(0,-1)),r.unescape===!0&&(p&&(p=vt.removeBackslashes(p)),H&&P===!0&&(H=vt.removeBackslashes(H)));const g={prefix:re,input:t,start:c,base:H,glob:p,isBrace:f,isBracket:A,isGlob:R,isExtglob:b,isGlobstar:m,negated:w,negatedExtglob:X};if(r.tokens===!0&&(g.maxDepth=0,Nt(E)||i.push(x),g.tokens=i),r.parts===!0||r.tokens===!0){let K;for(let $=0;$<o.length;$++){const D=K?K+1:c,Y=o[$],V=t.slice(D,Y);r.tokens&&($===0&&c!==0?(i[$].isPrefix=!0,i[$].value=re):i[$].value=V,Ht(i[$]),g.maxDepth+=i[$].depth),($!==0||V!=="")&&a.push(V),K=Y}if(K&&K+1<t.length){const $=t.slice(K+1);a.push($),r.tokens&&(i[i.length-1].value=$,Ht(i[i.length-1]),g.maxDepth+=i[i.length-1].depth)}g.slashes=o,g.parts=a}return g};const me=Ee,Q=he,{MAX_LENGTH:Ce,POSIX_REGEX_SOURCE:Jr,REGEX_NON_SPECIAL_CHARS:en,REGEX_SPECIAL_CHARS_BACKREF:tn,REPLACEMENTS:Tt}=me,rn=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();const r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(s=>Q.escapeRegex(s)).join("..")}return r},ce=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,Ke=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=Tt[t]||t;const r={...e},n=typeof r.maxLength=="number"?Math.min(Ce,r.maxLength):Ce;let s=t.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);const o={type:"bos",value:"",output:r.prepend||""},i=[o],a=r.capture?"":"?:",u=Q.isWindows(e),l=me.globChars(u),c=me.extglobChars(l),{DOT_LITERAL:h,PLUS_LITERAL:f,SLASH_LITERAL:A,ONE_CHAR:R,DOTS_SLASH:b,NO_DOT:m,NO_DOT_SLASH:S,NO_DOTS_SLASH:P,QMARK:w,QMARK_NO_DOT:X,STAR:k,START_ANCHOR:te}=l,U=_=>`(${a}(?:(?!${te}${_.dot?b:h}).)*?)`,E=r.dot?"":m,x=r.dot?w:X;let B=r.bash===!0?U(r):k;r.capture&&(B=`(${B})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);const d={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:i};t=Q.removePrefix(t,d),s=t.length;const O=[],H=[],re=[];let p=o,g;const K=()=>d.index===s-1,$=d.peek=(_=1)=>t[d.index+_],D=d.advance=()=>t[++d.index]||"",Y=()=>t.slice(d.index+1),V=(_="",T=0)=>{d.consumed+=_,d.index+=T},ve=_=>{d.output+=_.output!=null?_.output:_.value,V(_.value)},Vn=()=>{let _=1;for(;$()==="!"&&($(2)!=="("||$(3)==="?");)D(),d.start++,_++;return _%2===0?!1:(d.negated=!0,d.start++,!0)},$e=_=>{d[_]++,re.push(_)},ae=_=>{d[_]--,re.pop()},v=_=>{if(p.type==="globstar"){const T=d.braces>0&&(_.type==="comma"||_.type==="brace"),y=_.extglob===!0||O.length&&(_.type==="pipe"||_.type==="paren");_.type!=="slash"&&_.type!=="paren"&&!T&&!y&&(d.output=d.output.slice(0,-p.output.length),p.type="star",p.value="*",p.output=B,d.output+=p.output)}if(O.length&&_.type!=="paren"&&(O[O.length-1].inner+=_.value),(_.value||_.output)&&ve(_),p&&p.type==="text"&&_.type==="text"){p.value+=_.value,p.output=(p.output||"")+_.value;return}_.prev=p,i.push(_),p=_},we=(_,T)=>{const y={...c[T],conditions:1,inner:""};y.prev=p,y.parens=d.parens,y.output=d.output;const C=(r.capture?"(":"")+y.open;$e("parens"),v({type:_,value:T,output:d.output?"":R}),v({type:"paren",extglob:!0,value:D(),output:C}),O.push(y)},Zn=_=>{let T=_.close+(r.capture?")":""),y;if(_.type==="negate"){let C=B;if(_.inner&&_.inner.length>1&&_.inner.includes("/")&&(C=U(r)),(C!==B||K()||/^\)+$/.test(Y()))&&(T=_.close=`)$))${C}`),_.inner.includes("*")&&(y=Y())&&/^\.[^\\/.]+$/.test(y)){const L=Ke(y,{...e,fastpaths:!1}).output;T=_.close=`)${L})${C})`}_.prev.type==="bos"&&(d.negatedExtglob=!0)}v({type:"paren",extglob:!0,value:g,output:T}),ae("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let _=!1,T=t.replace(tn,(y,C,L,W,M,je)=>W==="\\"?(_=!0,y):W==="?"?C?C+W+(M?w.repeat(M.length):""):je===0?x+(M?w.repeat(M.length):""):w.repeat(L.length):W==="."?h.repeat(L.length):W==="*"?C?C+W+(M?B:""):B:C?y:`\\${y}`);return _===!0&&(r.unescape===!0?T=T.replace(/\\/g,""):T=T.replace(/\\+/g,y=>y.length%2===0?"\\\\":y?"\\":"")),T===t&&r.contains===!0?(d.output=t,d):(d.output=Q.wrapOutput(T,d,e),d)}for(;!K();){if(g=D(),g==="\0")continue;if(g==="\\"){const y=$();if(y==="/"&&r.bash!==!0||y==="."||y===";")continue;if(!y){g+="\\",v({type:"text",value:g});continue}const C=/^\\+/.exec(Y());let L=0;if(C&&C[0].length>2&&(L=C[0].length,d.index+=L,L%2!==0&&(g+="\\")),r.unescape===!0?g=D():g+=D(),d.brackets===0){v({type:"text",value:g});continue}}if(d.brackets>0&&(g!=="]"||p.value==="["||p.value==="[^")){if(r.posix!==!1&&g===":"){const y=p.value.slice(1);if(y.includes("[")&&(p.posix=!0,y.includes(":"))){const C=p.value.lastIndexOf("["),L=p.value.slice(0,C),W=p.value.slice(C+2),M=Jr[W];if(M){p.value=L+M,d.backtrack=!0,D(),!o.output&&i.indexOf(p)===1&&(o.output=R);continue}}}(g==="["&&$()!==":"||g==="-"&&$()==="]")&&(g=`\\${g}`),g==="]"&&(p.value==="["||p.value==="[^")&&(g=`\\${g}`),r.posix===!0&&g==="!"&&p.value==="["&&(g="^"),p.value+=g,ve({value:g});continue}if(d.quotes===1&&g!=='"'){g=Q.escapeRegex(g),p.value+=g,ve({value:g});continue}if(g==='"'){d.quotes=d.quotes===1?0:1,r.keepQuotes===!0&&v({type:"text",value:g});continue}if(g==="("){$e("parens"),v({type:"paren",value:g});continue}if(g===")"){if(d.parens===0&&r.strictBrackets===!0)throw new SyntaxError(ce("opening","("));const y=O[O.length-1];if(y&&d.parens===y.parens+1){Zn(O.pop());continue}v({type:"paren",value:g,output:d.parens?")":"\\)"}),ae("parens");continue}if(g==="["){if(r.nobracket===!0||!Y().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(ce("closing","]"));g=`\\${g}`}else $e("brackets");v({type:"bracket",value:g});continue}if(g==="]"){if(r.nobracket===!0||p&&p.type==="bracket"&&p.value.length===1){v({type:"text",value:g,output:`\\${g}`});continue}if(d.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(ce("opening","["));v({type:"text",value:g,output:`\\${g}`});continue}ae("brackets");const y=p.value.slice(1);if(p.posix!==!0&&y[0]==="^"&&!y.includes("/")&&(g=`/${g}`),p.value+=g,ve({value:g}),r.literalBrackets===!1||Q.hasRegexChars(y))continue;const C=Q.escapeRegex(p.value);if(d.output=d.output.slice(0,-p.value.length),r.literalBrackets===!0){d.output+=C,p.value=C;continue}p.value=`(${a}${C}|${p.value})`,d.output+=p.value;continue}if(g==="{"&&r.nobrace!==!0){$e("braces");const y={type:"brace",value:g,output:"(",outputIndex:d.output.length,tokensIndex:d.tokens.length};H.push(y),v(y);continue}if(g==="}"){const y=H[H.length-1];if(r.nobrace===!0||!y){v({type:"text",value:g,output:g});continue}let C=")";if(y.dots===!0){const L=i.slice(),W=[];for(let M=L.length-1;M>=0&&(i.pop(),L[M].type!=="brace");M--)L[M].type!=="dots"&&W.unshift(L[M].value);C=rn(W,r),d.backtrack=!0}if(y.comma!==!0&&y.dots!==!0){const L=d.output.slice(0,y.outputIndex),W=d.tokens.slice(y.tokensIndex);y.value=y.output="\\{",g=C="\\}",d.output=L;for(const M of W)d.output+=M.output||M.value}v({type:"brace",value:g,output:C}),ae("braces"),H.pop();continue}if(g==="|"){O.length>0&&O[O.length-1].conditions++,v({type:"text",value:g});continue}if(g===","){let y=g;const C=H[H.length-1];C&&re[re.length-1]==="braces"&&(C.comma=!0,y="|"),v({type:"comma",value:g,output:y});continue}if(g==="/"){if(p.type==="dot"&&d.index===d.start+1){d.start=d.index+1,d.consumed="",d.output="",i.pop(),p=o;continue}v({type:"slash",value:g,output:A});continue}if(g==="."){if(d.braces>0&&p.type==="dot"){p.value==="."&&(p.output=h);const y=H[H.length-1];p.type="dots",p.output+=g,p.value+=g,y.dots=!0;continue}if(d.braces+d.parens===0&&p.type!=="bos"&&p.type!=="slash"){v({type:"text",value:g,output:h});continue}v({type:"dot",value:g,output:h});continue}if(g==="?"){if(!(p&&p.value==="(")&&r.noextglob!==!0&&$()==="("&&$(2)!=="?"){we("qmark",g);continue}if(p&&p.type==="paren"){const C=$();let L=g;if(C==="<"&&!Q.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(p.value==="("&&!/[!=<:]/.test(C)||C==="<"&&!/<([!=]|\w+>)/.test(Y()))&&(L=`\\${g}`),v({type:"text",value:g,output:L});continue}if(r.dot!==!0&&(p.type==="slash"||p.type==="bos")){v({type:"qmark",value:g,output:X});continue}v({type:"qmark",value:g,output:w});continue}if(g==="!"){if(r.noextglob!==!0&&$()==="("&&($(2)!=="?"||!/[!=<:]/.test($(3)))){we("negate",g);continue}if(r.nonegate!==!0&&d.index===0){Vn();continue}}if(g==="+"){if(r.noextglob!==!0&&$()==="("&&$(2)!=="?"){we("plus",g);continue}if(p&&p.value==="("||r.regex===!1){v({type:"plus",value:g,output:f});continue}if(p&&(p.type==="bracket"||p.type==="paren"||p.type==="brace")||d.parens>0){v({type:"plus",value:g});continue}v({type:"plus",value:f});continue}if(g==="@"){if(r.noextglob!==!0&&$()==="("&&$(2)!=="?"){v({type:"at",extglob:!0,value:g,output:""});continue}v({type:"text",value:g});continue}if(g!=="*"){(g==="$"||g==="^")&&(g=`\\${g}`);const y=en.exec(Y());y&&(g+=y[0],d.index+=y[0].length),v({type:"text",value:g});continue}if(p&&(p.type==="globstar"||p.star===!0)){p.type="star",p.star=!0,p.value+=g,p.output=B,d.backtrack=!0,d.globstar=!0,V(g);continue}let _=Y();if(r.noextglob!==!0&&/^\([^?]/.test(_)){we("star",g);continue}if(p.type==="star"){if(r.noglobstar===!0){V(g);continue}const y=p.prev,C=y.prev,L=y.type==="slash"||y.type==="bos",W=C&&(C.type==="star"||C.type==="globstar");if(r.bash===!0&&(!L||_[0]&&_[0]!=="/")){v({type:"star",value:g,output:""});continue}const M=d.braces>0&&(y.type==="comma"||y.type==="brace"),je=O.length&&(y.type==="pipe"||y.type==="paren");if(!L&&y.type!=="paren"&&!M&&!je){v({type:"star",value:g,output:""});continue}for(;_.slice(0,3)==="/**";){const xe=t[d.index+4];if(xe&&xe!=="/")break;_=_.slice(3),V("/**",3)}if(y.type==="bos"&&K()){p.type="globstar",p.value+=g,p.output=U(r),d.output=p.output,d.globstar=!0,V(g);continue}if(y.type==="slash"&&y.prev.type!=="bos"&&!W&&K()){d.output=d.output.slice(0,-(y.output+p.output).length),y.output=`(?:${y.output}`,p.type="globstar",p.output=U(r)+(r.strictSlashes?")":"|$)"),p.value+=g,d.globstar=!0,d.output+=y.output+p.output,V(g);continue}if(y.type==="slash"&&y.prev.type!=="bos"&&_[0]==="/"){const xe=_[1]!==void 0?"|$":"";d.output=d.output.slice(0,-(y.output+p.output).length),y.output=`(?:${y.output}`,p.type="globstar",p.output=`${U(r)}${A}|${A}${xe})`,p.value+=g,d.output+=y.output+p.output,d.globstar=!0,V(g+D()),v({type:"slash",value:"/",output:""});continue}if(y.type==="bos"&&_[0]==="/"){p.type="globstar",p.value+=g,p.output=`(?:^|${A}|${U(r)}${A})`,d.output=p.output,d.globstar=!0,V(g+D()),v({type:"slash",value:"/",output:""});continue}d.output=d.output.slice(0,-p.output.length),p.type="globstar",p.output=U(r),p.value+=g,d.output+=p.output,d.globstar=!0,V(g);continue}const T={type:"star",value:g,output:B};if(r.bash===!0){T.output=".*?",(p.type==="bos"||p.type==="slash")&&(T.output=E+T.output),v(T);continue}if(p&&(p.type==="bracket"||p.type==="paren")&&r.regex===!0){T.output=g,v(T);continue}(d.index===d.start||p.type==="slash"||p.type==="dot")&&(p.type==="dot"?(d.output+=S,p.output+=S):r.dot===!0?(d.output+=P,p.output+=P):(d.output+=E,p.output+=E),$()!=="*"&&(d.output+=R,p.output+=R)),v(T)}for(;d.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(ce("closing","]"));d.output=Q.escapeLast(d.output,"["),ae("brackets")}for(;d.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(ce("closing",")"));d.output=Q.escapeLast(d.output,"("),ae("parens")}for(;d.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(ce("closing","}"));d.output=Q.escapeLast(d.output,"{"),ae("braces")}if(r.strictSlashes!==!0&&(p.type==="star"||p.type==="bracket")&&v({type:"maybe_slash",value:"",output:`${A}?`}),d.backtrack===!0){d.output="";for(const _ of d.tokens)d.output+=_.output!=null?_.output:_.value,_.suffix&&(d.output+=_.suffix)}return d};Ke.fastpaths=(t,e)=>{const r={...e},n=typeof r.maxLength=="number"?Math.min(Ce,r.maxLength):Ce,s=t.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);t=Tt[t]||t;const o=Q.isWindows(e),{DOT_LITERAL:i,SLASH_LITERAL:a,ONE_CHAR:u,DOTS_SLASH:l,NO_DOT:c,NO_DOTS:h,NO_DOTS_SLASH:f,STAR:A,START_ANCHOR:R}=me.globChars(o),b=r.dot?h:c,m=r.dot?f:c,S=r.capture?"":"?:",P={negated:!1,prefix:""};let w=r.bash===!0?".*?":A;r.capture&&(w=`(${w})`);const X=E=>E.noglobstar===!0?w:`(${S}(?:(?!${R}${E.dot?l:i}).)*?)`,k=E=>{switch(E){case"*":return`${b}${u}${w}`;case".*":return`${i}${u}${w}`;case"*.*":return`${b}${w}${i}${u}${w}`;case"*/*":return`${b}${w}${a}${u}${m}${w}`;case"**":return b+X(r);case"**/*":return`(?:${b}${X(r)}${a})?${m}${u}${w}`;case"**/*.*":return`(?:${b}${X(r)}${a})?${m}${w}${i}${u}${w}`;case"**/.*":return`(?:${b}${X(r)}${a})?${i}${u}${w}`;default:{const x=/^(.*?)\.(\w+)$/.exec(E);if(!x)return;const B=k(x[1]);return B?B+i+x[2]:void 0}}},te=Q.removePrefix(t,P);let U=k(te);return U&&r.strictSlashes!==!0&&(U+=`${a}?`),U};var nn=Ke;const sn=Ie,on=Yr,We=nn,Xe=he,an=Ee,un=t=>t&&typeof t=="object"&&!Array.isArray(t),I=(t,e,r=!1)=>{if(Array.isArray(t)){const c=t.map(f=>I(f,e,r));return f=>{for(const A of c){const R=A(f);if(R)return R}return!1}}const n=un(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");const s=e||{},o=Xe.isWindows(e),i=n?I.compileRe(t,e):I.makeRe(t,e,!1,!0),a=i.state;delete i.state;let u=()=>!1;if(s.ignore){const c={...e,ignore:null,onMatch:null,onResult:null};u=I(s.ignore,c,r)}const l=(c,h=!1)=>{const{isMatch:f,match:A,output:R}=I.test(c,i,e,{glob:t,posix:o}),b={glob:t,state:a,regex:i,posix:o,input:c,output:R,match:A,isMatch:f};return typeof s.onResult=="function"&&s.onResult(b),f===!1?(b.isMatch=!1,h?b:!1):u(c)?(typeof s.onIgnore=="function"&&s.onIgnore(b),b.isMatch=!1,h?b:!1):(typeof s.onMatch=="function"&&s.onMatch(b),h?b:!0)};return r&&(l.state=a),l};I.test=(t,e,r,{glob:n,posix:s}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};const o=r||{},i=o.format||(s?Xe.toPosixSlashes:null);let a=t===n,u=a&&i?i(t):t;return a===!1&&(u=i?i(t):t,a=u===n),(a===!1||o.capture===!0)&&(o.matchBase===!0||o.basename===!0?a=I.matchBase(t,e,r,s):a=e.exec(u)),{isMatch:!!a,match:a,output:u}},I.matchBase=(t,e,r,n=Xe.isWindows(r))=>(e instanceof RegExp?e:I.makeRe(e,r)).test(sn.basename(t)),I.isMatch=(t,e,r)=>I(e,r)(t),I.parse=(t,e)=>Array.isArray(t)?t.map(r=>I.parse(r,e)):We(t,{...e,fastpaths:!1}),I.scan=(t,e)=>on(t,e),I.compileRe=(t,e,r=!1,n=!1)=>{if(r===!0)return t.output;const s=e||{},o=s.contains?"":"^",i=s.contains?"":"$";let a=`${o}(?:${t.output})${i}`;t&&t.negated===!0&&(a=`^(?!${a}).*$`);const u=I.toRegex(a,e);return n===!0&&(u.state=t),u},I.makeRe=(t,e={},r=!1,n=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let s={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(s.output=We.fastpaths(t,e)),s.output||(s=We(t,e)),I.compileRe(s,e,r,n)},I.toRegex=(t,e)=>{try{const r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}},I.constants=an;var ln=I,cn=ln;const Ot=Ye,Lt=Or,j=cn,ze=he,It=t=>t===""||t==="./",Ft=t=>{const e=t.indexOf("{");return e>-1&&t.indexOf("}",e)>-1},N=(t,e,r)=>{e=[].concat(e),t=[].concat(t);let n=new Set,s=new Set,o=new Set,i=0,a=c=>{o.add(c.output),r&&r.onResult&&r.onResult(c)};for(let c=0;c<e.length;c++){let h=j(String(e[c]),{...r,onResult:a},!0),f=h.state.negated||h.state.negatedExtglob;f&&i++;for(let A of t){let R=h(A,!0);(f?!R.isMatch:R.isMatch)&&(f?n.add(R.output):(n.delete(R.output),s.add(R.output)))}}let l=(i===e.length?[...o]:[...s]).filter(c=>!n.has(c));if(r&&l.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${e.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?e.map(c=>c.replace(/\\/g,"")):e}return l};N.match=N,N.matcher=(t,e)=>j(t,e),N.isMatch=(t,e,r)=>j(e,r)(t),N.any=N.isMatch,N.not=(t,e,r={})=>{e=[].concat(e).map(String);let n=new Set,s=[],o=a=>{r.onResult&&r.onResult(a),s.push(a.output)},i=new Set(N(t,e,{...r,onResult:o}));for(let a of s)i.has(a)||n.add(a);return[...n]},N.contains=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${Ot.inspect(t)}"`);if(Array.isArray(e))return e.some(n=>N.contains(t,n,r));if(typeof e=="string"){if(It(t)||It(e))return!1;if(t.includes(e)||t.startsWith("./")&&t.slice(2).includes(e))return!0}return N.isMatch(t,e,{...r,contains:!0})},N.matchKeys=(t,e,r)=>{if(!ze.isObject(t))throw new TypeError("Expected the first argument to be an object");let n=N(Object.keys(t),e,r),s={};for(let o of n)s[o]=t[o];return s},N.some=(t,e,r)=>{let n=[].concat(t);for(let s of[].concat(e)){let o=j(String(s),r);if(n.some(i=>o(i)))return!0}return!1},N.every=(t,e,r)=>{let n=[].concat(t);for(let s of[].concat(e)){let o=j(String(s),r);if(!n.every(i=>o(i)))return!1}return!0},N.all=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${Ot.inspect(t)}"`);return[].concat(e).every(n=>j(n,r)(t))},N.capture=(t,e,r)=>{let n=ze.isWindows(r),o=j.makeRe(String(t),{...r,capture:!0}).exec(n?ze.toPosixSlashes(e):e);if(o)return o.slice(1).map(i=>i===void 0?"":i)},N.makeRe=(...t)=>j.makeRe(...t),N.scan=(...t)=>j.scan(...t),N.parse=(t,e)=>{let r=[];for(let n of[].concat(t||[]))for(let s of Lt(String(n),e))r.push(j.parse(s,e));return r},N.braces=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return e&&e.nobrace===!0||!Ft(t)?[t]:Lt(t,e)},N.braceExpand=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return N.braces(t,{...e,expand:!0})},N.hasBraces=Ft;var fn=N,ge=De(fn),hn=function t(e,r){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,s=/(^[ ]*|[ ]*$)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,i=/^0x[0-9a-f]+$/i,a=/^0/,u=function(w){return t.insensitive&&(""+w).toLowerCase()||""+w},l=u(e).replace(s,"")||"",c=u(r).replace(s,"")||"",h=l.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),A=parseInt(l.match(i),16)||h.length!==1&&l.match(o)&&Date.parse(l),R=parseInt(c.match(i),16)||A&&c.match(o)&&Date.parse(c)||null,b,m;if(R){if(A<R)return-1;if(A>R)return 1}for(var S=0,P=Math.max(h.length,f.length);S<P;S++){if(b=!(h[S]||"").match(a)&&parseFloat(h[S])||h[S]||0,m=!(f[S]||"").match(a)&&parseFloat(f[S])||f[S]||0,isNaN(b)!==isNaN(m))return isNaN(b)?1:-1;if(typeof b!=typeof m&&(b+="",m+=""),b<m)return-1;if(b>m)return 1}return 0},Qe=De(hn),pn={},Pt={};(function(t){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",n="["+e+"]["+r+"]*",s=new RegExp("^"+n+"$"),o=function(a,u){const l=[];let c=u.exec(a);for(;c;){const h=[];h.startIndex=u.lastIndex-c[0].length;const f=c.length;for(let A=0;A<f;A++)h.push(c[A]);l.push(h),c=u.exec(a)}return l},i=function(a){const u=s.exec(a);return!(u===null||typeof u>"u")};t.isExist=function(a){return typeof a<"u"},t.isEmptyObject=function(a){return Object.keys(a).length===0},t.merge=function(a,u,l){if(u){const c=Object.keys(u),h=c.length;for(let f=0;f<h;f++)l==="strict"?a[c[f]]=[u[c[f]]]:a[c[f]]=u[c[f]]}},t.getValue=function(a){return t.isExist(a)?a:""},t.isName=i,t.getAllMatches=o,t.nameRegexp=n})(Pt);const Ve=Pt,gn={allowBooleanAttributes:!1,unpairedTags:[]};pn.validate=function(t,e){e=Object.assign({},gn,e);const r=[];let n=!1,s=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let o=0;o<t.length;o++)if(t[o]==="<"&&t[o+1]==="?"){if(o+=2,o=Mt(t,o),o.err)return o}else if(t[o]==="<"){let i=o;if(o++,t[o]==="!"){o=Bt(t,o);continue}else{let a=!1;t[o]==="/"&&(a=!0,o++);let u="";for(;o<t.length&&t[o]!==">"&&t[o]!==" "&&t[o]!=="	"&&t[o]!==`
`&&t[o]!=="\r";o++)u+=t[o];if(u=u.trim(),u[u.length-1]==="/"&&(u=u.substring(0,u.length-1),o--),!mn(u)){let h;return u.trim().length===0?h="Invalid space after '<'.":h="Tag '"+u+"' is an invalid name.",F("InvalidTag",h,G(t,o))}const l=Rn(t,o);if(l===!1)return F("InvalidAttr","Attributes for '"+u+"' have open quote.",G(t,o));let c=l.value;if(o=l.index,c[c.length-1]==="/"){const h=o-c.length;c=c.substring(0,c.length-1);const f=Gt(c,e);if(f===!0)n=!0;else return F(f.err.code,f.err.msg,G(t,h+f.err.line))}else if(a)if(l.tagClosed){if(c.trim().length>0)return F("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",G(t,i));if(r.length===0)return F("InvalidTag","Closing tag '"+u+"' has not been opened.",G(t,i));{const h=r.pop();if(u!==h.tagName){let f=G(t,h.tagStartPos);return F("InvalidTag","Expected closing tag '"+h.tagName+"' (opened in line "+f.line+", col "+f.col+") instead of closing tag '"+u+"'.",G(t,i))}r.length==0&&(s=!0)}}else return F("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",G(t,o));else{const h=Gt(c,e);if(h!==!0)return F(h.err.code,h.err.msg,G(t,o-c.length+h.err.line));if(s===!0)return F("InvalidXml","Multiple possible root nodes found.",G(t,o));e.unpairedTags.indexOf(u)!==-1||r.push({tagName:u,tagStartPos:i}),n=!0}for(o++;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="!"){o++,o=Bt(t,o);continue}else if(t[o+1]==="?"){if(o=Mt(t,++o),o.err)return o}else break;else if(t[o]==="&"){const h=_n(t,o);if(h==-1)return F("InvalidChar","char '&' is not expected.",G(t,o));o=h}else if(s===!0&&!kt(t[o]))return F("InvalidXml","Extra text at the end",G(t,o));t[o]==="<"&&o--}}else{if(kt(t[o]))continue;return F("InvalidChar","char '"+t[o]+"' is not expected.",G(t,o))}if(n){if(r.length==1)return F("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",G(t,r[0].tagStartPos));if(r.length>0)return F("InvalidXml","Invalid '"+JSON.stringify(r.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return F("InvalidXml","Start tag expected.",1);return!0};function kt(t){return t===" "||t==="	"||t===`
`||t==="\r"}function Mt(t,e){const r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const n=t.substr(r,e-r);if(e>5&&n==="xml")return F("InvalidXml","XML declaration allowed only at the start of the document.",G(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function Bt(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const dn='"',An="'";function Rn(t,e){let r="",n="",s=!1;for(;e<t.length;e++){if(t[e]===dn||t[e]===An)n===""?n=t[e]:n!==t[e]||(n="");else if(t[e]===">"&&n===""){s=!0;break}r+=t[e]}return n!==""?!1:{value:r,index:e,tagClosed:s}}const yn=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Gt(t,e){const r=Ve.getAllMatches(t,yn),n={};for(let s=0;s<r.length;s++){if(r[s][1].length===0)return F("InvalidAttr","Attribute '"+r[s][2]+"' has no space in starting.",de(r[s]));if(r[s][3]!==void 0&&r[s][4]===void 0)return F("InvalidAttr","Attribute '"+r[s][2]+"' is without value.",de(r[s]));if(r[s][3]===void 0&&!e.allowBooleanAttributes)return F("InvalidAttr","boolean attribute '"+r[s][2]+"' is not allowed.",de(r[s]));const o=r[s][2];if(!En(o))return F("InvalidAttr","Attribute '"+o+"' is an invalid name.",de(r[s]));if(!n.hasOwnProperty(o))n[o]=1;else return F("InvalidAttr","Attribute '"+o+"' is repeated.",de(r[s]))}return!0}function bn(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}function _n(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,bn(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}function F(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function En(t){return Ve.isName(t)}function mn(t){return Ve.isName(t)}function G(t,e){const r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function de(t){return t.startIndex+t[1].length}function Cn(t){return typeof t=="function"?t:Array.isArray(t)?e=>{for(const r of t)if(typeof r=="string"&&e===r||r instanceof RegExp&&r.test(e))return!0}:()=>!1}var Sn=Cn;const vn=`
`;function $n(t,e){let r="";return e.format&&e.indentBy.length>0&&(r=vn),Ut(t,e,"",r)}function Ut(t,e,r,n){let s="",o=!1;for(let i=0;i<t.length;i++){const a=t[i],u=wn(a);if(u===void 0)continue;let l="";if(r.length===0?l=u:l=`${r}.${u}`,u===e.textNodeName){let R=a[u];xn(l,e)||(R=e.tagValueProcessor(u,R),R=Wt(R,e)),o&&(s+=n),s+=R,o=!1;continue}else if(u===e.cdataPropName){o&&(s+=n),s+=`<![CDATA[${a[u][0][e.textNodeName]}]]>`,o=!1;continue}else if(u===e.commentPropName){s+=n+`<!--${a[u][0][e.textNodeName]}-->`,o=!0;continue}else if(u[0]==="?"){const R=Kt(a[":@"],e),b=u==="?xml"?"":n;let m=a[u][0][e.textNodeName];m=m.length!==0?" "+m:"",s+=b+`<${u}${m}${R}?>`,o=!0;continue}let c=n;c!==""&&(c+=e.indentBy);const h=Kt(a[":@"],e),f=n+`<${u}${h}`,A=Ut(a[u],e,l,c);e.unpairedTags.indexOf(u)!==-1?e.suppressUnpairedNode?s+=f+">":s+=f+"/>":(!A||A.length===0)&&e.suppressEmptyNode?s+=f+"/>":A&&A.endsWith(">")?s+=f+`>${A}${n}</${u}>`:(s+=f+">",A&&n!==""&&(A.includes("/>")||A.includes("</"))?s+=n+e.indentBy+A+n:s+=A,s+=`</${u}>`),o=!0}return s}function wn(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const n=e[r];if(t.hasOwnProperty(n)&&n!==":@")return n}}function Kt(t,e){let r="";if(t&&!e.ignoreAttributes)for(let n in t){if(!t.hasOwnProperty(n))continue;let s=e.attributeValueProcessor(n,t[n]);s=Wt(s,e),s===!0&&e.suppressBooleanAttributes?r+=` ${n.substr(e.attributeNamePrefix.length)}`:r+=` ${n.substr(e.attributeNamePrefix.length)}="${s}"`}return r}function xn(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let n in e.stopNodes)if(e.stopNodes[n]===t||e.stopNodes[n]==="*."+r)return!0;return!1}function Wt(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){const n=e.entities[r];t=t.replace(n.regex,n.val)}return t}var Nn=$n;const Hn=Nn,Tn=Sn,On={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function ie(t){this.options=Object.assign({},On,t),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=Tn(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Fn),this.processTextOrObjNode=Ln,this.options.format?(this.indentate=In,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}ie.prototype.build=function(t){return this.options.preserveOrder?Hn(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0,[]).val)},ie.prototype.j2x=function(t,e,r){let n="",s="";const o=r.join(".");for(let i in t)if(Object.prototype.hasOwnProperty.call(t,i))if(typeof t[i]>"u")this.isAttribute(i)&&(s+="");else if(t[i]===null)this.isAttribute(i)||i===this.options.cdataPropName?s+="":i[0]==="?"?s+=this.indentate(e)+"<"+i+"?"+this.tagEndChar:s+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if(t[i]instanceof Date)s+=this.buildTextValNode(t[i],i,"",e);else if(typeof t[i]!="object"){const a=this.isAttribute(i);if(a&&!this.ignoreAttributesFn(a,o))n+=this.buildAttrPairStr(a,""+t[i]);else if(!a)if(i===this.options.textNodeName){let u=this.options.tagValueProcessor(i,""+t[i]);s+=this.replaceEntitiesValue(u)}else s+=this.buildTextValNode(t[i],i,"",e)}else if(Array.isArray(t[i])){const a=t[i].length;let u="",l="";for(let c=0;c<a;c++){const h=t[i][c];if(!(typeof h>"u"))if(h===null)i[0]==="?"?s+=this.indentate(e)+"<"+i+"?"+this.tagEndChar:s+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if(typeof h=="object")if(this.options.oneListGroup){const f=this.j2x(h,e+1,r.concat(i));u+=f.val,this.options.attributesGroupName&&h.hasOwnProperty(this.options.attributesGroupName)&&(l+=f.attrStr)}else u+=this.processTextOrObjNode(h,i,e,r);else if(this.options.oneListGroup){let f=this.options.tagValueProcessor(i,h);f=this.replaceEntitiesValue(f),u+=f}else u+=this.buildTextValNode(h,i,"",e)}this.options.oneListGroup&&(u=this.buildObjectNode(u,i,l,e)),s+=u}else if(this.options.attributesGroupName&&i===this.options.attributesGroupName){const a=Object.keys(t[i]),u=a.length;for(let l=0;l<u;l++)n+=this.buildAttrPairStr(a[l],""+t[i][a[l]])}else s+=this.processTextOrObjNode(t[i],i,e,r);return{attrStr:n,val:s}},ie.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function Ln(t,e,r,n){const s=this.j2x(t,r+1,n.concat(e));return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,s.attrStr,r):this.buildObjectNode(s.val,e,s.attrStr,r)}ie.prototype.buildObjectNode=function(t,e,r,n){if(t==="")return e[0]==="?"?this.indentate(n)+"<"+e+r+"?"+this.tagEndChar:this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,o="";return e[0]==="?"&&(o="?",s=""),(r||r==="")&&t.indexOf("<")===-1?this.indentate(n)+"<"+e+r+o+">"+t+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&o.length===0?this.indentate(n)+`<!--${t}-->`+this.newLine:this.indentate(n)+"<"+e+r+o+this.tagEndChar+t+this.indentate(n)+s}},ie.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e},ie.prototype.buildTextValNode=function(t,e,r,n){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(n)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(n)+"<"+e+r+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,t);return s=this.replaceEntitiesValue(s),s===""?this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(n)+"<"+e+r+">"+s+"</"+e+this.tagEndChar}},ie.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t};function In(t){return this.options.indentBy.repeat(t)}function Fn(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}function Pn(t,e){if(t.indexOf(e)>-1)return[e];const r=ge(t,e);return r.length?r:[]}async function Ze(t){if(new Uint16Array(t,0,2)[0]===35615)try{const r=new Response(t),n=new DecompressionStream("gzip"),s=await r.body?.pipeThrough(n),o=await new Response(s).arrayBuffer();return await Ze(o)}catch(r){console.error("eee",r)}return t}const Xt="AAK"+Object.keys({light:"mapbox://styles/mapbox/light-v10",dark:"mapbox://styles/vsp-tu-berlin/ckek59op0011219pbwfar1rex",transparentLight:"mapbox://styles/vsp-tu-berlin/clgxnk7m500dt01p687w8e693",transparentDark:"mapbox://styles/vsp-tu-berlin/clgwrqa0w00av01pg5jox0a35"}).length+"QRQ0EldfvmCW4Cyu";Qe.insensitive=!0;const kn=/.*\.(avro|dbf|gpkg|gz|h5|jpg|jpeg|omx|png|shp|shx|sqlite|zip|zst)$/,Mn=["simwrapper",".simwrapper"],Ae={};class Bn{baseUrl;urlId;slug;needsAuth;fsHandle;store;isGithub;isFlask;type;constructor(e,r){this.urlId=e.slug,this.slug=e.slug,this.needsAuth=!!e.needPassword,this.fsHandle=e.handle||null,this.store=r||null,this.isGithub=!!e.isGithub,this.isFlask=!!e.flask,this.type=0,this.fsHandle&&(this.type=1),this.isGithub&&(this.type=2),this.isFlask&&(this.type=3),this.baseUrl=e.baseURL,e.baseURL.endsWith("/")||(this.baseUrl+="/"),Ae[this.urlId]||(Ae[this.urlId]={})}hasHandle(){return!!this.fsHandle}async getChromePermission(e){return e&&await e.queryPermission({mode:"read"})!=="granted"&&this.store?await new Promise(o=>{this.store.commit("setFileHandleForPermissionRequest",{handle:e,resolve:o})}):!0}clearCache(){Ae[this.urlId]={}}cleanURL(e){let r=this.baseUrl+e.replace(/^0-9a-zA-Z_\-\/:+/i,"");return r=r.replaceAll("//","/"),r=r.replaceAll("//","/"),r=r.replace("https:/","https://"),r=r.replace("http:/","http://"),r=new URL(r).href,r}async _getFileResponse(e){switch(this.type){case 1:return this._getFileFromChromeFileSystem(e);case 2:return this._getFileFromGitHub(e);case 3:return this._getFileFromAzure(e);case 0:default:return this._getFileFetchResponse(e)}}async _getFileFetchResponse(e,r){const n=this.cleanURL(e),s={};r?.maxBytes&&(s.Range=`bytes=0-${r.maxBytes-1}`);const o=new Request(n,{headers:s});return await fetch(o).then(a=>{if(a.status>=300)throw console.warn("Status:",a.status),a;return a})}async _getDirectoryFromAzure(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r=r.replaceAll("//","/");let n=`${this.baseUrl}list/${this.slug}?prefix=${r}`;const s=new URL(n).href,o={};if(this.needsAuth){let l=localStorage.getItem(`auth-token-${this.slug}`);if(l||(l=prompt("This server requires an access token to continue")),l)localStorage.setItem(`auth-token-${this.slug}`,l),o.AZURETOKEN=l;else return{dirs:[],files:[],handles:{}}}const i=new Request(s,{headers:o}),a=await fetch(i);if(a.status==400){let l=prompt("Authorization failure. This server requires a valid access token to continue");return l?(localStorage.setItem(`auth-token-${this.slug}`,l),o.AZURETOKEN=l,await this._getDirectoryFromAzure(e)):{dirs:[],files:[],handles:{}}}if(a.status!=200)throw console.log("Status:",a.status),a;return await a.json()}getSlug(){return this.slug}async _getFileFromAzure(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r=r.replaceAll("//","/");let n=`${this.baseUrl}file/${this.slug}?prefix=${r}`;const s=new URL(n).href,o={},i=new Request(s,{headers:o}),a=await fetch(i);if(a.status!=200)throw console.log("Status:",a.status),a;return a}async _getFileFromChromeFileSystem(e,r){let n=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");n=n.replaceAll("//","/"),n=new URL(`http://local/${n}`).href,n=n.substring(13);const s=n.lastIndexOf("/"),o=n.substring(0,s),i=decodeURIComponent(n.substring(s+1)),u=(await this.getDirectory(o)).handles[i];if(!u)throw Error(`File ${i} missing`);const l=await u.getFile();return l.json=()=>new Promise(async(c,h)=>{const f=await l.text(),A=JSON.parse(f);c(A)}),l.blob=()=>new Promise(async(c,h)=>{c(l)}),new Promise((c,h)=>{c(l)})}async _getFileFromGitHub(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r.startsWith("/")&&(r=r.slice(1));const n=r.split("/").filter(f=>!!f);if(n.length<2)return new Promise((f,A)=>{f(null)});const s=`${n[0]}/${n[1]}`;let o=`https://api.github.com/repos/${s}/contents/`;n.shift(),n.shift(),o+=n.join("/");const u={Authorization:`Bearer ${["11","pat","github"].reverse().join("_")}${Xt}_SyKezxQUoOKXAx3HwTH51I4funGUSFfxdbGG2X4l3WvUHIW62GOOmO0OMWZ`};let l=await await fetch(o,{headers:u}).then(f=>f.json()),c=l.content;if(c||(o=`https://api.github.com/repos/${s}/git/blobs/${l.sha}`,l=await await fetch(o,{headers:u}).then(f=>f.json()),c=l.content),l.encoding=="base64"){const f=Uint8Array.from(atob(l.content),A=>A.charCodeAt(0));kn.test(e.toLocaleLowerCase())?c=f:c=new TextDecoder().decode(f)}else l.encoding=="utf-8"?c=new TextDecoder().decode(l.content):c=l.content;return{text:()=>new Promise((f,A)=>{f(c)}),json:()=>new Promise(async(f,A)=>{const R=JSON.parse(c);f(R)}),blob:()=>new Promise(async(f,A)=>{f(new Blob([c],{type:"application/octet-stream"}))})}}async _getDirectoryFromGitHub(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r.startsWith("/")&&(r=r.slice(1));const n={dirs:[],files:[],handles:{}},s=r.split("/").filter(c=>!!c);if(s.length<2)return n;let o=`https://api.github.com/repos/${s[0]}/${s[1]}/contents/`;s.shift(),s.shift(),o+=s.join("/");const u={Authorization:`Bearer ${["11","pat","github"].reverse().join("_")}${Xt}_SyKezxQUoOKXAx3HwTH51I4funGUSFfxdbGG2X4l3WvUHIW62GOOmO0OMWZ`};return(await await fetch(o,{headers:u}).then(c=>c.json())).forEach(c=>{c.type=="file"&&n.files.push(c.name),c.type=="dir"&&n.dirs.push(c.name)}),n}async getFileText(e){return(await this._getFileResponse(e)).text()}async getFileJson(e){const s=await(await(await this._getFileResponse(e)).blob()).arrayBuffer(),o=await Ze(s),i=new TextDecoder("utf-8").decode(o);return JSON.parse(i)}async getFileBlob(e){return(await this._getFileResponse(e)).blob()}async probeXmlFileType(e){let r=await this.getFileStream(e,{maxBytes:1024});e.toLocaleLowerCase().endsWith(".gz")&&(r=r.pipeThrough(new DecompressionStream("gzip")));const n=await r.getReader().read(),s=new Uint8Array(n.value),i=new TextDecoder("utf-8").decode(s.slice(0,Math.min(s.length,1024))).match(/<!DOCTYPE\s+(\w+)\s*(?:\[\s*([^\]]*)\s*\])?(?:\s+PUBLIC\s+"([^"]+)"\s+"([^"]+)"|(?:\s+SYSTEM\s+)?"([^"]+)")?/is);return i?i[1]:null}async getFileStream(e,r){let n;switch(this.type){case 1:return n=await this._getFileFromChromeFileSystem(e,r).then(o=>o.blob()).then(o=>o.stream()),n;case 0:return n=await this._getFileFetchResponse(e,r).then(o=>o.body),n;case 3:const s=`/file/${this.slug}?prefix=${e}`;return n=await this._getFileFetchResponse(s,r).then(o=>o.body),n;default:throw Error(`FileSystemType ${this.type} not implemented`)}}async getDirectory(e){let r=e.replaceAll("//","/");r.endsWith("/")||(r+="/");const n=Ae[this.urlId][r];if(n)return n;r=r.replaceAll("/./","/");try{let s;switch(this.type){case 1:s=await this._getDirectoryFromHandle(r);break;case 2:s=await this._getDirectoryFromGitHub(r);break;case 3:s=await this._getDirectoryFromAzure(r);break;case 0:default:s=await this._getDirectoryFromURL(r);break}return s.dirs.sort((o,i)=>Qe(o,i)),s.files.sort((o,i)=>Qe(o,i)),Ae[this.urlId][r]=s,s}catch(s){throw Error(""+s)}}async _getDirectoryFromHandle(e,r){const n={files:[],dirs:[],handles:{}};if(!this.fsHandle||!await this.getChromePermission(this.fsHandle))return n;let o=e.split("/").filter(l=>!!l);function i(l){const c=l.indexOf("..");if(c<=0)return l;const h=l.filter((f,A)=>A!==c-1&&A!==c);return i(h)}const a=i(o);let u=this.fsHandle;if(a.length)for(const l of a){let c=!1;for await(let[h,f]of u)if(h===l){u=f,c=!0;break}if(!c)throw Error(`Could not find folder "${l}"`)}for await(let l of u.values())n.handles&&(n.handles[l.name]=l),l.kind==="file"?n.files.push(l.name):n.dirs.push(l.name);return n}async _getDirectoryFromURL(e){const n=await(await this._getFileResponse(e).then()).text();return this.buildListFromHtml(n)}async findAllYamlConfigs(e){const r={dashboards:{},topsheets:{},vizes:{},configs:{}},n=[];let s="/";const i=(e.startsWith("/")?e:"/"+e).split("/");for(const h of i.slice(0,i.length-1)){s=`${s}${h}/`.replaceAll("//","/");try{const{dirs:f}=await this.getDirectory(s);for(const A of f)Mn.includes(A.toLocaleLowerCase())&&n.push(`${s}/${A}`.replaceAll("//","/"))}catch{}}n.push(e);const a="dashboard*.y?(a)ml",u="(topsheet|table)*.y?(a)ml",l="viz*.y?(a)ml",c="simwrapper-config.y?(a)ml";for(const h of n){const{files:f}=await this.getDirectory(h);ge.match(f,a).map(A=>r.dashboards[A]=`${h}/${A}`.replaceAll("//","/")),ge.match(f,u).map(A=>r.topsheets[A]=`${h}/${A}`.replaceAll("//","/")),ge.match(f,l).map(A=>r.vizes[A]=`${h}/${A}`.replaceAll("//","/")),ge.match(f,c).map(A=>r.configs[A]=`${h}/${A}`.replaceAll("//","/"))}return r}buildListFromHtml(e){return e.indexOf("SimpleWebServer")>-1?this.buildListFromSimpleWebServer(e):e.indexOf("<ul>")>-1?this.buildListFromSVN(e):e.indexOf('<ul id="files">')>-1?this.buildListFromNpxServe(e):e.indexOf("<table>")>-1?this.buildListFromApache24(e):e.indexOf(`
<a `)>-1?this.buildListFromNGINX(e):{dirs:[],files:[],handles:{}}}buildListFromSimpleWebServer(e){const r=/">(.*?)<\/a/,n=[],s=[],o=e.split(`
`);for(const i of o){if(i.indexOf('<li><a href="')<0)continue;const u=i.match(r);if(!u)continue;const l=u[1];l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l)}return{dirs:n,files:s,handles:{}}}buildListFromNpxServe(e){const r=/"(.*?)"/;let n=[],s=[];const o=e.split("</li>").map(i=>i.slice(i.lastIndexOf("<li")));for(const i of o){const a=i.indexOf('<li> <a href="');if(a<0||a>512)continue;const u=i.match(r);if(!u)continue;let l=u[1];l=l.replaceAll("&#47;","/"),l!=="/"&&l!=="../"&&(l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l))}return n=n.map(i=>i.slice(1+i.lastIndexOf("/"))),s=s.map(i=>i.slice(1+i.lastIndexOf("/"))),{dirs:n,files:s,handles:{}}}buildListFromSVN(e){const r=/"(.*?)"/,n=[],s=[],o=e.split(`
`);for(const i of o){if(i.indexOf('<li><a href="')<0)continue;const u=i.match(r);if(!u)continue;let l=u[1];l!=="../"&&(l.startsWith("./")&&(l=l.substring(2)),l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l))}return{dirs:n,files:s,handles:{}}}buildListFromApache24(e){const r=/"(.*?)"/,n=[],s=[],o=e.split(`
`);for(const i of o){if(i.indexOf('<th "')>-1||i.indexOf("[PARENTDIR]")>-1)continue;const a=i.indexOf('<td><a href="');if(a<0)continue;const u=i.substring(a).match(r);if(!u)continue;const l=u[1];l!=="../"&&(l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l))}return{dirs:n,files:s,handles:{}}}buildListFromNGINX(e){const r=/"(.*?)"/,n=[],s=[],o=e.split(`
`);for(const i of o){const a=i.indexOf('<a href="');if(a<0)continue;const u=i.substring(a).match(r);if(!u)continue;const l=u[1];l!=="../"&&(l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l))}return{dirs:n,files:s,handles:{}}}}function Gn(t){return new Worker("/simwrapper/assets/CoordinateConverter.worker-DwKCLFmo.js",{name:t?.name})}onmessage=function(t){Un(t.data)};let Se={},qe="EPSG:4326",ee=[],oe={};function Un(t){Se=t.aggregations,qe=t.projection,postMessage({status:`Loading ${t.filepath}...`}),Wn(t.filepath,t.fileSystem)}function Kn(){const t=[];Object.values(oe).forEach(e=>{e.positions.forEach(r=>t.push(r.buffer))}),postMessage({fullRowCache:oe},t)}async function Wn(t,e){try{const r=new Bn(e);let n=t;if(t.indexOf("*")>-1||t.indexOf("?")>-1){const a=t.substring(1+t.lastIndexOf("/")),u=t.substring(0,t.lastIndexOf("/")),{files:l}=await r.getDirectory(u),c=Pn(l,a);if(c.length==0)throw Error(`No files matched "${a}"`);if(c.length>1)throw Error(`More than one file matched "${a}": ${c}`);n=`${u}/${c[0]}`}const s=await r.getFileBlob(n);if(!s)throw Error("BLOB IS NULL");const o=await s.arrayBuffer(),i=await Ze(o);Xn(new Uint8Array(i))}catch{throw postMessage({error:"Error loading: "+t}),Error("LOAD FAIL! "+t)}}function Xn(t){postMessage({status:"Decoding CSV..."});const e=new TextDecoder;let r=0,n="";const s=e.decode(t.subarray(0,1024)).split(`
`);for(let A=0;A<20&&(n=s[A],r+=n.length,!!n.startsWith("#"));A++){const R=n.indexOf("EPSG");R>-1&&(postMessage({projection:n.slice(R)}),qe=n.slice(R))}const o=r,i=n.indexOf(";")>-1?";":n.indexOf("	")>-1?"	":n.indexOf(",")>-1?",":" ",a=n.trim().split(i),u=o+1,l=[];let c=0;for(let A=u;A<t.length;A++)t[A]===10&&c++;t[t.length-1]!==10&&c++;const h=c>1e3?4:1,f=[];for(let A=1;A<h;A++){let R=Math.floor(t.length/h*A);for(;R>0&&t[R]!==10;)R-=1;f.push(R)}if(f.length||f.push(0),f[0]==0)l.push(t.subarray(u));else{let A=u;for(let R=0;R<f.length+1;R++){const b=t.slice(A,f[R]??void 0);l.push(b),A=f[R]+1}}for(const A of Object.keys(Se)){const R=Se[A];let b=0,m=R.length;oe[A]={positions:[],length:[],numAggs:m,columnIds:[],coordColumns:[]};for(const S of R){m++;const P=a.indexOf(S.x),w=a.indexOf(S.y);if(P===-1||w===-1){let X="Could not find column ";const k=[];P===-1&&k.push(S.x),w===-1&&k.push(S.y),X=X+k.join(","),postMessage({error:X});return}oe[A].columnIds.push(`${A}${b}`),oe[A].coordColumns.push(P,w),b++}}zn(l,a)}function zn(t,e){let r=t.length;try{for(let n=0;n<t.length;n++)ee.push(new Gn);for(let n=0;n<t.length;n++)ee[n].onmessage=s=>{if(s.data.error){postMessage({error:s.data.error});return}if(s.data.status){postMessage({status:s.data.status});return}s.data.fullRowCache&&(ee[s.data.id].terminate(),ee[s.data.id]=s.data.fullRowCache,r-=1,r||Qn())},ee[n].postMessage({id:n,aggregations:Se,projection:qe,header:e,bytes:t[n]},[t[n].buffer])}catch(n){console.log(""+n),postMessage({error:"ERROR projection coordinates"});return}}function Qn(){postMessage({status:"Merging results..."});const t=Object.keys(oe);for(const e of t){const r=oe[e];for(let n=0;n<r.numAggs;n++){const s=ee.reduce((i,a)=>i+a[e].length[n],0);r.positions.push(new Float32Array(2*s));let o=0;for(let i=0;i<ee.length;i++){const a=ee[i],u=a[e].length[n],l=a[e].positions[n].slice(0,u*2);r.positions[n].set(l,o*2),o+=u}}}Kn()}})();
