import{d as r,n as h}from"./index-D_sw2g-2.js";const o=6,l=r({name:"TimeSlider",props:{labels:Array,range:Array,activeTimeExtent:Array,isAnimating:Boolean,isPointInTime:Boolean},data:()=>({state:{componentWidth:0,dragStartX:0,dragType:0,isDragging:!1,isSetupComplete:!1,leftPosition:0,rightPosition:1,datasetRange:[0,86400],labels:["",""]},id:"id-"+Math.floor(1e12*Math.random()),resizer:null}),computed:{fullDatasetTimeSpan(){return this.state.datasetRange[1]-this.state.datasetRange[0]},extentLeftToRight(){return this.state.rightPosition-this.state.leftPosition},hasNonZeroTimeRange(){return!!this.fullDatasetTimeSpan},calculateActiveMargins(){const e=this.state.componentWidth-2*o,t=Math.floor(e*this.state.leftPosition),s=Math.floor(e*(1-this.state.rightPosition));return{marginLeft:`${t}px`,marginRight:`${s}px`}}},mounted(){this.getDimensions(),this.setupInitialValues(),this.setupResizer(),window.addEventListener("mouseup",this.dragEnd),window.addEventListener("mousemove",this.dragging)},beforeDestroy(){this.resizer?.disconnect(),window.removeEventListener("mouseup",this.dragEnd),window.removeEventListener("mousemove",this.dragging)},watch:{activeTimeExtent(){this.updateExtent()},labels(){this.updateLabels()},"state.leftPosition"(){this.emitValues()},"state.rightPosition"(){this.emitValues()}},methods:{setupResizer(){try{this.resizer=new ResizeObserver(this.getDimensions);const e=document.getElementById(`id-${this.id}`);this.resizer.observe(e)}catch(e){console.error(""+e)}},setupInitialValues(){try{this.range&&(this.state.datasetRange=this.range),this.fullDatasetTimeSpan===0?(this.state.leftPosition=0,this.state.rightPosition=1):this.updateExtent()}catch(e){console.error(""+e)}finally{this.state.isSetupComplete=!0}},updateExtent(){this.activeTimeExtent&&(this.state.leftPosition=(this.activeTimeExtent[0]-this.state.datasetRange[0])/this.fullDatasetTimeSpan,this.state.rightPosition=(this.activeTimeExtent[1]-this.state.datasetRange[0])/this.fullDatasetTimeSpan)},updateLabels(){this.labels&&(this.state.labels=this.labels)},emitValues(){if(!this.state.isSetupComplete)return;const e=this.state.datasetRange[0]+this.state.leftPosition*this.fullDatasetTimeSpan,t=this.state.datasetRange[0]+this.state.rightPosition*this.fullDatasetTimeSpan;this.$emit("timeExtent",[e,t])},getDimensions(){this.state.componentWidth=this.$refs.slider?.clientWidth||0},dragStart(e){this.$emit("drag"),this.state.isDragging=!0,this.state.dragStartX=e.clientX;const t=this.state.componentWidth-2*o,s=Math.floor(t*this.state.leftPosition),i=Math.floor(t*(1-this.state.rightPosition)),a=this.state.componentWidth-i-s-2*o;e.offsetX>=0&&e.offsetX<a?this.state.dragType=0:e.offsetX<0?this.state.dragType=1:e.offsetX>a&&(this.state.dragType=2)},dragging(e){if(!this.state.isDragging)return;const t=e.clientX-this.state.dragStartX,s=this.state.componentWidth-2*o;if(this.state.dragType==0){const i=this.extentLeftToRight;let a=(s*this.state.leftPosition+t)/s,n=a+i;a<0&&(a=0,n=i),n>1&&(n=1,a=n-i),this.state.leftPosition=a,this.state.rightPosition=n,this.state.dragStartX=e.clientX;return}if(this.state.dragType==1){const i=s*this.state.leftPosition+t;this.state.leftPosition=Math.max(0,i/s),this.state.leftPosition>this.state.rightPosition&&(this.state.rightPosition=this.state.leftPosition),this.state.dragStartX=e.clientX;return}if(this.state.dragType==2){const i=s*this.state.rightPosition+t;this.state.rightPosition=Math.min(1,i/s),this.state.leftPosition>this.state.rightPosition&&(this.state.leftPosition=this.state.rightPosition),this.state.dragStartX=e.clientX;return}},dragEnd(e){this.state.isDragging=!1}}});var g=function(){var t=this,s=t._self._c;return t._self._setupProxy,t.hasNonZeroTimeRange?s("div",{staticClass:"time-slider-component",attrs:{id:`id-${t.id}`}},[s("div",{staticClass:"label-area"},[s("p",{staticClass:"p1"},[t._v(t._s(t.state.labels[0]))]),s("p",{directives:[{name:"show",rawName:"v-show",value:!t.isPointInTime&&t.state.labels[1]!==void 0,expression:"!isPointInTime && state.labels[1] !== undefined"}],staticClass:"p2"},[t._v("- "+t._s(t.state.labels[1]))])]),s("div",{staticClass:"slider-area"},[s("button",{staticClass:"button play-button",attrs:{size:"is-small",type:"is-link"},on:{click:function(i){return t.$emit("toggleAnimation")}}},[t._v(t._s(t.isAnimating?"| |":">"))]),s("div",{ref:"slider",staticClass:"time-slider-dragger",on:{mousemove:t.dragging}},[s("div",{staticClass:"active-region",style:t.calculateActiveMargins,on:{mousedown:t.dragStart,mouseup:function(i){return i.stopPropagation(),t.dragEnd.apply(null,arguments)},mousemove:function(i){return i.stopPropagation(),t.dragging.apply(null,arguments)}}})])])]):t._e()},d=[],m=h(l,g,d,!1,null,"a3e47a33");const f=m.exports;export{f as T};
