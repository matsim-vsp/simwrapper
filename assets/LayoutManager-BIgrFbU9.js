import{d as _t,g as be,n as mt,a as Mr,f as $i,p as ts,s as rs,V as ga,X as uo}from"./index-D_sw2g-2.js";import{m as Er,H as Oi}from"./HTTPFileSystem-ChhivMzi.js";import{Y as yi}from"./index-DFKcNkqO.js";import{E as ns,m as Bn,a as ya,S as is,i as va,T as wa,F as ba,B as Ta}from"./ErrorPanel-BiGfKPxL.js";import{S as os}from"./SW_logo_white-BC-0sXUm.js";import{P as _a}from"./papaparse.min-DWLWhEfa.js";import{_ as ss}from"./vue-good-table.esm-CI0urkCK.js";import"./fxp-DjoqftHf.js";import"./index-CCqgbF9K.js";import"./TopSheet-D3y6zxfo.js";import"./DashboardDataManager-mkjvCydQ.js";import"./group-hI8ly2Wr.js";import"./index-_doEQLKC.js";const Ca="Ov23liMkwaPPPufEiUtA",Ea="https://simwrapper.github.io/staging/github_callback";async function Da(r,e){try{const n=e||{},i=await(await fetch(`https://api.github.com/gists/${r}`)).json();console.log({gist:i});let o=n.file?i.files[n.file]:i.files[Object.keys(i.files)[0]];if(o.truncated){console.log("truncated, get raw",o.raw_url);const a=await fetch(o.raw_url);console.log(a),o=await a.text(),console.log({data:o});var t=yi.parse(o);return t}else{var t=yi.parse(o.content);return t}}catch(n){console.error(n)}finally{}}const ka={CLIENT_ID:Ca,REDIRECT_URI:Ea,load:Da},Sa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHoAAAC6CAYAAABhsVlQAAAACXBIWXMAAAsSAAALEgHS3X78AAAL5ElEQVR4nO1d4XXbOAwm8/o/2eByE9QbNJ3gchM0maDJBskG7gRJJ6g7QZ0NnAnO3cCegPfoQK4iUjIpASBI8XsPf6REovmJJAACoDbGqApcaK0vlVJWrk48eK2U2hljNs4d7DZVoqcDiL0GYq2cj3joi1JqZcUYs3XuTkQlegK01jdKKSufkB/9qpRaAuk75+4IVKIjobW+UErdAcF/Eb9uD4QvpxJeiY6A1voaOp6a4C4s4Q/GmKVzJxCV6ADAKF4RTNGxsFP6zRjl7cy5UvEOMIq3Aki2+Gg1ddANolCJHoDW2q7FP0Zq0VSwbXnSWj9H/ZY6dfsBHfnFe1MOvhtjgkZ3HdEeZEKyxZfQkV2J7kBrvcyE5AZBZFeiWwAl56tzQz4s2Q9DraxrNEBrvQDfsyTFKxb/GmNWvv+pRAO01hswX3KGdaxc+rxodep+I/mhAJIVzEbe9ZpsRGut7S6OnQ4vnJtKrY0xa+dqAsDO038S2oKIz07/WqKxBPZg7Rdlpw4TIPZvrzDbECvQhpC25iTrbj9gddbFxA5bw9riPJuY5EtPW0qRdwNo8tQNvuBnBG3VKhJ3xhjvGkMBJseI/V3dTYhLhh2wF2PMnwgX35ceMSJuCL7+pe9dBKP5ImKJiZUdfPwL37tbs8mSsA2mPUs6DUhMciMPvnciE03V/lXMMgQf3NLzHNRB47w4sHEL4i/RyrXv3YhErzzvnCo3vncFtueaoE+3U4neeB6KLfZHX/jej0S0GJI7A8j37ClymF2iHSbgD+ZwLpxDbBY6wMbHxDcMJRIiR+6dG9Nw1Tw89qvbMozmRkhGtdUBPO+aPD0itm/tec9YeY4e0eD45wyMO4e1CxsLxOcN7hoJeKbV7qOn7uhYJQRQEO1zy47BnsLuB/flq3NjHA6xbrFEY46EUGCvpwox0M+7JYgE1A8olugUkZCS94cpN2bQ8rHskpvFNiWBlowF9BypFjAT7y7qfrRQ+IIHpqASLRSQHYKGLIh2NtHl4JKwJZiK7y6W6BfnCj32Cd4ZCkrdAY1o63GLJZo8M98DitGM9cFS2PgNUH0WsUSzBQW0QGGrYik652MS3k4BrAys/YTDRx1FNDjdfzs36LAnIhpzZpLuAj2YgGOUMYof1ofJmf49wFwO/oI0HhRABiemY+rto/btntT96PL2o52XRTSoRpi4MiXC5EZchImpMWNDUk7MGHFn1ShQPDl+cDWuu8Z1R4+OmqkhS95lajg/HqHjau5VenFyr2o25UyyKWefCA/bgZsE1QCp8NMY4/jgZ000kLwuJAle1YoHHhRIsgKHjUOymivRhZL82FeoRs1x6i6U5JMVBOc4opdzI1nNjeiMSj+GotYC7WLOJKu5EF0YydaEuo0h2eKDc6UwFEZyrcDvQ0Ek21F8b4xZjD0jq9gRXQjJaKfkOLs5JQiUxKDeRdrBezCrEzSygaAOtJi54hwmEGf95NzAxR62VzeqnmTHjxQk+1DPpiSEFJKlogitu5J8GtkTXUkOQ9ZEV5LDke0aDTFpv5wb+Og9kCQnZDmiobAdR+fflkCyypFoxmOLbjmTCaiRFdGV5PHIhuhK8jTkUlCukjwR4omuJONANNHgM+Yg+bFkkhWVHQ02biOnUkRfoaDKpp2TxRiWGxV7lSvQiIY8adth/zg349BUIlpUkvEwiWgYdXdA8NColYjZkKymhBJBmaSHTM9bnhXJagzRoAU/Z5ztMDuSVazWDbtFOectzZJkFbNGFxBV6U0QnwuCiC6A5FfYU6YoNzkJ4CtYDJRt3kBhuGn74b7Q0MKKudgOIis1ObJAzgLitWMOi9tNKe7jXKgkkxJ8hRQHvo0tR+lcaDWKsgTkrEiGykwUtUfXQ9UJTxJNVGV2riRTHBfcll3I6HYuGL4yzXMgmXNWfPa1oZdoprwlSiEt/yyU5JNkdxtHWfGWS9CP+c2E5Ea8JbC7DcQ8VzmlTK6GP4FkjqL1p8SZ1d45TLTWu0w3Kbp4tUnjzlUGaK03AlzETgXBo68b/NglkGzxETZfWKG1fhCyD3DePeTmOKK11iuEoAEfmkCCded01ianmOKdinsDA/bmt8IGy9/HXOuWEkaxVixPmTpAOIUzgVUpE2qtHLXwppHXnj+aKnEuOhpNNchrhER0jN+aS3ZN+5o1GvswzejQWfj7e+fGNLAcMA76gMRQqnOI5TsSjam4fBsbOmuMsVP9T+fGeHApZFJPrFfNQanYRO8RjjS8c66MB+X5zm1IJvrAbUM0lqa4mrq5D1oi1qjmGtFcH9QYHMy9M2R7EyuXGOtgFS5TR3QMnTX9znpOsRkLrPIPWZeREIgFau4VRSG0ChygEg2BbhUCcYZ4DL5CVH6SbEgUjM0ZclklrLhpLHNl71yhwSvTe0bBWkLN1I3VIdfg3B8NmP6xNjq4lDrJusnhI2yIxuoQZ3tsBJZIbVGMBIg4Z7MHB26xibb4Cnvb0YAMTcxtS64RLZnoN99G3b2ax+5V3Y+eyX50jTBBQhYRJoRTZ0phm7ZbfSgpinbZbluNAkWG+ChQAKZpkxRT7fkJuGF01PTBPUe6M/WUkKnRyCbF9C1gGTydqSFYexwru5mRHZZ71WpkztmUXQlKKy2A7F6Sh4jOPT/aJ6nIlpsfnXDqoZal77cykC2z4kGrgbnXMPHJ4BRHTLi8GiaFk520KkKKqkRzqTPmwyvkESfdS+aqMzanyoE+FHF4WQiCgwNhg+BWgNcHE9bdu27yk0pGdL3uAqr79qGeqdGGneZgw+C+sNH9pLUuxtffxei4bsh8tIrEo1Lqt/MHOPjN/EF9BV2kPPhU8ZEmwzWSU8AxI0Aj5QzVEVcodqqIPSXH80yuU3Pa7UpufmEhq2OFgexnwvCjLooxv7I6hNRupkMV/e/OTRoUY35leX402PTY9U76YMn+MTZWXQqyPfoftP5b5wYdnqBgXJbI9uj/BoyHlDbI8qSd7IlWf8hendDuMfECGrm4w1j6UATRKp35JfLkHR+yXaO7gA6/Qq5TNgT7QW1TFJcdg2KIVmnNL8l1xg4oiugGCcyvX9LNryKJVtX8clCMMtaHan69oXiiVRqyxZlfsyBaVfOr3DW6i5b59eLcpIEo82s2RKs/5tfVHM2vWRHdAJSlR+cGDUSYX1QRJjyHX08EdP4T4yvvwezjR85pJkjtvmJO/k+S++VcGNlRSRLHkD9STrJX3MGHzoWIzkmeCopM9gVzAQDWSNNRyhjEUG2JgvQ+gabKqrwkML82rDa2j/0hkVSugXB0U6cKb3zvJf1Nvot9Iq0ACzHZVMXhkiQHOBf6RGJJJQaysX/zDgq9Oe8SQbTUw6+ZyMYqNpOsFJaJqHggsuwhF5B2vz73pRtx4MOpdwg8/BrzSMMgWA9eK9J0TF/cxpIM/vFFz7lkvTlqvfAN89a0JbFkZJI1zoy3tYP1C0hIfI7o82CvonOh82LRxcYTEh5qfgW1FT6gKSbd+tQAcC50GiD6+IDEZC89bXvX+b7/8zwHU9nrdSE7F1oNkFwmMokG7umjPvMryFYe+P8p4q2O6FxoNUJyld/k0/fAiNwlJLkRRy9wGtBqCMWGBZawuxCHpOVnCLKVmfwS72a9XjtaiO3cC2OM7ruXAhBscRESTMHUt+/8DkO7V+IPv3YuJoStdRJI8g1T3563fQ5DI9p/Qw6SeprGQmu9ZUzvPY7qoRFdgQzwrnGRrGBUH+qvVKJ5kSISNHuicywJ1RcVS4lDTPnQGl21bmSk0ntsXw2NaPGHX1eEwe6EDREt/vDrinDkSvTKuVIxiN41WvHbfKHYG2NEOUtCIXWNVkIPJc15NHPFjLdxqHV+iuhngVX2sy3TmEi3OCzBg0SDQ1zSqP6Wef3sFNX9DzPg4BrdYO5RoJiQ7uuWefh1nuBcepbHPvNtjPtkjpkahIEKHFmb7yJdnEYMyZxyr4iJZo8wcRohjOziSGbqR2cGdBoQ2EgRh19Xsr0SFwUa0MiiKh4kJDttXHdEQ7OvYSKA7LSZGpGNzbIqkTDCyXKvZl1nTDJQsymVUv8DgBKSn0Kc/bgAAAAASUVORK5CYII=",Ia={messages:{en:{},de:{}}},Ra=Object.assign({ErrorPanel:ns}),$a=_t({name:"ProjectLeftPanel",i18n:Ia,components:Ra,props:{currentFolder:{type:String,required:!0},projectFolder:{type:String,required:!0},navRoot:{type:String,required:!1}},data:()=>({globalState:be.state,subfolder:"",root:"",summaryYamlFilename:"viz-summary.yml",highlightedViz:-2,allConfigFiles:{dashboards:{},topsheets:{},vizes:{},configs:{}},allRoots:[],errorStatus:"",folders:[],isLoading:!1}),mounted(){},watch:{"globalState.leftNavItems"(){console.log("CHANGED!!!")},subfolder(){this.updateRoute()}},computed:{fileSystem(){const r=this.$store.state.svnProjects.filter(e=>e.slug===this.navRoot);if(r.length===0)throw console.log("no such project"),Error;return r[0]},topItems(){return this.globalState.leftNavItems?.top||[]},middleItems(){return this.globalState.leftNavItems?.middle||[]},bottomItems(){return this.globalState.leftNavItems?.bottom||[]},hasErrors(){return this.globalState.statusErrors.length>0}},methods:{updateLanguage(){this.$store.commit("setLocale",this.$store.state.locale=="en"?"de":"en"),this.$root.$i18n.locale=this.$store.state.locale},hasLabel(r){return r.text||r.text_de||r.text_en},getLabel(r){let e="";return this.$store.state.locale==="de"?e=r.text_de||r.text||r.text_en||"item":e=r.text_en||r.text||r.text_de||"item",e},getUrl(r){return r.startsWith("http")?r:`${this.fileSystem.baseURL}${r}`},getStyle(r,e){let t={};return r.style&&Object.assign(t,r.style),!e||!this.currentFolder.length||("/"+this.currentFolder).endsWith(r.url)&&(t.backgroundColor="#e3e3e0",t.borderRadius="4px",t.color="black"),t},navigate(r){if(r.startsWith("http"))window.location.href=r;else{const e=r.startsWith("/")?r:`${this.projectFolder}/${r}`,t={root:this.navRoot||"",xsubfolder:e,thumbnail:!1};this.$emit("navigate",{component:"TabbedDashboardView",props:t})}},updateRoute(){this.root&&(this.subfolder=this.subfolder||"",this.highlightedViz=-2)},authenticationChanged(){console.log("AUTH CHANGED - Reload"),this.updateRoute()},updateShortcuts(){const r=this.globalState.svnProjects.filter(e=>!e.hidden&&!e.slug.startsWith("fs"));this.allRoots=r},cleanName(r){return decodeURIComponent(r)},getFileSystem(r){const e=be.state.svnProjects.filter(t=>t.slug===r);if(e.length===0)throw console.log("no such project"),Error;return e[0]},clickedOnFolder(r){const e={component:"TabbedDashboardView",props:{root:r.root,xsubfolder:""}};this.$emit("navigate",e)},clickedLogo(){this.$router.push("/")}}});var Oa=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"panel"},[t("div",{staticClass:"sw-leftpanel-top"},e._l(e.topItems,function(n,i){return t("div",{key:`top-${i}`,staticClass:"span"},[n.image?t("div",{staticClass:"image-top-thing"},[n.url?t("a",{on:{click:function(o){return e.navigate(n.url)}}},[t("img",{staticClass:"sw-nav-item",style:e.getStyle(n),attrs:{src:e.getUrl(n.image)}})]):t("img",{staticClass:"sw-nav-item",style:e.getStyle(n),attrs:{src:e.getUrl(n.image)}})]):n.section?t("h3",{staticClass:"sw-nav-item"},[e._v(e._s(e.getLabel(n)))]):e.hasLabel(n)?t("div",{staticClass:"sw-nav-item"},[n.url&&n.url.startsWith("http")?t("p",[t("a",{attrs:{href:n.url}},[e._v(e._s(e.getLabel(n)))])]):n.url?t("p",[t("a",{on:{click:function(o){return e.navigate(n.url)}}},[e._v(e._s(e.getLabel(n)))])]):t("p",[e._v(e._s(e.getLabel(n)))])]):e._e()])}),0),t("div",{staticClass:"sw-leftpanel-middle"},e._l(e.middleItems,function(n,i){return t("div",{key:`middle-${i}`,staticClass:"span",style:e.getStyle(n)},[n.image?t("img",{staticClass:"sw-nav-item",style:e.getStyle(n),attrs:{src:e.getUrl(n.image)}}):n.section?t("h3",{staticClass:"sw-nav-item",style:e.getStyle(n)},[e._v(e._s(e.getLabel(n)))]):e.hasLabel(n)?t("div",{staticClass:"sw-nav-item",style:e.getStyle(n)},[n.url?t("p",[t("a",{style:e.getStyle(n,!0),on:{click:function(o){return e.navigate(n.url)}}},[e._v(e._s(e.getLabel(n)))])]):t("p",{style:e.getStyle(n)},[e._v(e._s(e.getLabel(n)))])]):e._e()])}),0),t("div",{staticClass:"sw-leftpanel-bottom"},e._l(e.bottomItems,function(n,i){return t("div",{key:`bottom-${i}`,staticClass:"span"},[n.image?t("img",{staticClass:"sw-nav-item",style:e.getStyle(n),attrs:{src:e.getUrl(n.image)}}):n.section?t("h3",{staticClass:"sw-nav-item"},[e._v(e._s(e.getLabel(n)))]):e.hasLabel(n)?t("div",{staticClass:"sw-nav-item"},[n.url?t("p",[t("a",{on:{click:function(o){return e.navigate(n.url)}}},[e._v(e._s(e.getLabel(n)))])]):t("p",[e._v(e._s(e.getLabel(n)))])]):e._e()])}),0)])},Pa=[],Ma=mt($a,Oa,Pa,!1,null,"aaa58695");const Fa=Ma.exports,xa={messages:{en:{},de:{}}},Na=_t({name:"BrowserPanel",i18n:xa,components:{},data:()=>({globalState:be.state,addKey:"",addNickname:"",addUrl:"",subfolder:"",root:"",highlightedViz:-2,errorStatus:"",servers:{},serverNames:[],isLoading:!1,showAddResource:!1}),mounted(){this.updateShortcuts();const r=localStorage.getItem("simrunner-servers")||"{}";this.servers=JSON.parse(r),this.serverNames=Object.keys(this.servers).sort(),this.serverNames.length||(this.showAddResource=!0)},watch:{"globalState.svnProjects"(){this.updateShortcuts()},subfolder(){this.updateRoute()}},computed:{},methods:{addServer(){if(!this.addUrl||!this.addKey)return;console.log("ADD: ",this.addUrl,this.addKey,this.addNickname);const e={serverNickname:this.cleanName(this.addNickname||this.addUrl),key:this.addKey,url:this.addUrl};this.servers[e.serverNickname]=e,this.servers=Object.assign({},this.servers),this.serverNames=Object.keys(this.servers).sort(),localStorage.setItem("simrunner-servers",JSON.stringify(this.servers))},removeServer(r){delete this.servers[r],this.serverNames=Object.keys(this.servers).sort(),localStorage.setItem("simrunner-servers",JSON.stringify(this.servers))},updateRoute(){this.root&&(this.getFileSystem(this.root),this.highlightedViz=-2)},updateShortcuts(){this.globalState.svnProjects.filter(r=>!r.hidden&&!r.slug.startsWith("fs"))},cleanName(r){return decodeURIComponent(r)},getFileSystem(r){const e=be.state.svnProjects.filter(t=>t.slug===r);if(e.length===0)throw console.log("no such project"),Error;return e[0]},clickedOnServer(r){const e=this.servers[r],t={component:"SimRunner",props:Object.assign({},e,{root:"",xsubfolder:""})};this.$emit("navigate",t)},dragEnd(){this.$emit("isDragging",!1)},dragStart(r,e){this.$emit("isDragging",!0);const t={component:"TabbedDashboardView",props:{}},n=this.root||e,i=this.root?e:"",o=Object.assign({},t,{root:n,subfolder:i,xsubfolder:i});o.yamlConfig=o.config,delete o.config;const a=JSON.stringify(o);r.dataTransfer?.setData("bundle",a)}}});var ja=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"panel"},[e._m(0),t("div",{staticClass:"middle-panel"},[e._m(1),t("h3",{staticStyle:{"margin-top":"1rem"}},[e._v("Servers")]),t("div",{staticClass:"curate-content"},[t("div",{staticClass:"folder-table"},e._l(e.serverNames,function(n){return t("div",{key:n,staticClass:"folder",on:{click:function(i){return e.clickedOnServer(n)}}},[t("i",{staticClass:"fa fa-server"}),t("p",[e._v(" "+e._s(e.cleanName(n)))]),t("i",{staticClass:"fa fa-times",staticStyle:{"margin-left":"auto"},on:{click:function(i){return e.removeServer(n)}}})])}),0)]),t("div",{staticClass:"connect-here"},[t("h3",{staticStyle:{"margin-top":"1rem"},on:{click:function(n){e.showAddResource=!e.showAddResource}}},[e._v("Add new server"),t("i",{staticClass:"fa",class:{"fa-times":e.showAddResource,"fa-arrow-up":!e.showAddResource},staticStyle:{float:"right"}})]),e.showAddResource?t("div",{staticClass:"add-details"},[t("p",[e._v("Label")]),t("b-input",{staticClass:"b-input",attrs:{size:"is-small",placeholder:"server",maxlength:"255"},model:{value:e.addNickname,callback:function(n){e.addNickname=n},expression:"addNickname"}}),t("p",[e._v("Server URL")]),t("b-input",{staticClass:"b-input",attrs:{size:"is-small",placeholder:"https://server",maxlength:"255"},model:{value:e.addUrl,callback:function(n){e.addUrl=n},expression:"addUrl"}}),t("p",[e._v("Authentication Key")]),t("b-input",{staticClass:"b-input",attrs:{size:"is-small",placeholder:"user-123456",maxlength:"255"},model:{value:e.addKey,callback:function(n){e.addKey=n},expression:"addKey"}}),t("b-button",{staticClass:"add-button is-small",attrs:{type:"is-warning"},on:{click:e.addServer}},[e._v("  Add  ")])],1):e._e()])])])},Aa=[function(){var r=this,e=r._self._c;return r._self._setupProxy,e("div",{staticClass:"top-panel"},[e("h4",[r._v("Runs")])])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("div",{staticClass:"hint-clicks",staticStyle:{"margin-bottom":"1rem",opacity:"1"}},[e("p",[r._v("Connect to SimWrapper cloud resources here.")])])}],La=mt(Na,ja,Aa,!1,null,"c643a949");const Ya=La.exports,Ua=_t({name:"FileSystemComponents",data:()=>({sources:[]}),mounted(){this.sources=be.state.svnProjects.filter(r=>!r.hidden&&!r.slug.startsWith("fs"))},methods:{openProjectPage(r){const e=Object.assign({},r);e.component="TabbedDashboardView",e.props={root:r.slug,xsubfolder:""},this.$emit("navigate",e)},openProjectTab(r){window.open(r,"_blank")}}});var za=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"svn-projects"},e._l(e.sources,function(n){return t("div",{key:n.url,staticClass:"project",on:{click:[function(i){return e.openProjectPage(n)},function(i){return i.metaKey?e.openProjectTab(n):null},function(i){return i.ctrlKey?e.openProjectTab(n):null}],mouseup:function(i){return"button"in i&&i.button!==1?null:e.openProjectTab(n)}}},[t("div",{staticClass:"desc"},[t("h3",[e._v(e._s(n.name))]),t("p",[e._v(e._s(n.description))])])])}),0)},Ba=[],qa=mt(Ua,za,Ba,!1,null,"c18a2dce");const as=qa.exports,Wa="/simwrapper/",Za=[".nodashboards","nodashboards","nodashboards.txt"],Ha={messages:{en:{Maps:"Maps & Dashboards",Images:"Images",Analysis:"Analysis",Files:"Files",Folders:"Folders",Topsheet:"Table",privacy:`SimWrapper is a client-side app, which means there is no upstream server collecting or storing data.

SimWrapper does not collect, handle or process any data about you while you use the site. SimWrapper does not contain any tracking devices or analytics software. No user cookies are stored or transmitted.`},de:{Maps:"Karten",Images:"Bilder",Analysis:"Ergebnisse",Files:"Dateien",Folders:"Ordner",Topsheet:"Tabelle"}}},Ga={"":"#118860","aggregate-od":"#E98B52","vehicle-anim":"#330033","x-y-t":"#583270",carriers:"#c97A2C",events:"#4400ff",hexagons:"#900564",map:"#c94264",network:"#894654",sankey:"#D8A672",summary:"#2EA95B",transit:"#3B6FE4"},Va=Object.assign({FileSystemProjects:as,TopsheetsFinder:ya},ts),Ka=_t({name:"BrowserPanel",i18n:Ha,components:Va,data:()=>({globalState:be.state,subfolder:"/",root:"",summaryYamlFilename:"viz-summary.yml",highlightedViz:-2,needDoubleClickHint:!1,allConfigFiles:{dashboards:{},topsheets:{},vizes:{},configs:{}},allRoots:[],mdRenderer:new Bn({html:!0,linkify:!0,typographer:!0}),myState:{errorStatus:"",folders:[],files:[],isLoading:!1,readme:"",svnProject:null,svnRoot:void 0,subfolder:"",vizes:[],summary:!1},clicks:0,clickTimer:{}}),mounted(){this.updateShortcuts(),this.getRootAndRoute(this.$route.params.pathMatch)},watch:{"globalState.svnProjects"(){this.updateShortcuts()},"globalState.colorScheme"(){},subfolder(){this.updateRoute()},"globalState.authAttempts"(){this.authenticationChanged()},"myState.files"(){this.filesChanged()}},computed:{isChrome(){return!!window.showDirectoryPicker},localFileHandles(){return this.$store.state.localFileHandles.concat().sort((r,e)=>parseInt(r.key.substring(2))<parseInt(e.key.substring(2))?-1:1)}},methods:{updateRoute(){if(!this.root)return;const r=this.getFileSystem(this.root);this.myState.svnProject=r,this.myState.subfolder=this.subfolder||"",this.myState.readme="",this.highlightedViz=-2,this.myState.svnProject&&(this.myState.svnRoot=new Oi(this.myState.svnProject,be),this.generateBreadcrumbs(),this.fetchFolderContents())},authenticationChanged(){console.log("AUTH CHANGED - Reload"),this.updateRoute()},async filesChanged(){this.myState.vizes=[],this.myState.files.length!==0&&(this.myState.summary=this.myState.files.indexOf(this.summaryYamlFilename)!==-1,this.myState.summary?await this.buildCuratedSummaryView():this.buildShowEverythingView())},updateShortcuts(){const r=this.globalState.svnProjects.filter(e=>!e.hidden&&!e.slug.startsWith("fs"));this.allRoots=r},cleanName(r){return decodeURIComponent(r)},getFileSystem(r){const e=be.state.svnProjects.filter(t=>t.slug===r);if(e.length===0)throw console.log("no such project"),Error;return e[0]},generateBreadcrumbs(){if(!this.myState.svnProject)return[];const r=[{label:"SimWrapper",url:"/"},{label:this.myState.svnProject.name,url:"/"+this.myState.svnProject.slug}],e=this.myState.subfolder.split("/");let t="/";for(const n of e)n&&(t+=n+"/",r.push({label:n,url:"/"+this.myState.svnProject.slug+t}));return be.commit("setBreadCrumbs",r),r},clickedBreadcrumb(r){this.getRootAndRoute(r.url.slice(1))},getRootAndRoute(r){if(!r)return;if(r==="/"){this.root="";return}if(r.startsWith("split/")){console.log("SPLIT"),r.substring(6);return}let e=r,t="";const n=r.indexOf("/");n>-1&&(e=r.substring(0,n),t=r.substring(n+1)),this.root=e,this.subfolder=t},updateTitle(r,e){this.myState.vizes[r].title=e},configureSources(){this.$emit("activate",{name:"Settings",class:"SettingsPanel"})},getTabColor(r){return{backgroundColor:Ga[r]||"#8778BB"}},buildShowEverythingView(){for(const r of this.globalState.visualizationTypes.values()){const e=Er(this.myState.files,r.filePatterns);for(const t of e)this.myState.vizes.push({component:r.kebabName,config:t,title:".."})}},async buildCuratedSummaryView(){if(!this.myState.svnRoot)return;const r=yi.parse(await this.myState.svnRoot.getFileText(this.myState.subfolder+"/"+this.summaryYamlFilename));for(const e of r.plugins){const t=this.globalState.visualizationTypes.get(e);if(t)if(r[t.kebabName])for(const n of r[t.kebabName]){const i=await this.findMatchingFiles(n);for(const o of i)this.myState.vizes.push({component:t.kebabName,config:o,title:o})}else{const n=Er(this.myState.files,t.filePatterns);for(const i of n)this.myState.vizes.push({component:t.kebabName,config:i,title:".."})}}},async findMatchingFiles(r){if(this.myState.files.indexOf(r)>-1)return[r];const e=Er(this.myState.files,r);if(e.length)return e;if(!this.myState.svnRoot)return[];try{const t=r.split("/"),n=this.myState.subfolder+"/"+t[0];console.log(n);const i=await this.myState.svnRoot.getDirectory(n);return Er(i.files,t[1]).map(a=>t[0]+"/"+a)}catch{}return[]},async fetchFolderContents(){if(!this.myState.svnRoot)return[];this.myState.isLoading=!0,this.myState.errorStatus="",this.myState.files=[];try{this.allConfigFiles=await this.findAllConfigsAndDashboards();const r=await this.myState.svnRoot.getDirectory(this.myState.subfolder),e=r.dirs.filter(o=>!o.startsWith(".")).sort(),t=r.files.filter(o=>!o.startsWith(".")).sort(),n=Object.assign({},this.allConfigFiles.vizes);for(const o of t)n[o]=o;const i=Object.values(n);this.myState.errorStatus="",this.myState.folders=["UP"].concat(e),this.myState.files=i}catch{const e=this.myState.subfolder.lastIndexOf("/");if(e>-1){this.subfolder=this.myState.subfolder.slice(0,e);return}else{this.subfolder="";return}}finally{this.myState.isLoading=!1}},clickedOnFolder(r){this.needDoubleClickHint=!1;const{folder:e,root:t,i:n}=r;if(t){this.root=t,this.subfolder="",this.updateRoute();return}if(this.myState.isLoading||!this.myState.svnProject)return;if(n==0&&e==="UP"){if(this.subfolder==="/"||this.subfolder==="")this.root="";else{const o=this.subfolder.lastIndexOf("/");this.subfolder=o>-1?this.subfolder.slice(0,o):"/"}return}let i=`${this.subfolder}/${e}`;i.startsWith("/")&&(i=i.slice(1)),this.subfolder=i},dragEnd(){this.$emit("isDragging",!1)},dragStart(r,e){this.$emit("isDragging",!0);const t={component:"TabbedDashboardView",props:{}},n=this.root||e,i=this.root?e:"",o=Object.assign({},t,{root:n,subfolder:i,xsubfolder:i});o.yamlConfig=o.config,delete o.config;const a=JSON.stringify(o);r.dataTransfer?.setData("bundle",a)},dragBreadCrumb(r,e){let t=e.startsWith("/")?e.slice(1):e;t.endsWith("/")&&(t=t.slice(0,-1));let n=t.indexOf("/")>-1?t.slice(t.indexOf("/")):"";this.dragStart(r,n)},async findAllConfigsAndDashboards(){if(!this.myState.svnRoot)return{dashboards:{},configs:{},vizes:{},topsheets:{}};try{const{files:r}=await this.myState.svnRoot.getDirectory(this.subfolder);let e=!0;Za.forEach(n=>{r.indexOf(n)>-1&&(e=!1)});const t=await this.myState.svnRoot.findAllYamlConfigs(this.subfolder);return e||(t.dashboards={}),t}catch{return{dashboards:{},configs:{},vizes:{},topsheets:{}}}},async clickedBrowseChromeLocalFolder(r){try{const e=await r.handle.requestPermission({mode:"read"});if(console.log(r.handle,e),e!=="granted")return;$i.find(i=>i.slug==r.key)||Mr(r.handle,r.key);const n={root:r.key};this.clickedOnFolder(n)}catch(e){console.error(""+e)}},async showChromeDirectory(){try{const e=await window.showDirectoryPicker(),t=Mr(e,null);this.$router.push(`${Wa}${t}/`)}catch{}}}});var Qa=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"panel"},[t("div",{staticClass:"top-panel"},[e._m(0),e.root?t("div",{staticClass:"trail"},[t("div",{staticClass:"x-home"},[t("p",{on:{click:function(n){return e.clickedBreadcrumb({url:"//"})}}},[t("i",{staticClass:"fa fa-home"})])]),e.root?t("div",{staticClass:"x-breadcrumbs"},e._l(e.globalState.breadcrumbs.slice(1),function(n,i){return t("p",{key:n.url,attrs:{draggable:""},on:{click:function(o){return e.clickedBreadcrumb(n)},dragstart:function(o){return e.dragBreadCrumb(o,n.url)},dragend:e.dragEnd}},[e._v(" • "+e._s(n.label))])}),0):e._e()]):e._e()]),t("div",{staticClass:"middle-panel"},[e._m(1),e.root?t("div",{staticClass:"curated-sections"},[t("h3",{staticClass:"curate-heading",attrs:{draggable:""},on:{dragstart:function(n){return e.dragStart(n,e.subfolder)},dragend:e.dragEnd}},[e._v(e._s(e.globalState.breadcrumbs[e.globalState.breadcrumbs.length-1].label))]),e.myState.folders.length?t("div",{staticClass:"curate-content"},[t("div",{staticClass:"folder-table"},e._l(e.myState.folders,function(n,i){return t("div",{key:n,staticClass:"folder",class:{fade:e.myState.isLoading,upfolder:i==0},attrs:{draggable:""},on:{dragstart:function(o){return e.dragStart(o,`${e.myState.subfolder}/${n}`)},dragend:e.dragEnd,click:function(o){return e.clickedOnFolder({folder:n,i})}}},[t("i",{staticClass:"fa",class:i==0?"fa-arrow-up":"fa-folder-open"}),t("p",[e._v(e._s(e.cleanName(n)))])])}),0),e.myState.folders.length==1?t("p",{staticStyle:{"font-size":"0.9rem",opacity:"0.7",margin:"0.5rem 0","text-align":"right"}},[e._v("No subfolders.")]):e._e()]):e._e()]):t("div",{staticClass:"curated-sections"},[e.isChrome?t("div",{staticClass:"is-chrome"},[t("h3",[e._v("Local Folders")]),e.localFileHandles.length?e._e():t("p",[e._v("Chrome & Edge can browse folders directly:")]),e._l(e.localFileHandles,function(n){return t("div",{key:n.key,staticClass:"project-root local",attrs:{draggable:""},on:{click:function(i){return e.clickedBrowseChromeLocalFolder(n)},dragstart:function(i){return e.dragStart(i,n.slug)},dragend:e.dragEnd}},[t("h5",{staticClass:"remove-local",staticStyle:{flex:"1"}},[e._v(e._s(n.handle.name))]),t("p",[e._v("Local folder")])])}),t("p",{staticClass:"config-sources"},[t("a",{on:{click:e.showChromeDirectory}},[e._v("Add local folder...")])])],2):e._e(),t("h3",{staticStyle:{"margin-top":"1rem"}},[e._v("Data Sources")]),e._l(e.allRoots,function(n){return t("div",{key:n.slug,staticClass:"project-root",attrs:{draggable:""},on:{click:function(i){return e.clickedOnFolder({root:n.slug})},dragstart:function(i){return e.dragStart(i,n.slug)},dragend:e.dragEnd}},[t("h5",[e._v(e._s(n.name))]),t("p",[e._v(e._s(n.description))])])})],2)])])},Xa=[function(){var r=this,e=r._self._c;return r._self._setupProxy,e("h4",[e("i",{staticClass:"fas fa-columns"}),e("span",[r._v("  Split View")])])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("div",{staticClass:"hint-clicks",staticStyle:{"margin-bottom":"1rem",opacity:"1"}},[e("p",[e("b",[r._v("Drag a folder ")]),r._v("from here to the main window area to open side‑by‑side.")])])}],Ja=mt(Ka,Qa,Xa,!1,null,"4d298ac5");const el=Ja.exports,tl=`
Add any URL-based data provider.
See SimWrapper documentation for details.
`,rl=_t({name:"AddDataSource",props:{},data:()=>({labelField:"",urlField:"",noteField:"",notes:"",mdParser:new Bn}),mounted(){this.notes=this.mdParser.render(tl)},watch:{labelField(){this.fixField()}},computed:{isValidURL(){return!(!this.labelField||!this.urlField||!this.urlField.startsWith("http"))}},methods:{addURL(){this.fixField(),console.log("Adding",this.labelField,this.urlField);const r="projectShortcuts";try{let e=localStorage.getItem(r)||"{}",t=JSON.parse(e);t[this.labelField]={name:`${this.labelField}`,slug:`${this.labelField}`,description:this.noteField,baseURL:this.urlField},console.log("NEW ROOTS",t),localStorage.setItem(r,JSON.stringify(t)),be.commit("setURLShortcuts",t)}catch(e){console.error(""+e)}this.$emit("close")},fixField(){this.labelField=this.labelField.toLowerCase().replaceAll(/[^a-z\-0-9@]*/g,"")}}});var nl=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"add-data-panel"},[e._m(0),t("div",{staticClass:"add"},[t("div",{staticClass:"markdown",domProps:{innerHTML:e._s(e.notes)}}),t("div",{staticClass:"flex-row"},[e._m(1),t("b-input",{staticClass:"flex5",attrs:{size:"is-small",placeholder:"e.g. server1",maxlength:"32"},model:{value:e.labelField,callback:function(n){e.labelField=n},expression:"labelField"}})],1),t("div",{staticClass:"flex-row"},[e._m(2),t("b-input",{staticClass:"flex5",attrs:{size:"is-small",placeholder:"http://localhost:8001",maxlength:"512"},model:{value:e.urlField,callback:function(n){e.urlField=n},expression:"urlField"}})],1),t("div",{staticClass:"flex-row"},[e._m(3),t("b-input",{staticClass:"flex5",attrs:{size:"is-small",placeholder:"optional",maxlength:"255"},model:{value:e.noteField,callback:function(n){e.noteField=n},expression:"noteField"}})],1),t("div",{staticClass:"flex-row gap"},[t("p",{staticClass:"flex1"},[e._v(" ")]),t("b-button",{attrs:{size:"is-small",type:"is-primary",outlined:"",inverted:""},on:{click:function(n){return e.$emit("close")}}},[e._v("Cancel")]),t("b-button",{staticClass:"is-warning",attrs:{size:"is-small",disabled:!e.isValidURL,type:e.isValidURL?"":"is-outlined"},on:{click:e.addURL}},[e._v("Add Data URL")])],1)])])},il=[function(){var r=this,e=r._self._c;return r._self._setupProxy,e("div",{staticClass:"xtitle"},[e("i",{staticClass:"fa fa-plus"}),r._v(" Add Data Source")])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("p",{staticClass:"flex1"},[e("b",[r._v("Label")])])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("p",{staticClass:"flex1"},[e("b",[r._v("URL")])])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("p",{staticClass:"flex1"},[e("b",[r._v("Note")])])}],ol=mt(rl,nl,il,!1,null,"330c94d1");const sl=ol.exports,al="/simwrapper/",ll=[".nodashboards","nodashboards","nodashboards.txt"],cl={messages:{en:{Maps:"Maps & Dashboards",Images:"Images",Analysis:"Analysis",Files:"Files",Folders:"Folders",Topsheet:"Table",privacy:`SimWrapper is a client-side app, which means there is no upstream server collecting or storing data.

SimWrapper does not collect, handle or process any data about you while you use the site. SimWrapper does not contain any tracking devices or analytics software. No user cookies are stored or transmitted.`},de:{Maps:"Karten",Images:"Bilder",Analysis:"Ergebnisse",Files:"Dateien",Folders:"Ordner",Topsheet:"Tabelle"}}},dl={"":"#118860","aggregate-od":"#E98B52","vehicle-anim":"#330033","x-y-t":"#583270",carriers:"#c97A2C",events:"#4400ff",hexagons:"#900564",map:"#c94264",network:"#894654",sankey:"#D8A672",summary:"#2EA95B",transit:"#3B6FE4"},ul=_t({name:"SystemPanel",i18n:cl,components:{AddDataSource:sl},data:()=>({globalState:be.state,root:"",subfolder:"/",activeSection:"Files",allConfigFiles:{dashboards:{},topsheets:{},vizes:{},configs:{}},allRoots:[],mdRenderer:new Bn({html:!0,linkify:!0,typographer:!0}),showAddDataSource:!1,summaryYamlFilename:"viz-summary.yml",logo:os,myState:{errorStatus:"",folders:[],files:[],isLoading:!1,readme:"",svnProject:null,svnRoot:void 0,subfolder:"",vizes:[],summary:!1}}),mounted(){this.updateShortcuts(),this.getRootAndRoute(this.$route.params.pathMatch),this.updateFavorites()},watch:{"globalState.svnProjects"(){this.updateShortcuts()},"globalState.authAttempts"(){this.authenticationChanged()},"myState.files"(){this.filesChanged()}},computed:{hasDashboards(){return!!Object.keys(this.allConfigFiles.dashboards).length},isChrome(){return!!window.showDirectoryPicker},localFileHandles(){return this.$store.state.localFileHandles.concat().sort((r,e)=>parseInt(r.key.substring(2))<parseInt(e.key.substring(2))?-1:1)},hasErrors(){return this.globalState.statusErrors.length>0}},methods:{updateRoute(){if(!this.root)return;const r=this.getFileSystem(this.root);this.myState.svnProject=r,this.myState.subfolder=this.subfolder||"",this.myState.readme="",this.myState.svnProject&&(this.myState.svnRoot=new Oi(this.myState.svnProject,be))},updateLanguage(){this.$store.commit("setLocale",this.$store.state.locale=="en"?"de":"en"),this.$root.$i18n.locale=this.$store.state.locale},authenticationChanged(){console.log("AUTH CHANGED - Reload"),this.updateRoute()},async filesChanged(){this.myState.vizes=[],this.myState.files.length!==0&&(this.showReadme(),this.myState.summary=this.myState.files.indexOf(this.summaryYamlFilename)!==-1,this.myState.summary||this.buildShowEverythingView())},updateShortcuts(){const r=this.globalState.svnProjects.filter(e=>!e.hidden&&!e.slug.startsWith("fs"));this.allRoots=r},async updateFavorites(){try{const r=localStorage.getItem("favoriteLocations")||"[]",e=JSON.parse(r);this.$store.commit("setFavorites",e)}catch{}},clickedDeleteFavorite(r){this.$store.commit("removeFavorite",r)},clickedOnFavorite(r){const e={component:"TabbedDashboardView",props:{root:r.root,xsubfolder:r.subfolder}};this.$emit("navigate",e)},cleanName(r){return decodeURIComponent(r)},getFileSystem(r){const e=be.state.svnProjects.filter(t=>t.slug===r);if(e.length===0)throw console.log("no such project"),Error;return e[0]},getRootAndRoute(r){if(!r)return;if(r==="/"){this.root="";return}if(r.startsWith("split/")){console.log("SPLIT"),r.substring(6);return}let e=r,t="";const n=r.indexOf("/");n>-1&&(e=r.substring(0,n),t=r.substring(n+1)),this.root=e,this.subfolder=t},updateTitle(r,e){this.myState.vizes[r].title=e},getTabColor(r){return{backgroundColor:dl[r]||"#8778BB"}},async showReadme(){this.myState.readme="";const r="readme.md";if(this.myState.files.map(e=>e.toLocaleLowerCase()).indexOf(r)>-1){if(!this.myState.svnRoot)return;const e=await this.myState.svnRoot.getFileText(this.myState.subfolder+"/"+r);this.myState.readme=this.mdRenderer.render(e)}},buildShowEverythingView(){for(const r of this.globalState.visualizationTypes.values()){const e=Er(this.myState.files,r.filePatterns);for(const t of e)this.myState.vizes.push({component:r.kebabName,config:t,title:".."})}},clickedOnFolder(r){const e={component:"TabbedDashboardView",props:{root:r.root,xsubfolder:""}};this.$emit("navigate",e)},dragEnd(){this.$emit("isDragging",!1)},dragStart(r,e){this.$emit("isDragging",!0);const t=Object.assign({},e,{root:this.root,subfolder:this.myState.subfolder,xsubfolder:this.myState.subfolder});t.yamlConfig=t.config,delete t.config;const n=JSON.stringify(t);r.dataTransfer?.setData("bundle",n)},clickedLogo(){this.$router.push("/")},async findAllConfigsAndDashboards(){if(!this.myState.svnRoot)return{dashboards:{},configs:{},vizes:{},topsheets:{}};try{const{files:r}=await this.myState.svnRoot.getDirectory(this.subfolder);let e=!0;ll.forEach(n=>{r.indexOf(n)>-1&&(e=!1)});const t=await this.myState.svnRoot.findAllYamlConfigs(this.subfolder);return e||(t.dashboards={}),t}catch{return{dashboards:{},configs:{},vizes:{},topsheets:{}}}},async clickedBrowseChromeLocalFolder(r){try{const e=await r.handle.requestPermission({mode:"read"});if(console.log(r.handle,e),e!=="granted")return;$i.find(i=>i.slug==r.key)||Mr(r.handle,r.key);const n={root:r.key};this.clickedOnFolder(n)}catch(e){console.error(""+e)}},async showChromeDirectory(){try{const e=await window.showDirectoryPicker(),t=Mr(e,null);this.$router.push(`${al}${t}/`)}catch{}},async clickedLocalDelete(r){const t=this.$store.state.localFileHandles.filter(n=>n.key!==r.key);await rs("fs",t),this.$store.commit("setLocalFileSystem",t)},async clickedDataSourceDelete(r){console.log({project:r}),this.$store.commit("removeURLShortcut",r.slug)}}});var hl=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"panel"},[e._m(0),t("div",{staticClass:"middle-panel"},[e.isChrome?t("div",{staticClass:"is-chrome"},[t("h3",[e._v("Browse Local Files")]),t("div",{staticClass:"items"},[e._l(e.localFileHandles,function(n){return t("div",{key:n.key,staticClass:"project-root local",on:{click:function(i){return e.clickedBrowseChromeLocalFolder(n)}}},[t("p",{staticClass:"root",staticStyle:{flex:"1"}},[e._v(e._s(n.handle.name)),t("i",{staticClass:"fa fa-times",on:{click:function(i){return i.stopPropagation(),e.clickedLocalDelete(n)}}})])])}),t("div",{staticClass:"project-root open-folder",on:{click:e.showChromeDirectory}},[t("p",{staticClass:"root"},[e._v("Open folder...")]),t("p",{staticClass:"description"},[e._v("This browser can access local folders")])])],2)]):e._e(),t("h3",[e._v("Data Sources")]),e.showAddDataSource?e._e():t("div",{staticClass:"items"},[e._l(e.allRoots.filter(n=>!n.example),function(n){return t("div",{key:n.slug,staticClass:"project-root",on:{click:function(i){return e.clickedOnFolder({root:n.slug})}}},[t("p",{staticClass:"root"},[e._v(e._s(n.name)),t("i",{staticClass:"fa fa-times",on:{click:function(i){return i.stopPropagation(),e.clickedDataSourceDelete(n)}}})]),t("p",{staticClass:"description"},[e._v(e._s(n.description))])])}),t("p",{staticClass:"config-sources"},[t("a",{on:{click:function(n){e.showAddDataSource=!0}}},[t("i",{staticClass:"fa fa-plus"}),e._v(" Add data source...")])])],2),e.showAddDataSource?t("div",{staticClass:"items"},[t("add-data-source",{on:{close:function(n){e.showAddDataSource=!1}}})],1):e._e(),t("h3",[e._v("Example Dashboards")]),t("div",{staticClass:"items"},e._l(e.allRoots.filter(n=>n.example),function(n){return t("div",{key:n.slug,staticClass:"project-root",on:{click:function(i){return e.clickedOnFolder({root:n.slug})}}},[t("p",{staticClass:"root"},[e._v(e._s(n.name)),t("i",{staticClass:"fa fa-times",on:{click:function(i){return i.stopPropagation(),e.clickedDataSourceDelete(n)}}})]),t("p",{staticClass:"description"},[e._v(e._s(n.description))])])}),0),t("h3",[e._v("Starred Locations")]),t("div",{staticClass:"items"},e._l(e.globalState.favoriteLocations,function(n){return t("div",{key:n.fullPath,staticClass:"project-root",on:{click:function(i){return e.clickedOnFavorite(n)}}},[t("p",{staticClass:"root"},[e._v(e._s(n.label)),t("i",{staticClass:"fa fa-times",on:{click:function(i){return i.stopPropagation(),e.clickedDeleteFavorite(n)}}})]),t("p",{staticClass:"description"},[e._v(e._s(n.hint||`${n.root}${n.subfolder}`))])])}),0)])])},ml=[function(){var r=this,e=r._self._c;return r._self._setupProxy,e("div",{staticClass:"top-panel"},[e("h4",[e("i",{staticClass:"fas fa-database"}),e("span",[r._v("  Data Sources")])])])}],fl=mt(ul,hl,ml,!1,null,"012dd48b");const pl=fl.exports;/**
 * filesize
 *
 * @copyright 2024 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 10.1.6
 */const gl="array",yl="bit",ho="bits",vl="byte",mo="bytes",Tr="",wl="exponent",bl="function",fo="iec",Tl="Invalid number",_l="Invalid rounding method",li="jedec",Cl="object",po=".",El="round",Dl="s",kl="si",Sl="kbit",Il="kB",Rl=" ",$l="string",Ol="0",ci={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function ls(r,{bits:e=!1,pad:t=!1,base:n=-1,round:i=2,locale:o=Tr,localeOptions:a={},separator:c=Tr,spacer:d=Rl,symbols:h={},standard:u=Tr,output:m=$l,fullform:f=!1,fullforms:p=[],exponent:g=-1,roundingMethod:y=El,precision:v=0}={}){let w=g,b=Number(r),T=[],C=0,S=Tr;u===kl?(n=10,u=li):u===fo||u===li?n=2:n===2?u=fo:(n=10,u=li);const D=n===10?1e3:1024,E=f===!0,$=b<0,M=Math[y];if(typeof r!="bigint"&&isNaN(r))throw new TypeError(Tl);if(typeof M!==bl)throw new TypeError(_l);if($&&(b=-b),(w===-1||isNaN(w))&&(w=Math.floor(Math.log(b)/Math.log(D)),w<0&&(w=0)),w>8&&(v>0&&(v+=8-w),w=8),m===wl)return w;if(b===0)T[0]=0,S=T[1]=ci.symbol[u][e?ho:mo][w];else{C=b/(n===2?Math.pow(2,w*10):Math.pow(1e3,w)),e&&(C=C*8,C>=D&&w<8&&(C=C/D,w++));const Q=Math.pow(10,w>0?i:0);T[0]=M(C*Q)/Q,T[0]===D&&w<8&&g===-1&&(T[0]=1,w++),S=T[1]=n===10&&w===1?e?Sl:Il:ci.symbol[u][e?ho:mo][w]}if($&&(T[0]=-T[0]),v>0&&(T[0]=T[0].toPrecision(v)),T[1]=h[T[1]]||T[1],o===!0?T[0]=T[0].toLocaleString():o.length>0?T[0]=T[0].toLocaleString(o,a):c.length>0&&(T[0]=T[0].toString().replace(po,c)),t&&i>0){const Q=T[0].toString(),X=c||(Q.match(/(\D)/g)||[]).pop()||po,J=Q.toString().split(X),N=J[1]||Tr,Y=N.length,R=i-Y;T[0]=`${J[0]}${X}${N.padEnd(Y+R,Ol)}`}return E&&(T[1]=p[w]?p[w]:ci.fullform[u][w]+(e?yl:vl)+(T[0]===1?Tr:Dl)),m===gl?T:m===Cl?{value:T[0],symbol:T[1],exponent:w,unit:S}:T.join(d)}class l extends Array{constructor(e,t){if(super(e),this.sign=t,Object.setPrototypeOf(this,l.prototype),e>l.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(e){var t=Math.floor,n=Number.isFinite;if(typeof e=="number"){if(e===0)return l.__zero();if(l.__isOneDigitInt(e))return 0>e?l.__oneDigit(-e,!0):l.__oneDigit(e,!1);if(!n(e)||t(e)!==e)throw new RangeError("The number "+e+" cannot be converted to BigInt because it is not an integer");return l.__fromDouble(e)}if(typeof e=="string"){const i=l.__fromString(e);if(i===null)throw new SyntaxError("Cannot convert "+e+" to a BigInt");return i}if(typeof e=="boolean")return e===!0?l.__oneDigit(1,!1):l.__zero();if(typeof e=="object"){if(e.constructor===l)return e;const i=l.__toPrimitive(e);return l.BigInt(i)}throw new TypeError("Cannot convert "+e+" to a BigInt")}toDebugString(){const e=["BigInt["];for(const t of this)e.push((t&&(t>>>0).toString(16))+", ");return e.push("]"),e.join("")}toString(e=10){if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":(e&e-1)==0?l.__toStringBasePowerOfTwo(this,e):l.__toStringGeneric(this,e,!1)}valueOf(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}static toNumber(e){const t=e.length;if(t===0)return 0;if(t===1){const v=e.__unsignedDigit(0);return e.sign?-v:v}const n=e.__digit(t-1),i=l.__clz30(n),o=30*t-i;if(1024<o)return e.sign?-1/0:1/0;let a=o-1,c=n,d=t-1;const h=i+3;let u=h===32?0:c<<h;u>>>=12;const m=h-12;let f=12<=h?0:c<<20+h,p=20+h;for(0<m&&0<d&&(d--,c=e.__digit(d),u|=c>>>30-m,f=c<<m+2,p=m+2);0<p&&0<d;)d--,c=e.__digit(d),f|=30<=p?c<<p-30:c>>>30-p,p-=30;const g=l.__decideRounding(e,p,d,c);if((g===1||g===0&&(1&f)==1)&&(f=f+1>>>0,f===0&&(u++,u>>>20!=0&&(u=0,a++,1023<a))))return e.sign?-1/0:1/0;const y=e.sign?-2147483648:0;return a=a+1023<<20,l.__kBitConversionInts[l.__kBitConversionIntHigh]=y|a|u,l.__kBitConversionInts[l.__kBitConversionIntLow]=f,l.__kBitConversionDouble[0]}static unaryMinus(e){if(e.length===0)return e;const t=e.__copy();return t.sign=!e.sign,t}static bitwiseNot(e){return e.sign?l.__absoluteSubOne(e).__trim():l.__absoluteAddOne(e,!0)}static exponentiate(e,t){if(t.sign)throw new RangeError("Exponent must be positive");if(t.length===0)return l.__oneDigit(1,!1);if(e.length===0)return e;if(e.length===1&&e.__digit(0)===1)return e.sign&&(1&t.__digit(0))==0?l.unaryMinus(e):e;if(1<t.length)throw new RangeError("BigInt too big");let n=t.__unsignedDigit(0);if(n===1)return e;if(n>=l.__kMaxLengthBits)throw new RangeError("BigInt too big");if(e.length===1&&e.__digit(0)===2){const a=1+(0|n/30),c=e.sign&&(1&n)!=0,d=new l(a,c);d.__initializeDigits();const h=1<<n%30;return d.__setDigit(a-1,h),d}let i=null,o=e;for((1&n)!=0&&(i=e),n>>=1;n!==0;n>>=1)o=l.multiply(o,o),(1&n)!=0&&(i===null?i=o:i=l.multiply(i,o));return i}static multiply(e,t){if(e.length===0)return e;if(t.length===0)return t;let n=e.length+t.length;30<=e.__clzmsd()+t.__clzmsd()&&n--;const i=new l(n,e.sign!==t.sign);i.__initializeDigits();for(let o=0;o<e.length;o++)l.__multiplyAccumulate(t,e.__digit(o),i,o);return i.__trim()}static divide(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>l.__absoluteCompare(e,t))return l.__zero();const n=e.sign!==t.sign,i=t.__unsignedDigit(0);let o;if(t.length===1&&32767>=i){if(i===1)return n===e.sign?e:l.unaryMinus(e);o=l.__absoluteDivSmall(e,i,null)}else o=l.__absoluteDivLarge(e,t,!0,!1);return o.sign=n,o.__trim()}static remainder(e,t){if(t.length===0)throw new RangeError("Division by zero");if(0>l.__absoluteCompare(e,t))return e;const n=t.__unsignedDigit(0);if(t.length===1&&32767>=n){if(n===1)return l.__zero();const o=l.__absoluteModSmall(e,n);return o===0?l.__zero():l.__oneDigit(o,e.sign)}const i=l.__absoluteDivLarge(e,t,!1,!0);return i.sign=e.sign,i.__trim()}static add(e,t){const n=e.sign;return n===t.sign?l.__absoluteAdd(e,t,n):0<=l.__absoluteCompare(e,t)?l.__absoluteSub(e,t,n):l.__absoluteSub(t,e,!n)}static subtract(e,t){const n=e.sign;return n===t.sign?0<=l.__absoluteCompare(e,t)?l.__absoluteSub(e,t,n):l.__absoluteSub(t,e,!n):l.__absoluteAdd(e,t,n)}static leftShift(e,t){return t.length===0||e.length===0?e:t.sign?l.__rightShiftByAbsolute(e,t):l.__leftShiftByAbsolute(e,t)}static signedRightShift(e,t){return t.length===0||e.length===0?e:t.sign?l.__leftShiftByAbsolute(e,t):l.__rightShiftByAbsolute(e,t)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(e,t){return 0>l.__compareToBigInt(e,t)}static lessThanOrEqual(e,t){return 0>=l.__compareToBigInt(e,t)}static greaterThan(e,t){return 0<l.__compareToBigInt(e,t)}static greaterThanOrEqual(e,t){return 0<=l.__compareToBigInt(e,t)}static equal(e,t){if(e.sign!==t.sign||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e.__digit(n)!==t.__digit(n))return!1;return!0}static notEqual(e,t){return!l.equal(e,t)}static bitwiseAnd(e,t){var n=Math.max;if(!e.sign&&!t.sign)return l.__absoluteAnd(e,t).__trim();if(e.sign&&t.sign){const i=n(e.length,t.length)+1;let o=l.__absoluteSubOne(e,i);const a=l.__absoluteSubOne(t);return o=l.__absoluteOr(o,a,o),l.__absoluteAddOne(o,!0,o).__trim()}return e.sign&&([e,t]=[t,e]),l.__absoluteAndNot(e,l.__absoluteSubOne(t)).__trim()}static bitwiseXor(e,t){var n=Math.max;if(!e.sign&&!t.sign)return l.__absoluteXor(e,t).__trim();if(e.sign&&t.sign){const a=n(e.length,t.length),c=l.__absoluteSubOne(e,a),d=l.__absoluteSubOne(t);return l.__absoluteXor(c,d,c).__trim()}const i=n(e.length,t.length)+1;e.sign&&([e,t]=[t,e]);let o=l.__absoluteSubOne(t,i);return o=l.__absoluteXor(o,e,o),l.__absoluteAddOne(o,!0,o).__trim()}static bitwiseOr(e,t){var n=Math.max;const i=n(e.length,t.length);if(!e.sign&&!t.sign)return l.__absoluteOr(e,t).__trim();if(e.sign&&t.sign){let a=l.__absoluteSubOne(e,i);const c=l.__absoluteSubOne(t);return a=l.__absoluteAnd(a,c,a),l.__absoluteAddOne(a,!0,a).__trim()}e.sign&&([e,t]=[t,e]);let o=l.__absoluteSubOne(t,i);return o=l.__absoluteAndNot(o,e,o),l.__absoluteAddOne(o,!0,o).__trim()}static asIntN(e,t){var n=Math.floor;if(t.length===0)return t;if(e=n(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return l.__zero();if(e>=l.__kMaxLengthBits)return t;const i=0|(e+29)/30;if(t.length<i)return t;const o=t.__unsignedDigit(i-1),a=1<<(e-1)%30;if(t.length===i&&o<a)return t;if((o&a)!==a)return l.__truncateToNBits(e,t);if(!t.sign)return l.__truncateAndSubFromPowerOfTwo(e,t,!0);if((o&a-1)==0){for(let c=i-2;0<=c;c--)if(t.__digit(c)!==0)return l.__truncateAndSubFromPowerOfTwo(e,t,!1);return t.length===i&&o===a?t:l.__truncateToNBits(e,t)}return l.__truncateAndSubFromPowerOfTwo(e,t,!1)}static asUintN(e,t){var n=Math.floor;if(t.length===0)return t;if(e=n(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return l.__zero();if(t.sign){if(e>l.__kMaxLengthBits)throw new RangeError("BigInt too big");return l.__truncateAndSubFromPowerOfTwo(e,t,!1)}if(e>=l.__kMaxLengthBits)return t;const i=0|(e+29)/30;if(t.length<i)return t;const o=e%30;return t.length==i&&(o===0||!(t.__digit(i-1)>>>o))?t:l.__truncateToNBits(e,t)}static ADD(e,t){if(e=l.__toPrimitive(e),t=l.__toPrimitive(t),typeof e=="string")return typeof t!="string"&&(t=t.toString()),e+t;if(typeof t=="string")return e.toString()+t;if(e=l.__toNumeric(e),t=l.__toNumeric(t),l.__isBigInt(e)&&l.__isBigInt(t))return l.add(e,t);if(typeof e=="number"&&typeof t=="number")return e+t;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(e,t){return l.__compare(e,t,0)}static LE(e,t){return l.__compare(e,t,1)}static GT(e,t){return l.__compare(e,t,2)}static GE(e,t){return l.__compare(e,t,3)}static EQ(e,t){for(;;){if(l.__isBigInt(e))return l.__isBigInt(t)?l.equal(e,t):l.EQ(t,e);if(typeof e=="number"){if(l.__isBigInt(t))return l.__equalToNumber(t,e);if(typeof t!="object")return e==t;t=l.__toPrimitive(t)}else if(typeof e=="string"){if(l.__isBigInt(t))return e=l.__fromString(e),e!==null&&l.equal(e,t);if(typeof t!="object")return e==t;t=l.__toPrimitive(t)}else if(typeof e=="boolean"){if(l.__isBigInt(t))return l.__equalToNumber(t,+e);if(typeof t!="object")return e==t;t=l.__toPrimitive(t)}else if(typeof e=="symbol"){if(l.__isBigInt(t))return!1;if(typeof t!="object")return e==t;t=l.__toPrimitive(t)}else if(typeof e=="object"){if(typeof t=="object"&&t.constructor!==l)return e==t;e=l.__toPrimitive(e)}else return e==t}}static NE(e,t){return!l.EQ(e,t)}static DataViewGetBigInt64(e,t,n=!1){return l.asIntN(64,l.DataViewGetBigUint64(e,t,n))}static DataViewGetBigUint64(e,t,n=!1){const[i,o]=n?[4,0]:[0,4],a=e.getUint32(t+i,n),c=e.getUint32(t+o,n),d=new l(3,!1);return d.__setDigit(0,1073741823&c),d.__setDigit(1,(268435455&a)<<2|c>>>30),d.__setDigit(2,a>>>28),d.__trim()}static DataViewSetBigInt64(e,t,n,i=!1){l.DataViewSetBigUint64(e,t,n,i)}static DataViewSetBigUint64(e,t,n,i=!1){n=l.asUintN(64,n);let o=0,a=0;if(0<n.length&&(a=n.__digit(0),1<n.length)){const h=n.__digit(1);a|=h<<30,o=h>>>2,2<n.length&&(o|=n.__digit(2)<<28)}const[c,d]=i?[4,0]:[0,4];e.setUint32(t+c,o,i),e.setUint32(t+d,a,i)}static __zero(){return new l(0,!1)}static __oneDigit(e,t){const n=new l(1,t);return n.__setDigit(0,e),n}__copy(){const e=new l(this.length,this.sign);for(let t=0;t<this.length;t++)e[t]=this[t];return e}__trim(){let e=this.length,t=this[e-1];for(;t===0;)e--,t=this[e-1],this.pop();return e===0&&(this.sign=!1),this}__initializeDigits(){for(let e=0;e<this.length;e++)this[e]=0}static __decideRounding(e,t,n,i){if(0<t)return-1;let o;if(0>t)o=-t-1;else{if(n===0)return-1;n--,i=e.__digit(n),o=29}let a=1<<o;if((i&a)==0)return-1;if(a-=1,(i&a)!=0)return 1;for(;0<n;)if(n--,e.__digit(n)!==0)return 1;return 0}static __fromDouble(e){l.__kBitConversionDouble[0]=e;const t=2047&l.__kBitConversionInts[l.__kBitConversionIntHigh]>>>20,n=t-1023,i=(0|n/30)+1,o=new l(i,0>e);let a=1048575&l.__kBitConversionInts[l.__kBitConversionIntHigh]|1048576,c=l.__kBitConversionInts[l.__kBitConversionIntLow];const d=20,h=n%30;let u,m=0;if(h<20){const f=d-h;m=f+32,u=a>>>f,a=a<<32-f|c>>>f,c<<=32-f}else if(h===20)m=32,u=a,a=c,c=0;else{const f=h-d;m=32-f,u=a<<f|c>>>32-f,a=c<<f,c=0}o.__setDigit(i-1,u);for(let f=i-2;0<=f;f--)0<m?(m-=30,u=a>>>2,a=a<<30|c>>>2,c<<=30):u=0,o.__setDigit(f,u);return o.__trim()}static __isWhitespace(e){return 13>=e&&9<=e||(159>=e?e==32:131071>=e?e==160||e==5760:196607>=e?(e&=131071,10>=e||e==40||e==41||e==47||e==95||e==4096):e==65279)}static __fromString(e,t=0){let n=0;const i=e.length;let o=0;if(o===i)return l.__zero();let a=e.charCodeAt(o);for(;l.__isWhitespace(a);){if(++o===i)return l.__zero();a=e.charCodeAt(o)}if(a===43){if(++o===i)return null;a=e.charCodeAt(o),n=1}else if(a===45){if(++o===i)return null;a=e.charCodeAt(o),n=-1}if(t===0){if(t=10,a===48){if(++o===i)return l.__zero();if(a=e.charCodeAt(o),a===88||a===120){if(t=16,++o===i)return null;a=e.charCodeAt(o)}else if(a===79||a===111){if(t=8,++o===i)return null;a=e.charCodeAt(o)}else if(a===66||a===98){if(t=2,++o===i)return null;a=e.charCodeAt(o)}}}else if(t===16&&a===48){if(++o===i)return l.__zero();if(a=e.charCodeAt(o),a===88||a===120){if(++o===i)return null;a=e.charCodeAt(o)}}if(n!=0&&t!==10)return null;for(;a===48;){if(++o===i)return l.__zero();a=e.charCodeAt(o)}const c=i-o;let d=l.__kMaxBitsPerChar[t],h=l.__kBitsPerCharTableMultiplier-1;if(c>1073741824/d)return null;const u=d*c+h>>>l.__kBitsPerCharTableShift,m=new l(0|(u+29)/30,!1),f=10>t?t:10,p=10<t?t-10:0;if((t&t-1)==0){d>>=l.__kBitsPerCharTableShift;const g=[],y=[];let v=!1;do{let w=0,b=0;for(;;){let T;if(a-48>>>0<f)T=a-48;else if((32|a)-97>>>0<p)T=(32|a)-87;else{v=!0;break}if(b+=d,w=w<<d|T,++o===i){v=!0;break}if(a=e.charCodeAt(o),30<b+d)break}g.push(w),y.push(b)}while(!v);l.__fillFromParts(m,g,y)}else{m.__initializeDigits();let g=!1,y=0;do{let v=0,w=1;for(;;){let T;if(a-48>>>0<f)T=a-48;else if((32|a)-97>>>0<p)T=(32|a)-87;else{g=!0;break}const C=w*t;if(1073741823<C)break;if(w=C,v=v*t+T,y++,++o===i){g=!0;break}a=e.charCodeAt(o)}h=30*l.__kBitsPerCharTableMultiplier-1;const b=0|(d*y+h>>>l.__kBitsPerCharTableShift)/30;m.__inplaceMultiplyAdd(w,v,b)}while(!g)}if(o!==i){if(!l.__isWhitespace(a))return null;for(o++;o<i;o++)if(a=e.charCodeAt(o),!l.__isWhitespace(a))return null}return m.sign=n==-1,m.__trim()}static __fillFromParts(e,t,n){let i=0,o=0,a=0;for(let c=t.length-1;0<=c;c--){const d=t[c],h=n[c];o|=d<<a,a+=h,a===30?(e.__setDigit(i++,o),a=0,o=0):30<a&&(e.__setDigit(i++,1073741823&o),a-=30,o=d>>>h-a)}if(o!==0){if(i>=e.length)throw new Error("implementation bug");e.__setDigit(i++,o)}for(;i<e.length;i++)e.__setDigit(i,0)}static __toStringBasePowerOfTwo(e,t){const n=e.length;let i=t-1;i=(85&i>>>1)+(85&i),i=(51&i>>>2)+(51&i),i=(15&i>>>4)+(15&i);const o=i,a=t-1,c=e.__digit(n-1),d=l.__clz30(c);let h=0|(30*n-d+o-1)/o;if(e.sign&&h++,268435456<h)throw new Error("string too long");const u=Array(h);let m=h-1,f=0,p=0;for(let y=0;y<n-1;y++){const v=e.__digit(y),w=(f|v<<p)&a;u[m--]=l.__kConversionChars[w];const b=o-p;for(f=v>>>b,p=30-b;p>=o;)u[m--]=l.__kConversionChars[f&a],f>>>=o,p-=o}const g=(f|c<<p)&a;for(u[m--]=l.__kConversionChars[g],f=c>>>o-p;f!==0;)u[m--]=l.__kConversionChars[f&a],f>>>=o;if(e.sign&&(u[m--]="-"),m!=-1)throw new Error("implementation bug");return u.join("")}static __toStringGeneric(e,t,n){const i=e.length;if(i===0)return"";if(i===1){let y=e.__unsignedDigit(0).toString(t);return n===!1&&e.sign&&(y="-"+y),y}const o=30*i-l.__clz30(e.__digit(i-1)),a=l.__kMaxBitsPerChar[t],c=a-1;let d=o*l.__kBitsPerCharTableMultiplier;d+=c-1,d=0|d/c;const h=d+1>>1,u=l.exponentiate(l.__oneDigit(t,!1),l.__oneDigit(h,!1));let m,f;const p=u.__unsignedDigit(0);if(u.length===1&&32767>=p){m=new l(e.length,!1),m.__initializeDigits();let y=0;for(let v=2*e.length-1;0<=v;v--){const w=y<<15|e.__halfDigit(v);m.__setHalfDigit(v,0|w/p),y=0|w%p}f=y.toString(t)}else{const y=l.__absoluteDivLarge(e,u,!0,!0);m=y.quotient;const v=y.remainder.__trim();f=l.__toStringGeneric(v,t,!0)}m.__trim();let g=l.__toStringGeneric(m,t,!0);for(;f.length<h;)f="0"+f;return n===!1&&e.sign&&(g="-"+g),g+f}static __unequalSign(e){return e?-1:1}static __absoluteGreater(e){return e?-1:1}static __absoluteLess(e){return e?1:-1}static __compareToBigInt(e,t){const n=e.sign;if(n!==t.sign)return l.__unequalSign(n);const i=l.__absoluteCompare(e,t);return 0<i?l.__absoluteGreater(n):0>i?l.__absoluteLess(n):0}static __compareToNumber(e,t){if(l.__isOneDigitInt(t)){const n=e.sign,i=0>t;if(n!==i)return l.__unequalSign(n);if(e.length===0){if(i)throw new Error("implementation bug");return t===0?0:-1}if(1<e.length)return l.__absoluteGreater(n);const o=Math.abs(t),a=e.__unsignedDigit(0);return a>o?l.__absoluteGreater(n):a<o?l.__absoluteLess(n):0}return l.__compareToDouble(e,t)}static __compareToDouble(e,t){if(t!==t)return t;if(t===1/0)return-1;if(t===-1/0)return 1;const n=e.sign;if(n!==0>t)return l.__unequalSign(n);if(t===0)throw new Error("implementation bug: should be handled elsewhere");if(e.length===0)return-1;l.__kBitConversionDouble[0]=t;const i=2047&l.__kBitConversionInts[l.__kBitConversionIntHigh]>>>20;if(i==2047)throw new Error("implementation bug: handled elsewhere");const o=i-1023;if(0>o)return l.__absoluteGreater(n);const a=e.length;let c=e.__digit(a-1);const d=l.__clz30(c),h=30*a-d,u=o+1;if(h<u)return l.__absoluteLess(n);if(h>u)return l.__absoluteGreater(n);let m=1048576|1048575&l.__kBitConversionInts[l.__kBitConversionIntHigh],f=l.__kBitConversionInts[l.__kBitConversionIntLow];const p=20,g=29-d;if(g!==(0|(h-1)%30))throw new Error("implementation bug");let y,v=0;if(20>g){const w=p-g;v=w+32,y=m>>>w,m=m<<32-w|f>>>w,f<<=32-w}else if(g===20)v=32,y=m,m=f,f=0;else{const w=g-p;v=32-w,y=m<<w|f>>>32-w,m=f<<w,f=0}if(c>>>=0,y>>>=0,c>y)return l.__absoluteGreater(n);if(c<y)return l.__absoluteLess(n);for(let w=a-2;0<=w;w--){0<v?(v-=30,y=m>>>2,m=m<<30|f>>>2,f<<=30):y=0;const b=e.__unsignedDigit(w);if(b>y)return l.__absoluteGreater(n);if(b<y)return l.__absoluteLess(n)}if(m!==0||f!==0){if(v===0)throw new Error("implementation bug");return l.__absoluteLess(n)}return 0}static __equalToNumber(e,t){var n=Math.abs;return l.__isOneDigitInt(t)?t===0?e.length===0:e.length===1&&e.sign===0>t&&e.__unsignedDigit(0)===n(t):l.__compareToDouble(e,t)===0}static __comparisonResultToBool(e,t){return t===0?0>e:t===1?0>=e:t===2?0<e:t===3?0<=e:void 0}static __compare(e,t,n){if(e=l.__toPrimitive(e),t=l.__toPrimitive(t),typeof e=="string"&&typeof t=="string")switch(n){case 0:return e<t;case 1:return e<=t;case 2:return e>t;case 3:return e>=t}if(l.__isBigInt(e)&&typeof t=="string")return t=l.__fromString(t),t!==null&&l.__comparisonResultToBool(l.__compareToBigInt(e,t),n);if(typeof e=="string"&&l.__isBigInt(t))return e=l.__fromString(e),e!==null&&l.__comparisonResultToBool(l.__compareToBigInt(e,t),n);if(e=l.__toNumeric(e),t=l.__toNumeric(t),l.__isBigInt(e)){if(l.__isBigInt(t))return l.__comparisonResultToBool(l.__compareToBigInt(e,t),n);if(typeof t!="number")throw new Error("implementation bug");return l.__comparisonResultToBool(l.__compareToNumber(e,t),n)}if(typeof e!="number")throw new Error("implementation bug");if(l.__isBigInt(t))return l.__comparisonResultToBool(l.__compareToNumber(t,e),2^n);if(typeof t!="number")throw new Error("implementation bug");return n===0?e<t:n===1?e<=t:n===2?e>t:n===3?e>=t:void 0}__clzmsd(){return l.__clz30(this.__digit(this.length-1))}static __absoluteAdd(e,t,n){if(e.length<t.length)return l.__absoluteAdd(t,e,n);if(e.length===0)return e;if(t.length===0)return e.sign===n?e:l.unaryMinus(e);let i=e.length;(e.__clzmsd()===0||t.length===e.length&&t.__clzmsd()===0)&&i++;const o=new l(i,n);let a=0,c=0;for(;c<t.length;c++){const d=e.__digit(c)+t.__digit(c)+a;a=d>>>30,o.__setDigit(c,1073741823&d)}for(;c<e.length;c++){const d=e.__digit(c)+a;a=d>>>30,o.__setDigit(c,1073741823&d)}return c<o.length&&o.__setDigit(c,a),o.__trim()}static __absoluteSub(e,t,n){if(e.length===0)return e;if(t.length===0)return e.sign===n?e:l.unaryMinus(e);const i=new l(e.length,n);let o=0,a=0;for(;a<t.length;a++){const c=e.__digit(a)-t.__digit(a)-o;o=1&c>>>30,i.__setDigit(a,1073741823&c)}for(;a<e.length;a++){const c=e.__digit(a)-o;o=1&c>>>30,i.__setDigit(a,1073741823&c)}return i.__trim()}static __absoluteAddOne(e,t,n=null){const i=e.length;n===null?n=new l(i,t):n.sign=t;let o=1;for(let a=0;a<i;a++){const c=e.__digit(a)+o;o=c>>>30,n.__setDigit(a,1073741823&c)}return o!=0&&n.__setDigitGrow(i,1),n}static __absoluteSubOne(e,t){const n=e.length;t=t||n;const i=new l(t,!1);let o=1;for(let a=0;a<n;a++){const c=e.__digit(a)-o;o=1&c>>>30,i.__setDigit(a,1073741823&c)}if(o!=0)throw new Error("implementation bug");for(let a=n;a<t;a++)i.__setDigit(a,0);return i}static __absoluteAnd(e,t,n=null){let i=e.length,o=t.length,a=o;if(i<o){a=i;const h=e,u=i;e=t,i=o,t=h,o=u}let c=a;n===null?n=new l(c,!1):c=n.length;let d=0;for(;d<a;d++)n.__setDigit(d,e.__digit(d)&t.__digit(d));for(;d<c;d++)n.__setDigit(d,0);return n}static __absoluteAndNot(e,t,n=null){const i=e.length,o=t.length;let a=o;i<o&&(a=i);let c=i;n===null?n=new l(c,!1):c=n.length;let d=0;for(;d<a;d++)n.__setDigit(d,e.__digit(d)&~t.__digit(d));for(;d<i;d++)n.__setDigit(d,e.__digit(d));for(;d<c;d++)n.__setDigit(d,0);return n}static __absoluteOr(e,t,n=null){let i=e.length,o=t.length,a=o;if(i<o){a=i;const h=e,u=i;e=t,i=o,t=h,o=u}let c=i;n===null?n=new l(c,!1):c=n.length;let d=0;for(;d<a;d++)n.__setDigit(d,e.__digit(d)|t.__digit(d));for(;d<i;d++)n.__setDigit(d,e.__digit(d));for(;d<c;d++)n.__setDigit(d,0);return n}static __absoluteXor(e,t,n=null){let i=e.length,o=t.length,a=o;if(i<o){a=i;const h=e,u=i;e=t,i=o,t=h,o=u}let c=i;n===null?n=new l(c,!1):c=n.length;let d=0;for(;d<a;d++)n.__setDigit(d,e.__digit(d)^t.__digit(d));for(;d<i;d++)n.__setDigit(d,e.__digit(d));for(;d<c;d++)n.__setDigit(d,0);return n}static __absoluteCompare(e,t){const n=e.length-t.length;if(n!=0)return n;let i=e.length-1;for(;0<=i&&e.__digit(i)===t.__digit(i);)i--;return 0>i?0:e.__unsignedDigit(i)>t.__unsignedDigit(i)?1:-1}static __multiplyAccumulate(e,t,n,i){if(t===0)return;const o=32767&t,a=t>>>15;let c=0,d=0;for(let h,u=0;u<e.length;u++,i++){h=n.__digit(i);const m=e.__digit(u),f=32767&m,p=m>>>15,g=l.__imul(f,o),y=l.__imul(f,a),v=l.__imul(p,o),w=l.__imul(p,a);h+=d+g+c,c=h>>>30,h&=1073741823,h+=((32767&y)<<15)+((32767&v)<<15),c+=h>>>30,d=w+(y>>>15)+(v>>>15),n.__setDigit(i,1073741823&h)}for(;c!=0||d!==0;i++){let h=n.__digit(i);h+=c+d,d=0,c=h>>>30,n.__setDigit(i,1073741823&h)}}static __internalMultiplyAdd(e,t,n,i,o){let a=n,c=0;for(let d=0;d<i;d++){const h=e.__digit(d),u=l.__imul(32767&h,t),m=l.__imul(h>>>15,t),f=u+((32767&m)<<15)+c+a;a=f>>>30,c=m>>>15,o.__setDigit(d,1073741823&f)}if(o.length>i)for(o.__setDigit(i++,a+c);i<o.length;)o.__setDigit(i++,0);else if(a+c!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(e,t,n){n>this.length&&(n=this.length);const i=32767&e,o=e>>>15;let a=0,c=t;for(let d=0;d<n;d++){const h=this.__digit(d),u=32767&h,m=h>>>15,f=l.__imul(u,i),p=l.__imul(u,o),g=l.__imul(m,i),y=l.__imul(m,o);let v=c+f+a;a=v>>>30,v&=1073741823,v+=((32767&p)<<15)+((32767&g)<<15),a+=v>>>30,c=y+(p>>>15)+(g>>>15),this.__setDigit(d,1073741823&v)}if(a!=0||c!==0)throw new Error("implementation bug")}static __absoluteDivSmall(e,t,n=null){n===null&&(n=new l(e.length,!1));let i=0;for(let o,a=2*e.length-1;0<=a;a-=2){o=(i<<15|e.__halfDigit(a))>>>0;const c=0|o/t;i=0|o%t,o=(i<<15|e.__halfDigit(a-1))>>>0;const d=0|o/t;i=0|o%t,n.__setDigit(a>>>1,c<<15|d)}return n}static __absoluteModSmall(e,t){let n=0;for(let i=2*e.length-1;0<=i;i--)n=0|((n<<15|e.__halfDigit(i))>>>0)%t;return n}static __absoluteDivLarge(e,t,n,i){const o=t.__halfDigitLength(),a=t.length,c=e.__halfDigitLength()-o;let d=null;n&&(d=new l(c+2>>>1,!1),d.__initializeDigits());const h=new l(o+2>>>1,!1);h.__initializeDigits();const u=l.__clz15(t.__halfDigit(o-1));0<u&&(t=l.__specialLeftShift(t,u,0));const m=l.__specialLeftShift(e,u,1),f=t.__halfDigit(o-1);let p=0;for(let g,y=c;0<=y;y--){g=32767;const v=m.__halfDigit(y+o);if(v!==f){const b=(v<<15|m.__halfDigit(y+o-1))>>>0;g=0|b/f;let T=0|b%f;const C=t.__halfDigit(o-2),S=m.__halfDigit(y+o-2);for(;l.__imul(g,C)>>>0>(T<<16|S)>>>0&&(g--,T+=f,!(32767<T)););}l.__internalMultiplyAdd(t,g,0,a,h);let w=m.__inplaceSub(h,y,o+1);w!==0&&(w=m.__inplaceAdd(t,y,o),m.__setHalfDigit(y+o,32767&m.__halfDigit(y+o)+w),g--),n&&(1&y?p=g<<15:d.__setDigit(y>>>1,p|g))}if(i)return m.__inplaceRightShift(u),n?{quotient:d,remainder:m}:m;if(n)return d;throw new Error("unreachable")}static __clz15(e){return l.__clz30(e)-15}__inplaceAdd(e,t,n){let i=0;for(let o=0;o<n;o++){const a=this.__halfDigit(t+o)+e.__halfDigit(o)+i;i=a>>>15,this.__setHalfDigit(t+o,32767&a)}return i}__inplaceSub(e,t,n){let i=0;if(1&t){t>>=1;let o=this.__digit(t),a=32767&o,c=0;for(;c<n-1>>>1;c++){const u=e.__digit(c),m=(o>>>15)-(32767&u)-i;i=1&m>>>15,this.__setDigit(t+c,(32767&m)<<15|32767&a),o=this.__digit(t+c+1),a=(32767&o)-(u>>>15)-i,i=1&a>>>15}const d=e.__digit(c),h=(o>>>15)-(32767&d)-i;if(i=1&h>>>15,this.__setDigit(t+c,(32767&h)<<15|32767&a),t+c+1>=this.length)throw new RangeError("out of bounds");(1&n)==0&&(o=this.__digit(t+c+1),a=(32767&o)-(d>>>15)-i,i=1&a>>>15,this.__setDigit(t+e.length,1073709056&o|32767&a))}else{t>>=1;let o=0;for(;o<e.length-1;o++){const u=this.__digit(t+o),m=e.__digit(o),f=(32767&u)-(32767&m)-i;i=1&f>>>15;const p=(u>>>15)-(m>>>15)-i;i=1&p>>>15,this.__setDigit(t+o,(32767&p)<<15|32767&f)}const a=this.__digit(t+o),c=e.__digit(o),d=(32767&a)-(32767&c)-i;i=1&d>>>15;let h=0;(1&n)==0&&(h=(a>>>15)-(c>>>15)-i,i=1&h>>>15),this.__setDigit(t+o,(32767&h)<<15|32767&d)}return i}__inplaceRightShift(e){if(e===0)return;let t=this.__digit(0)>>>e;const n=this.length-1;for(let i=0;i<n;i++){const o=this.__digit(i+1);this.__setDigit(i,1073741823&o<<30-e|t),t=o>>>e}this.__setDigit(n,t)}static __specialLeftShift(e,t,n){const i=e.length,o=new l(i+n,!1);if(t===0){for(let c=0;c<i;c++)o.__setDigit(c,e.__digit(c));return 0<n&&o.__setDigit(i,0),o}let a=0;for(let c=0;c<i;c++){const d=e.__digit(c);o.__setDigit(c,1073741823&d<<t|a),a=d>>>30-t}return 0<n&&o.__setDigit(i,a),o}static __leftShiftByAbsolute(e,t){const n=l.__toShiftAmount(t);if(0>n)throw new RangeError("BigInt too big");const i=0|n/30,o=n%30,a=e.length,c=o!==0&&e.__digit(a-1)>>>30-o!=0,d=a+i+(c?1:0),h=new l(d,e.sign);if(o===0){let u=0;for(;u<i;u++)h.__setDigit(u,0);for(;u<d;u++)h.__setDigit(u,e.__digit(u-i))}else{let u=0;for(let m=0;m<i;m++)h.__setDigit(m,0);for(let m=0;m<a;m++){const f=e.__digit(m);h.__setDigit(m+i,1073741823&f<<o|u),u=f>>>30-o}if(c)h.__setDigit(a+i,u);else if(u!==0)throw new Error("implementation bug")}return h.__trim()}static __rightShiftByAbsolute(e,t){const n=e.length,i=e.sign,o=l.__toShiftAmount(t);if(0>o)return l.__rightShiftByMaximum(i);const a=0|o/30,c=o%30;let d=n-a;if(0>=d)return l.__rightShiftByMaximum(i);let h=!1;if(i){if((e.__digit(a)&(1<<c)-1)!=0)h=!0;else for(let m=0;m<a;m++)if(e.__digit(m)!==0){h=!0;break}}h&&c===0&&~e.__digit(n-1)==0&&d++;let u=new l(d,i);if(c===0){u.__setDigit(d-1,0);for(let m=a;m<n;m++)u.__setDigit(m-a,e.__digit(m))}else{let m=e.__digit(a)>>>c;const f=n-a-1;for(let p=0;p<f;p++){const g=e.__digit(p+a+1);u.__setDigit(p,1073741823&g<<30-c|m),m=g>>>c}u.__setDigit(f,m)}return h&&(u=l.__absoluteAddOne(u,!0,u)),u.__trim()}static __rightShiftByMaximum(e){return e?l.__oneDigit(1,!0):l.__zero()}static __toShiftAmount(e){if(1<e.length)return-1;const t=e.__unsignedDigit(0);return t>l.__kMaxLengthBits?-1:t}static __toPrimitive(e,t="default"){if(typeof e!="object"||e.constructor===l)return e;if(typeof Symbol<"u"&&typeof Symbol.toPrimitive=="symbol"&&e[Symbol.toPrimitive]){const o=e[Symbol.toPrimitive](t);if(typeof o!="object")return o;throw new TypeError("Cannot convert object to primitive value")}const n=e.valueOf;if(n){const o=n.call(e);if(typeof o!="object")return o}const i=e.toString;if(i){const o=i.call(e);if(typeof o!="object")return o}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(e){return l.__isBigInt(e)?e:+e}static __isBigInt(e){return typeof e=="object"&&e!==null&&e.constructor===l}static __truncateToNBits(e,t){const n=0|(e+29)/30,i=new l(n,t.sign),o=n-1;for(let c=0;c<o;c++)i.__setDigit(c,t.__digit(c));let a=t.__digit(o);if(e%30!=0){const c=32-e%30;a=a<<c>>>c}return i.__setDigit(o,a),i.__trim()}static __truncateAndSubFromPowerOfTwo(e,t,n){var i=Math.min;const o=0|(e+29)/30,a=new l(o,n);let c=0;const d=o-1;let h=0;for(const p=i(d,t.length);c<p;c++){const g=0-t.__digit(c)-h;h=1&g>>>30,a.__setDigit(c,1073741823&g)}for(;c<d;c++)a.__setDigit(c,0|1073741823&-h);let u=d<t.length?t.__digit(d):0;const m=e%30;let f;if(m==0)f=0-u-h,f&=1073741823;else{const p=32-m;u=u<<p>>>p;const g=1<<32-p;f=g-u-h,f&=g-1}return a.__setDigit(d,f),a.__trim()}__digit(e){return this[e]}__unsignedDigit(e){return this[e]>>>0}__setDigit(e,t){this[e]=0|t}__setDigitGrow(e,t){this[e]=0|t}__halfDigitLength(){const e=this.length;return 32767>=this.__unsignedDigit(e-1)?2*e-1:2*e}__halfDigit(e){return 32767&this[e>>>1]>>>15*(1&e)}__setHalfDigit(e,t){const n=e>>>1,i=this.__digit(n),o=1&e?32767&i|t<<15:1073709056&i|32767&t;this.__setDigit(n,o)}static __digitPow(e,t){let n=1;for(;0<t;)1&t&&(n*=e),t>>>=1,e*=e;return n}static __detectBigEndian(){return l.__kBitConversionDouble[0]=-0,l.__kBitConversionInts[0]!==0}static __isOneDigitInt(e){return(1073741823&e)===e}}l.__kMaxLength=33554432,l.__kMaxLengthBits=l.__kMaxLength<<5,l.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],l.__kBitsPerCharTableShift=5,l.__kBitsPerCharTableMultiplier=1<<l.__kBitsPerCharTableShift,l.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],l.__kBitConversionBuffer=new ArrayBuffer(8),l.__kBitConversionDouble=new Float64Array(l.__kBitConversionBuffer),l.__kBitConversionInts=new Int32Array(l.__kBitConversionBuffer),l.__kBitConversionIntHigh=l.__detectBigEndian()?0:1,l.__kBitConversionIntLow=l.__detectBigEndian()?1:0,l.__clz30=Math.clz32?function(r){return Math.clz32(r)-2}:function(r){return r===0?30:0|29-(0|Math.log(r>>>0)/Math.LN2)},l.__imul=Math.imul||function(r,e){return 0|r*e};const vi={};function jt(r,e){Object.defineProperty(r.prototype,Symbol.toStringTag,{value:e,writable:!1,enumerable:!1,configurable:!0});for(const t of Object.getOwnPropertyNames(r)){const n=Object.getOwnPropertyDescriptor(r,t);n.configurable&&n.enumerable&&(n.enumerable=!1,Object.defineProperty(r,t,n))}for(const t of Object.getOwnPropertyNames(r.prototype)){const n=Object.getOwnPropertyDescriptor(r.prototype,t);n.configurable&&n.enumerable&&(n.enumerable=!1,Object.defineProperty(r.prototype,t,n))}me(e,r),me(`${e}.prototype`,r.prototype)}function me(r,e){const t=`%${r}%`;if(vi[t]!==void 0)throw new Error(`intrinsic ${r} already exists`);vi[t]=e}function k(r){return vi[r]}var go,yo;const j="slot-epochNanoSeconds",$t="slot-timezone-identifier",I="slot-year",O="slot-month",P="slot-day",U="slot-hour",z="slot-minute",B="slot-second",q="slot-millisecond",W="slot-microsecond",Z="slot-nanosecond",_="slot-calendar",cs="slot-date-brand",ds="slot-year-month-brand",us="slot-month-day-brand",Ue="slot-cached-instant",oe="slot-time-zone",qe="slot-years",Me="slot-months",tt="slot-weeks",We="slot-days",Ze="slot-hours",He="slot-minutes",Ge="slot-seconds",Ve="slot-milliseconds",Ke="slot-microseconds",Qe="slot-nanoseconds",he="slot-calendar-identifier",hs=new WeakMap,wi=Symbol.for("@@Temporal__GetSlots");(go=globalThis)[wi]||(go[wi]=function(e){return hs.get(e)});const Pi=globalThis[wi],bi=Symbol.for("@@Temporal__CreateSlots");(yo=globalThis)[bi]||(yo[bi]=function(e){hs.set(e,Object.create(null))});const At=globalThis[bi];function Pe(r,...e){if(!r||typeof r!="object")return!1;const t=Pi(r);return!!t&&e.every((n=>n in t))}function s(r,e){const t=Pi(r)?.[e];if(t===void 0)throw new TypeError(`Missing internal slot ${e}`);return t}function H(r,e,t){const n=Pi(r);if(n===void 0)throw new TypeError("Missing slots for the given container");if(n[e])throw new TypeError(`${e} already has set`);n[e]=t}const vo=/\.[-A-Za-z_]|\.\.[-A-Za-z._]{1,12}|\.[-A-Za-z_][-A-Za-z._]{0,12}|[A-Za-z_][-A-Za-z._]{0,13}/,an=new RegExp("(?:"+[`(?:${vo.source})(?:\\/(?:${vo.source}))*`,"Etc/GMT(?:0|[-+]\\d{1,2})","GMT[-+]?0","EST5EDT","CST6CDT","MST7MDT","PST8PDT",/(?:[+\u2212-][0-2][0-9](?::?[0-5][0-9](?::?[0-5][0-9](?:[.,]\d{1,9})?)?)?)/.source].join("|")+")"),ms=/(?:[+\u2212-]\d{6}|\d{4})/,Rn=/(?:0[1-9]|1[0-2])/,Ti=/(?:0[1-9]|[12]\d|3[01])/,Pl=new RegExp(`(${ms.source})(?:-(${Rn.source})-(${Ti.source})|(${Rn.source})(${Ti.source}))`),fs=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,ps=/([+\u2212-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/,gs=new RegExp(`([zZ])|${ps.source}?`),nr=/\[(!)?([a-z_][a-z0-9_-]*)=([A-Za-z0-9]+(?:-[A-Za-z0-9]+)*)\]/g,Ml=new RegExp([`^${Pl.source}`,`(?:(?:T|\\s+)${fs.source}(?:${gs.source})?)?`,`(?:\\[!?(${an.source})\\])?`,`((?:${nr.source})*)$`].join(""),"i"),Fl=new RegExp([`^T?${fs.source}`,`(?:${gs.source})?`,`(?:\\[!?${an.source}\\])?`,`((?:${nr.source})*)$`].join(""),"i"),xl=new RegExp(`^(${ms.source})-?(${Rn.source})(?:\\[!?${an.source}\\])?((?:${nr.source})*)$`),Nl=new RegExp(`^(?:--)?(${Rn.source})-?(${Ti.source})(?:\\[!?${an.source}\\])?((?:${nr.source})*)$`),di=/(\d+)(?:[.,](\d{1,9}))?/,jl=new RegExp(`(?:${di.source}H)?(?:${di.source}M)?(?:${di.source}S)?`),Al=new RegExp(`^([+−-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${jl.source})?$`,"i"),Ll=Array.prototype.includes,ys=Array.prototype.push,vs=globalThis.Intl.DateTimeFormat,Yl=Math.min,Ul=Math.max,le=Math.abs,it=Math.floor,Fr=Math.sign,cr=Math.trunc,qn=Number.isNaN,Xe=Number.isFinite,zl=Number,ln=String,Bl=Number.MAX_SAFE_INTEGER,Be=Object.create,ql=Object.getOwnPropertyDescriptor,Wn=Reflect.apply,Wl=Reflect.ownKeys,we=l.BigInt(0),Br=l.BigInt(1),Ot=l.BigInt(60),ws=l.BigInt(24),ne=l.BigInt(1e3),ut=l.BigInt(1e6),Pt=l.BigInt(1e9),Zl=l.BigInt(-1),bs=l.multiply(l.BigInt(3600),Pt),Ts=l.multiply(Ot,Pt),Ft=l.multiply(bs,ws),rn=l.multiply(l.BigInt(-86400),l.BigInt(1e17)),xr=l.multiply(l.BigInt(86400),l.BigInt(1e17)),$n=-271821,On=275760,kr=l.multiply(l.BigInt(-388152),l.BigInt(1e13)),Hl=l.multiply(Ft,l.BigInt(3660)),_s=l.multiply(Ft,l.BigInt(366)),Cs=l.multiply(Ft,l.BigInt(14)),Gl=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"];function gt(r){return l.equal(r,we)}function ie(r,e){const t=r[e];if(t!==void 0)return t}function x(r,e,t){const n=arguments.length>2?t:[];return Wn(r,e,n)}function ce(r){return typeof r=="object"&&r!==null||typeof r=="function"}function Nr(r){if(typeof r=="bigint")throw new TypeError("Cannot convert BigInt to number");return zl(r)}function De(r){const e=Nr(r);if(qn(e)||e===0)return 0;if(!Xe(e))return e;const t=it(le(e));return t===0?0:Fr(e)*t}function ft(r){if(typeof r!="number"||qn(r)||!Xe(r))return!1;const e=le(r);return it(e)===e}function et(r){if(typeof r=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return ln(r)}function te(r){const e=Nr(r);if(e===0)return 0;if(qn(e)||!Xe(e))throw new RangeError("invalid number value");const t=cr(e);return t===0?0:t}function wo(r,e){const t=te(r);if(t<=0)throw e!==void 0?new RangeError(`property '${e}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return t}function Oe(r){const e=Nr(r);if(!Xe(e))throw new RangeError("infinity is out of range");if(!ft(e))throw new RangeError(`unsupported fractional value ${r}`);return e===0?0:e}function _e(r,e){return{quotient:l.divide(r,e),remainder:l.remainder(r,e)}}function Pn(r){return l.lessThan(r,we)}function bo(r){return gt(r)?0:Pn(r)?-1:1}function Ct(r){return l.lessThan(r,we)?l.multiply(r,Zl):r}const To=new Map([["year",te],["month",wo],["monthCode",et],["day",wo],["hour",te],["minute",te],["second",te],["millisecond",te],["microsecond",te],["nanosecond",te],["years",Oe],["months",Oe],["weeks",Oe],["days",Oe],["hours",Oe],["minutes",Oe],["seconds",Oe],["milliseconds",Oe],["microseconds",Oe],["nanoseconds",Oe],["era",et],["eraYear",De],["offset",et]]),Vl=new Map([["hour",0],["minute",0],["second",0],["millisecond",0],["microsecond",0],["nanosecond",0]]),cn=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],Mn=new Map(cn.map((r=>[r[0],r[1]]))),Kl=new Map(cn.map((([r,e])=>[e,r]))),_o=cn.map((([,r])=>r)),Co=Array.from(Mn.keys()).sort(),Eo=new Map;function Es(r){let e=Eo.get(r);return e===void 0&&(e=new vs("en-us",{timeZone:ln(r),hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),Eo.set(r,e)),e}function Do(r){if(r==null)throw new TypeError(`Expected object not ${r}`);return Object(r)}function Sr(r,e,t,n){if(e==null)return;const i=Wl(e);for(const o of i)if(!t.some((a=>Object.is(a,o)))&&Object.prototype.propertyIsEnumerable.call(e,o)){const a=e[o];if(n&&n.some((c=>Object.is(c,a))))continue;r[o]=a}}function Re(r){return Pe(r,j)&&!Pe(r,oe,_)}function pt(r){return Pe(r,$t)}function pe(r){return Pe(r,he)}function ye(r){return Pe(r,qe,Me,We,Ze,He,Ge,Ve,Ke,Qe)}function K(r){return Pe(r,cs)}function ve(r){return Pe(r,U,z,B,q,W,Z)&&!Pe(r,I,O,P)}function L(r){return Pe(r,I,O,P,U,z,B,q,W,Z)}function re(r){return Pe(r,ds)}function $e(r){return Pe(r,us)}function F(r){return Pe(r,j,oe,_)}function qr(r){if(Pe(r,_)||Pe(r,oe))throw new TypeError("with() does not support a calendar or timeZone property");if(ve(r))throw new TypeError("with() does not accept Temporal.PlainTime, use withPlainTime() instead");if(r.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(r.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function Ql(r){const{ianaName:e,offset:t,z:n}=(function(o){if(new RegExp(`^${an.source}$`,"i").test(o))return{ianaName:o};try{const a=Lt(o);if(a.z||a.offset||a.ianaName)return a}catch{}throw new RangeError(`Invalid time zone: ${o}`)})(r);return e?Bi(e):n?"UTC":ni(Jt(t))}function Mi(r,e){return e==="never"?"":Fi(Ae(r),e)}function Fi(r,e){return e==="never"||e==="auto"&&r==="iso8601"?"":`[${e==="critical"?"!":""}u-ca=${r}]`}function Lt(r){const e=Ml.exec(r);if(!e)throw new RangeError(`invalid ISO 8601 string: ${r}`);let t=e[1];if(t[0]==="−"&&(t=`-${t.slice(1)}`),t==="-000000")throw new RangeError(`invalid ISO 8601 string: ${r}`);const n=De(t),i=De(e[2]||e[4]),o=De(e[3]||e[5]),a=De(e[6]),c=e[6]!==void 0,d=De(e[7]||e[10]);let h=De(e[8]||e[11]);h===60&&(h=59);const u=(e[9]||e[12])+"000000000",m=De(u.slice(0,3)),f=De(u.slice(3,6)),p=De(u.slice(6,9));let g,y=!1;if(e[13])g=void 0,y=!0;else if(e[14]&&e[15]){const T=e[14]==="-"||e[14]==="−"?"-":"+",C=e[15]||"00",S=e[16]||"00",D=e[17]||"00";let E=e[18]||"0";if(g=`${T}${C}:${S}`,+E){for(;E.endsWith("0");)E=E.slice(0,-1);g+=`:${D}.${E}`}else+D&&(g+=`:${D}`);g==="-00:00"&&(g="+00:00")}const v=e[19],w=e[20];let b;for(const[,T,C,S]of w.matchAll(nr))if(C==="u-ca")b===void 0&&(b=S);else if(T==="!")throw new RangeError(`Unrecognized annotation: !${C}=${S}`);return Zi(n,i,o,a,d,h,m,f,p),{year:n,month:i,day:o,hasTime:c,hour:a,minute:d,second:h,millisecond:m,microsecond:f,nanosecond:p,ianaName:v,offset:g,z:y,calendar:b}}function xi(r){const e=xl.exec(r);let t,n,i,o;if(e){let a=e[1];if(a[0]==="−"&&(a=`-${a.slice(1)}`),a==="-000000")throw new RangeError(`invalid ISO 8601 string: ${r}`);t=De(a),n=De(e[2]);const c=e[3];for(const[,d,h,u]of c.matchAll(nr))if(h==="u-ca")i===void 0&&(i=u);else if(d==="!")throw new RangeError(`Unrecognized annotation: !${h}=${u}`);if(i!==void 0&&i!=="iso8601")throw new RangeError("YYYY-MM format is only valid with iso8601 calendar")}else{let a;if({year:t,month:n,calendar:i,day:o,z:a}=Lt(r),a)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:t,month:n,calendar:i,referenceISODay:o}}function Ni(r){const e=Nl.exec(r);let t,n,i,o;if(e){t=De(e[1]),n=De(e[2]);const a=e[3];for(const[,c,d,h]of a.matchAll(nr))if(d==="u-ca")i===void 0&&(i=h);else if(c==="!")throw new RangeError(`Unrecognized annotation: !${d}=${h}`);if(i!==void 0&&i!=="iso8601")throw new RangeError("MM-DD format is only valid with iso8601 calendar")}else{let a;if({month:t,day:n,calendar:i,year:o,z:a}=Lt(r),a)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:t,day:n,calendar:i,referenceISOYear:o}}function Xl(r){let{year:e,month:t,day:n,hour:i,minute:o,second:a,millisecond:c,microsecond:d,nanosecond:h,offset:u,z:m}=(function(y){const v=Lt(y);if(!v.z&&!v.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return v})(r);if(!m&&!u)throw new RangeError("Temporal.Instant requires a time zone offset");const f=m?0:Jt(u);({year:e,month:t,day:n,hour:i,minute:o,second:a,millisecond:c,microsecond:d,nanosecond:h}=qi(e,t,n,i,o,a,c,d,h-f));const p=er(e,t,n,i,o,a,c,d,h);if(p===null)throw new RangeError("DateTime outside of supported range");return p}function Fn(r,e,t,n){let i=r,o=e,a=t;switch(n){case"reject":xt(i,o,a);break;case"constrain":({year:i,month:o,day:a}=Us(i,o,a))}return{year:i,month:o,day:a}}function Zn(r,e,t,n,i,o,a){let c=r,d=e,h=t,u=n,m=i,f=o;switch(a){case"reject":oi(c,d,h,u,m,f);break;case"constrain":({hour:c,minute:d,second:h,millisecond:u,microsecond:m,nanosecond:f}=(function(g,y,v,w,b,T){const C=nt(g,0,23),S=nt(y,0,59),D=nt(v,0,59),E=nt(w,0,999),$=nt(b,0,999),M=nt(T,0,999);return{hour:C,minute:S,second:D,millisecond:E,microsecond:$,nanosecond:M}})(c,d,h,u,m,f))}return{hour:c,minute:d,second:h,millisecond:u,microsecond:m,nanosecond:f}}function wr(r){if(!ce(r))return(function(g){const y=Al.exec(g);if(!y)throw new RangeError(`invalid duration: ${g}`);if(y.slice(2).every((V=>V===void 0)))throw new RangeError(`invalid duration: ${g}`);const v=y[1]==="-"||y[1]==="−"?-1:1,w=y[2]===void 0?0:te(y[2])*v,b=y[3]===void 0?0:te(y[3])*v,T=y[4]===void 0?0:te(y[4])*v,C=y[5]===void 0?0:te(y[5])*v,S=y[6]===void 0?0:te(y[6])*v,D=y[7],E=y[8],$=y[9],M=y[10],Q=y[11];let X=0,J=0,N=0;if(D!==void 0){if(E??$??M??Q)throw new RangeError("only the smallest unit can be fractional");N=3600*De((D+"000000000").slice(0,9))*v}else if(X=E===void 0?0:te(E)*v,$!==void 0){if(M??Q)throw new RangeError("only the smallest unit can be fractional");N=60*De(($+"000000000").slice(0,9))*v}else J=M===void 0?0:te(M)*v,Q!==void 0&&(N=De((Q+"000000000").slice(0,9))*v);const Y=N%1e3,R=cr(N/1e3)%1e3,A=cr(N/1e6)%1e3;return J+=cr(N/1e9)%60,X+=cr(N/6e10),Yn(w,b,T,C,S,X,J,A,R,Y),{years:w,months:b,weeks:T,days:C,hours:S,minutes:X,seconds:J,milliseconds:A,microseconds:R,nanoseconds:Y}})(et(r));if(ye(r))return{years:s(r,qe),months:s(r,Me),weeks:s(r,tt),days:s(r,We),hours:s(r,Ze),minutes:s(r,He),seconds:s(r,Ge),milliseconds:s(r,Ve),microseconds:s(r,Ke),nanoseconds:s(r,Qe)};const e={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};let t=(function(g){if(!ce(g))throw new TypeError("invalid duration-like");const y={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0};let v=!1;for(const w of Co){const b=g[w];b!==void 0&&(v=!0,y[w]=Oe(b))}if(!v)throw new TypeError("invalid duration-like");return y})(r);for(const p of Co){const g=t[p];g!==void 0&&(e[p]=g)}let{years:n,months:i,weeks:o,days:a,hours:c,minutes:d,seconds:h,milliseconds:u,microseconds:m,nanoseconds:f}=e;return Yn(n,i,o,a,c,d,h,u,m,f),{years:n,months:i,weeks:o,days:a,hours:c,minutes:d,seconds:h,milliseconds:u,microseconds:m,nanoseconds:f}}function Ce(r){return r===void 0?"constrain":rr(r,"overflow",["constrain","reject"],"constrain")}function jr(r){return r===void 0?"compatible":rr(r,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function Dt(r,e){return rr(r,"roundingMode",["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"],e)}function xn(r,e){return r===void 0?e:rr(r,"offset",["prefer","use","ignore","reject"],e)}function dn(r){return rr(r,"calendarName",["auto","always","never","critical"],"auto")}function Wr(r){let e=r.roundingIncrement;if(e===void 0)return 1;if(e=Nr(e),!Xe(e))throw new RangeError("roundingIncrement must be finite");const t=cr(e);if(t<1||t>1e9)throw new RangeError(`roundingIncrement must be at least 1 and at most 1e9, not ${e}`);return t}function Zr(r,e,t){const n=t?e:e-1;if(r>n)throw new RangeError(`roundingIncrement must be at least 1 and less than ${n}, not ${r}`);if(e%r!=0)throw new RangeError(`Rounding increment must divide evenly into ${e}`)}function un(r){const e=r.fractionalSecondDigits;if(e===void 0)return"auto";if(typeof e!="number"){if(et(e)!=="auto")throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`);return"auto"}const t=it(e);if(!Xe(t)||t<0||t>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`);return t}function hn(r,e){switch(r){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}switch(e){case"auto":return{precision:e,unit:"nanosecond",increment:1};case 0:return{precision:e,unit:"second",increment:1};case 1:case 2:case 3:return{precision:e,unit:"millisecond",increment:10**(3-e)};case 4:case 5:case 6:return{precision:e,unit:"microsecond",increment:10**(6-e)};case 7:case 8:case 9:return{precision:e,unit:"nanosecond",increment:10**(9-e)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`)}}const fr=Symbol("~required~");function ot(r,e,t,n,i=[]){const o=[];for(const[,h,u]of cn)t!=="datetime"&&t!==u||o.push(h);o.push(...i);let a=n;a===fr?a=void 0:a!==void 0&&o.push(a);const c=[...o];for(const h of o){const u=Kl.get(h);u!==void 0&&c.push(u)}let d=rr(r,e,c,a);if(d===void 0&&n===fr)throw new RangeError(`${e} is required`);return Mn.has(d)?Mn.get(d):d}function Dn(r){const e=r.relativeTo;if(e===void 0)return e;let t,n,i,o,a,c,d,h,u,m,f,p,g="option",y=!1;if(ce(e)){if(F(e)||K(e))return e;if(L(e))return Lr(e);m=gn(e);const v=ke(m,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);v.push("timeZone","offset");const w=G(e,v,[]),b=Be(null);b.overflow="constrain",{year:t,month:n,day:i,hour:o,minute:a,second:c,millisecond:d,microsecond:h,nanosecond:u}=mn(m,w,b),p=w.offset,p===void 0&&(g="wall"),f=w.timeZone,f!==void 0&&(f=ze(f))}else{let v,w;if({year:t,month:n,day:i,hour:o,minute:a,second:c,millisecond:d,microsecond:h,nanosecond:u,calendar:m,ianaName:v,offset:p,z:w}=Lt(et(e)),v)f=ze(v),w?g="exact":p||(g="wall"),y=!0;else if(w)throw new RangeError("Z designator not supported for PlainDate relativeTo; either remove the Z or add a bracketed time zone");if(m||(m="iso8601"),!Ht(m))throw new RangeError(`invalid calendar identifier ${m}`);m=Nt(m)}return f===void 0?vt(t,n,i,m):xe(jn(t,n,i,o,a,c,d,h,u,g,g==="option"?Jt(p):0,f,"compatible","reject",y),f,m)}function _i(r,e,t,n,i,o,a,c,d,h){for(const[u,m]of[["years",r],["months",e],["weeks",t],["days",n],["hours",i],["minutes",o],["seconds",a],["milliseconds",c],["microseconds",d],["nanoseconds",h]])if(m!==0)return Mn.get(u);return"nanosecond"}function pr(r,e){return _o.indexOf(r)>_o.indexOf(e)?e:r}function G(r,e,t,{emptySourceErrorMessage:n}={emptySourceErrorMessage:"no supported properties found"}){const i=Be(null);let o=!1;e.sort();for(const a of e){let c=r[a];if(c!==void 0)o=!0,To.has(a)&&(c=To.get(a)(c)),i[a]=c;else if(t!=="partial"){if(Ll.call(t,a))throw new TypeError(`required property '${a}' missing or undefined`);c=Vl.get(a),i[a]=c}}if(t==="partial"&&!o)throw new TypeError(n);return i}function Nn(r,e="complete"){const t=["hour","microsecond","millisecond","minute","nanosecond","second"],n=G(r,t,"partial",{emptySourceErrorMessage:"invalid time-like"}),i={};for(const o of t){const a=ql(n,o);a!==void 0?i[o]=a.value:e==="complete"&&(i[o]=0)}return i}function se(r,e){let t=r;if(ce(t)){if(K(t))return t;if(F(t)&&(Ce(e),t=ht(s(t,oe),s(t,Ue),s(t,_))),L(t))return Ce(e),vt(s(t,I),s(t,O),s(t,P),s(t,_));const d=gn(t);return Wt(d,G(t,ke(d,["day","month","monthCode","year"]),[]),e)}Ce(e);let{year:n,month:i,day:o,calendar:a,z:c}=(function(h){return Lt(h)})(et(t));if(c)throw new RangeError("Z designator not supported for PlainDate");if(a||(a="iso8601"),!Ht(a))throw new RangeError(`invalid calendar identifier ${a}`);return a=Nt(a),vt(n,i,o,a)}function mn(r,e,t){let{hour:n,minute:i,second:o,millisecond:a,microsecond:c,nanosecond:d}=Nn(e);const h=Ce(t),u=Wt(r,e,t),m=s(u,I),f=s(u,O),p=s(u,P);return{hour:n,minute:i,second:o,millisecond:a,microsecond:c,nanosecond:d}=Zn(n,i,o,a,c,d,h),{year:m,month:f,day:p,hour:n,minute:i,second:o,millisecond:a,microsecond:c,nanosecond:d}}function dr(r,e){let t,n,i,o,a,c,d,h,u,m;if(ce(r)){if(L(r))return r;if(F(r))return Ce(e),ht(s(r,oe),s(r,Ue),s(r,_));if(K(r))return Ce(e),rt(s(r,I),s(r,O),s(r,P),0,0,0,0,0,0,s(r,_));m=gn(r);const f=G(r,ke(m,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]);({year:t,month:n,day:i,hour:o,minute:a,second:c,millisecond:d,microsecond:h,nanosecond:u}=mn(m,f,e))}else{let f;if(Ce(e),{year:t,month:n,day:i,hour:o,minute:a,second:c,millisecond:d,microsecond:h,nanosecond:u,calendar:m,z:f}=(function(g){return Lt(g)})(et(r)),f)throw new RangeError("Z designator not supported for PlainDateTime");if(Zi(t,n,i,o,a,c,d,h,u),m||(m="iso8601"),!Ht(m))throw new RangeError(`invalid calendar identifier ${m}`);m=Nt(m)}return rt(t,n,i,o,a,c,d,h,u,m)}function Ir(r){if(ye(r))return r;let{years:e,months:t,weeks:n,days:i,hours:o,minutes:a,seconds:c,milliseconds:d,microseconds:h,nanoseconds:u}=wr(r);return new(k("%Temporal.Duration%"))(e,t,n,i,o,a,c,d,h,u)}function Et(r){if(Re(r))return r;if(F(r))return new(k("%Temporal.Instant%"))(s(r,j));const e=Xl(et(r));return new(k("%Temporal.Instant%"))(e)}function ko(r,e){let t=r;if(ce(t)){if($e(t))return t;let c,d;if(Pe(t,_))c=s(t,_),d=!1;else{let u=t.calendar;d=u===void 0,u===void 0&&(u="iso8601"),c=st(u)}const h=G(t,ke(c,["day","month","monthCode","year"]),[]);return d&&h.month!==void 0&&h.monthCode===void 0&&h.year===void 0&&(h.year=1972),Ar(c,h,e)}Ce(e);let{month:n,day:i,referenceISOYear:o,calendar:a}=Ni(et(t));if(a===void 0&&(a="iso8601"),!Ht(a))throw new RangeError(`invalid calendar identifier ${a}`);return a=Nt(a),o===void 0?(xt(1972,n,i),nn(n,i,a)):Ar(a,nn(n,i,a,o))}function Ut(r,e="constrain"){let t,n,i,o,a,c,d=r;if(ce(d)){if(ve(d))return d;if(F(d)&&(d=ht(s(d,oe),s(d,Ue),s(d,_))),L(d))return new(k("%Temporal.PlainTime%"))(s(d,U),s(d,z),s(d,B),s(d,q),s(d,W),s(d,Z));({hour:t,minute:n,second:i,millisecond:o,microsecond:a,nanosecond:c}=Nn(d)),{hour:t,minute:n,second:i,millisecond:o,microsecond:a,nanosecond:c}=Zn(t,n,i,o,a,c,e)}else({hour:t,minute:n,second:i,millisecond:o,microsecond:a,nanosecond:c}=(function(u){const m=Fl.exec(u);let f,p,g,y,v,w,b;if(m){f=De(m[1]),p=De(m[2]||m[5]),g=De(m[3]||m[6]),g===60&&(g=59);const T=(m[4]||m[7])+"000000000";y=De(T.slice(0,3)),v=De(T.slice(3,6)),w=De(T.slice(6,9)),b=m[14];for(const[,C,S,D]of b.matchAll(nr))if(S!=="u-ca"&&C==="!")throw new RangeError(`Unrecognized annotation: !${S}=${D}`);if(m[8])throw new RangeError("Z designator not supported for PlainTime")}else{let T,C;if({hasTime:C,hour:f,minute:p,second:g,millisecond:y,microsecond:v,nanosecond:w,z:T}=Lt(u),!C)throw new RangeError(`time is missing in string: ${u}`);if(T)throw new RangeError("Z designator not supported for PlainTime")}if(/[tT ][0-9][0-9]/.test(u))return{hour:f,minute:p,second:g,millisecond:y,microsecond:v,nanosecond:w};try{const{month:T,day:C}=Ni(u);xt(1972,T,C)}catch{try{const{year:T,month:C}=xi(u);xt(T,C,1)}catch{return{hour:f,minute:p,second:g,millisecond:y,microsecond:v,nanosecond:w}}}throw new RangeError(`invalid ISO 8601 time-only string ${u}; may need a T prefix`)})(et(d))),oi(t,n,i,o,a,c);return new(k("%Temporal.PlainTime%"))(t,n,i,o,a,c)}function Qr(r,e){if(ce(r)){if(re(r))return r;const a=gn(r);return yr(a,G(r,ke(a,["month","monthCode","year"]),[]),e)}Ce(e);let{year:t,month:n,referenceISODay:i,calendar:o}=xi(et(r));if(o===void 0&&(o="iso8601"),!Ht(o))throw new RangeError(`invalid calendar identifier ${o}`);return o=Nt(o),i===void 0?(xt(t,n,1),on(t,n,o)):yr(o,on(t,n,o,i))}function jn(r,e,t,n,i,o,a,c,d,h,u,m,f,p,g){const y=new(k("%Temporal.PlainDateTime%"))(r,e,t,n,i,o,a,c,d);if(h==="wall"||p==="ignore")return s(Je(m,y,f),j);if(h==="exact"||p==="use"){const w=er(r,e,t,n,i,o,a,c,d);if(w===null)throw new RangeError("ZonedDateTime outside of supported range");return l.subtract(w,l.BigInt(u))}const v=An(m,y);for(const w of v){const b=kt(m,w),T=l.toNumber(dt(l.BigInt(b),Ts,"halfExpand"));if(b===u||g&&T===u)return s(w,j)}if(p==="reject"){const w=ni(u),b=pt(m)?s(m,$t):"time zone";throw new RangeError(`Offset ${w} is invalid for ${y.toString()} in ${b}`)}return s(Ms(v,m,y,f),j)}function Xr(r,e){let t,n,i,o,a,c,d,h,u,m,f,p,g,y,v=!1,w="option";if(ce(r)){if(F(r))return r;p=gn(r);const T=ke(p,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);T.push("timeZone","offset");const C=G(r,T,["timeZone"]);m=ze(C.timeZone),f=C.offset,f===void 0&&(w="wall"),g=jr(e),y=xn(e,"reject"),{year:t,month:n,day:i,hour:o,minute:a,second:c,millisecond:d,microsecond:h,nanosecond:u}=mn(p,C,e)}else{let T,C;if({year:t,month:n,day:i,hour:o,minute:a,second:c,millisecond:d,microsecond:h,nanosecond:u,ianaName:T,offset:f,z:C,calendar:p}=(function(D){const E=Lt(D);if(!E.ianaName)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return E})(et(r)),m=ze(T),C?w="exact":f||(w="wall"),p||(p="iso8601"),!Ht(p))throw new RangeError(`invalid calendar identifier ${p}`);p=Nt(p),v=!0,g=jr(e),y=xn(e,"reject"),Ce(e)}let b=0;return w==="option"&&(b=Jt(f)),xe(jn(t,n,i,o,a,c,d,h,u,w,b,m,g,y,v),m,p)}function Ds(r,e,t,n,i){xt(e,t,n),zs(e,t,n),At(r),H(r,I,e),H(r,O,t),H(r,P,n),H(r,_,i),H(r,cs,!0)}function vt(r,e,t,n="iso8601"){const i=k("%Temporal.PlainDate%"),o=Be(i.prototype);return Ds(o,r,e,t,n),o}function ks(r,e,t,n,i,o,a,c,d,h,u){Zi(e,t,n,i,o,a,c,d,h),Bs(e,t,n,i,o,a,c,d,h),At(r),H(r,I,e),H(r,O,t),H(r,P,n),H(r,U,i),H(r,z,o),H(r,B,a),H(r,q,c),H(r,W,d),H(r,Z,h),H(r,_,u)}function rt(r,e,t,n,i,o,a,c,d,h="iso8601"){const u=k("%Temporal.PlainDateTime%"),m=Be(u.prototype);return ks(m,r,e,t,n,i,o,a,c,d,h),m}function Ss(r,e,t,n,i){xt(i,e,t),zs(i,e,t),At(r),H(r,O,e),H(r,P,t),H(r,I,i),H(r,_,n),H(r,us,!0)}function nn(r,e,t="iso8601",n=1972){const i=k("%Temporal.PlainMonthDay%"),o=Be(i.prototype);return Ss(o,r,e,t,n),o}function Is(r,e,t,n,i){xt(e,t,i),(function(a,c){je(a,$n,On),a===$n?je(c,4,12):a===On&&je(c,1,9)})(e,t),At(r),H(r,I,e),H(r,O,t),H(r,P,i),H(r,_,n),H(r,ds,!0)}function on(r,e,t="iso8601",n=1){const i=k("%Temporal.PlainYearMonth%"),o=Be(i.prototype);return Is(o,r,e,t,n),o}function Rs(r,e,t,n){lr(e),At(r),H(r,j,e),H(r,oe,t),H(r,_,n);const i=new(k("%Temporal.Instant%"))(s(r,j));H(r,Ue,i)}function xe(r,e,t="iso8601"){const n=k("%Temporal.ZonedDateTime%"),i=Be(n.prototype);return Rs(i,r,e,t),i}function ke(r,e){if(typeof r=="string"){const i=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.fields%"),i,[e])}const t=x(ie(r,"fields"),r,[e]),n=[];for(const i of t){if(typeof i!="string")throw new TypeError("bad return from calendar.fields()");ys.call(n,i)}return n}function gr(r,e,t){if(typeof r=="string"){const i=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.mergeFields%"),i,[e,t])}const n=x(ie(r,"mergeFields"),r,[e,t]);if(!ce(n))throw new TypeError("bad return from calendar.mergeFields()");return n}function Ne(r,e,t,n,i){let o=i;if(typeof r=="string"){const c=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.dateAdd%"),c,[e,t,n])}o===void 0&&(o=ie(r,"dateAdd"));const a=Wn(o,r,[e,t,n]);if(!K(a))throw new TypeError("invalid result");return a}function Xt(r,e,t,n,i){let o=i;if(typeof r=="string"){const c=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.dateUntil%"),c,[e,t,n])}o===void 0&&(o=ie(r,"dateUntil"));const a=Wn(o,r,[e,t,n]);if(!ye(a))throw new TypeError("invalid result");return a}function Hn(r,e){if(typeof r=="string"){const n=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.year%"),n,[e])}let t=x(ie(r,"year"),r,[e]);if(typeof t!="number")throw new TypeError("calendar year result must be an integer");if(!ft(t))throw new RangeError("calendar year result must be an integer");return t}function Gn(r,e){if(typeof r=="string"){const n=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.month%"),n,[e])}let t=x(ie(r,"month"),r,[e]);if(typeof t!="number")throw new TypeError("calendar month result must be a positive integer");if(!ft(t)||t<1)throw new RangeError("calendar month result must be a positive integer");return t}function fn(r,e){if(typeof r=="string"){const n=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.monthCode%"),n,[e])}let t=x(ie(r,"monthCode"),r,[e]);if(typeof t!="string")throw new TypeError("calendar monthCode result must be a string");return t}function pn(r,e){if(typeof r=="string"){const n=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.day%"),n,[e])}const t=x(ie(r,"day"),r,[e]);if(typeof t!="number")throw new TypeError("calendar day result must be a positive integer");if(!ft(t)||t<1)throw new RangeError("calendar day result must be a positive integer");return t}function Vn(r,e){if(typeof r=="string"){const n=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.era%"),n,[e])}let t=x(ie(r,"era"),r,[e]);if(t===void 0)return t;if(typeof t!="string")throw new TypeError("calendar era result must be a string or undefined");return t}function Kn(r,e){if(typeof r=="string"){const n=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.eraYear%"),n,[e])}let t=x(ie(r,"eraYear"),r,[e]);if(t===void 0)return t;if(typeof t!="number")throw new TypeError("calendar eraYear result must be an integer or undefined");if(!ft(t))throw new RangeError("calendar eraYear result must be an integer or undefined");return t}function ji(r,e){if(typeof r=="string"){const n=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.dayOfWeek%"),n,[e])}const t=x(ie(r,"dayOfWeek"),r,[e]);if(typeof t!="number")throw new TypeError("calendar dayOfWeek result must be a positive integer");if(!ft(t)||t<1)throw new RangeError("calendar dayOfWeek result must be a positive integer");return t}function Ai(r,e){if(typeof r=="string"){const n=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.dayOfYear%"),n,[e])}const t=x(ie(r,"dayOfYear"),r,[e]);if(typeof t!="number")throw new TypeError("calendar dayOfYear result must be a positive integer");if(!ft(t)||t<1)throw new RangeError("calendar dayOfYear result must be a positive integer");return t}function Li(r,e){if(typeof r=="string"){const n=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.weekOfYear%"),n,[e])}const t=x(ie(r,"weekOfYear"),r,[e]);if(typeof t!="number")throw new TypeError("calendar weekOfYear result must be a positive integer");if(!ft(t)||t<1)throw new RangeError("calendar weekOfYear result must be a positive integer");return t}function Yi(r,e){if(typeof r=="string"){const n=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.yearOfWeek%"),n,[e])}const t=x(ie(r,"yearOfWeek"),r,[e]);if(typeof t!="number")throw new TypeError("calendar yearOfWeek result must be an integer");if(!ft(t))throw new RangeError("calendar yearOfWeek result must be an integer");return t}function Ui(r,e){if(typeof r=="string"){const n=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.daysInWeek%"),n,[e])}const t=x(ie(r,"daysInWeek"),r,[e]);if(typeof t!="number")throw new TypeError("calendar daysInWeek result must be a positive integer");if(!ft(t)||t<1)throw new RangeError("calendar daysInWeek result must be a positive integer");return t}function Qn(r,e){if(typeof r=="string"){const n=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.daysInMonth%"),n,[e])}const t=x(ie(r,"daysInMonth"),r,[e]);if(typeof t!="number")throw new TypeError("calendar daysInMonth result must be a positive integer");if(!ft(t)||t<1)throw new RangeError("calendar daysInMonth result must be a positive integer");return t}function Xn(r,e){if(typeof r=="string"){const n=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.daysInYear%"),n,[e])}const t=x(ie(r,"daysInYear"),r,[e]);if(typeof t!="number")throw new TypeError("calendar daysInYear result must be a positive integer");if(!ft(t)||t<1)throw new RangeError("calendar daysInYear result must be a positive integer");return t}function Jn(r,e){if(typeof r=="string"){const n=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.monthsInYear%"),n,[e])}const t=x(ie(r,"monthsInYear"),r,[e]);if(typeof t!="number")throw new TypeError("calendar monthsInYear result must be a positive integer");if(!ft(t)||t<1)throw new RangeError("calendar monthsInYear result must be a positive integer");return t}function ei(r,e){if(typeof r=="string"){const n=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.inLeapYear%"),n,[e])}const t=x(ie(r,"inLeapYear"),r,[e]);if(typeof t!="boolean")throw new TypeError("calendar inLeapYear result must be a boolean");return t}function st(r){if(ce(r)){if(Pe(r,_))return s(r,_);if(!(function(i){return!!pe(i)||"dateAdd"in i&&"dateFromFields"in i&&"dateUntil"in i&&"day"in i&&"dayOfWeek"in i&&"dayOfYear"in i&&"daysInMonth"in i&&"daysInWeek"in i&&"daysInYear"in i&&"fields"in i&&"id"in i&&"inLeapYear"in i&&"mergeFields"in i&&"month"in i&&"monthCode"in i&&"monthDayFromFields"in i&&"monthsInYear"in i&&"weekOfYear"in i&&"year"in i&&"yearMonthFromFields"in i&&"yearOfWeek"in i})(r))throw new TypeError("expected a Temporal.Calendar or object implementing the Temporal.Calendar protocol");return r}const e=et(r);if(Ht(e))return Nt(e);let t;try{({calendar:t}=Lt(e))}catch{try{({calendar:t}=xi(e))}catch{({calendar:t}=Ni(e))}}if(t||(t="iso8601"),!Ht(t))throw new RangeError(`invalid calendar identifier ${t}`);return Nt(t)}function gn(r){if(Pe(r,_))return s(r,_);const{calendar:e}=r;return e===void 0?"iso8601":st(e)}function Ae(r){if(typeof r=="string")return r;const e=r.id;if(typeof e!="string")throw new TypeError("calendar.id should be a string");return e}function Hr(r){return ce(r)?r:new(k("%Temporal.Calendar%"))(r)}function yn(r,e){return r===e?!0:Ae(r)===Ae(e)}function ti(r,e,t){if(r===e)return;const n=Ae(r),i=Ae(e);if(n!==i)throw new RangeError(`cannot ${t} of ${n} and ${i} calendars`)}function $s(r,e){if(r===e)return e;const t=Ae(r),n=Ae(e);if(t===n||t==="iso8601")return e;if(n==="iso8601")return r;throw new RangeError("irreconcilable calendars")}function Wt(r,e,t,n){if(typeof r=="string"){const o=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.dateFromFields%"),o,[e,t])}const i=x(ie(r,"dateFromFields"),r,[e,t]);if(!K(i))throw new TypeError("invalid result");return i}function yr(r,e,t){if(typeof r=="string"){const i=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.yearMonthFromFields%"),i,[e,t])}let n=x(ie(r,"yearMonthFromFields"),r,[e,t]);if(!re(n))throw new TypeError("invalid result");return n}function Ar(r,e,t){if(typeof r=="string"){const i=new(k("%Temporal.Calendar%"))(r);return x(k("%Temporal.Calendar.prototype.monthDayFromFields%"),i,[e,t])}let n=x(ie(r,"monthDayFromFields"),r,[e,t]);if(!$e(n))throw new TypeError("invalid result");return n}function ze(r){if(ce(r)){if(F(r))return s(r,oe);if(!(function(t){return!!pt(t)||"getOffsetNanosecondsFor"in t&&"getPossibleInstantsFor"in t&&"id"in t})(r))throw new TypeError("expected a Temporal.TimeZone or object implementing the Temporal.TimeZone protocol");return r}return Ql(et(r))}function sn(r){if(typeof r=="string")return r;const e=r.id;if(typeof e!="string")throw new TypeError("timeZone.id should be a string");return e}function Os(r){return ce(r)?r:new(k("%Temporal.TimeZone%"))(r)}function Ps(r,e){return r===e?!0:sn(r)===sn(e)}function Lr(r){return vt(s(r,I),s(r,O),s(r,P),s(r,_))}function zi(r){return new(k("%Temporal.PlainTime%"))(s(r,U),s(r,z),s(r,B),s(r,q),s(r,W),s(r,Z))}function kt(r,e,t){if(typeof r=="string"){const i=new(k("%Temporal.TimeZone%"))(r);return x(k("%Temporal.TimeZone.prototype.getOffsetNanosecondsFor%"),i,[e])}const n=x(ie(r,"getOffsetNanosecondsFor"),r,[e]);if(typeof n!="number")throw new TypeError("bad return from getOffsetNanosecondsFor");if(!ft(n)||le(n)>=864e11)throw new RangeError("out-of-range return from getOffsetNanosecondsFor");return n}function Ci(r,e){return ni(kt(r,e))}function ht(r,e,t){const n=s(e,j),i=kt(r,e);let{year:o,month:a,day:c,hour:d,minute:h,second:u,millisecond:m,microsecond:f,nanosecond:p}=xs(n);return{year:o,month:a,day:c,hour:d,minute:h,second:u,millisecond:m,microsecond:f,nanosecond:p}=qi(o,a,c,d,h,u,m,f,p+i),rt(o,a,c,d,h,u,m,f,p,t)}function Je(r,e,t){return Ms(An(r,e),r,e,t)}function Ms(r,e,t,n){const i=k("%Temporal.Instant%"),o=r.length;if(o===1)return r[0];if(o)switch(n){case"compatible":case"earlier":return r[0];case"later":return r[o-1];case"reject":throw new RangeError("multiple instants found")}const a=s(t,I),c=s(t,O),d=s(t,P),h=s(t,U),u=s(t,z),m=s(t,B),f=s(t,q),p=s(t,W),g=s(t,Z),y=er(a,c,d,h,u,m,f,p,g);if(y===null)throw new RangeError("DateTime outside of supported range");const v=new i(l.subtract(y,Ft)),w=new i(l.add(y,Ft)),b=kt(e,v),T=kt(e,w)-b;switch(n){case"earlier":{const C=s(t,_),S=k("%Temporal.PlainDateTime%"),D=Si(a,c,d,h,u,m,f,p,g,C,0,0,0,0,0,0,0,0,0,-T,void 0);return An(e,new S(D.year,D.month,D.day,D.hour,D.minute,D.second,D.millisecond,D.microsecond,D.nanosecond,C))[0]}case"compatible":case"later":{const C=s(t,_),S=k("%Temporal.PlainDateTime%"),D=Si(a,c,d,h,u,m,f,p,g,C,0,0,0,0,0,0,0,0,0,T,void 0),E=An(e,new S(D.year,D.month,D.day,D.hour,D.minute,D.second,D.millisecond,D.microsecond,D.nanosecond,C));return E[E.length-1]}case"reject":throw new RangeError("no such instant found")}}function An(r,e,t){if(typeof r=="string"){const o=new(k("%Temporal.TimeZone%"))(r);return x(k("%Temporal.TimeZone.prototype.getPossibleInstantsFor%"),o,[e])}const n=x(ie(r,"getPossibleInstantsFor"),r,[e]),i=[];for(const o of n){if(!Re(o))throw new TypeError("bad return from getPossibleInstantsFor");ys.call(i,o)}return i}function br(r){let e;return r<0||r>9999?e=(r<0?"-":"+")+`000000${le(r)}`.slice(-6):e=`0000${r}`.slice(-4),e}function ue(r){return`00${r}`.slice(-2)}function ri(r,e,t,n,i){if(i==="minute")return"";const o=`:${ue(r)}`;let a,c=1e6*e+1e3*t+n;if(i==="auto"){if(c===0)return o;for(a=`${c}`.padStart(9,"0");a[a.length-1]==="0";)a=a.slice(0,-1)}else{if(i===0)return o;a=`${c}`.padStart(9,"0").slice(0,i)}return`${o}.${a}`}function So(r,e,t){let n=e;n===void 0&&(n="UTC");const i=ht(n,r,"iso8601"),o=br(s(i,I)),a=ue(s(i,O)),c=ue(s(i,P)),d=ue(s(i,U)),h=ue(s(i,z)),u=ri(s(i,B),s(i,q),s(i,W),s(i,Z),t);let m="Z";return e!==void 0&&(m=Fs(kt(n,r))),`${o}-${a}-${c}T${d}:${h}${u}${m}`}function ui(r,e="auto",t){function n(M){return M<=Bl?M.toString(10):l.BigInt(M).toString(10)}const i=s(r,qe),o=s(r,Me),a=s(r,tt),c=s(r,We),d=s(r,Ze),h=s(r,He);let u=s(r,Ge),m=s(r,Ve),f=s(r,Ke),p=s(r,Qe);const g=Mt(i,o,a,c,d,h,u,m,f,p);if(t){const{unit:M,increment:Q,roundingMode:X}=t;({seconds:u,milliseconds:m,microseconds:f,nanoseconds:p}=Zt(0,0,0,0,0,0,u,m,f,p,Q,M,X))}const y=[];i&&y.push(`${n(le(i))}Y`),o&&y.push(`${n(le(o))}M`),a&&y.push(`${n(le(a))}W`),c&&y.push(`${n(le(c))}D`);const v=[];d&&v.push(`${n(le(d))}H`),h&&v.push(`${n(le(h))}M`);const w=[];let b,T,C,S,D=Yr(0,0,0,u,m,f,p,0);({quotient:D,remainder:b}=_e(D,ne)),{quotient:D,remainder:T}=_e(D,ne),{quotient:S,remainder:C}=_e(D,ne);const E=1e6*le(l.toNumber(C))+1e3*le(l.toNumber(T))+le(l.toNumber(b));let $;if(e==="auto"){if(E!==0)for($=`${E}`.padStart(9,"0");$[$.length-1]==="0";)$=$.slice(0,-1)}else e!==0&&($=`${E}`.padStart(9,"0").slice(0,e));return $&&w.unshift(".",$),l.equal(S,we)&&!w.length&&e==="auto"||w.unshift(Ct(S).toString()),w.length&&v.push(`${w.join("")}S`),v.length&&v.unshift("T"),y.length||v.length?`${g<0?"-":""}P${y.join("")}${v.join("")}`:"PT0S"}function Io(r,e="auto"){return`${br(s(r,I))}-${ue(s(r,O))}-${ue(s(r,P))}${Mi(s(r,_),e)}`}function Ro(r,e,t="auto",n){let i=s(r,I),o=s(r,O),a=s(r,P),c=s(r,U),d=s(r,z),h=s(r,B),u=s(r,q),m=s(r,W),f=s(r,Z);if(n){const{unit:p,increment:g,roundingMode:y}=n;({year:i,month:o,day:a,hour:c,minute:d,second:h,millisecond:u,microsecond:m,nanosecond:f}=Ki(i,o,a,c,d,h,u,m,f,g,p,y))}return`${br(i)}-${ue(o)}-${ue(a)}T${ue(c)}:${ue(d)}${ri(h,u,m,f,e)}${Mi(s(r,_),t)}`}function $o(r,e="auto"){let t=`${ue(s(r,O))}-${ue(s(r,P))}`;const n=Ae(s(r,_));(e==="always"||e==="critical"||n!=="iso8601")&&(t=`${br(s(r,I))}-${t}`);const i=Fi(n,e);return i&&(t+=i),t}function Oo(r,e="auto"){let t=`${br(s(r,I))}-${ue(s(r,O))}`;const n=Ae(s(r,_));(e==="always"||e==="critical"||n!=="iso8601")&&(t+=`-${ue(s(r,P))}`);const i=Fi(n,e);return i&&(t+=i),t}function Po(r,e,t="auto",n="auto",i="auto",o){let a=s(r,Ue);if(o){const{unit:u,increment:m,roundingMode:f}=o,p=Un(s(r,j),m,u,f);a=new(k("%Temporal.Instant%"))(p)}const c=s(r,oe),d=ht(c,a,"iso8601");let h=`${br(s(d,I))}-${ue(s(d,O))}-${ue(s(d,P))}T${ue(s(d,U))}:${ue(s(d,z))}${ri(s(d,B),s(d,q),s(d,W),s(d,Z),e)}`;return i!=="never"&&(h+=Fs(kt(c,a))),n!=="never"&&(h+=`[${n==="critical"?"!":""}${sn(c)}]`),h+=Mi(s(r,_),t),h}function Dr(r){return Ks.test(ln(r))}function Jt(r){const e=Ks.exec(ln(r));if(!e)throw new RangeError(`invalid time zone offset: ${r}`);return(e[1]==="-"||e[1]==="−"?-1:1)*(1e9*(60*(60*+e[2]+ +(e[3]||0))+ +(e[4]||0))+ +((e[5]||0)+"000000000").slice(0,9))}function Bi(r){return Dr(r)?ni(Jt(r)):Es(ln(r)).resolvedOptions().timeZone}function zt(r,e){const{year:t,month:n,day:i,hour:o,minute:a,second:c,millisecond:d,microsecond:h,nanosecond:u}=Ns(r,e),m=t%400,f=(t-m)/400,p=l.multiply(l.BigInt(146097),Ft),g=er(m,n,i,o,a,c,d,h,u),y=l.add(g,l.multiply(p,l.BigInt(f)));return l.toNumber(l.subtract(y,e))}function ni(r){const e=r<0?"-":"+",t=le(r),n=t%1e9,i=it(t/1e9)%60,o=it(t/6e10)%60,a=ue(it(t/36e11)),c=ue(o),d=ue(i);let h="";if(n){let u=`${n}`.padStart(9,"0");for(;u[u.length-1]==="0";)u=u.slice(0,-1);h=`:${d}.${u}`}else i&&(h=`:${d}`);return`${e}${a}:${c}${h}`}function Fs(r){let e=l.toNumber(dt(l.BigInt(r),Ts,"halfExpand"));const t=e<0?"-":"+";e=le(e);const n=e/6e10%60;return`${t}${ue(it(e/36e11))}:${ue(n)}`}function er(r,e,t,n,i,o,a,c,d){const h=new Date;h.setUTCHours(n,i,o,a),h.setUTCFullYear(r,e-1,t);const u=h.getTime();if(qn(u))return null;let m=l.multiply(l.BigInt(u),ut);return m=l.add(m,l.multiply(l.BigInt(c),ne)),m=l.add(m,l.BigInt(d)),l.lessThan(m,rn)||l.greaterThan(m,xr)?null:m}function xs(r){const{quotient:e,remainder:t}=_e(r,ut);let n=l.toNumber(e),i=l.toNumber(t);i<0&&(i+=1e6,n-=1);const o=it(i/1e3)%1e3,a=i%1e3,c=new Date(n);return{epochMilliseconds:n,year:c.getUTCFullYear(),month:c.getUTCMonth()+1,day:c.getUTCDate(),hour:c.getUTCHours(),minute:c.getUTCMinutes(),second:c.getUTCSeconds(),millisecond:c.getUTCMilliseconds(),microsecond:o,nanosecond:a}}function Ns(r,e){const{epochMilliseconds:t,millisecond:n,microsecond:i,nanosecond:o}=xs(e),{year:a,month:c,day:d,hour:h,minute:u,second:m}=(function(p,g){const y=Es(p).format(new Date(g));return(function(w){const b=w.split(/[^\w]+/);if(b.length!==7)throw new RangeError(`expected 7 parts in "${w}`);const T=+b[0],C=+b[1];let S=+b[2];const D=b[3].toUpperCase();if(D==="B"||D==="BC")S=1-S;else if(D!=="A"&&D!=="AD")throw new RangeError(`Unknown era ${D} in "${w}`);let E=+b[4];E===24&&(E=0);const $=+b[5],M=+b[6];if(!(Xe(S)&&Xe(T)&&Xe(C)&&Xe(E)&&Xe($)&&Xe(M)))throw new RangeError(`Invalid number in "${w}`);return{year:S,month:T,day:C,hour:E,minute:$,second:M}})(y)})(r,t);return qi(a,c,d,h,u,m,n,i,o)}function Mo(r,e){return l.lessThan(r,e)?e:r}function js(){return l.add(Xi(),Hl)}function As(r,e){if(l.lessThan(e,kr))return As(r,kr);const t=l.add(e,_s),n=Mo(js(),t);let i=Mo(kr,e);const o=zt(r,i);let a=i,c=o;for(;o===c&&l.lessThan(l.BigInt(i),n);){if(a=l.add(i,Cs),l.greaterThan(a,xr))return null;c=zt(r,a),o===c&&(i=a)}return o===c?null:Qs((d=>zt(r,d)),i,a,o,c)}function Ei(r,e){const t=js(),n=l.greaterThan(e,t),i=n?l.subtract(e,_s):kr;if(r==="Africa/Casablanca"||r==="Africa/El_Aaiun"){const h=s(Et("2088-01-01T00Z"),j);if(l.lessThan(h,e))return Ei(r,h)}let o=l.subtract(e,Br);if(l.lessThan(o,kr))return null;const a=zt(r,o);let c=o,d=a;for(;a===d&&l.greaterThan(o,i);){if(c=l.subtract(o,Cs),l.lessThan(c,kr))return null;d=zt(r,c),a===d&&(o=c)}if(a===d){if(n){const h=l.subtract(t,Ft);return Ei(r,h)}return null}return Qs((h=>zt(r,h)),c,o,d,a)}function tr(r){return r===void 0?!1:r%4==0&&(r%100!=0||r%400==0)}function Bt(r,e){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[tr(r)?"leapyear":"standard"][e-1]}function Di(r,e,t){const n=e+(e<3?10:-2),i=r-(e<3?1:0),o=it(i/100),a=i-100*o,c=(t+it(2.6*n-.2)+(a+it(a/4))+(it(o/4)-2*o))%7;return c+(c<=0?7:0)}function Ln(r,e,t){let n=t;for(let i=e-1;i>0;i--)n+=Bt(r,i);return n}function Fo(r,e,t){const n=Ln(r,e,t),i=Di(r,e,t)||7,o=Di(r,1,1),a=it((n-i+10)/7);return a<1?o===5||o===6&&tr(r-1)?{week:53,year:r-1}:{week:52,year:r-1}:a===53&&(tr(r)?366:365)-n<4-i?{week:1,year:r+1}:{week:a,year:r}}function Mt(r,e,t,n,i,o,a,c,d,h){for(const u of[r,e,t,n,i,o,a,c,d,h])if(u!==0)return u<0?-1:1;return 0}function kn(r,e){let t=r,n=e;if(!Xe(t)||!Xe(n))throw new RangeError("infinity is out of range");return n-=1,t+=it(n/12),n%=12,n<0&&(n+=12),n+=1,{year:t,month:n}}function ii(r,e,t){let n=r,i=e,o=t;if(!Xe(o))throw new RangeError("infinity is out of range");({year:n,month:i}=kn(n,i));const a=146097;if(le(o)>a){const h=cr(o/a);n+=400*h,o-=h*a}let c=0,d=i>2?n:n-1;for(;c=tr(d)?366:365,o<-c;)n-=1,d-=1,o+=c;for(d+=1;c=tr(d)?366:365,o>c;)n+=1,d+=1,o-=c;for(;o<1;)({year:n,month:i}=kn(n,i-1)),o+=Bt(n,i);for(;o>Bt(n,i);)o-=Bt(n,i),{year:n,month:i}=kn(n,i+1);return{year:n,month:i,day:o}}function qi(r,e,t,n,i,o,a,c,d){const{deltaDays:h,hour:u,minute:m,second:f,millisecond:p,microsecond:g,nanosecond:y}=Yt(n,i,o,a,c,d),{year:v,month:w,day:b}=ii(r,e,t+h);return{year:v,month:w,day:b,hour:u,minute:m,second:f,millisecond:p,microsecond:g,nanosecond:y}}function Yt(r,e,t,n,i,o){let a,c=l.BigInt(r),d=l.BigInt(e),h=l.BigInt(t),u=l.BigInt(n),m=l.BigInt(i),f=l.BigInt(o);return{quotient:a,remainder:f}=ar(f,ne),m=l.add(m,a),{quotient:a,remainder:m}=ar(m,ne),u=l.add(u,a),{quotient:a,remainder:u}=ar(u,ne),h=l.add(h,a),{quotient:a,remainder:h}=ar(h,Ot),d=l.add(d,a),{quotient:a,remainder:d}=ar(d,Ot),c=l.add(c,a),{quotient:a,remainder:c}=ar(c,ws),{deltaDays:l.toNumber(a),hour:l.toNumber(c),minute:l.toNumber(d),second:l.toNumber(h),millisecond:l.toNumber(u),microsecond:l.toNumber(m),nanosecond:l.toNumber(f)}}function Yr(r,e,t,n,i,o,a,c){const d=l.BigInt(r);let h=l.BigInt(a);r!==0&&(h=l.subtract(l.BigInt(a),l.BigInt(c)));const u=l.add(l.BigInt(e),l.multiply(d,l.BigInt(24))),m=l.add(l.BigInt(t),l.multiply(u,Ot)),f=l.add(l.BigInt(n),l.multiply(m,Ot)),p=l.add(l.BigInt(i),l.multiply(f,ne)),g=l.add(l.BigInt(o),l.multiply(p,ne));return l.add(l.BigInt(h),l.multiply(g,ne))}function Wi(r,e){const t=k("%Temporal.Instant%"),n=Fr(l.toNumber(r));let i=l.BigInt(r),o=864e11;if(n===0)return{days:0,nanoseconds:we,dayLengthNs:o};if(!F(e)){let T;return{quotient:T,remainder:i}=_e(i,l.BigInt(o)),{days:l.toNumber(T),nanoseconds:i,dayLengthNs:o}}const a=s(e,j),c=s(e,Ue),d=l.add(a,i),h=new t(d),u=s(e,oe),m=s(e,_),f=ht(u,c,m),p=ht(u,h,m);let{days:g}=Vi(s(f,I),s(f,O),s(f,P),s(f,U),s(f,z),s(f,B),s(f,q),s(f,W),s(f,Z),s(p,I),s(p,O),s(p,P),s(p,U),s(p,z),s(p,B),s(p,q),s(p,W),s(p,Z),m,"day",Be(null)),y=yt(c,u,m,0,0,0,g,0,0,0,0,0,0),v=l.BigInt(g);if(n===1)for(;l.greaterThan(v,we)&&l.greaterThan(y,d);)v=l.subtract(v,Br),y=yt(c,u,m,0,0,0,l.toNumber(v),0,0,0,0,0,0);i=l.subtract(d,y);let w=!1,b=new t(y);do{const T=yt(b,u,m,0,0,0,n,0,0,0,0,0,0),C=s(b,j);o=l.toNumber(l.subtract(T,C)),w=l.greaterThanOrEqual(l.multiply(l.subtract(i,l.BigInt(o)),l.BigInt(n)),we),w&&(i=l.subtract(i,l.BigInt(o)),b=new t(T),v=l.add(v,l.BigInt(n)))}while(w);if(!gt(v)&&bo(v)!==n)throw new RangeError("Time zone or calendar converted nanoseconds into a number of days with the opposite sign");if(!gt(i)&&bo(i)!==n)throw Pn(i)&&n===1?new Error("assert not reached"):new RangeError("Time zone or calendar ended up with a remainder of nanoseconds with the opposite sign");if(l.greaterThanOrEqual(Ct(i),Ct(l.BigInt(o))))throw new Error("assert not reached");return{days:l.toNumber(v),nanoseconds:i,dayLengthNs:le(o)}}function Tt(r,e,t,n,i,o,a,c,d){let h=Ls(r,e,t,n,i,o,a,c,d);if(h==="positive overflow"||h==="negative overflow")throw new RangeError("Duration out of range");return h}function Ls(r,e,t,n,i,o,a,c,d){let h,u,m,f,p,g,y=r;if(F(d)){const E=yt(s(d,Ue),s(d,oe),s(d,_),0,0,0,y,e,t,n,i,o,a),$=s(d,j);h=l.subtract(E,$)}else h=Yr(y,e,t,n,i,o,a,0);c==="year"||c==="month"||c==="week"||c==="day"?{days:y,nanoseconds:h}=Wi(h,d):y=0;const v=l.lessThan(h,we)?-1:1;switch(h=Ct(h),u=m=f=p=g=we,c){case"year":case"month":case"week":case"day":case"hour":({quotient:u,remainder:h}=_e(h,ne)),{quotient:m,remainder:u}=_e(u,ne),{quotient:f,remainder:m}=_e(m,ne),{quotient:p,remainder:f}=_e(f,Ot),{quotient:g,remainder:p}=_e(p,Ot);break;case"minute":({quotient:u,remainder:h}=_e(h,ne)),{quotient:m,remainder:u}=_e(u,ne),{quotient:f,remainder:m}=_e(m,ne),{quotient:p,remainder:f}=_e(f,Ot);break;case"second":({quotient:u,remainder:h}=_e(h,ne)),{quotient:m,remainder:u}=_e(u,ne),{quotient:f,remainder:m}=_e(m,ne);break;case"millisecond":({quotient:u,remainder:h}=_e(h,ne)),{quotient:m,remainder:u}=_e(u,ne);break;case"microsecond":({quotient:u,remainder:h}=_e(h,ne));break;case"nanosecond":break;default:throw new Error("assert not reached")}const w=l.toNumber(g)*v,b=l.toNumber(p)*v,T=l.toNumber(f)*v,C=l.toNumber(m)*v,S=l.toNumber(u)*v,D=l.toNumber(h)*v;for(const E of[y,w,b,T,C,S,D])if(!Xe(E))return v===1?"positive overflow":"negative overflow";return{days:y,hours:w,minutes:b,seconds:T,milliseconds:C,microseconds:S,nanoseconds:D}}function Cn(r,e,t,n,i,o){const a=k("%Temporal.Duration%"),c=Mt(r,e,t,n,0,0,0,0,0,0);if(c===0)return{years:r,months:e,weeks:t,days:n};const d=l.BigInt(c);let h,u,m=l.BigInt(r),f=l.BigInt(e),p=l.BigInt(t),g=l.BigInt(n);o&&(u=se(o),h=s(u,_));const y=new a(c),v=new a(0,c),w=new a(0,0,c);switch(i){case"year":break;case"month":{if(!h)throw new RangeError("a starting point is required for months balancing");let b,T;for(typeof h!="string"&&(b=ie(h,"dateAdd"),T=ie(h,"dateUntil"));!gt(m);){const C=Ne(h,u,y,void 0,b),S=Be(null);S.largestUnit="month";const D=Xt(h,u,C,S,T),E=l.BigInt(s(D,Me));u=C,f=l.add(f,E),m=l.subtract(m,d)}}break;case"week":{if(!h)throw new RangeError("a starting point is required for weeks balancing");const b=typeof h!="string"?ie(h,"dateAdd"):void 0;for(;!gt(m);){let T;({relativeTo:u,days:T}=Ye(h,u,y,b)),g=l.add(g,l.BigInt(T)),m=l.subtract(m,d)}for(;!gt(f);){let T;({relativeTo:u,days:T}=Ye(h,u,v,b)),g=l.add(g,l.BigInt(T)),f=l.subtract(f,d)}break}default:{if(gt(m)&&gt(f)&&gt(p))break;if(!h)throw new RangeError("a starting point is required for balancing calendar units");const b=typeof h!="string"?ie(h,"dateAdd"):void 0;for(;!gt(m);){let T;({relativeTo:u,days:T}=Ye(h,u,y,b)),g=l.add(g,l.BigInt(T)),m=l.subtract(m,d)}for(;!gt(f);){let T;({relativeTo:u,days:T}=Ye(h,u,v,b)),g=l.add(g,l.BigInt(T)),f=l.subtract(f,d)}for(;!gt(p);){let T;({relativeTo:u,days:T}=Ye(h,u,w,b)),g=l.add(g,l.BigInt(T)),p=l.subtract(p,d)}break}}return{years:l.toNumber(m),months:l.toNumber(f),weeks:l.toNumber(p),days:l.toNumber(g)}}function xo(r,e,t,n,i){if(F(r)){const o=s(r,Ue),a=s(r,oe),c=s(r,_),d=kt(a,o),h=yt(o,a,c,e,t,n,i,0,0,0,0,0,0);return kt(a,new(k("%Temporal.Instant%"))(h))-d}return 0}function Ys(r){return new(k("%Temporal.Duration%"))(-s(r,qe),-s(r,Me),-s(r,tt),-s(r,We),-s(r,Ze),-s(r,He),-s(r,Ge),-s(r,Ve),-s(r,Ke),-s(r,Qe))}function nt(r,e,t){return Yl(t,Ul(e,r))}function Us(r,e,t){const n=nt(e,1,12);return{year:r,month:n,day:nt(t,1,Bt(r,n))}}function je(r,e,t){if(r<e||r>t)throw new RangeError(`value out of range: ${e} <= ${r} <= ${t}`)}function xt(r,e,t){je(e,1,12),je(t,1,Bt(r,e))}function zs(r,e,t){Bs(r,e,t,12,0,0,0,0,0)}function oi(r,e,t,n,i,o){je(r,0,23),je(e,0,59),je(t,0,59),je(n,0,999),je(i,0,999),je(o,0,999)}function Zi(r,e,t,n,i,o,a,c,d){xt(r,e,t),oi(n,i,o,a,c,d)}function Bs(r,e,t,n,i,o,a,c,d){if(je(r,$n,On),r===$n&&er(r,e,t+1,n,i,o,a,c,d-1)==null||r===On&&er(r,e,t-1,n,i,o,a,c,d+1)==null)throw new RangeError("DateTime outside of supported range")}function lr(r){if(l.lessThan(r,rn)||l.greaterThan(r,xr))throw new RangeError("Instant outside of supported range")}function Yn(r,e,t,n,i,o,a,c,d,h){const u=Mt(r,e,t,n,i,o,a,c,d,h);for(const m of[r,e,t,n,i,o,a,c,d,h]){if(!Xe(m))throw new RangeError("infinite values not allowed as duration fields");const f=Fr(m);if(f!==0&&f!==u)throw new RangeError("mixed-sign values not allowed as duration fields")}}function Hi(r,e,t,n,i,o,a){switch(a){case"year":case"month":{const c=-Kt(r,e,t,n,i,o);if(c===0)return{years:0,months:0,weeks:0,days:0};const d={year:r,month:e},h={year:n,month:i,day:o};let u=h.year-d.year,m=ur(r,e,t,u,0,0,0,"constrain"),f=-Kt(m.year,m.month,m.day,n,i,o);if(f===0)return a==="year"?{years:u,months:0,weeks:0,days:0}:{years:0,months:12*u,weeks:0,days:0};let p=h.month-d.month;if(f!==c&&(u-=c,p+=12*c),m=ur(r,e,t,u,p,0,0,"constrain"),f=-Kt(m.year,m.month,m.day,n,i,o),f===0)return a==="year"?{years:u,months:p,weeks:0,days:0}:{years:0,months:p+12*u,weeks:0,days:0};f!==c&&(p-=c,p===-c&&(u-=c,p=11*c),m=ur(r,e,t,u,p,0,0,"constrain"));let g=0;return g=m.month===h.month?h.day-m.day:c<0?-m.day-(Bt(h.year,h.month)-h.day):h.day+(Bt(m.year,m.month)-m.day),a==="month"&&(p+=12*u,u=0),{years:u,months:p,weeks:0,days:g}}case"week":case"day":{let c,d,h;Kt(r,e,t,n,i,o)<0?(d={year:r,month:e,day:t},c={year:n,month:i,day:o},h=1):(d={year:n,month:i,day:o},c={year:r,month:e,day:t},h=-1);let u=Ln(c.year,c.month,c.day)-Ln(d.year,d.month,d.day);for(let f=d.year;f<c.year;++f)u+=tr(f)?366:365;let m=0;return a==="week"&&(m=it(u/7),u%=7),m*=h,u*=h,{years:0,months:0,weeks:m,days:u}}default:throw new Error("assert not reached")}}function qs(r,e,t,n,i,o,a,c,d,h,u,m){let f=a-r,p=c-e,g=d-t,y=h-n,v=u-i,w=m-o;const b=Mt(0,0,0,0,f,p,g,y,v,w);f*=b,p*=b,g*=b,y*=b,v*=b,w*=b;let T=0;if({deltaDays:T,hour:f,minute:p,second:g,millisecond:y,microsecond:v,nanosecond:w}=Yt(f,p,g,y,v,w),T!=0)throw new Error("assertion failure in DifferenceTime: _bt_.[[Days]] should be 0");return f*=b,p*=b,g*=b,y*=b,v*=b,w*=b,{hours:f,minutes:p,seconds:g,milliseconds:y,microseconds:v,nanoseconds:w}}function Gi(r,e,t,n,i,o){const a=l.subtract(e,r);let c=0,d=0,h=l.toNumber(l.remainder(a,ne)),u=l.toNumber(l.remainder(l.divide(a,ne),ne)),m=l.toNumber(l.remainder(l.divide(a,ut),ne)),f=l.toNumber(l.divide(a,Pt));return{hours:c,minutes:d,seconds:f,milliseconds:m,microseconds:u,nanoseconds:h}=Zt(0,0,0,0,0,0,f,m,u,h,t,n,o),Tt(0,c,d,f,m,u,h,i)}function Vi(r,e,t,n,i,o,a,c,d,h,u,m,f,p,g,y,v,w,b,T,C){let S=r,D=e,E=t,{hours:$,minutes:M,seconds:Q,milliseconds:X,microseconds:J,nanoseconds:N}=qs(n,i,o,a,c,d,f,p,g,y,v,w);const Y=Mt(0,0,0,0,$,M,Q,X,J,N);Kt(h,u,m,S,D,E)===-Y&&({year:S,month:D,day:E}=ii(S,D,E-Y),{hours:$,minutes:M,seconds:Q,milliseconds:X,microseconds:J,nanoseconds:N}=Tt(-Y,$,M,Q,X,J,N,T));const R=vt(S,D,E,b),A=vt(h,u,m,b),V=pr("day",T),Ee=ir(C);Ee.largestUnit=V;let{years:Se,months:Ie,weeks:Te,days:at}=Xt(b,R,A,Ee);return{days:at,hours:$,minutes:M,seconds:Q,milliseconds:X,microseconds:J,nanoseconds:N}=Tt(at,$,M,Q,X,J,N,T),{years:Se,months:Ie,weeks:Te,days:at,hours:$,minutes:M,seconds:Q,milliseconds:X,microseconds:J,nanoseconds:N}}function Ws(r,e,t,n,i,o){const a=l.subtract(e,r);if(l.equal(a,we))return{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};const c=k("%Temporal.Instant%"),d=new c(r),h=new c(e),u=ht(t,d,n),m=ht(t,h,n);let{years:f,months:p,weeks:g,days:y}=Vi(s(u,I),s(u,O),s(u,P),s(u,U),s(u,z),s(u,B),s(u,q),s(u,W),s(u,Z),s(m,I),s(m,O),s(m,P),s(m,U),s(m,z),s(m,B),s(m,q),s(m,W),s(m,Z),n,i,o);const v=yt(d,t,n,f,p,g,0,0,0,0,0,0,0);let w=l.subtract(e,v);const b=xe(v,t,n);({nanoseconds:w,days:y}=Wi(w,b));const{hours:T,minutes:C,seconds:S,milliseconds:D,microseconds:E,nanoseconds:$}=Tt(0,0,0,0,0,0,l.toNumber(w),"hour");return{years:f,months:p,weeks:g,days:y,hours:T,minutes:C,seconds:S,milliseconds:D,microseconds:E,nanoseconds:$}}function Gr(r,e,t,n,i,o){const a=cn.reduce(((p,g)=>{const y=g[0],v=g[1],w=g[2];return t!=="datetime"&&w!==t||n.includes(v)||p.push(v,y),p}),[]);let c=ot(e,"largestUnit",t,"auto");if(n.includes(c))throw new RangeError(`largestUnit must be one of ${a.join(", ")}, not ${c}`);const d=Wr(e);let h=Dt(e,"trunc");r==="since"&&(h=(function(g){switch(g){case"ceil":return"floor";case"floor":return"ceil";case"halfCeil":return"halfFloor";case"halfFloor":return"halfCeil";default:return g}})(h));const u=ot(e,"smallestUnit",t,i);if(n.includes(u))throw new RangeError(`smallestUnit must be one of ${a.join(", ")}, not ${u}`);const m=pr(o,u);if(c==="auto"&&(c=m),pr(c,u)!==c)throw new RangeError(`largestUnit ${c} cannot be smaller than smallestUnit ${u}`);const f={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[u];return f!==void 0&&Zr(d,f,!1),{largestUnit:c,roundingIncrement:d,roundingMode:h,smallestUnit:u}}function No(r,e,t,n){const i=r==="since"?-1:1,o=Et(t),a=Gr(r,ir(n),"time",[],"nanosecond","second"),c=s(e,j),d=s(o,j);let{hours:h,minutes:u,seconds:m,milliseconds:f,microseconds:p,nanoseconds:g}=Gi(c,d,a.roundingIncrement,a.smallestUnit,a.largestUnit,a.roundingMode);return new(k("%Temporal.Duration%"))(0,0,0,0,i*h,i*u,i*m,i*f,i*p,i*g)}function jo(r,e,t,n){const i=r==="since"?-1:1,o=se(t),a=s(e,_);ti(a,s(o,_),"compute difference between dates");const c=ir(n),d=Gr(r,c,"date",[],"day","day");c.largestUnit=d.largestUnit;let{years:h,months:u,weeks:m,days:f}=Xt(a,e,o,c);return d.smallestUnit==="day"&&d.roundingIncrement===1||({years:h,months:u,weeks:m,days:f}=Zt(h,u,m,f,0,0,0,0,0,0,d.roundingIncrement,d.smallestUnit,d.roundingMode,e)),new(k("%Temporal.Duration%"))(i*h,i*u,i*m,i*f,0,0,0,0,0,0)}function Ao(r,e,t,n){const i=r==="since"?-1:1,o=dr(t),a=s(e,_);ti(a,s(o,_),"compute difference between dates");const c=ir(n),d=Gr(r,c,"datetime",[],"nanosecond","day");let{years:h,months:u,weeks:m,days:f,hours:p,minutes:g,seconds:y,milliseconds:v,microseconds:w,nanoseconds:b}=Vi(s(e,I),s(e,O),s(e,P),s(e,U),s(e,z),s(e,B),s(e,q),s(e,W),s(e,Z),s(o,I),s(o,O),s(o,P),s(o,U),s(o,z),s(o,B),s(o,q),s(o,W),s(o,Z),a,d.largestUnit,c);const T=Lr(e);return{years:h,months:u,weeks:m,days:f,hours:p,minutes:g,seconds:y,milliseconds:v,microseconds:w,nanoseconds:b}=Zt(h,u,m,f,p,g,y,v,w,b,d.roundingIncrement,d.smallestUnit,d.roundingMode,T),{days:f,hours:p,minutes:g,seconds:y,milliseconds:v,microseconds:w,nanoseconds:b}=Tt(f,p,g,y,v,w,b,d.largestUnit),new(k("%Temporal.Duration%"))(i*h,i*u,i*m,i*f,i*p,i*g,i*y,i*v,i*w,i*b)}function Lo(r,e,t,n){const i=r==="since"?-1:1,o=Ut(t),a=Gr(r,ir(n),"time",[],"nanosecond","hour");let{hours:c,minutes:d,seconds:h,milliseconds:u,microseconds:m,nanoseconds:f}=qs(s(e,U),s(e,z),s(e,B),s(e,q),s(e,W),s(e,Z),s(o,U),s(o,z),s(o,B),s(o,q),s(o,W),s(o,Z));return{hours:c,minutes:d,seconds:h,milliseconds:u,microseconds:m,nanoseconds:f}=Zt(0,0,0,0,c,d,h,u,m,f,a.roundingIncrement,a.smallestUnit,a.roundingMode),{hours:c,minutes:d,seconds:h,milliseconds:u,microseconds:m,nanoseconds:f}=Tt(0,c,d,h,u,m,f,a.largestUnit),new(k("%Temporal.Duration%"))(0,0,0,0,i*c,i*d,i*h,i*u,i*m,i*f)}function Yo(r,e,t,n){const i=r==="since"?-1:1,o=Qr(t),a=s(e,_);ti(a,s(o,_),"compute difference between months");const c=ir(n),d=Gr(r,c,"date",["week","day"],"month","year");c.largestUnit=d.largestUnit;const h=ke(a,["monthCode","year"]),u=G(e,h,[]);u.day=1;const m=Wt(a,u),f=G(o,h,[]);f.day=1;const p=Wt(a,f);let{years:g,months:y}=Xt(a,m,p,c);return d.smallestUnit==="month"&&d.roundingIncrement===1||({years:g,months:y}=Zt(g,y,0,0,0,0,0,0,0,0,d.roundingIncrement,d.smallestUnit,d.roundingMode,m)),new(k("%Temporal.Duration%"))(i*g,i*y,0,0,0,0,0,0,0,0)}function Uo(r,e,t,n){const i=r==="since"?-1:1,o=Xr(t),a=s(e,_);ti(a,s(o,_),"compute difference between dates");const c=ir(n),d=Gr(r,c,"datetime",[],"nanosecond","hour");c.largestUnit=d.largestUnit;const h=s(e,j),u=s(o,j);let m,f,p,g,y,v,w,b,T,C;if(d.largestUnit!=="year"&&d.largestUnit!=="month"&&d.largestUnit!=="week"&&d.largestUnit!=="day")m=0,f=0,p=0,g=0,{hours:y,minutes:v,seconds:w,milliseconds:b,microseconds:T,nanoseconds:C}=Gi(h,u,d.roundingIncrement,d.smallestUnit,d.largestUnit,d.roundingMode);else{const S=s(e,oe);if(!Ps(S,s(o,oe)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");({years:m,months:f,weeks:p,days:g,hours:y,minutes:v,seconds:w,milliseconds:b,microseconds:T,nanoseconds:C}=Ws(h,u,S,a,d.largestUnit,c)),{years:m,months:f,weeks:p,days:g,hours:y,minutes:v,seconds:w,milliseconds:b,microseconds:T,nanoseconds:C}=Zt(m,f,p,g,y,v,w,b,T,C,d.roundingIncrement,d.smallestUnit,d.roundingMode,e),{years:m,months:f,weeks:p,days:g,hours:y,minutes:v,seconds:w,milliseconds:b,microseconds:T,nanoseconds:C}=Vs(m,f,p,g,y,v,w,b,T,C,d.roundingIncrement,d.smallestUnit,d.roundingMode,e)}return new(k("%Temporal.Duration%"))(i*m,i*f,i*p,i*g,i*y,i*v,i*w,i*b,i*T,i*C)}function ur(r,e,t,n,i,o,a,c){let d=r,h=e,u=t,m=o,f=a;return d+=n,h+=i,{year:d,month:h}=kn(d,h),{year:d,month:h,day:u}=Fn(d,h,u,c),f+=7*m,u+=f,{year:d,month:h,day:u}=ii(d,h,u),{year:d,month:h,day:u}}function Zs(r,e,t,n,i,o,a,c,d,h,u,m){let f=r,p=e,g=t,y=n,v=i,w=o;f+=a,p+=c,g+=d,y+=h,v+=u,w+=m;let b=0;return{deltaDays:b,hour:f,minute:p,second:g,millisecond:y,microsecond:v,nanosecond:w}=Yt(f,p,g,y,v,w),{deltaDays:b,hour:f,minute:p,second:g,millisecond:y,microsecond:v,nanosecond:w}}function Hs(r,e,t,n,i,o,a,c,d,h,u,m,f,p,g,y,v,w,b,T,C){const S=pr(_i(r,e,t,n,i,o,a,c,d,h),_i(u,m,f,p,g,y,v,w,b,T));let D,E,$,M,Q,X,J,N,Y,R;if(C)if(K(C)){const A=k("%Temporal.Duration%"),V=s(C,_),Ee=new A(r,e,t,n,0,0,0,0,0,0),Se=new A(u,m,f,p,0,0,0,0,0,0),Ie=typeof V!="string"?ie(V,"dateAdd"):void 0,Te=Ne(V,C,Ee,void 0,Ie),at=Ne(V,Te,Se,void 0,Ie),St=pr("day",S),It=Be(null);It.largestUnit=St,{years:D,months:E,weeks:$,days:M}=Xt(V,C,at,It),{days:M,hours:Q,minutes:X,seconds:J,milliseconds:N,microseconds:Y,nanoseconds:R}=Tt(M,l.add(l.BigInt(i),l.BigInt(g)),l.add(l.BigInt(o),l.BigInt(y)),l.add(l.BigInt(a),l.BigInt(v)),l.add(l.BigInt(c),l.BigInt(w)),l.add(l.BigInt(d),l.BigInt(b)),l.add(l.BigInt(h),l.BigInt(T)),S)}else{const A=k("%Temporal.Instant%"),V=s(C,oe),Ee=s(C,_),Se=yt(s(C,Ue),V,Ee,r,e,t,n,i,o,a,c,d,h),Ie=yt(new A(Se),V,Ee,u,m,f,p,g,y,v,w,b,T);S!=="year"&&S!=="month"&&S!=="week"&&S!=="day"?(D=0,E=0,$=0,M=0,{hours:Q,minutes:X,seconds:J,milliseconds:N,microseconds:Y,nanoseconds:R}=Gi(s(C,j),Ie,1,"nanosecond",S,"halfExpand")):{years:D,months:E,weeks:$,days:M,hours:Q,minutes:X,seconds:J,milliseconds:N,microseconds:Y,nanoseconds:R}=Ws(s(C,j),Ie,V,Ee,S,Be(null))}else{if(S==="year"||S==="month"||S==="week")throw new RangeError("relativeTo is required for years, months, or weeks arithmetic");D=E=$=0,{days:M,hours:Q,minutes:X,seconds:J,milliseconds:N,microseconds:Y,nanoseconds:R}=Tt(n+p,l.add(l.BigInt(i),l.BigInt(g)),l.add(l.BigInt(o),l.BigInt(y)),l.add(l.BigInt(a),l.BigInt(v)),l.add(l.BigInt(c),l.BigInt(w)),l.add(l.BigInt(d),l.BigInt(b)),l.add(l.BigInt(h),l.BigInt(T)),S)}return Yn(D,E,$,M,Q,X,J,N,Y,R),{years:D,months:E,weeks:$,days:M,hours:Q,minutes:X,seconds:J,milliseconds:N,microseconds:Y,nanoseconds:R}}function ki(r,e,t,n,i,o,a){let c=we;c=l.add(c,l.BigInt(a)),c=l.add(c,l.multiply(l.BigInt(o),ne)),c=l.add(c,l.multiply(l.BigInt(i),ut)),c=l.add(c,l.multiply(l.BigInt(n),Pt)),c=l.add(c,l.multiply(l.BigInt(t),l.BigInt(6e10))),c=l.add(c,l.multiply(l.BigInt(e),l.BigInt(36e11)));const d=l.add(r,c);return lr(d),d}function Si(r,e,t,n,i,o,a,c,d,h,u,m,f,p,g,y,v,w,b,T,C){let S=p,{deltaDays:D,hour:E,minute:$,second:M,millisecond:Q,microsecond:X,nanosecond:J}=Zs(n,i,o,a,c,d,g,y,v,w,b,T);S+=D;const N=k("%Temporal.Duration%"),Y=Ne(h,vt(r,e,t,h),new N(u,m,f,S,0,0,0,0,0,0),C);return{year:s(Y,I),month:s(Y,O),day:s(Y,P),hour:E,minute:$,second:M,millisecond:Q,microsecond:X,nanosecond:J}}function yt(r,e,t,n,i,o,a,c,d,h,u,m,f,p){const g=k("%Temporal.Duration%");if(Mt(n,i,o,a,0,0,0,0,0,0)===0)return ki(s(r,j),c,d,h,u,m,f);const y=ht(e,r,t),v=Ne(t,vt(s(y,I),s(y,O),s(y,P),t),new g(n,i,o,a,0,0,0,0,0,0),p),w=rt(s(v,I),s(v,O),s(v,P),s(y,U),s(y,z),s(y,B),s(y,q),s(y,W),s(y,Z),t);return ki(s(Je(e,w,"compatible"),j),c,d,h,u,m,f)}function zo(r,e,t,n){const i=r==="subtract"?-1:1;let{years:o,months:a,weeks:c,days:d,hours:h,minutes:u,seconds:m,milliseconds:f,microseconds:p,nanoseconds:g}=wr(t);const y=Dn(ee(n));return{years:o,months:a,weeks:c,days:d,hours:h,minutes:u,seconds:m,milliseconds:f,microseconds:p,nanoseconds:g}=Hs(s(e,qe),s(e,Me),s(e,tt),s(e,We),s(e,Ze),s(e,He),s(e,Ge),s(e,Ve),s(e,Ke),s(e,Qe),i*o,i*a,i*c,i*d,i*h,i*u,i*m,i*f,i*p,i*g,y),new(k("%Temporal.Duration%"))(o,a,c,d,h,u,m,f,p,g)}function Bo(r,e,t){const n=r==="subtract"?-1:1,{hours:i,minutes:o,seconds:a,milliseconds:c,microseconds:d,nanoseconds:h}=(function(f,p){let g=wr(f);for(const y of p)if(g[y]!==0)throw new RangeError(`Duration field ${y} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);return g})(t,["years","months","weeks","days"]),u=ki(s(e,j),n*i,n*o,n*a,n*c,n*d,n*h);return new(k("%Temporal.Instant%"))(u)}function qo(r,e,t,n){const i=r==="subtract"?-1:1,{years:o,months:a,weeks:c,days:d,hours:h,minutes:u,seconds:m,milliseconds:f,microseconds:p,nanoseconds:g}=wr(t),y=ee(n),v=s(e,_),{year:w,month:b,day:T,hour:C,minute:S,second:D,millisecond:E,microsecond:$,nanosecond:M}=Si(s(e,I),s(e,O),s(e,P),s(e,U),s(e,z),s(e,B),s(e,q),s(e,W),s(e,Z),v,i*o,i*a,i*c,i*d,i*h,i*u,i*m,i*f,i*p,i*g,y);return rt(w,b,T,C,S,D,E,$,M,v)}function Wo(r,e,t){const n=r==="subtract"?-1:1,{hours:i,minutes:o,seconds:a,milliseconds:c,microseconds:d,nanoseconds:h}=wr(t);let{hour:u,minute:m,second:f,millisecond:p,microsecond:g,nanosecond:y}=Zs(s(e,U),s(e,z),s(e,B),s(e,q),s(e,W),s(e,Z),n*i,n*o,n*a,n*c,n*d,n*h);return{hour:u,minute:m,second:f,millisecond:p,microsecond:g,nanosecond:y}=Zn(u,m,f,p,g,y,"reject"),new(k("%Temporal.PlainTime%"))(u,m,f,p,g,y)}function Zo(r,e,t,n){let i=wr(t);r==="subtract"&&(i={years:-i.years,months:-i.months,weeks:-i.weeks,days:-i.days,hours:-i.hours,minutes:-i.minutes,seconds:-i.seconds,milliseconds:-i.milliseconds,microseconds:-i.microseconds,nanoseconds:-i.nanoseconds});let{years:o,months:a,weeks:c,days:d,hours:h,minutes:u,seconds:m,milliseconds:f,microseconds:p,nanoseconds:g}=i;({days:d}=Tt(d,h,u,m,f,p,g,"day"));const y=ee(n),v=s(e,_),w=ke(v,["monthCode","year"]),b=G(e,w,[]),T=Be(null);Sr(T,b,[]),b.day=1;let C=Wt(v,b);const S=Mt(o,a,c,d,0,0,0,0,0,0),D=ie(v,"dateAdd"),E=k("%Temporal.Duration%");if(S<0){const Q=Ne(v,C,new E(0,1,0,0,0,0,0,0,0,0),void 0,D),X=Ne(v,Q,new E(0,0,0,-1,0,0,0,0,0,0),void 0,D);T.day=pn(v,X),C=Wt(v,T)}const $=new E(o,a,c,d,0,0,0,0,0,0),M=ir(y);return yr(v,G(Ne(v,C,$,y,D),w,[]),M)}function Ho(r,e,t,n){const i=r==="subtract"?-1:1,{years:o,months:a,weeks:c,days:d,hours:h,minutes:u,seconds:m,milliseconds:f,microseconds:p,nanoseconds:g}=wr(t),y=ee(n),v=s(e,oe),w=s(e,_);return xe(yt(s(e,Ue),v,w,i*o,i*a,i*c,i*d,i*h,i*u,i*m,i*f,i*p,i*g,y),v,w)}function dt(r,e,t){if(l.equal(e,Br))return r;let{quotient:n,remainder:i}=_e(r,e);if(l.equal(i,we))return r;const o=l.lessThan(i,we)?-1:1,a=Ct(l.multiply(i,l.BigInt(2))),c=l.equal(a,e),d=l.greaterThan(a,e);switch(t){case"ceil":o>0&&(n=l.add(n,l.BigInt(o)));break;case"floor":o<0&&(n=l.add(n,l.BigInt(o)));break;case"expand":n=l.add(n,l.BigInt(o));break;case"trunc":break;case"halfCeil":(d||c&&o>0)&&(n=l.add(n,l.BigInt(o)));break;case"halfFloor":(d||c&&o<0)&&(n=l.add(n,l.BigInt(o)));break;case"halfExpand":(d||c)&&(n=l.add(n,l.BigInt(o)));break;case"halfTrunc":d&&(n=l.add(n,l.BigInt(o)));break;case"halfEven":(d||c&&l.toNumber(l.remainder(Ct(n),l.BigInt(2)))===1)&&(n=l.add(n,l.BigInt(o)))}return l.multiply(n,e)}function Un(r,e,t,n){let{remainder:i}=ar(r,Ft);const o=l.subtract(r,i),a=dt(i,l.BigInt(Xs[t]*e),n);return l.add(o,a)}function Ki(r,e,t,n,i,o,a,c,d,h,u,m,f=864e11){const{deltaDays:p,hour:g,minute:y,second:v,millisecond:w,microsecond:b,nanosecond:T}=Qi(n,i,o,a,c,d,h,u,m,f),{year:C,month:S,day:D}=ii(r,e,t+p);return{year:C,month:S,day:D,hour:g,minute:y,second:v,millisecond:w,microsecond:b,nanosecond:T}}function Qi(r,e,t,n,i,o,a,c,d,h=864e11){let u=we;switch(c){case"day":case"hour":u=l.BigInt(r);case"minute":u=l.add(l.multiply(u,Ot),l.BigInt(e));case"second":u=l.add(l.multiply(u,Ot),l.BigInt(t));case"millisecond":u=l.add(l.multiply(u,ne),l.BigInt(n));case"microsecond":u=l.add(l.multiply(u,ne),l.BigInt(i));case"nanosecond":u=l.add(l.multiply(u,ne),l.BigInt(o))}const m=c==="day"?h:Xs[c],f=dt(u,l.BigInt(m*a),d),p=l.toNumber(l.divide(f,l.BigInt(m)));switch(c){case"day":return{deltaDays:p,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return Yt(p,0,0,0,0,0);case"minute":return Yt(r,p,0,0,0,0);case"second":return Yt(r,e,p,0,0,0);case"millisecond":return Yt(r,e,t,p,0,0);case"microsecond":return Yt(r,e,t,n,p,0);case"nanosecond":return Yt(r,e,t,n,i,p);default:throw new Error(`Invalid unit ${c}`)}}function Sn(r,e){return Hi(s(r,I),s(r,O),s(r,P),s(e,I),s(e,O),s(e,P),"day").days}function Ye(r,e,t,n){const i=Ne(r,e,t,void 0,n);return{relativeTo:i,days:Sn(e,i)}}function Gs(r,e,t,n,i){const o=s(r,oe),a=s(r,_);return xe(yt(s(r,Ue),o,a,e,t,n,i,0,0,0,0,0,0),o,a)}function Vs(r,e,t,n,i,o,a,c,d,h,u,m,f,p){let g=r,y=e,v=t,w=n,b=i,T=o,C=a,S=c,D=d,E=h;if(!F(p)||m==="year"||m==="month"||m==="week"||m==="day"||m==="nanosecond"&&u===1)return{years:g,months:y,weeks:v,days:w,hours:b,minutes:T,seconds:C,milliseconds:S,microseconds:D,nanoseconds:E};let $=Yr(0,b,T,C,S,D,E,0);const M=Fr(l.toNumber($)),Q=s(p,oe),X=s(p,_),J=yt(s(p,Ue),Q,X,g,y,v,w,0,0,0,0,0,0),N=yt(new(k("%Temporal.Instant%"))(J),Q,X,0,0,0,M,0,0,0,0,0,0),Y=l.subtract(N,J);return l.greaterThanOrEqual(l.multiply(l.subtract($,Y),l.BigInt(M)),we)&&({years:g,months:y,weeks:v,days:w}=Hs(g,y,v,w,0,0,0,0,0,0,0,0,0,M,0,0,0,0,0,0,p),$=Un(l.subtract($,Y),u,m,f),{hours:b,minutes:T,seconds:C,milliseconds:S,microseconds:D,nanoseconds:E}=Tt(0,0,0,0,0,0,l.toNumber($),"hour")),{years:g,months:y,weeks:v,days:w,hours:b,minutes:T,seconds:C,milliseconds:S,microseconds:D,nanoseconds:E}}function Zt(r,e,t,n,i,o,a,c,d,h,u,m,f,p){let g=r,y=e,v=t,w=n,b=i,T=o,C=a,S=c,D=d,E=l.BigInt(h);const $=k("%Temporal.Duration%");let M,Q,X,J,N=p;if(N){if(F(N))Q=N,N=se(N);else if(!K(N))throw new TypeError("starting point must be PlainDate or ZonedDateTime");M=s(N,_)}if(m==="year"||m==="month"||m==="week"||m==="day"){let Y,R,A;E=Yr(0,b,T,C,S,D,h,0),Q&&(Y=Gs(Q,g,y,v,w)),{days:R,nanoseconds:E,dayLengthNs:A}=Wi(E,Y),X=l.BigInt(A),w+=R,b=T=C=S=D=0}switch(m){case"year":{if(!M)throw new RangeError("A starting point is required for years rounding");const Y=new $(g),R=typeof M!="string"?ie(M,"dateAdd"):void 0,A=Ne(M,N,Y,void 0,R),V=Ne(M,N,new $(g,y,v),void 0,R);N=A,w+=Sn(A,V);const Ee=Ne(M,N,new $(0,0,0,w),void 0,R),Se=Be(null);Se.largestUnit="year";const Ie=Xt(M,N,Ee,Se).years;g+=Ie;const Te=N;N=Ne(M,N,new $(Ie),void 0,R),w-=Sn(Te,N);const at=new $(w<0?-1:1);let{days:St}=Ye(M,N,at,R);St=le(St);const It=l.multiply(l.BigInt(St),X);E=l.add(l.add(l.multiply(It,l.BigInt(g)),l.multiply(l.BigInt(w),X)),E);const lt=dt(E,l.multiply(It,l.BigInt(u)),f);J=Rt(E,It),g=l.toNumber(l.divide(lt,It)),E=we,y=v=w=0;break}case"month":{if(!M)throw new RangeError("A starting point is required for months rounding");const Y=new $(g,y),R=typeof M!="string"?ie(M,"dateAdd"):void 0,A=Ne(M,N,Y,void 0,R),V=Ne(M,N,new $(g,y,v),void 0,R);N=A,w+=Sn(A,V);const Ee=Fr(w),Se=new $(0,w<0?-1:1);let Ie;for({relativeTo:N,days:Ie}=Ye(M,N,Se,R);le(w)>=le(Ie);)y+=Ee,w-=Ie,{relativeTo:N,days:Ie}=Ye(M,N,Se,R);Ie=le(Ie);const Te=l.multiply(l.BigInt(Ie),X);E=l.add(l.add(l.multiply(Te,l.BigInt(y)),l.multiply(l.BigInt(w),X)),E);const at=dt(E,l.multiply(Te,l.BigInt(u)),f);J=Rt(E,Te),y=l.toNumber(l.divide(at,Te)),E=we,v=w=0;break}case"week":{if(!M)throw new RangeError("A starting point is required for weeks rounding");const Y=Fr(w),R=new $(0,0,w<0?-1:1),A=typeof M!="string"?ie(M,"dateAdd"):void 0;let V;for({relativeTo:N,days:V}=Ye(M,N,R,A);le(w)>=le(V);)v+=Y,w-=V,{relativeTo:N,days:V}=Ye(M,N,R,A);V=le(V);const Ee=l.multiply(l.BigInt(V),X);E=l.add(l.add(l.multiply(Ee,l.BigInt(v)),l.multiply(l.BigInt(w),X)),E);const Se=dt(E,l.multiply(Ee,l.BigInt(u)),f);J=Rt(E,Ee),v=l.toNumber(l.divide(Se,Ee)),E=we,w=0;break}case"day":{const Y=X;E=l.add(l.multiply(Y,l.BigInt(w)),E);const R=dt(E,l.multiply(Y,l.BigInt(u)),f);J=Rt(E,Y),w=l.toNumber(l.divide(R,Y)),E=we;break}case"hour":{let R=l.multiply(l.BigInt(b),l.BigInt(36e11));R=l.add(R,l.multiply(l.BigInt(T),l.BigInt(6e10))),R=l.add(R,l.multiply(l.BigInt(C),Pt)),R=l.add(R,l.multiply(l.BigInt(S),ut)),R=l.add(R,l.multiply(l.BigInt(D),ne)),R=l.add(R,E),J=Rt(R,l.BigInt(36e11));const A=dt(R,l.BigInt(36e11*u),f);b=l.toNumber(l.divide(A,l.BigInt(36e11))),E=we,T=C=S=D=0;break}case"minute":{let R=l.multiply(l.BigInt(T),l.BigInt(6e10));R=l.add(R,l.multiply(l.BigInt(C),Pt)),R=l.add(R,l.multiply(l.BigInt(S),ut)),R=l.add(R,l.multiply(l.BigInt(D),ne)),R=l.add(R,E),J=Rt(R,l.BigInt(6e10));const A=dt(R,l.BigInt(6e10*u),f);T=l.toNumber(l.divide(A,l.BigInt(6e10))),E=we,C=S=D=0;break}case"second":{let R=l.multiply(l.BigInt(C),Pt);R=l.add(R,l.multiply(l.BigInt(S),ut)),R=l.add(R,l.multiply(l.BigInt(D),ne)),R=l.add(R,E),J=Rt(R,l.BigInt(1e9));const A=dt(R,l.BigInt(1e9*u),f);C=l.toNumber(l.divide(A,l.BigInt(1e9))),E=we,S=D=0;break}case"millisecond":{let R=l.multiply(l.BigInt(S),ut);R=l.add(R,l.multiply(l.BigInt(D),ne)),R=l.add(R,E),J=Rt(R,l.BigInt(1e6));const A=dt(R,l.BigInt(1e6*u),f);S=l.toNumber(l.divide(A,l.BigInt(1e6))),E=we,D=0;break}case"microsecond":{let R=l.multiply(l.BigInt(D),ne);R=l.add(R,E),J=Rt(R,l.BigInt(1e3));const A=dt(R,l.BigInt(1e3*u),f);D=l.toNumber(l.divide(A,l.BigInt(1e3))),E=we;break}case"nanosecond":J=l.toNumber(E),E=dt(l.BigInt(E),l.BigInt(u),f)}return{years:g,months:y,weeks:v,days:w,hours:b,minutes:T,seconds:C,milliseconds:S,microseconds:D,nanoseconds:l.toNumber(E),total:J}}function Kt(r,e,t,n,i,o){for(const[a,c]of[[r,n],[e,i],[t,o]])if(a!==c)return hr(a-c);return 0}function ar(r,e){let{quotient:t,remainder:n}=_e(r,e);return l.lessThan(n,we)&&(t=l.subtract(t,Br),n=l.add(n,e)),{quotient:t,remainder:n}}function Rr(r,e){const{quotient:t,remainder:n}=_e(r,e);return gt(n)||!Pn(r)==!Pn(e)?t:l.subtract(t,Br)}function Rt(r,e){const{quotient:t,remainder:n}=_e(r,e);return l.toNumber(t)+l.toNumber(n)/l.toNumber(e)}function zn(r){const e=Jr(r);return globalThis.BigInt!==void 0?globalThis.BigInt(e.toString(10)):e}function Jr(r){let e=r;if(typeof r=="object"){const t=r[Symbol.toPrimitive];t&&typeof t=="function"&&(e=Wn(t,r,["number"]))}if(typeof e=="number")throw new TypeError("cannot convert number to bigint");return typeof e=="bigint"?l.BigInt(e.toString(10)):l.BigInt(e)}const Xi=(()=>{let r=l.BigInt(Date.now()%1e6);return()=>{const e=l.BigInt(Date.now()),t=l.add(l.multiply(e,ut),r);return r=l.remainder(e,ut),l.greaterThan(t,xr)?xr:l.lessThan(t,rn)?rn:t}})();function Vt(){return new vs().resolvedOptions().timeZone}function hr(r){return r<0?-1:r>0?1:r}function ee(r){if(r===void 0)return Be(null);if(ce(r)&&r!==null)return r;throw new TypeError("Options parameter must be an object, not "+(r===null?"null":typeof r))}function Ur(r,e){const t=Be(null);return t[r]=e,t}function ir(r){const e=Be(null);return Sr(e,ee(r),[]),e}function rr(r,e,t,n){let i=r[e];if(i!==void 0){if(i=et(i),!t.includes(i))throw new RangeError(`${e} must be one of ${t.join(", ")}, not ${i}`);return i}return n}function Ht(r){return Gl.includes(Nt(r))}function Nt(r){return r.replace(/[A-Z]/g,(e=>{const t=e.charCodeAt(0);return String.fromCharCode(t+32)}))}const Ks=new RegExp(`^${ps.source}$`);function Qs(r,e,t,n=r(e),i=r(t)){let o=l.BigInt(e),a=l.BigInt(t),c=n,d=i;for(;l.greaterThan(l.subtract(a,o),Br);){const h=l.divide(l.add(o,a),l.BigInt(2)),u=r(h);if(u===c)o=h,c=u;else{if(u!==d)throw new Error(`invalid state in bisection ${c} - ${u} - ${d}`);a=h,d=u}}return a}const Xs={hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},Js=Symbol("date"),ea=Symbol("ym"),ta=Symbol("md"),ra=Symbol("time"),na=Symbol("datetime"),ia=Symbol("instant"),$r=Symbol("original"),Cr=Symbol("timezone"),wt=Symbol("calendar-id"),oa=Symbol("locale"),Ii=Symbol("options"),en=r=>({value:r,enumerable:!0,writable:!1,configurable:!0}),Or=globalThis.Intl.DateTimeFormat,Gt=Object.assign,Jl=Object.prototype.hasOwnProperty,ec=Reflect.apply;function _r(r,e){let t=r[e];return typeof t=="function"&&(t=new Or(r[oa],t(r[Ii])),r[e]=t),t}function vr(r,e={}){if(!(this instanceof vr))return new vr(r,e);const t=e!==void 0,n=t?Gt({},e):{},i=new Or(r,n),o=i.resolvedOptions();if(t){const a=Gt({},o);for(const c in a)ec(Jl,n,[c])||delete a[c];this[Ii]=a}else this[Ii]=n;this[oa]=o.locale,this[$r]=i,this[Cr]=o.timeZone,this[wt]=o.calendar,this[Js]=ic,this[ea]=rc,this[ta]=nc,this[ra]=tc,this[na]=oc,this[ia]=sc}Object.defineProperty(vr,"name",{writable:!0,value:"DateTimeFormat"}),vr.supportedLocalesOf=function(r,e){return Or.supportedLocalesOf(r,e)};const hi={resolvedOptions:en((function(){return this[$r].resolvedOptions()})),format:en((function(e,...t){let{instant:n,formatter:i}=Pr(e,this);return n&&i?i.format(n.epochMilliseconds):this[$r].format(e,...t)})),formatRange:en((function(e,t){if(zr(e)||zr(t)){if(!sa(e,t))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");const{instant:n,formatter:i}=Pr(e,this),{instant:o,formatter:a}=Pr(t,this);if(n&&o&&i&&a&&i===a)return i.formatRange(n.epochMilliseconds,o.epochMilliseconds)}return this[$r].formatRange(e,t)}))};"formatToParts"in Or.prototype&&(hi.formatToParts=en((function(e,...t){let{instant:n,formatter:i}=Pr(e,this);return n&&i?i.formatToParts(n.epochMilliseconds):this[$r].formatToParts(e,...t)}))),"formatRangeToParts"in Or.prototype&&(hi.formatRangeToParts=en((function(e,t){if(zr(e)||zr(t)){if(!sa(e,t))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");const{instant:n,formatter:i}=Pr(e,this),{instant:o,formatter:a}=Pr(t,this);if(n&&o&&i&&a&&i===a)return i.formatRangeToParts(n.epochMilliseconds,o.epochMilliseconds)}return this[$r].formatRangeToParts(e,t)}))),vr.prototype=Object.create(Or.prototype,hi),Object.defineProperty(vr,"prototype",{writable:!1,enumerable:!1,configurable:!1});const or=vr;function vn(r={},e={}){const t=Gt({},r);for(const n of["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"])t[n]=n in e?e[n]:t[n],t[n]!==!1&&t[n]!==void 0||delete t[n];return t}function tc(r){let e=vn(r,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});return eo(e)||(e=Gt({},e,{hour:"numeric",minute:"numeric",second:"numeric"})),e}function rc(r){let e=vn(r,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"year"in e||"month"in e||(e=Gt(e,{year:"numeric",month:"numeric"})),e}function nc(r){let e=vn(r,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"month"in e||"day"in e||(e=Gt({},e,{month:"numeric",day:"numeric"})),e}function ic(r){let e=vn(r,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});return Ji(e)||(e=Gt({},e,{year:"numeric",month:"numeric",day:"numeric"})),e}function oc(r){let e=vn(r,{timeZoneName:!1});return eo(e)||Ji(e)||(e=Gt({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function sc(r){let e=r;return eo(e)||Ji(e)||(e=Gt({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function Ji(r){return"year"in r||"month"in r||"day"in r||"weekday"in r||"dateStyle"in r}function eo(r){return"hour"in r||"minute"in r||"second"in r||"timeStyle"in r||"dayPeriod"in r}function zr(r){return K(r)||ve(r)||L(r)||F(r)||re(r)||$e(r)||Re(r)}function sa(r,e){return!(!zr(r)||!zr(e))&&!(ve(r)&&!ve(e))&&!(K(r)&&!K(e))&&!(L(r)&&!L(e))&&!(F(r)&&!F(e))&&!(re(r)&&!re(e))&&!($e(r)&&!$e(e))&&!(Re(r)&&!Re(e))}function Pr(r,e){const t=k("%Temporal.PlainDateTime%");if(ve(r)){const n=new t(1970,1,1,s(r,U),s(r,z),s(r,B),s(r,q),s(r,W),s(r,Z),e[wt]);return{instant:Je(e[Cr],n,"compatible"),formatter:_r(e,ra)}}if(re(r)){const n=s(r,I),i=s(r,O),o=s(r,P),a=Ae(s(r,_));if(a!==e[wt])throw new RangeError(`cannot format PlainYearMonth with calendar ${a} in locale with calendar ${e[wt]}`);const c=new t(n,i,o,12,0,0,0,0,0,a);return{instant:Je(e[Cr],c,"compatible"),formatter:_r(e,ea)}}if($e(r)){const n=s(r,I),i=s(r,O),o=s(r,P),a=Ae(s(r,_));if(a!==e[wt])throw new RangeError(`cannot format PlainMonthDay with calendar ${a} in locale with calendar ${e[wt]}`);const c=new t(n,i,o,12,0,0,0,0,0,a);return{instant:Je(e[Cr],c,"compatible"),formatter:_r(e,ta)}}if(K(r)){const n=s(r,I),i=s(r,O),o=s(r,P),a=Ae(s(r,_));if(a!=="iso8601"&&a!==e[wt])throw new RangeError(`cannot format PlainDate with calendar ${a} in locale with calendar ${e[wt]}`);const c=new t(n,i,o,12,0,0,0,0,0,e[wt]);return{instant:Je(e[Cr],c,"compatible"),formatter:_r(e,Js)}}if(L(r)){const n=s(r,I),i=s(r,O),o=s(r,P),a=s(r,U),c=s(r,z),d=s(r,B),h=s(r,q),u=s(r,W),m=s(r,Z),f=Ae(s(r,_));if(f!=="iso8601"&&f!==e[wt])throw new RangeError(`cannot format PlainDateTime with calendar ${f} in locale with calendar ${e[wt]}`);let p=r;return f==="iso8601"&&(p=new t(n,i,o,a,c,d,h,u,m,e[wt])),{instant:Je(e[Cr],p,"compatible"),formatter:_r(e,na)}}if(F(r))throw new TypeError("Temporal.ZonedDateTime not supported in DateTimeFormat methods. Use toLocaleString() instead.");return Re(r)?{instant:r,formatter:_r(e,ia)}:{}}class bt{constructor(e){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const t=Jr(e);lr(t),At(this),H(this,j,t)}get epochSeconds(){if(!Re(this))throw new TypeError("invalid receiver");const e=s(this,j);return l.toNumber(Rr(e,Pt))}get epochMilliseconds(){if(!Re(this))throw new TypeError("invalid receiver");const e=l.BigInt(s(this,j));return l.toNumber(Rr(e,ut))}get epochMicroseconds(){if(!Re(this))throw new TypeError("invalid receiver");return zn(Rr(l.BigInt(s(this,j)),ne))}get epochNanoseconds(){if(!Re(this))throw new TypeError("invalid receiver");return zn(l.BigInt(s(this,j)))}add(e){if(!Re(this))throw new TypeError("invalid receiver");return Bo("add",this,e)}subtract(e){if(!Re(this))throw new TypeError("invalid receiver");return Bo("subtract",this,e)}until(e,t){if(!Re(this))throw new TypeError("invalid receiver");return No("until",this,e,t)}since(e,t){if(!Re(this))throw new TypeError("invalid receiver");return No("since",this,e,t)}round(e){if(!Re(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?Ur("smallestUnit",e):ee(e),n=Wr(t),i=Dt(t,"halfExpand"),o=ot(t,"smallestUnit","time",fr);Zr(n,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[o],!0);const a=Un(s(this,j),n,o,i);return new bt(a)}equals(e){if(!Re(this))throw new TypeError("invalid receiver");const t=Et(e),n=s(this,j),i=s(t,j);return l.equal(l.BigInt(n),l.BigInt(i))}toString(e){if(!Re(this))throw new TypeError("invalid receiver");const t=ee(e),n=un(t),i=Dt(t,"trunc"),o=ot(t,"smallestUnit","time",void 0);if(o==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let a=t.timeZone;a!==void 0&&(a=ze(a));const{precision:c,unit:d,increment:h}=hn(o,n),u=Un(s(this,j),h,d,i);return So(new bt(u),a,c)}toJSON(){if(!Re(this))throw new TypeError("invalid receiver");return So(this,void 0,"auto")}toLocaleString(e,t){if(!Re(this))throw new TypeError("invalid receiver");return new or(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.Instant")}toZonedDateTime(e){if(!Re(this))throw new TypeError("invalid receiver");if(!ce(e))throw new TypeError("invalid argument in toZonedDateTime");const t=e.calendar;if(t===void 0)throw new TypeError("missing calendar property in toZonedDateTime");const n=st(t),i=e.timeZone;if(i===void 0)throw new TypeError("missing timeZone property in toZonedDateTime");const o=ze(i);return xe(s(this,j),o,n)}toZonedDateTimeISO(e){if(!Re(this))throw new TypeError("invalid receiver");const t=ze(e);return xe(s(this,j),t,"iso8601")}static fromEpochSeconds(e){const t=Nr(e),n=l.multiply(l.BigInt(t),Pt);return lr(n),new bt(n)}static fromEpochMilliseconds(e){const t=Nr(e),n=l.multiply(l.BigInt(t),ut);return lr(n),new bt(n)}static fromEpochMicroseconds(e){const t=Jr(e),n=l.multiply(t,ne);return lr(n),new bt(n)}static fromEpochNanoseconds(e){const t=Jr(e);return lr(t),new bt(t)}static from(e){return Re(e)?new bt(s(e,j)):Et(e)}static compare(e,t){const n=Et(e),i=Et(t),o=s(n,j),a=s(i,j);return l.lessThan(o,a)?-1:l.greaterThan(o,a)?1:0}}jt(bt,"Temporal.Instant");const aa=Array.prototype.includes,ac=Array.prototype.push,lc=globalThis.Intl.DateTimeFormat,cc=Array.prototype.sort,dc=Math.abs,uc=Math.floor,mi=Object.create,Ri=Object.entries,la=Set,Go=Reflect.ownKeys,Le=Set.prototype.add,ca=Set.prototype.values,de={};class ge{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: id is required");const t=et(e);if(!Ht(t))throw new RangeError(`invalid calendar identifier ${t}`);At(this),H(this,he,Nt(t))}get id(){if(!pe(this))throw new TypeError("invalid receiver");return s(this,he)}dateFromFields(e,t){if(!pe(this))throw new TypeError("invalid receiver");if(!ce(e))throw new TypeError("invalid fields");const n=ee(t),i=s(this,he);return de[i].dateFromFields(e,n,i)}yearMonthFromFields(e,t){if(!pe(this))throw new TypeError("invalid receiver");if(!ce(e))throw new TypeError("invalid fields");const n=ee(t),i=s(this,he);return de[i].yearMonthFromFields(e,n,i)}monthDayFromFields(e,t){if(!pe(this))throw new TypeError("invalid receiver");if(!ce(e))throw new TypeError("invalid fields");const n=ee(t),i=s(this,he);return de[i].monthDayFromFields(e,n,i)}fields(e){if(!pe(this))throw new TypeError("invalid receiver");const t=[],n=new Set(["year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond"]);for(const i of e){if(typeof i!="string")throw new TypeError("invalid fields");if(!n.has(i))throw new RangeError(`invalid field name ${i}`);n.delete(i),ac.call(t,i)}return de[s(this,he)].fields(t)}mergeFields(e,t){if(!pe(this))throw new TypeError("invalid receiver");const n=Do(e),i=mi(null);Sr(i,n,[],[void 0]);const o=Do(t),a=mi(null);Sr(a,o,[],[void 0]);const c=Go(a),d=de[s(this,he)].fieldKeysToIgnore(c),h=mi(null),u=Go(i);for(const m of u){let f;f=x(aa,d,[m])?a[m]:i[m],f!==void 0&&(h[m]=f)}return Sr(h,a,[]),h}dateAdd(e,t,n){if(!pe(this))throw new TypeError("invalid receiver");const i=se(e),o=Ir(t),a=Ce(ee(n)),{days:c}=Tt(s(o,We),s(o,Ze),s(o,He),s(o,Ge),s(o,Ve),s(o,Ke),s(o,Qe),"day"),d=s(this,he);return de[d].dateAdd(i,s(o,qe),s(o,Me),s(o,tt),c,a,d)}dateUntil(e,t,n){if(!pe(this))throw new TypeError("invalid receiver");const i=se(e),o=se(t);let a=ot(ee(n),"largestUnit","date","auto");a==="auto"&&(a="day");const{years:c,months:d,weeks:h,days:u}=de[s(this,he)].dateUntil(i,o,a);return new(k("%Temporal.Duration%"))(c,d,h,u,0,0,0,0,0,0)}year(e){let t=e;if(!pe(this))throw new TypeError("invalid receiver");return re(t)||(t=se(t)),de[s(this,he)].year(t)}month(e){let t=e;if(!pe(this))throw new TypeError("invalid receiver");if($e(t))throw new TypeError("use monthCode on PlainMonthDay instead");return re(t)||(t=se(t)),de[s(this,he)].month(t)}monthCode(e){let t=e;if(!pe(this))throw new TypeError("invalid receiver");return re(t)||$e(t)||(t=se(t)),de[s(this,he)].monthCode(t)}day(e){let t=e;if(!pe(this))throw new TypeError("invalid receiver");return $e(t)||(t=se(t)),de[s(this,he)].day(t)}era(e){let t=e;if(!pe(this))throw new TypeError("invalid receiver");return re(t)||(t=se(t)),de[s(this,he)].era(t)}eraYear(e){let t=e;if(!pe(this))throw new TypeError("invalid receiver");return re(t)||(t=se(t)),de[s(this,he)].eraYear(t)}dayOfWeek(e){if(!pe(this))throw new TypeError("invalid receiver");const t=se(e);return de[s(this,he)].dayOfWeek(t)}dayOfYear(e){if(!pe(this))throw new TypeError("invalid receiver");const t=se(e);return de[s(this,he)].dayOfYear(t)}weekOfYear(e){if(!pe(this))throw new TypeError("invalid receiver");const t=se(e);return de[s(this,he)].weekOfYear(t)}yearOfWeek(e){if(!pe(this))throw new TypeError("invalid receiver");const t=se(e);return de[s(this,he)].yearOfWeek(t)}daysInWeek(e){if(!pe(this))throw new TypeError("invalid receiver");const t=se(e);return de[s(this,he)].daysInWeek(t)}daysInMonth(e){let t=e;if(!pe(this))throw new TypeError("invalid receiver");return re(t)||(t=se(t)),de[s(this,he)].daysInMonth(t)}daysInYear(e){let t=e;if(!pe(this))throw new TypeError("invalid receiver");return re(t)||(t=se(t)),de[s(this,he)].daysInYear(t)}monthsInYear(e){let t=e;if(!pe(this))throw new TypeError("invalid receiver");return re(t)||(t=se(t)),de[s(this,he)].monthsInYear(t)}inLeapYear(e){let t=e;if(!pe(this))throw new TypeError("invalid receiver");return re(t)||(t=se(t)),de[s(this,he)].inLeapYear(t)}toString(){if(!pe(this))throw new TypeError("invalid receiver");return s(this,he)}toJSON(){if(!pe(this))throw new TypeError("invalid receiver");return s(this,he)}static from(e){return Hr(st(e))}}function to(r){if(!r.startsWith("M"))throw new RangeError(`Invalid month code: ${r}.  Month codes must start with M.`);const e=+r.slice(1);if(isNaN(e))throw new RangeError(`Invalid month code: ${r}`);return e}function qt(r,e=!1){return`M${r.toString().padStart(2,"0")}${e?"L":""}`}function In(r,e,t=12){let{month:n,monthCode:i}=r;if(i===void 0){if(n===void 0)throw new TypeError("Either month or monthCode are required");e==="reject"&&je(n,1,t),e==="constrain"&&(n=nt(n,1,t)),i=qt(n)}else{const o=to(i);if(n!==void 0&&n!==o)throw new RangeError(`monthCode ${i} and month ${n} must match if both are present`);if(i!==qt(o))throw new RangeError(`Invalid month code: ${i}`);if(n=o,n<1||n>t)throw new RangeError(`Invalid monthCode: ${i}`)}return{...r,month:n,monthCode:i}}jt(ge,"Temporal.Calendar"),me("Temporal.Calendar.from",ge.from),me("Temporal.Calendar.prototype.dateAdd",ge.prototype.dateAdd),me("Temporal.Calendar.prototype.dateFromFields",ge.prototype.dateFromFields),me("Temporal.Calendar.prototype.dateUntil",ge.prototype.dateUntil),me("Temporal.Calendar.prototype.day",ge.prototype.day),me("Temporal.Calendar.prototype.dayOfWeek",ge.prototype.dayOfWeek),me("Temporal.Calendar.prototype.dayOfYear",ge.prototype.dayOfYear),me("Temporal.Calendar.prototype.daysInMonth",ge.prototype.daysInMonth),me("Temporal.Calendar.prototype.daysInWeek",ge.prototype.daysInWeek),me("Temporal.Calendar.prototype.daysInYear",ge.prototype.daysInYear),me("Temporal.Calendar.prototype.era",ge.prototype.era),me("Temporal.Calendar.prototype.eraYear",ge.prototype.eraYear),me("Temporal.Calendar.prototype.fields",ge.prototype.fields),me("Temporal.Calendar.prototype.inLeapYear",ge.prototype.inLeapYear),me("Temporal.Calendar.prototype.mergeFields",ge.prototype.mergeFields),me("Temporal.Calendar.prototype.month",ge.prototype.month),me("Temporal.Calendar.prototype.monthCode",ge.prototype.monthCode),me("Temporal.Calendar.prototype.monthDayFromFields",ge.prototype.monthDayFromFields),me("Temporal.Calendar.prototype.monthsInYear",ge.prototype.monthsInYear),me("Temporal.Calendar.prototype.weekOfYear",ge.prototype.weekOfYear),me("Temporal.Calendar.prototype.year",ge.prototype.year),me("Temporal.Calendar.prototype.yearMonthFromFields",ge.prototype.yearMonthFromFields),me("Temporal.Calendar.prototype.yearOfWeek",ge.prototype.yearOfWeek),de.iso8601={dateFromFields(r,e,t){let n=G(r,["day","month","monthCode","year"],["year","day"]);const i=Ce(e);n=In(n);let{year:o,month:a,day:c}=n;return{year:o,month:a,day:c}=Fn(o,a,c,i),vt(o,a,c,t)},yearMonthFromFields(r,e,t){let n=G(r,["month","monthCode","year"],["year"]);const i=Ce(e);n=In(n);let{year:o,month:a}=n;return{year:o,month:a}=(function(d,h,u){let m=d,f=h;switch(u){case"reject":xt(m,f,1);break;case"constrain":({year:m,month:f}=Us(m,f))}return{year:m,month:f}})(o,a,i),on(o,a,t,1)},monthDayFromFields(r,e,t){let n=G(r,["day","month","monthCode","year"],["day"]);const i=Ce(e);if(n.month!==void 0&&n.year===void 0&&n.monthCode===void 0)throw new TypeError("either year or monthCode required with month");const o=n.monthCode===void 0;n=In(n);let{month:a,day:c,year:d}=n;return{month:a,day:c}=Fn(o?d:1972,a,c,i),nn(a,c,t,1972)},fields:r=>r,fieldKeysToIgnore(r){const e=new la;for(let t=0;t<r.length;t++){const n=r[t];x(Le,e,[n]),n==="month"?x(Le,e,["monthCode"]):n==="monthCode"&&x(Le,e,["month"])}return[...x(ca,e,[])]},dateAdd(r,e,t,n,i,o,a){let c=s(r,I),d=s(r,O),h=s(r,P);return{year:c,month:d,day:h}=ur(c,d,h,e,t,n,i,o),vt(c,d,h,a)},dateUntil:(r,e,t)=>Hi(s(r,I),s(r,O),s(r,P),s(e,I),s(e,O),s(e,P),t),year:r=>s(r,I),era(){},eraYear(){},month:r=>s(r,O),monthCode:r=>qt(s(r,O)),day:r=>s(r,P),dayOfWeek:r=>Di(s(r,I),s(r,O),s(r,P)),dayOfYear:r=>Ln(s(r,I),s(r,O),s(r,P)),weekOfYear:r=>Fo(s(r,I),s(r,O),s(r,P)).week,yearOfWeek:r=>Fo(s(r,I),s(r,O),s(r,P)).year,daysInWeek:()=>7,daysInMonth:r=>Bt(s(r,I),s(r,O)),daysInYear(r){let e=r;return Pe(e,I)||(e=se(e)),tr(s(e,I))?366:365},monthsInYear:()=>12,inLeapYear(r){let e=r;return Pe(e,I)||(e=se(e)),tr(s(e,I))}};class fe{constructor(e){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,this.now=globalThis.performance?globalThis.performance.now():Date.now(),e!==void 0){let t=0;for(const n of e.map.entries()){if(++t>fe.MAX_CACHE_ENTRIES)break;this.map.set(...n)}}}get(e){const t=this.map.get(e);return t&&(this.hits++,this.report()),this.calls++,t}set(e,t){this.map.set(e,t),this.misses++,this.report()}report(){}setObject(e){if(fe.objectMap.get(e))throw new RangeError("object already cached");fe.objectMap.set(e,this),this.report()}static getCacheForObject(e){let t=fe.objectMap.get(e);return t||(t=new fe,fe.objectMap.set(e,t)),t}}function da({isoYear:r,isoMonth:e,isoDay:t}){return`${br(r)}-${ue(e)}-${ue(t)}T00:00Z`}function fi(r,e){return{years:r.year-e.year,months:r.month-e.month,days:r.day-e.day}}fe.objectMap=new WeakMap,fe.MAX_CACHE_ENTRIES=1e3;class Vr{constructor(){this.eraLength="short",this.hasEra=!0,this.erasBeginMidYear=!1}getFormatter(){return this.formatter===void 0&&(this.formatter=new lc(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:this.eraLength,timeZone:"UTC"})),this.formatter}isoToCalendarDate(e,t){const{year:n,month:i,day:o}=e,a=JSON.stringify({func:"isoToCalendarDate",isoYear:n,isoMonth:i,isoDay:o,id:this.id}),c=t.get(a);if(c)return c;const d=this.getFormatter();let h,u;try{u=da({isoYear:n,isoMonth:i,isoDay:o}),h=d.formatToParts(new Date(u))}catch{throw new RangeError(`Invalid ISO date: ${JSON.stringify({isoYear:n,isoMonth:i,isoDay:o})}`)}const m={};for(let{type:p,value:g}of h){if(p==="year"&&(m.eraYear=+g),p==="relatedYear"&&(m.eraYear=+g),p==="month"){const y=/^([0-9]*)(.*?)$/.exec(g);if(!y||y.length!=3||!y[1]&&!y[2])throw new RangeError(`Unexpected month: ${g}`);if(m.month=y[1]?+y[1]:1,m.month<1)throw new RangeError(`Invalid month ${g} from ${u}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(m.month>13)throw new RangeError(`Invalid month ${g} from ${u}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);y[2]&&(m.monthExtra=y[2])}p==="day"&&(m.day=+g),this.hasEra&&p==="era"&&g!=null&&g!==""&&(g=g.split(" (")[0],m.era=g.normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(" ","-").toLowerCase())}if(m.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.reviseIntlEra){const{era:p,eraYear:g}=this.reviseIntlEra(m,e);m.era=p,m.eraYear=g}this.checkIcuBugs&&this.checkIcuBugs(e);const f=this.adjustCalendarDate(m,t,"constrain",!0);if(f.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(e)}`);if(f.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(e)}`);if(f.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(e)}`);return t.set(a,f),["constrain","reject"].forEach((p=>{const g=JSON.stringify({func:"calendarToIsoDate",year:f.year,month:f.month,day:f.day,overflow:p,id:this.id});t.set(g,e)})),f}validateCalendarDate(e){const{era:t,month:n,year:i,day:o,eraYear:a,monthCode:c,monthExtra:d}=e;if(d!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(i===void 0&&a===void 0)throw new TypeError("year or eraYear is required");if(n===void 0&&c===void 0)throw new TypeError("month or monthCode is required");if(o===void 0)throw new RangeError("Missing day");if(c!==void 0){if(typeof c!="string")throw new RangeError("monthCode must be a string, not "+typeof c);if(!/^M([01]?\d)(L?)$/.test(c))throw new RangeError(`Invalid monthCode: ${c}`)}if(this.constantEra){if(t!==void 0&&t!==this.constantEra)throw new RangeError(`era must be ${this.constantEra}, not ${t}`);if(a!==void 0&&i!==void 0&&a!==i)throw new RangeError(`eraYear ${a} does not match year ${i}`)}if(this.hasEra&&e.era===void 0!=(e.eraYear===void 0))throw new RangeError("properties 'era' and 'eraYear' must be provided together")}adjustCalendarDate(e,t,n="constrain",i=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let o=e;if(this.validateCalendarDate(o),this.constantEra){const{year:h,eraYear:u}=o;o={...o,era:this.constantEra,year:h!==void 0?h:u,eraYear:u!==void 0?u:h}}const a=this.monthsInYear(o,t);let{month:c,monthCode:d}=o;return{month:c,monthCode:d}=In(o,n,a),{...o,month:c,monthCode:d}}regulateMonthDayNaive(e,t,n){const i=this.monthsInYear(e,n);let{month:o,day:a}=e;return t==="reject"?(je(o,1,i),je(a,1,this.maximumMonthLength(e))):(o=nt(o,1,i),a=nt(a,1,this.maximumMonthLength({...e,month:o}))),{...e,month:o,day:a}}calendarToIsoDate(e,t="constrain",n){const i=e;let o=this.adjustCalendarDate(e,n,t,!1);o=this.regulateMonthDayNaive(o,t,n);const{year:a,month:c,day:d}=o,h=JSON.stringify({func:"calendarToIsoDate",year:a,month:c,day:d,overflow:t,id:this.id});let u,m=n.get(h);if(m||i.year!==void 0&&i.month!==void 0&&i.day!==void 0&&(i.year!==o.year||i.month!==o.month||i.day!==o.day)&&(u=JSON.stringify({func:"calendarToIsoDate",year:i.year,month:i.month,day:i.day,overflow:t,id:this.id}),m=n.get(u),m))return m;let f=this.estimateIsoDate({year:a,month:c,day:d});const p=b=>{let T=this.addDaysIso(f,b);if(o.day>this.minimumMonthLength(o)){let C=this.isoToCalendarDate(T,n);for(;C.month!==c||C.year!==a;){if(t==="reject")throw new RangeError(`day ${d} does not exist in month ${c} of year ${a}`);T=this.addDaysIso(T,-1),C=this.isoToCalendarDate(T,n)}}return T};let g=0,y=this.isoToCalendarDate(f,n),v=fi(o,y);if(v.years!==0||v.months!==0||v.days!==0){const b=365*v.years+30*v.months+v.days;f=this.addDaysIso(f,b),y=this.isoToCalendarDate(f,n),v=fi(o,y),v.years===0&&v.months===0?f=p(v.days):g=this.compareCalendarDates(o,y)}let w=8;for(;g;){f=this.addDaysIso(f,g*w);const b=y;y=this.isoToCalendarDate(f,n);const T=g;if(g=this.compareCalendarDates(o,y),g){if(v=fi(o,y),v.years===0&&v.months===0)f=p(v.days),g=0;else if(T&&g!==T)if(w>1)w/=2;else{if(t==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...i})}`);this.compareCalendarDates(y,b)>0&&(f=this.addDaysIso(f,-1)),g=0}}}if(n.set(h,f),u&&n.set(u,f),o.year===void 0||o.month===void 0||o.day===void 0||o.monthCode===void 0||this.hasEra&&(o.era===void 0||o.eraYear===void 0))throw new RangeError("Unexpected missing property");return f}temporalToCalendarDate(e,t){const n={year:s(e,I),month:s(e,O),day:s(e,P)};return this.isoToCalendarDate(n,t)}compareCalendarDates(e,t){const n=G(e,["day","month","year"],["day","month","year"]),i=G(t,["day","month","year"],["day","month","year"]);return n.year!==i.year?hr(n.year-i.year):n.month!==i.month?hr(n.month-i.month):n.day!==i.day?hr(n.day-i.day):0}regulateDate(e,t="constrain",n){const i=this.calendarToIsoDate(e,t,n);return this.isoToCalendarDate(i,n)}addDaysIso(e,t){return ur(e.year,e.month,e.day,0,0,0,t,"constrain")}addDaysCalendar(e,t,n){const i=this.calendarToIsoDate(e,"constrain",n),o=this.addDaysIso(i,t);return this.isoToCalendarDate(o,n)}addMonthsCalendar(e,t,n,i){let o=e;const{day:a}=o;for(let c=0,d=dc(t);c<d;c++){const{month:h}=o,u=o,m=t<0?-Math.max(a,this.daysInPreviousMonth(o,i)):this.daysInMonth(o,i),f=this.calendarToIsoDate(o,"constrain",i);let p=this.addDaysIso(f,m);if(o=this.isoToCalendarDate(p,i),t>0){const g=this.monthsInYear(u,i);for(;o.month-1!=h%g;)p=this.addDaysIso(p,-1),o=this.isoToCalendarDate(p,i)}o.day!==a&&(o=this.regulateDate({...o,day:a},"constrain",i))}if(n==="reject"&&o.day!==a)throw new RangeError(`Day ${a} does not exist in resulting calendar month`);return o}addCalendar(e,{years:t=0,months:n=0,weeks:i=0,days:o=0},a,c){const{year:d,day:h,monthCode:u}=e,m=this.adjustCalendarDate({year:d+t,monthCode:u,day:h},c),f=this.addMonthsCalendar(m,n,a,c),p=o+7*i;return this.addDaysCalendar(f,p,c)}untilCalendar(e,t,n,i){let o=0,a=0,c=0,d=0;switch(n){case"day":o=this.calendarDaysUntil(e,t,i);break;case"week":{const h=this.calendarDaysUntil(e,t,i);o=h%7,a=(h-o)/7;break}case"month":case"year":{const h=this.compareCalendarDates(t,e);if(!h)return{years:0,months:0,weeks:0,days:0};const u=t.year-e.year,m=t.day-e.day;if(n==="year"&&u){let g=0;t.monthCode>e.monthCode&&(g=1),t.monthCode<e.monthCode&&(g=-1),g||(g=Math.sign(m)),d=g*h<0?u-h:u}let f,p=d?this.addCalendar(e,{years:d},"constrain",i):e;do c+=h,f=p,p=this.addMonthsCalendar(f,h,"constrain",i),p.day!==e.day&&(p=this.regulateDate({...p,day:e.day},"constrain",i));while(this.compareCalendarDates(t,p)*h>=0);c-=h,o=this.calendarDaysUntil(f,t,i);break}}return{years:d,months:c,weeks:a,days:o}}daysInMonth(e,t){const{day:n}=e,i=this.maximumMonthLength(e),o=this.minimumMonthLength(e);if(o===i)return o;const a=n<=i-o?i:o,c=this.calendarToIsoDate(e,"constrain",t),d=this.addDaysIso(c,a),h=this.isoToCalendarDate(d,t),u=this.addDaysIso(d,-h.day);return this.isoToCalendarDate(u,t).day}daysInPreviousMonth(e,t){const{day:n,month:i,year:o}=e;let a={year:i>1?o:o-1,month:i,day:1};const c=i>1?i-1:this.monthsInYear(a,t);a={...a,month:c};const d=this.minimumMonthLength(a),h=this.maximumMonthLength(a);if(d===h)return h;const u=this.calendarToIsoDate(e,"constrain",t),m=this.addDaysIso(u,-n);return this.isoToCalendarDate(m,t).day}startOfCalendarYear(e){return{year:e.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(e){return{year:e.year,month:e.month,day:1}}calendarDaysUntil(e,t,n){const i=this.calendarToIsoDate(e,"constrain",n),o=this.calendarToIsoDate(t,"constrain",n);return this.isoDaysUntil(i,o)}isoDaysUntil(e,t){return Hi(e.year,e.month,e.day,t.year,t.month,t.day,"day").days}monthDayFromFields(e,t,n){let i,o,a,c,d,{monthCode:h,day:u}=e;if(h===void 0){let{year:p,era:g,eraYear:y}=e;if(p===void 0&&(g===void 0||y===void 0))throw new TypeError("when `monthCode` is omitted, `year` (or `era` and `eraYear`) and `month` are required");({monthCode:h,day:u}=this.isoToCalendarDate(this.calendarToIsoDate(e,t,n),n))}const m=this.isoToCalendarDate({year:1972,month:12,day:31},n),f=m.monthCode>h||m.monthCode===h&&m.day>=u?m.year:m.year-1;for(let p=0;p<100;p++){const g=this.adjustCalendarDate({day:u,monthCode:h,year:f-p},n),y=this.calendarToIsoDate(g,"constrain",n),v=this.isoToCalendarDate(y,n);if({year:i,month:o,day:a}=y,v.monthCode===h&&v.day===u)return{month:o,day:a,year:i};t==="constrain"&&(c===void 0||v.monthCode===c.monthCode&&v.day>c.day)&&(c=v,d=y)}if(t==="constrain"&&d!==void 0)return d;throw new RangeError(`No recent ${this.id} year with monthCode ${h} and day ${u}`)}}class hc extends Vr{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}},this.hasEra=!1}inLeapYear(e){const{year:t}=e;return(7*t+1)%19<7}monthsInYear(e){return this.inLeapYear(e)?13:12}minimumMonthLength(e){return this.minMaxMonthLength(e,"min")}maximumMonthLength(e){return this.minMaxMonthLength(e,"max")}minMaxMonthLength(e,t){const{month:n,year:i}=e,o=this.getMonthCode(i,n),a=Ri(this.months).find((d=>d[1].monthCode===o));if(a===void 0)throw new RangeError(`unmatched Hebrew month: ${n}`);const c=a[1].days;return typeof c=="number"?c:c[t]}estimateIsoDate(e){const{year:t}=e;return{year:t-3760,month:1,day:1}}getMonthCode(e,t){return this.inLeapYear({year:e})?t===6?qt(5,!0):qt(t<6?t:t-1):qt(t)}adjustCalendarDate(e,t,n="constrain",i=!1){let{year:o,eraYear:a,month:c,monthCode:d,day:h,monthExtra:u}=e;if(o===void 0&&a!==void 0&&(o=a),a===void 0&&o!==void 0&&(a=o),i){if(u){const m=this.months[u];if(!m)throw new RangeError(`Unrecognized month from formatToParts: ${u}`);c=this.inLeapYear({year:o})?m.leap:m.regular}return d=this.getMonthCode(o,c),{year:o,month:c,day:h,era:void 0,eraYear:a,monthCode:d}}if(this.validateCalendarDate(e),c===void 0)if(d.endsWith("L")){if(d!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${d}`);if(c=6,!this.inLeapYear({year:o})){if(n==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${o} which is not a leap year`);c=6,d="M06"}}else{c=to(d),this.inLeapYear({year:o})&&c>=6&&c++;const m=this.monthsInYear({year:o});if(c<1||c>m)throw new RangeError(`Invalid monthCode: ${d}`)}else if(n==="reject"?(je(c,1,this.monthsInYear({year:o})),je(h,1,this.maximumMonthLength({year:o,month:c}))):(c=nt(c,1,this.monthsInYear({year:o})),h=nt(h,1,this.maximumMonthLength({year:o,month:c}))),d===void 0)d=this.getMonthCode(o,c);else if(this.getMonthCode(o,c)!==d)throw new RangeError(`monthCode ${d} doesn't correspond to month ${c} in Hebrew year ${o}`);return{...e,day:h,month:c,monthCode:d,year:o,eraYear:a}}}class Kr extends Vr{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425,this.constantEra="ah"}inLeapYear(e,t){return this.daysInMonth({year:e.year,month:12,day:1},t)===30}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}estimateIsoDate(e){const{year:t}=this.adjustCalendarDate(e);return{year:uc(t*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}}class ua extends Kr{constructor(){super(...arguments),this.id="islamic"}}class mc extends Kr{constructor(){super(...arguments),this.id="islamic-umalqura"}}class fc extends Kr{constructor(){super(...arguments),this.id="islamic-tbla"}}class pc extends Kr{constructor(){super(...arguments),this.id="islamic-civil"}}class gc extends Kr{constructor(){super(...arguments),this.id="islamic-rgsa"}}class yc extends Kr{constructor(){super(...arguments),this.id="islamicc"}}class vc extends Vr{constructor(){super(...arguments),this.id="persian",this.calendarType="solar",this.constantEra="ap"}inLeapYear(e,t){return ua.prototype.inLeapYear.call(this,e,t)}monthsInYear(){return 12}minimumMonthLength(e){const{month:t}=e;return t===12?29:t<=6?31:30}maximumMonthLength(e){const{month:t}=e;return t===12?30:t<=6?31:30}estimateIsoDate(e){const{year:t}=this.adjustCalendarDate(e);return{year:t+621,month:1,day:1}}}class wc extends Vr{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.constantEra="saka",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(e){return ha(e.year+78)}monthsInYear(){return 12}minimumMonthLength(e){return this.getMonthInfo(e).length}maximumMonthLength(e){return this.getMonthInfo(e).length}getMonthInfo(e){const{month:t}=e;let n=this.months[t];if(n===void 0)throw new RangeError(`Invalid month: ${t}`);return this.inLeapYear(e)&&n.leap&&(n=n.leap),n}estimateIsoDate(e){const t=this.adjustCalendarDate(e),n=this.getMonthInfo(t);return ur(t.year+78+(n.nextYear?1:0),n.month,n.day,0,0,0,t.day-1,"constrain")}checkIcuBugs(e){if(this.vulnerableToBceBug&&e.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}}function ha(r){return r%4==0&&(r%100!=0||r%400==0)}class wn extends Vr{constructor(e,t){super(),this.calendarType="solar",this.v8IsVulnerableToJulianBug=new Date("+001001-01-01T00:00Z").toLocaleDateString("en-US-u-ca-japanese",{timeZone:"UTC"}).startsWith("12"),this.calendarIsVulnerableToJulianBug=!1,this.id=e;const{eras:n,anchorEra:i}=(function(a){let c,d=a;if(d.length===0)throw new RangeError("Invalid era data: eras are required");if(d.length===1&&d[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(d.length===1&&!d[0].name)throw new RangeError("Invalid era data: at least one named era is required");if(d.filter((u=>u.reverseOf!=null)).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");d.forEach((u=>{if(u.isAnchor||!u.anchorEpoch&&!u.reverseOf){if(c)throw new RangeError("Invalid era data: cannot have multiple anchor eras");c=u,u.anchorEpoch={year:u.hasYearZero?0:1}}else if(!u.name)throw new RangeError("If era name is blank, it must be the anchor era")})),d=d.filter((u=>u.name)),d.forEach((u=>{const{reverseOf:m}=u;if(m){const f=d.find((p=>p.name===m));if(f===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${m}`);u.reverseOf=f,u.anchorEpoch=f.anchorEpoch,u.isoEpoch=f.isoEpoch}u.anchorEpoch.month===void 0&&(u.anchorEpoch.month=1),u.anchorEpoch.day===void 0&&(u.anchorEpoch.day=1)})),cc.call(d,((u,m)=>{if(u.reverseOf)return 1;if(m.reverseOf)return-1;if(!u.isoEpoch||!m.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return m.isoEpoch.year-u.isoEpoch.year}));const h=d[d.length-1].reverseOf;if(h&&h!==d[d.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return d.forEach(((u,m)=>{u.genericName="era"+(d.length-1-m)})),{eras:d,anchorEra:c||d[0]}})(t);this.anchorEra=i,this.eras=n}inLeapYear(e){const{year:t}=this.estimateIsoDate({month:1,day:1,year:e.year});return ha(t)}monthsInYear(){return 12}minimumMonthLength(e){const{month:t}=e;return t===2?this.inLeapYear(e)?29:28:[4,6,9,11].indexOf(t)>=0?30:31}maximumMonthLength(e){return this.minimumMonthLength(e)}completeEraYear(e){const t=(c,d)=>{const h=e[c];if(h!=null&&h!=d)throw new RangeError(`Input ${c} ${h} doesn't match calculated value ${d}`)},n=c=>{let d;const h={...e,year:c},u=this.eras.find(((m,f)=>{if(f===this.eras.length-1){if(m.reverseOf){if(c>0)throw new RangeError(`Signed year ${c} is invalid for era ${m.name}`);return d=m.anchorEpoch.year-c,!0}return d=c-m.anchorEpoch.year+(m.hasYearZero?0:1),!0}return this.compareCalendarDates(h,m.anchorEpoch)>=0&&(d=c-m.anchorEpoch.year+(m.hasYearZero?0:1),!0)}));if(!u)throw new RangeError(`Year ${c} was not matched by any era`);return{eraYear:d,era:u.name}};let{year:i,eraYear:o,era:a}=e;if(i!=null)({eraYear:o,era:a}=n(i)),t("era",a),t("eraYear",o);else{if(o==null)throw new RangeError("Either `year` or `eraYear` and `era` are required");{const c=a===void 0?void 0:this.eras.find((d=>d.name===a||d.genericName===a));if(!c)throw new RangeError(`Era ${a} (ISO year ${o}) was not matched by any era`);if(o<1&&c.reverseOf)throw new RangeError(`Years in ${a} era must be positive, not ${i}`);i=c.reverseOf?c.anchorEpoch.year-o:o+c.anchorEpoch.year-(c.hasYearZero?0:1),t("year",i),{eraYear:o,era:a}=n(i)}}return{...e,year:i,eraYear:o,era:a}}adjustCalendarDate(e,t,n="constrain"){let i=e;const{month:o,monthCode:a}=i;return o===void 0&&(i={...i,month:to(a)}),this.validateCalendarDate(i),i=this.completeEraYear(i),super.adjustCalendarDate(i,t,n)}estimateIsoDate(e){const t=this.adjustCalendarDate(e),{year:n,month:i,day:o}=t,{anchorEra:a}=this;return Fn(n+a.isoEpoch.year-(a.hasYearZero?0:1),i,o,"constrain")}checkIcuBugs(e){if(this.calendarIsVulnerableToJulianBug&&this.v8IsVulnerableToJulianBug&&Kt(e.year,e.month,e.day,1582,10,15)<0)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 1582-10-15 (see https://bugs.chromium.org/p/chromium/issues/detail?id=1173158)`)}}class ro extends wn{constructor(e,t){super(e,t)}inLeapYear(e){const{year:t}=e;return(t+1)%4==0}monthsInYear(){return 13}minimumMonthLength(e){const{month:t}=e;return t===13?this.inLeapYear(e)?6:5:30}maximumMonthLength(e){return this.minimumMonthLength(e)}}class bc extends ro{constructor(){super("ethioaa",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}}])}}class Tc extends ro{constructor(){super("coptic",[{name:"era1",isoEpoch:{year:284,month:8,day:29}},{name:"era0",reverseOf:"era1"}])}}class _c extends ro{constructor(){super("ethiopic",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}},{name:"era1",isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}}class Cc extends wn{constructor(){super("roc",[{name:"minguo",isoEpoch:{year:1912,month:1,day:1}},{name:"before-roc",reverseOf:"minguo"}]),this.calendarIsVulnerableToJulianBug=!0}}class Ec extends wn{constructor(){super("buddhist",[{name:"be",hasYearZero:!0,isoEpoch:{year:-543,month:1,day:1}}]),this.calendarIsVulnerableToJulianBug=!0}}class Dc extends wn{constructor(){super("gregory",[{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}])}reviseIntlEra(e){let{era:t,eraYear:n}=e;return t!=="bc"&&t!=="b"||(t="bce"),t!=="ad"&&t!=="a"||(t="ce"),{era:t,eraYear:n}}}class kc extends wn{constructor(){super("japanese",[{name:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{name:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{name:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{name:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{name:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}]),this.calendarIsVulnerableToJulianBug=!0,this.eraLength="long",this.erasBeginMidYear=!0}reviseIntlEra(e,t){const{era:n,eraYear:i}=e,{year:o}=t;return this.eras.find((a=>a.name===n))?{era:n,eraYear:i}:o<1?{era:"bce",eraYear:1-o}:{era:"ce",eraYear:o}}}class ma extends Vr{constructor(){super(...arguments),this.calendarType="lunisolar",this.hasEra=!1}inLeapYear(e,t){const n=this.getMonthList(e.year,t);return Ri(n).length===13}monthsInYear(e,t){return this.inLeapYear(e,t)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}getMonthList(e,t){if(e===void 0)throw new TypeError("Missing year");const n=JSON.stringify({func:"getMonthList",calendarYear:e,id:this.id}),i=t.get(n);if(i)return i;const o=this.getFormatter(),a=(v,w)=>{const b=da({isoYear:v,isoMonth:2,isoDay:1}),T=new Date(b);T.setUTCDate(w+1);const C=o.formatToParts(T),S=C.find(($=>$.type==="month")).value,D=+C.find(($=>$.type==="day")).value;let E=C.find(($=>$.type==="relatedYear"));if(E===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return E=+E.value,{calendarMonthString:S,calendarDay:D,calendarYearToVerify:E}};let c=17,{calendarMonthString:d,calendarDay:h,calendarYearToVerify:u}=a(e,c);d!=="1"&&(c+=29,{calendarMonthString:d,calendarDay:h}=a(e,c)),c-=h-5;const m={};let f,p,g=1,y=!1;do({calendarMonthString:d,calendarDay:h,calendarYearToVerify:u}=a(e,c)),f&&(m[p].daysInMonth=f+30-h),u!==e?y=!0:(m[d]={monthIndex:g++},c+=30),f=h,p=d;while(!y);return m[p].daysInMonth=f+30-h,t.set(n,m),m}estimateIsoDate(e){const{year:t,month:n}=e;return{year:t,month:n>=12?12:n+1,day:1}}adjustCalendarDate(e,t,n="constrain",i=!1){let{year:o,month:a,monthExtra:c,day:d,monthCode:h,eraYear:u}=e;if(i){if(o=u,c&&c!=="bis")throw new RangeError(`Unexpected leap month suffix: ${c}`);const m=qt(a,c!==void 0),f=`${a}${c||""}`,p=this.getMonthList(o,t)[f];if(p===void 0)throw new RangeError(`Unmatched month ${f} in Chinese year ${o}`);return a=p.monthIndex,{year:o,month:a,day:d,era:void 0,eraYear:u,monthCode:m}}if(this.validateCalendarDate(e),o===void 0&&(o=u),u===void 0&&(u=o),a===void 0){const m=this.getMonthList(o,t);let f=h.replace("L","bis").slice(1);f[0]==="0"&&(f=f.slice(1));let p=m[f];if(a=p&&p.monthIndex,a===void 0&&h.endsWith("L")&&h!="M13L"&&n==="constrain"){let g=h.slice(1,-1);g[0]==="0"&&(g=g.slice(1)),p=m[g],p&&(a=p.monthIndex,h=qt(g))}if(a===void 0)throw new RangeError(`Unmatched month ${h} in Chinese year ${o}`)}else if(h===void 0){const m=this.getMonthList(o,t),f=Ri(m),p=f.length;n==="reject"?(je(a,1,p),je(d,1,this.maximumMonthLength())):(a=nt(a,1,p),d=nt(d,1,this.maximumMonthLength()));const g=f.find((([,y])=>y.monthIndex===a));if(g===void 0)throw new RangeError(`Invalid month ${a} in Chinese year ${o}`);h=qt(g[0].replace("bis",""),g[0].indexOf("bis")!==-1)}else{const m=this.getMonthList(o,t);let f=h.replace("L","bis").slice(1);f[0]==="0"&&(f=f.slice(1));const p=m[f];if(!p)throw new RangeError(`Unmatched monthCode ${h} in Chinese year ${o}`);if(a!==p.monthIndex)throw new RangeError(`monthCode ${h} doesn't correspond to month ${a} in Chinese year ${o}`)}return{...e,year:o,eraYear:u,month:a,monthCode:h,day:d}}}class Sc extends ma{constructor(){super(...arguments),this.id="chinese"}}class Ic extends ma{constructor(){super(...arguments),this.id="dangi"}}class Rc{constructor(e){this.helper=e}dateFromFields(e,t,n){const i=new fe,o=G(e,this.fields(["day","month","monthCode","year"]),[]),a=Ce(t),{year:c,month:d,day:h}=this.helper.calendarToIsoDate(o,a,i),u=vt(c,d,h,n);return i.setObject(u),u}yearMonthFromFields(e,t,n){const i=new fe,o=G(e,this.fields(["month","monthCode","year"]),[]),a=Ce(t),{year:c,month:d,day:h}=this.helper.calendarToIsoDate({...o,day:1},a,i),u=on(c,d,n,h);return i.setObject(u),u}monthDayFromFields(e,t,n){const i=new fe,o=G(e,this.fields(["day","month","monthCode","year"]),[]),a=Ce(t),{year:c,month:d,day:h}=this.helper.monthDayFromFields(o,a,i),u=nn(d,h,n,c);return i.setObject(u),u}fields(e){let t=e;return aa.call(t,"year")&&(t=[...t,"era","eraYear"]),t}fieldKeysToIgnore(e){const t=new la;for(let n=0;n<e.length;n++){const i=e[n];switch(x(Le,t,[i]),i){case"era":x(Le,t,["eraYear"]),x(Le,t,["year"]);break;case"eraYear":x(Le,t,["era"]),x(Le,t,["year"]);break;case"year":x(Le,t,["era"]),x(Le,t,["eraYear"]);break;case"month":x(Le,t,["monthCode"]),this.helper.erasBeginMidYear&&(x(Le,t,["era"]),x(Le,t,["eraYear"]));break;case"monthCode":x(Le,t,["month"]),this.helper.erasBeginMidYear&&(x(Le,t,["era"]),x(Le,t,["eraYear"]));break;case"day":this.helper.erasBeginMidYear&&(x(Le,t,["era"]),x(Le,t,["eraYear"]))}}return[...x(ca,t,[])]}dateAdd(e,t,n,i,o,a,c){const d=fe.getCacheForObject(e),h=this.helper.temporalToCalendarDate(e,d),u=this.helper.addCalendar(h,{years:t,months:n,weeks:i,days:o},a,d),m=this.helper.calendarToIsoDate(u,"constrain",d),{year:f,month:p,day:g}=m,y=vt(f,p,g,c);return new fe(d).setObject(y),y}dateUntil(e,t,n){const i=fe.getCacheForObject(e),o=fe.getCacheForObject(t),a=this.helper.temporalToCalendarDate(e,i),c=this.helper.temporalToCalendarDate(t,o);return this.helper.untilCalendar(a,c,n,i)}year(e){const t=fe.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,t).year}month(e){const t=fe.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,t).month}day(e){const t=fe.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,t).day}era(e){if(!this.helper.hasEra)return;const t=fe.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,t).era}eraYear(e){if(!this.helper.hasEra)return;const t=fe.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,t).eraYear}monthCode(e){const t=fe.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,t).monthCode}dayOfWeek(e){return de.iso8601.dayOfWeek(e)}dayOfYear(e){const t=fe.getCacheForObject(e),n=this.helper.isoToCalendarDate(e,t),i=this.helper.startOfCalendarYear(n);return this.helper.calendarDaysUntil(i,n,t)+1}weekOfYear(e){return de.iso8601.weekOfYear(e)}yearOfWeek(e){return de.iso8601.yearOfWeek(e)}daysInWeek(e){return de.iso8601.daysInWeek(e)}daysInMonth(e){const t=fe.getCacheForObject(e),n=this.helper.temporalToCalendarDate(e,t),i=this.helper.maximumMonthLength(n);if(i===this.helper.minimumMonthLength(n))return i;const o=this.helper.startOfCalendarMonth(n),a=this.helper.addMonthsCalendar(o,1,"constrain",t);return this.helper.calendarDaysUntil(o,a,t)}daysInYear(e){let t=e;Pe(t,I)||(t=se(t));const n=fe.getCacheForObject(t),i=this.helper.temporalToCalendarDate(t,n),o=this.helper.startOfCalendarYear(i),a=this.helper.addCalendar(o,{years:1},"constrain",n);return this.helper.calendarDaysUntil(o,a,n)}monthsInYear(e){const t=fe.getCacheForObject(e),n=this.helper.temporalToCalendarDate(e,t);return this.helper.monthsInYear(n,t)}inLeapYear(e){let t=e;Pe(t,I)||(t=se(t));const n=fe.getCacheForObject(t),i=this.helper.temporalToCalendarDate(t,n);return this.helper.inLeapYear(i,n)}}for(const r of[hc,vc,_c,bc,Tc,Sc,Ic,Cc,wc,Ec,Dc,kc,ua,mc,fc,pc,gc,yc]){const e=new r;de[e.id]=new Rc(e)}class bn{constructor(e,t,n,i="iso8601"){Ds(this,te(e),te(t),te(n),st(i))}get calendarId(){if(!K(this))throw new TypeError("invalid receiver");return Ae(s(this,_))}get era(){if(!K(this))throw new TypeError("invalid receiver");return Vn(s(this,_),this)}get eraYear(){if(!K(this))throw new TypeError("invalid receiver");return Kn(s(this,_),this)}get year(){if(!K(this))throw new TypeError("invalid receiver");return Hn(s(this,_),this)}get month(){if(!K(this))throw new TypeError("invalid receiver");return Gn(s(this,_),this)}get monthCode(){if(!K(this))throw new TypeError("invalid receiver");return fn(s(this,_),this)}get day(){if(!K(this))throw new TypeError("invalid receiver");return pn(s(this,_),this)}get dayOfWeek(){if(!K(this))throw new TypeError("invalid receiver");return ji(s(this,_),this)}get dayOfYear(){if(!K(this))throw new TypeError("invalid receiver");return Ai(s(this,_),this)}get weekOfYear(){if(!K(this))throw new TypeError("invalid receiver");return Li(s(this,_),this)}get yearOfWeek(){if(!K(this))throw new TypeError("invalid receiver");return Yi(s(this,_),this)}get daysInWeek(){if(!K(this))throw new TypeError("invalid receiver");return Ui(s(this,_),this)}get daysInMonth(){if(!K(this))throw new TypeError("invalid receiver");return Qn(s(this,_),this)}get daysInYear(){if(!K(this))throw new TypeError("invalid receiver");return Xn(s(this,_),this)}get monthsInYear(){if(!K(this))throw new TypeError("invalid receiver");return Jn(s(this,_),this)}get inLeapYear(){if(!K(this))throw new TypeError("invalid receiver");return ei(s(this,_),this)}with(e,t){if(!K(this))throw new TypeError("invalid receiver");if(!ce(e))throw new TypeError("invalid argument");qr(e);const n=ee(t),i=s(this,_),o=ke(i,["day","month","monthCode","year"]);let a=G(this,o,[]);return a=gr(i,a,G(e,o,"partial")),a=G(a,o,[]),Wt(i,a,n)}withCalendar(e){if(!K(this))throw new TypeError("invalid receiver");const t=st(e);return new bn(s(this,I),s(this,O),s(this,P),t)}add(e,t){if(!K(this))throw new TypeError("invalid receiver");const n=Ir(e),i=ee(t);return Ne(s(this,_),this,n,i)}subtract(e,t){if(!K(this))throw new TypeError("invalid receiver");const n=Ys(Ir(e)),i=ee(t);return Ne(s(this,_),this,n,i)}until(e,t){if(!K(this))throw new TypeError("invalid receiver");return jo("until",this,e,t)}since(e,t){if(!K(this))throw new TypeError("invalid receiver");return jo("since",this,e,t)}equals(e){if(!K(this))throw new TypeError("invalid receiver");const t=se(e);for(const n of[I,O,P])if(s(this,n)!==s(t,n))return!1;return yn(s(this,_),s(t,_))}toString(e){if(!K(this))throw new TypeError("invalid receiver");return Io(this,dn(ee(e)))}toJSON(){if(!K(this))throw new TypeError("invalid receiver");return Io(this)}toLocaleString(e,t){if(!K(this))throw new TypeError("invalid receiver");return new or(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDate")}toPlainDateTime(e){if(!K(this))throw new TypeError("invalid receiver");const t=s(this,I),n=s(this,O),i=s(this,P),o=s(this,_);if(e===void 0)return rt(t,n,i,0,0,0,0,0,0,o);const a=Ut(e);return rt(t,n,i,s(a,U),s(a,z),s(a,B),s(a,q),s(a,W),s(a,Z),o)}toZonedDateTime(e){if(!K(this))throw new TypeError("invalid receiver");let t,n;if(ce(e))if(pt(e))t=e;else{const g=e.timeZone;g===void 0?t=ze(e):(t=ze(g),n=e.plainTime)}else t=ze(e);const i=s(this,I),o=s(this,O),a=s(this,P),c=s(this,_);let d=0,h=0,u=0,m=0,f=0,p=0;return n!==void 0&&(n=Ut(n),d=s(n,U),h=s(n,z),u=s(n,B),m=s(n,q),f=s(n,W),p=s(n,Z)),xe(s(Je(t,rt(i,o,a,d,h,u,m,f,p,c),"compatible"),j),t,c)}toPlainYearMonth(){if(!K(this))throw new TypeError("invalid receiver");const e=s(this,_);return yr(e,G(this,ke(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!K(this))throw new TypeError("invalid receiver");const e=s(this,_);return Ar(e,G(this,ke(e,["day","monthCode"]),[]))}getISOFields(){if(!K(this))throw new TypeError("invalid receiver");return{calendar:s(this,_),isoDay:s(this,P),isoMonth:s(this,O),isoYear:s(this,I)}}getCalendar(){if(!K(this))throw new TypeError("invalid receiver");return Hr(s(this,_))}static from(e,t){const n=ee(t);return K(e)?(Ce(n),vt(s(e,I),s(e,O),s(e,P),s(e,_))):se(e,n)}static compare(e,t){const n=se(e),i=se(t);return Kt(s(n,I),s(n,O),s(n,P),s(i,I),s(i,O),s(i,P))}}jt(bn,"Temporal.PlainDate");class Tn{constructor(e,t,n,i=0,o=0,a=0,c=0,d=0,h=0,u="iso8601"){ks(this,te(e),te(t),te(n),i===void 0?0:te(i),o===void 0?0:te(o),a===void 0?0:te(a),c===void 0?0:te(c),d===void 0?0:te(d),h===void 0?0:te(h),st(u))}get calendarId(){if(!L(this))throw new TypeError("invalid receiver");return Ae(s(this,_))}get year(){if(!L(this))throw new TypeError("invalid receiver");return Hn(s(this,_),this)}get month(){if(!L(this))throw new TypeError("invalid receiver");return Gn(s(this,_),this)}get monthCode(){if(!L(this))throw new TypeError("invalid receiver");return fn(s(this,_),this)}get day(){if(!L(this))throw new TypeError("invalid receiver");return pn(s(this,_),this)}get hour(){if(!L(this))throw new TypeError("invalid receiver");return s(this,U)}get minute(){if(!L(this))throw new TypeError("invalid receiver");return s(this,z)}get second(){if(!L(this))throw new TypeError("invalid receiver");return s(this,B)}get millisecond(){if(!L(this))throw new TypeError("invalid receiver");return s(this,q)}get microsecond(){if(!L(this))throw new TypeError("invalid receiver");return s(this,W)}get nanosecond(){if(!L(this))throw new TypeError("invalid receiver");return s(this,Z)}get era(){if(!L(this))throw new TypeError("invalid receiver");return Vn(s(this,_),this)}get eraYear(){if(!L(this))throw new TypeError("invalid receiver");return Kn(s(this,_),this)}get dayOfWeek(){if(!L(this))throw new TypeError("invalid receiver");return ji(s(this,_),this)}get dayOfYear(){if(!L(this))throw new TypeError("invalid receiver");return Ai(s(this,_),this)}get weekOfYear(){if(!L(this))throw new TypeError("invalid receiver");return Li(s(this,_),this)}get yearOfWeek(){if(!L(this))throw new TypeError("invalid receiver");return Yi(s(this,_),this)}get daysInWeek(){if(!L(this))throw new TypeError("invalid receiver");return Ui(s(this,_),this)}get daysInYear(){if(!L(this))throw new TypeError("invalid receiver");return Xn(s(this,_),this)}get daysInMonth(){if(!L(this))throw new TypeError("invalid receiver");return Qn(s(this,_),this)}get monthsInYear(){if(!L(this))throw new TypeError("invalid receiver");return Jn(s(this,_),this)}get inLeapYear(){if(!L(this))throw new TypeError("invalid receiver");return ei(s(this,_),this)}with(e,t){if(!L(this))throw new TypeError("invalid receiver");if(!ce(e))throw new TypeError("invalid argument");qr(e);const n=ee(t),i=s(this,_),o=ke(i,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);let a=G(this,o,[]);a=gr(i,a,G(e,o,"partial")),a=G(a,o,[]);const{year:c,month:d,day:h,hour:u,minute:m,second:f,millisecond:p,microsecond:g,nanosecond:y}=mn(i,a,n);return rt(c,d,h,u,m,f,p,g,y,i)}withPlainTime(e){if(!L(this))throw new TypeError("invalid receiver");const t=s(this,I),n=s(this,O),i=s(this,P),o=s(this,_);if(e===void 0)return rt(t,n,i,0,0,0,0,0,0,o);const a=Ut(e);return rt(t,n,i,s(a,U),s(a,z),s(a,B),s(a,q),s(a,W),s(a,Z),o)}withPlainDate(e){if(!L(this))throw new TypeError("invalid receiver");const t=se(e),n=s(t,I),i=s(t,O),o=s(t,P);let a=s(t,_);const c=s(this,U),d=s(this,z),h=s(this,B),u=s(this,q),m=s(this,W),f=s(this,Z);return a=$s(s(this,_),a),rt(n,i,o,c,d,h,u,m,f,a)}withCalendar(e){if(!L(this))throw new TypeError("invalid receiver");const t=st(e);return new Tn(s(this,I),s(this,O),s(this,P),s(this,U),s(this,z),s(this,B),s(this,q),s(this,W),s(this,Z),t)}add(e,t){if(!L(this))throw new TypeError("invalid receiver");return qo("add",this,e,t)}subtract(e,t){if(!L(this))throw new TypeError("invalid receiver");return qo("subtract",this,e,t)}until(e,t){if(!L(this))throw new TypeError("invalid receiver");return Ao("until",this,e,t)}since(e,t){if(!L(this))throw new TypeError("invalid receiver");return Ao("since",this,e,t)}round(e){if(!L(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?Ur("smallestUnit",e):ee(e),n=Wr(t),i=Dt(t,"halfExpand"),o=ot(t,"smallestUnit","time",fr,["day"]),a={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[o];Zr(n,a,a===1);let c=s(this,I),d=s(this,O),h=s(this,P),u=s(this,U),m=s(this,z),f=s(this,B),p=s(this,q),g=s(this,W),y=s(this,Z);return{year:c,month:d,day:h,hour:u,minute:m,second:f,millisecond:p,microsecond:g,nanosecond:y}=Ki(c,d,h,u,m,f,p,g,y,n,o,i),rt(c,d,h,u,m,f,p,g,y,s(this,_))}equals(e){if(!L(this))throw new TypeError("invalid receiver");const t=dr(e);for(const n of[I,O,P,U,z,B,q,W,Z])if(s(this,n)!==s(t,n))return!1;return yn(s(this,_),s(t,_))}toString(e){if(!L(this))throw new TypeError("invalid receiver");const t=ee(e),n=dn(t),i=un(t),o=Dt(t,"trunc"),a=ot(t,"smallestUnit","time",void 0);if(a==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const{precision:c,unit:d,increment:h}=hn(a,i);return Ro(this,c,n,{unit:d,increment:h,roundingMode:o})}toJSON(){if(!L(this))throw new TypeError("invalid receiver");return Ro(this,"auto")}toLocaleString(e,t){if(!L(this))throw new TypeError("invalid receiver");return new or(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDateTime")}toZonedDateTime(e,t){if(!L(this))throw new TypeError("invalid receiver");const n=ze(e);return xe(s(Je(n,this,jr(ee(t))),j),n,s(this,_))}toPlainDate(){if(!L(this))throw new TypeError("invalid receiver");return Lr(this)}toPlainYearMonth(){if(!L(this))throw new TypeError("invalid receiver");const e=s(this,_);return yr(e,G(this,ke(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!L(this))throw new TypeError("invalid receiver");const e=s(this,_);return Ar(e,G(this,ke(e,["day","monthCode"]),[]))}toPlainTime(){if(!L(this))throw new TypeError("invalid receiver");return zi(this)}getISOFields(){if(!L(this))throw new TypeError("invalid receiver");return{calendar:s(this,_),isoDay:s(this,P),isoHour:s(this,U),isoMicrosecond:s(this,W),isoMillisecond:s(this,q),isoMinute:s(this,z),isoMonth:s(this,O),isoNanosecond:s(this,Z),isoSecond:s(this,B),isoYear:s(this,I)}}getCalendar(){if(!L(this))throw new TypeError("invalid receiver");return Hr(s(this,_))}static from(e,t){const n=ee(t);return L(e)?(Ce(n),rt(s(e,I),s(e,O),s(e,P),s(e,U),s(e,z),s(e,B),s(e,q),s(e,W),s(e,Z),s(e,_))):dr(e,n)}static compare(e,t){const n=dr(e),i=dr(t);for(const o of[I,O,P,U,z,B,q,W,Z]){const a=s(n,o),c=s(i,o);if(a!==c)return hr(a-c)}return 0}}jt(Tn,"Temporal.PlainDateTime");class Qt{constructor(e=0,t=0,n=0,i=0,o=0,a=0,c=0,d=0,h=0,u=0){const m=e===void 0?0:Oe(e),f=t===void 0?0:Oe(t),p=n===void 0?0:Oe(n),g=i===void 0?0:Oe(i),y=o===void 0?0:Oe(o),v=a===void 0?0:Oe(a),w=c===void 0?0:Oe(c),b=d===void 0?0:Oe(d),T=h===void 0?0:Oe(h),C=u===void 0?0:Oe(u);Yn(m,f,p,g,y,v,w,b,T,C),At(this),H(this,qe,m),H(this,Me,f),H(this,tt,p),H(this,We,g),H(this,Ze,y),H(this,He,v),H(this,Ge,w),H(this,Ve,b),H(this,Ke,T),H(this,Qe,C)}get years(){if(!ye(this))throw new TypeError("invalid receiver");return s(this,qe)}get months(){if(!ye(this))throw new TypeError("invalid receiver");return s(this,Me)}get weeks(){if(!ye(this))throw new TypeError("invalid receiver");return s(this,tt)}get days(){if(!ye(this))throw new TypeError("invalid receiver");return s(this,We)}get hours(){if(!ye(this))throw new TypeError("invalid receiver");return s(this,Ze)}get minutes(){if(!ye(this))throw new TypeError("invalid receiver");return s(this,He)}get seconds(){if(!ye(this))throw new TypeError("invalid receiver");return s(this,Ge)}get milliseconds(){if(!ye(this))throw new TypeError("invalid receiver");return s(this,Ve)}get microseconds(){if(!ye(this))throw new TypeError("invalid receiver");return s(this,Ke)}get nanoseconds(){if(!ye(this))throw new TypeError("invalid receiver");return s(this,Qe)}get sign(){if(!ye(this))throw new TypeError("invalid receiver");return Mt(s(this,qe),s(this,Me),s(this,tt),s(this,We),s(this,Ze),s(this,He),s(this,Ge),s(this,Ve),s(this,Ke),s(this,Qe))}get blank(){if(!ye(this))throw new TypeError("invalid receiver");return Mt(s(this,qe),s(this,Me),s(this,tt),s(this,We),s(this,Ze),s(this,He),s(this,Ge),s(this,Ve),s(this,Ke),s(this,Qe))===0}with(e){if(!ye(this))throw new TypeError("invalid receiver");const t=G(e,["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],"partial"),{years:n=s(this,qe),months:i=s(this,Me),weeks:o=s(this,tt),days:a=s(this,We),hours:c=s(this,Ze),minutes:d=s(this,He),seconds:h=s(this,Ge),milliseconds:u=s(this,Ve),microseconds:m=s(this,Ke),nanoseconds:f=s(this,Qe)}=t;return new Qt(n,i,o,a,c,d,h,u,m,f)}negated(){if(!ye(this))throw new TypeError("invalid receiver");return Ys(this)}abs(){if(!ye(this))throw new TypeError("invalid receiver");return new Qt(Math.abs(s(this,qe)),Math.abs(s(this,Me)),Math.abs(s(this,tt)),Math.abs(s(this,We)),Math.abs(s(this,Ze)),Math.abs(s(this,He)),Math.abs(s(this,Ge)),Math.abs(s(this,Ve)),Math.abs(s(this,Ke)),Math.abs(s(this,Qe)))}add(e,t){if(!ye(this))throw new TypeError("invalid receiver");return zo("add",this,e,t)}subtract(e,t){if(!ye(this))throw new TypeError("invalid receiver");return zo("subtract",this,e,t)}round(e){if(!ye(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let t=s(this,qe),n=s(this,Me),i=s(this,tt),o=s(this,We),a=s(this,Ze),c=s(this,He),d=s(this,Ge),h=s(this,Ve),u=s(this,Ke),m=s(this,Qe),f=_i(t,n,i,o,a,c,d,h,u,m);const p=typeof e=="string"?Ur("smallestUnit",e):ee(e);let g=ot(p,"largestUnit","datetime",void 0,["auto"]),y=Dn(p);const v=Wr(p),w=Dt(p,"halfExpand");let b=ot(p,"smallestUnit","datetime",void 0),T=!0;b||(T=!1,b="nanosecond"),f=pr(f,b);let C=!0;if(g||(C=!1,g=f),g==="auto"&&(g=f),!T&&!C)throw new RangeError("at least one of smallestUnit or largestUnit is required");if(pr(g,b)!==g)throw new RangeError(`largestUnit ${g} cannot be smaller than smallestUnit ${b}`);const S={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[b];return S!==void 0&&Zr(v,S,!1),{years:t,months:n,weeks:i,days:o}=Cn(t,n,i,o,g,y),{years:t,months:n,weeks:i,days:o,hours:a,minutes:c,seconds:d,milliseconds:h,microseconds:u,nanoseconds:m}=Zt(t,n,i,o,a,c,d,h,u,m,v,b,w,y),{years:t,months:n,weeks:i,days:o,hours:a,minutes:c,seconds:d,milliseconds:h,microseconds:u,nanoseconds:m}=Vs(t,n,i,o,a,c,d,h,u,m,v,b,w,y),{days:o,hours:a,minutes:c,seconds:d,milliseconds:h,microseconds:u,nanoseconds:m}=Tt(o,a,c,d,h,u,m,g,y),{years:t,months:n,weeks:i,days:o}=(function(E,$,M,Q,X,J){const N=k("%Temporal.Duration%"),Y=Mt(E,$,M,Q,0,0,0,0,0,0);if(Y===0)return{years:E,months:$,weeks:M,days:Q};const R=l.BigInt(Y);let A,V,Ee=l.BigInt(E),Se=l.BigInt($),Ie=l.BigInt(M),Te=l.BigInt(Q);J&&(V=se(J),A=s(V,_));const at=new N(Y),St=new N(0,Y),It=new N(0,0,Y);switch(X){case"year":{if(!A)throw new RangeError("a starting point is required for years balancing");const lt=typeof A!="string"?ie(A,"dateAdd"):void 0;let Fe,ct,_n;for({relativeTo:Fe,days:ct}=Ye(A,V,at,lt);l.greaterThanOrEqual(Ct(Te),l.BigInt(le(ct)));)Te=l.subtract(Te,l.BigInt(ct)),Ee=l.add(Ee,R),V=Fe,{relativeTo:Fe,days:ct}=Ye(A,V,at,lt);for({relativeTo:Fe,days:_n}=Ye(A,V,St,lt);l.greaterThanOrEqual(Ct(Te),l.BigInt(le(_n)));)Te=l.subtract(Te,l.BigInt(_n)),Se=l.add(Se,R),V=Fe,{relativeTo:Fe,days:_n}=Ye(A,V,St,lt);Fe=Ne(A,V,at,void 0,lt);const ao=typeof A!="string"?ie(A,"dateUntil"):void 0,lo=Be(null);lo.largestUnit="month";let si=Xt(A,V,Fe,lo,ao),ai=s(si,Me);for(;l.greaterThanOrEqual(Ct(Se),l.BigInt(le(ai)));){Se=l.subtract(Se,l.BigInt(ai)),Ee=l.add(Ee,R),V=Fe,Fe=Ne(A,V,at,void 0,lt);const co=Be(null);co.largestUnit="month",si=Xt(A,V,Fe,co,ao),ai=s(si,Me)}break}case"month":{if(!A)throw new RangeError("a starting point is required for months balancing");const lt=typeof A!="string"?ie(A,"dateAdd"):void 0;let Fe,ct;for({relativeTo:Fe,days:ct}=Ye(A,V,St,lt);l.greaterThanOrEqual(Ct(Te),l.BigInt(le(ct)));)Te=l.subtract(Te,l.BigInt(ct)),Se=l.add(Se,R),V=Fe,{relativeTo:Fe,days:ct}=Ye(A,V,St,lt);break}case"week":{if(!A)throw new RangeError("a starting point is required for weeks balancing");const lt=typeof A!="string"?ie(A,"dateAdd"):void 0;let Fe,ct;for({relativeTo:Fe,days:ct}=Ye(A,V,It,lt);l.greaterThanOrEqual(Ct(Te),l.BigInt(le(ct)));)Te=l.subtract(Te,l.BigInt(ct)),Ie=l.add(Ie,R),V=Fe,{relativeTo:Fe,days:ct}=Ye(A,V,It,lt);break}}return{years:l.toNumber(Ee),months:l.toNumber(Se),weeks:l.toNumber(Ie),days:l.toNumber(Te)}})(t,n,i,o,g,y),new Qt(t,n,i,o,a,c,d,h,u,m)}total(e){if(!ye(this))throw new TypeError("invalid receiver");let t=s(this,qe),n=s(this,Me),i=s(this,tt),o=s(this,We),a=s(this,Ze),c=s(this,He),d=s(this,Ge),h=s(this,Ve),u=s(this,Ke),m=s(this,Qe);if(e===void 0)throw new TypeError("options argument is required");const f=typeof e=="string"?Ur("unit",e):ee(e),p=Dn(f),g=ot(f,"unit","datetime",fr);let y;({years:t,months:n,weeks:i,days:o}=Cn(t,n,i,o,g,p)),F(p)&&(y=Gs(p,t,n,i,0));let v=Ls(o,a,c,d,h,u,m,g,y);if(v==="positive overflow")return 1/0;if(v==="negative overflow")return-1/0;({days:o,hours:a,minutes:c,seconds:d,milliseconds:h,microseconds:u,nanoseconds:m}=v);const{total:w}=Zt(t,n,i,o,a,c,d,h,u,m,1,g,"trunc",p);return w}toString(e){if(!ye(this))throw new TypeError("invalid receiver");const t=ee(e),n=un(t),i=Dt(t,"trunc"),o=ot(t,"smallestUnit","time",void 0);if(o==="hour"||o==="minute")throw new RangeError('smallestUnit must be a time unit other than "hours" or "minutes"');const{precision:a,unit:c,increment:d}=hn(o,n);return ui(this,a,{unit:c,increment:d,roundingMode:i})}toJSON(){if(!ye(this))throw new TypeError("invalid receiver");return ui(this)}toLocaleString(e,t){if(!ye(this))throw new TypeError("invalid receiver");return typeof Intl<"u"&&Intl.DurationFormat!==void 0?new Intl.DurationFormat(e,t).format(this):(console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),ui(this))}valueOf(){throw new TypeError("use compare() to compare Temporal.Duration")}static from(e){return ye(e)?new Qt(s(e,qe),s(e,Me),s(e,tt),s(e,We),s(e,Ze),s(e,He),s(e,Ge),s(e,Ve),s(e,Ke),s(e,Qe)):Ir(e)}static compare(e,t,n){const i=Ir(e),o=Ir(t),a=Dn(ee(n)),c=s(i,qe),d=s(i,Me),h=s(i,tt);let u=s(i,We);const m=s(i,Ze),f=s(i,He),p=s(i,Ge),g=s(i,Ve),y=s(i,Ke);let v=s(i,Qe);const w=s(o,qe),b=s(o,Me),T=s(o,tt);let C=s(o,We);const S=s(o,Ze),D=s(o,He),E=s(o,Ge),$=s(o,Ve),M=s(o,Ke);let Q=s(o,Qe);const X=xo(a,c,d,h,u),J=xo(a,w,b,T,C);c===0&&w===0&&d===0&&b===0&&h===0&&T===0||({days:u}=Cn(c,d,h,u,"day",a),{days:C}=Cn(w,b,T,C,"day",a));const N=Yr(u,m,f,p,g,y,v,X),Y=Yr(C,S,D,E,$,M,Q,J);return hr(l.toNumber(l.subtract(N,Y)))}}jt(Qt,"Temporal.Duration");const $c=Object.create;class no{constructor(e,t,n="iso8601",i=1972){Ss(this,te(e),te(t),st(n),te(i))}get monthCode(){if(!$e(this))throw new TypeError("invalid receiver");return fn(s(this,_),this)}get day(){if(!$e(this))throw new TypeError("invalid receiver");return pn(s(this,_),this)}get calendarId(){if(!$e(this))throw new TypeError("invalid receiver");return Ae(s(this,_))}with(e,t){if(!$e(this))throw new TypeError("invalid receiver");if(!ce(e))throw new TypeError("invalid argument");qr(e);const n=ee(t),i=s(this,_),o=ke(i,["day","month","monthCode","year"]);let a=G(this,o,[]);return a=gr(i,a,G(e,o,"partial")),a=G(a,o,[]),Ar(i,a,n)}equals(e){if(!$e(this))throw new TypeError("invalid receiver");const t=ko(e);for(const n of[O,P,I])if(s(this,n)!==s(t,n))return!1;return yn(s(this,_),s(t,_))}toString(e){if(!$e(this))throw new TypeError("invalid receiver");return $o(this,dn(ee(e)))}toJSON(){if(!$e(this))throw new TypeError("invalid receiver");return $o(this)}toLocaleString(e,t){if(!$e(this))throw new TypeError("invalid receiver");return new or(e,t).format(this)}valueOf(){throw new TypeError("use equals() to compare Temporal.PlainMonthDay")}toPlainDate(e){if(!$e(this))throw new TypeError("invalid receiver");if(!ce(e))throw new TypeError("argument should be an object");const t=s(this,_),n=ke(t,["day","monthCode"]),i=G(this,n,[]),o=ke(t,["year"]);let a=gr(t,i,G(e,o,[]));a=G(a,[...new Set([...n,...o])],[]);const c=$c(null);return c.overflow="reject",Wt(t,a,c)}getISOFields(){if(!$e(this))throw new TypeError("invalid receiver");return{calendar:s(this,_),isoDay:s(this,P),isoMonth:s(this,O),isoYear:s(this,I)}}getCalendar(){if(!$e(this))throw new TypeError("invalid receiver");return Hr(s(this,_))}static from(e,t){const n=ee(t);return $e(e)?(Ce(n),nn(s(e,O),s(e,P),s(e,_),s(e,I))):ko(e,n)}}jt(no,"Temporal.PlainMonthDay");const io=()=>new(k("%Temporal.Instant%"))(Xi()),Vo=(r,e=Vt())=>{const t=ze(e),n=st(r);return ht(t,io(),n)},pi=(r=Vt())=>ht(ze(r),io(),"iso8601"),Ko=(r,e=Vt())=>{const t=ze(e),n=st(r);return xe(Xi(),t,n)},fa={instant:io,plainDateTime:Vo,plainDateTimeISO:pi,plainDate:(r,e=Vt())=>Lr(Vo(r,e)),plainDateISO:(r=Vt())=>Lr(pi(r)),plainTimeISO:(r=Vt())=>zi(pi(r)),timeZoneId:()=>Vt(),zonedDateTime:Ko,zonedDateTimeISO:(r=Vt())=>Ko("iso8601",r),[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(fa,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});const Oc=Object.assign;function Qo(r,e,t){let n=s(r,U),i=s(r,z),o=s(r,B),a=s(r,q),c=s(r,W),d=s(r,Z);if(t){const{unit:h,increment:u,roundingMode:m}=t;({hour:n,minute:i,second:o,millisecond:a,microsecond:c,nanosecond:d}=Qi(n,i,o,a,c,d,u,h,m))}return`${ue(n)}:${ue(i)}${ri(o,a,c,d,e)}`}class mr{constructor(e=0,t=0,n=0,i=0,o=0,a=0){const c=e===void 0?0:te(e),d=t===void 0?0:te(t),h=n===void 0?0:te(n),u=i===void 0?0:te(i),m=o===void 0?0:te(o),f=a===void 0?0:te(a);oi(c,d,h,u,m,f),At(this),H(this,U,c),H(this,z,d),H(this,B,h),H(this,q,u),H(this,W,m),H(this,Z,f)}get hour(){if(!ve(this))throw new TypeError("invalid receiver");return s(this,U)}get minute(){if(!ve(this))throw new TypeError("invalid receiver");return s(this,z)}get second(){if(!ve(this))throw new TypeError("invalid receiver");return s(this,B)}get millisecond(){if(!ve(this))throw new TypeError("invalid receiver");return s(this,q)}get microsecond(){if(!ve(this))throw new TypeError("invalid receiver");return s(this,W)}get nanosecond(){if(!ve(this))throw new TypeError("invalid receiver");return s(this,Z)}with(e,t){if(!ve(this))throw new TypeError("invalid receiver");if(!ce(e))throw new TypeError("invalid argument");qr(e);const n=Ce(ee(t)),i=Nn(e,"partial"),o=Nn(this);let{hour:a,minute:c,second:d,millisecond:h,microsecond:u,nanosecond:m}=Oc(o,i);return{hour:a,minute:c,second:d,millisecond:h,microsecond:u,nanosecond:m}=Zn(a,c,d,h,u,m,n),new mr(a,c,d,h,u,m)}add(e){if(!ve(this))throw new TypeError("invalid receiver");return Wo("add",this,e)}subtract(e){if(!ve(this))throw new TypeError("invalid receiver");return Wo("subtract",this,e)}until(e,t){if(!ve(this))throw new TypeError("invalid receiver");return Lo("until",this,e,t)}since(e,t){if(!ve(this))throw new TypeError("invalid receiver");return Lo("since",this,e,t)}round(e){if(!ve(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?Ur("smallestUnit",e):ee(e),n=Wr(t),i=Dt(t,"halfExpand"),o=ot(t,"smallestUnit","time",fr);Zr(n,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[o],!1);let a=s(this,U),c=s(this,z),d=s(this,B),h=s(this,q),u=s(this,W),m=s(this,Z);return{hour:a,minute:c,second:d,millisecond:h,microsecond:u,nanosecond:m}=Qi(a,c,d,h,u,m,n,o,i),new mr(a,c,d,h,u,m)}equals(e){if(!ve(this))throw new TypeError("invalid receiver");const t=Ut(e);for(const n of[U,z,B,q,W,Z])if(s(this,n)!==s(t,n))return!1;return!0}toString(e){if(!ve(this))throw new TypeError("invalid receiver");const t=ee(e),n=un(t),i=Dt(t,"trunc"),o=ot(t,"smallestUnit","time",void 0);if(o==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const{precision:a,unit:c,increment:d}=hn(o,n);return Qo(this,a,{unit:c,increment:d,roundingMode:i})}toJSON(){if(!ve(this))throw new TypeError("invalid receiver");return Qo(this,"auto")}toLocaleString(e,t){if(!ve(this))throw new TypeError("invalid receiver");return new or(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainTime")}toPlainDateTime(e){if(!ve(this))throw new TypeError("invalid receiver");const t=se(e),n=s(t,I),i=s(t,O),o=s(t,P),a=s(t,_);return rt(n,i,o,s(this,U),s(this,z),s(this,B),s(this,q),s(this,W),s(this,Z),a)}toZonedDateTime(e){if(!ve(this))throw new TypeError("invalid receiver");if(!ce(e))throw new TypeError("invalid argument");const t=e.plainDate;if(t===void 0)throw new TypeError("missing date property");const n=se(t),i=e.timeZone;if(i===void 0)throw new TypeError("missing timeZone property");const o=ze(i),a=s(n,I),c=s(n,O),d=s(n,P),h=s(n,_),u=s(this,U),m=s(this,z),f=s(this,B),p=s(this,q),g=s(this,W),y=s(this,Z);return xe(s(Je(o,new(k("%Temporal.PlainDateTime%"))(a,c,d,u,m,f,p,g,y,h),"compatible"),j),o,h)}getISOFields(){if(!ve(this))throw new TypeError("invalid receiver");return{isoHour:s(this,U),isoMicrosecond:s(this,W),isoMillisecond:s(this,q),isoMinute:s(this,z),isoNanosecond:s(this,Z),isoSecond:s(this,B)}}static from(e,t){const n=Ce(ee(t));return ve(e)?new mr(s(e,U),s(e,z),s(e,B),s(e,q),s(e,W),s(e,Z)):Ut(e,n)}static compare(e,t){const n=Ut(e),i=Ut(t);for(const o of[U,z,B,q,W,Z]){const a=s(n,o),c=s(i,o);if(a!==c)return hr(a-c)}return 0}}jt(mr,"Temporal.PlainTime");class tn{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: identifier is required");const t=Bi(e);At(this),H(this,$t,t)}get id(){if(!pt(this))throw new TypeError("invalid receiver");return s(this,$t)}getOffsetNanosecondsFor(e){if(!pt(this))throw new TypeError("invalid receiver");const t=Et(e),n=s(this,$t);return Dr(n)?Jt(n):zt(n,s(t,j))}getOffsetStringFor(e){if(!pt(this))throw new TypeError("invalid receiver");return Ci(this,Et(e))}getPlainDateTimeFor(e,t="iso8601"){if(!pt(this))throw new TypeError("invalid receiver");return ht(this,Et(e),st(t))}getInstantFor(e,t){if(!pt(this))throw new TypeError("invalid receiver");return Je(this,dr(e),jr(ee(t)))}getPossibleInstantsFor(e){if(!pt(this))throw new TypeError("invalid receiver");const t=dr(e),n=k("%Temporal.Instant%"),i=s(this,$t);if(Dr(i)){const a=er(s(t,I),s(t,O),s(t,P),s(t,U),s(t,z),s(t,B),s(t,q),s(t,W),s(t,Z));if(a===null)throw new RangeError("DateTime outside of supported range");const c=Jt(i);return[new n(l.subtract(a,l.BigInt(c)))]}return(function(c,d,h,u,m,f,p,g,y,v){const w=er(d,h,u,m,f,p,g,y,v);if(w===null)throw new RangeError("DateTime outside of supported range");let b=l.subtract(w,Ft);l.lessThan(b,rn)&&(b=w);let T=l.add(w,Ft);l.greaterThan(T,xr)&&(T=w);const C=zt(c,b),S=zt(c,T);return(C===S?[C]:[C,S]).map((D=>{const E=l.subtract(w,l.BigInt(D)),$=Ns(c,E);if(d===$.year&&h===$.month&&u===$.day&&m===$.hour&&f===$.minute&&p===$.second&&g===$.millisecond&&y===$.microsecond&&v===$.nanosecond)return E})).filter((D=>D!==void 0))})(i,s(t,I),s(t,O),s(t,P),s(t,U),s(t,z),s(t,B),s(t,q),s(t,W),s(t,Z)).map((a=>new n(a)))}getNextTransition(e){if(!pt(this))throw new TypeError("invalid receiver");const t=Et(e),n=s(this,$t);if(Dr(n)||n==="UTC")return null;let i=s(t,j);const o=k("%Temporal.Instant%");return i=As(n,i),i===null?null:new o(i)}getPreviousTransition(e){if(!pt(this))throw new TypeError("invalid receiver");const t=Et(e),n=s(this,$t);if(Dr(n)||n==="UTC")return null;let i=s(t,j);const o=k("%Temporal.Instant%");return i=Ei(n,i),i===null?null:new o(i)}toString(){if(!pt(this))throw new TypeError("invalid receiver");return s(this,$t)}toJSON(){if(!pt(this))throw new TypeError("invalid receiver");return s(this,$t)}static from(e){return Os(ze(e))}}jt(tn,"Temporal.TimeZone"),me("Temporal.TimeZone.prototype.getOffsetNanosecondsFor",tn.prototype.getOffsetNanosecondsFor),me("Temporal.TimeZone.prototype.getPossibleInstantsFor",tn.prototype.getPossibleInstantsFor);const Pc=Object.create;class oo{constructor(e,t,n="iso8601",i=1){Is(this,te(e),te(t),st(n),te(i))}get year(){if(!re(this))throw new TypeError("invalid receiver");return Hn(s(this,_),this)}get month(){if(!re(this))throw new TypeError("invalid receiver");return Gn(s(this,_),this)}get monthCode(){if(!re(this))throw new TypeError("invalid receiver");return fn(s(this,_),this)}get calendarId(){if(!re(this))throw new TypeError("invalid receiver");return Ae(s(this,_))}get era(){if(!re(this))throw new TypeError("invalid receiver");return Vn(s(this,_),this)}get eraYear(){if(!re(this))throw new TypeError("invalid receiver");return Kn(s(this,_),this)}get daysInMonth(){if(!re(this))throw new TypeError("invalid receiver");return Qn(s(this,_),this)}get daysInYear(){if(!re(this))throw new TypeError("invalid receiver");return Xn(s(this,_),this)}get monthsInYear(){if(!re(this))throw new TypeError("invalid receiver");return Jn(s(this,_),this)}get inLeapYear(){if(!re(this))throw new TypeError("invalid receiver");return ei(s(this,_),this)}with(e,t){if(!re(this))throw new TypeError("invalid receiver");if(!ce(e))throw new TypeError("invalid argument");qr(e);const n=ee(t),i=s(this,_),o=ke(i,["month","monthCode","year"]);let a=G(this,o,[]);return a=gr(i,a,G(e,o,"partial")),a=G(a,o,[]),yr(i,a,n)}add(e,t){if(!re(this))throw new TypeError("invalid receiver");return Zo("add",this,e,t)}subtract(e,t){if(!re(this))throw new TypeError("invalid receiver");return Zo("subtract",this,e,t)}until(e,t){if(!re(this))throw new TypeError("invalid receiver");return Yo("until",this,e,t)}since(e,t){if(!re(this))throw new TypeError("invalid receiver");return Yo("since",this,e,t)}equals(e){if(!re(this))throw new TypeError("invalid receiver");const t=Qr(e);for(const n of[I,O,P])if(s(this,n)!==s(t,n))return!1;return yn(s(this,_),s(t,_))}toString(e){if(!re(this))throw new TypeError("invalid receiver");return Oo(this,dn(ee(e)))}toJSON(){if(!re(this))throw new TypeError("invalid receiver");return Oo(this)}toLocaleString(e,t){if(!re(this))throw new TypeError("invalid receiver");return new or(e,t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainYearMonth")}toPlainDate(e){if(!re(this))throw new TypeError("invalid receiver");if(!ce(e))throw new TypeError("argument should be an object");const t=s(this,_),n=ke(t,["monthCode","year"]),i=G(this,n,[]),o=ke(t,["day"]);let a=gr(t,i,G(e,o,[]));a=G(a,[...new Set([...n,...o])],[]);const c=Pc(null);return c.overflow="reject",Wt(t,a,c)}getISOFields(){if(!re(this))throw new TypeError("invalid receiver");return{calendar:s(this,_),isoDay:s(this,P),isoMonth:s(this,O),isoYear:s(this,I)}}getCalendar(){if(!re(this))throw new TypeError("invalid receiver");return Hr(s(this,_))}static from(e,t){const n=ee(t);return re(e)?(Ce(n),on(s(e,I),s(e,O),s(e,_),s(e,P))):Qr(e,n)}static compare(e,t){const n=Qr(e),i=Qr(t);return Kt(s(n,I),s(n,O),s(n,P),s(i,I),s(i,O),s(i,P))}}jt(oo,"Temporal.PlainYearMonth");const Mc=or.prototype.resolvedOptions,Fc=Object.create;class so{constructor(e,t,n="iso8601"){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");Rs(this,Jr(e),ze(t),st(n))}get calendarId(){if(!F(this))throw new TypeError("invalid receiver");return Ae(s(this,_))}get timeZoneId(){if(!F(this))throw new TypeError("invalid receiver");return sn(s(this,oe))}get year(){if(!F(this))throw new TypeError("invalid receiver");return Hn(s(this,_),ae(this))}get month(){if(!F(this))throw new TypeError("invalid receiver");return Gn(s(this,_),ae(this))}get monthCode(){if(!F(this))throw new TypeError("invalid receiver");return fn(s(this,_),ae(this))}get day(){if(!F(this))throw new TypeError("invalid receiver");return pn(s(this,_),ae(this))}get hour(){if(!F(this))throw new TypeError("invalid receiver");return s(ae(this),U)}get minute(){if(!F(this))throw new TypeError("invalid receiver");return s(ae(this),z)}get second(){if(!F(this))throw new TypeError("invalid receiver");return s(ae(this),B)}get millisecond(){if(!F(this))throw new TypeError("invalid receiver");return s(ae(this),q)}get microsecond(){if(!F(this))throw new TypeError("invalid receiver");return s(ae(this),W)}get nanosecond(){if(!F(this))throw new TypeError("invalid receiver");return s(ae(this),Z)}get era(){if(!F(this))throw new TypeError("invalid receiver");return Vn(s(this,_),ae(this))}get eraYear(){if(!F(this))throw new TypeError("invalid receiver");return Kn(s(this,_),ae(this))}get epochSeconds(){if(!F(this))throw new TypeError("invalid receiver");const e=s(this,j);return l.toNumber(Rr(e,Pt))}get epochMilliseconds(){if(!F(this))throw new TypeError("invalid receiver");const e=s(this,j);return l.toNumber(Rr(e,ut))}get epochMicroseconds(){if(!F(this))throw new TypeError("invalid receiver");return zn(Rr(s(this,j),ne))}get epochNanoseconds(){if(!F(this))throw new TypeError("invalid receiver");return zn(s(this,j))}get dayOfWeek(){if(!F(this))throw new TypeError("invalid receiver");return ji(s(this,_),ae(this))}get dayOfYear(){if(!F(this))throw new TypeError("invalid receiver");return Ai(s(this,_),ae(this))}get weekOfYear(){if(!F(this))throw new TypeError("invalid receiver");return Li(s(this,_),ae(this))}get yearOfWeek(){if(!F(this))throw new TypeError("invalid receiver");return Yi(s(this,_),ae(this))}get hoursInDay(){if(!F(this))throw new TypeError("invalid receiver");const e=ae(this),t=k("%Temporal.PlainDateTime%"),n=s(e,I),i=s(e,O),o=s(e,P),a=new t(n,i,o,0,0,0,0,0,0),c=ur(n,i,o,0,0,0,1,"reject"),d=new t(c.year,c.month,c.day,0,0,0,0,0,0),h=s(this,oe),u=s(Je(h,a,"compatible"),j),m=s(Je(h,d,"compatible"),j);return Rt(l.subtract(m,u),bs)}get daysInWeek(){if(!F(this))throw new TypeError("invalid receiver");return Ui(s(this,_),ae(this))}get daysInMonth(){if(!F(this))throw new TypeError("invalid receiver");return Qn(s(this,_),ae(this))}get daysInYear(){if(!F(this))throw new TypeError("invalid receiver");return Xn(s(this,_),ae(this))}get monthsInYear(){if(!F(this))throw new TypeError("invalid receiver");return Jn(s(this,_),ae(this))}get inLeapYear(){if(!F(this))throw new TypeError("invalid receiver");return ei(s(this,_),ae(this))}get offset(){if(!F(this))throw new TypeError("invalid receiver");return Ci(s(this,oe),s(this,Ue))}get offsetNanoseconds(){if(!F(this))throw new TypeError("invalid receiver");return kt(s(this,oe),s(this,Ue))}with(e,t){if(!F(this))throw new TypeError("invalid receiver");if(!ce(e))throw new TypeError("invalid zoned-date-time-like");qr(e);const n=ee(t),i=s(this,_);let o=ke(i,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);o.push("offset");let a=G(this,o,["offset"]);a=gr(i,a,G(e,o,"partial")),a=G(a,o,["offset"]);const c=jr(n),d=xn(n,"prefer");let{year:h,month:u,day:m,hour:f,minute:p,second:g,millisecond:y,microsecond:v,nanosecond:w}=mn(i,a,n);const b=Jt(a.offset),T=s(this,oe);return xe(jn(h,u,m,f,p,g,y,v,w,"option",b,T,c,d,!1),T,i)}withPlainDate(e){if(!F(this))throw new TypeError("invalid receiver");const t=se(e),n=s(t,I),i=s(t,O),o=s(t,P);let a=s(t,_);const c=ae(this),d=s(c,U),h=s(c,z),u=s(c,B),m=s(c,q),f=s(c,W),p=s(c,Z);a=$s(s(this,_),a);const g=s(this,oe);return xe(s(Je(g,new(k("%Temporal.PlainDateTime%"))(n,i,o,d,h,u,m,f,p,a),"compatible"),j),g,a)}withPlainTime(e){if(!F(this))throw new TypeError("invalid receiver");const t=k("%Temporal.PlainTime%"),n=e===void 0?new t:Ut(e),i=ae(this),o=s(i,I),a=s(i,O),c=s(i,P),d=s(this,_),h=s(n,U),u=s(n,z),m=s(n,B),f=s(n,q),p=s(n,W),g=s(n,Z),y=s(this,oe);return xe(s(Je(y,new(k("%Temporal.PlainDateTime%"))(o,a,c,h,u,m,f,p,g,d),"compatible"),j),y,d)}withTimeZone(e){if(!F(this))throw new TypeError("invalid receiver");const t=ze(e);return xe(s(this,j),t,s(this,_))}withCalendar(e){if(!F(this))throw new TypeError("invalid receiver");const t=st(e);return xe(s(this,j),s(this,oe),t)}add(e,t){if(!F(this))throw new TypeError("invalid receiver");return Ho("add",this,e,t)}subtract(e,t){if(!F(this))throw new TypeError("invalid receiver");return Ho("subtract",this,e,t)}until(e,t){if(!F(this))throw new TypeError("invalid receiver");return Uo("until",this,e,t)}since(e,t){if(!F(this))throw new TypeError("invalid receiver");return Uo("since",this,e,t)}round(e){if(!F(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const t=typeof e=="string"?Ur("smallestUnit",e):ee(e),n=Wr(t),i=Dt(t,"halfExpand"),o=ot(t,"smallestUnit","time",fr,["day"]),a={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[o];Zr(n,a,a===1);const c=ae(this);let d=s(c,I),h=s(c,O),u=s(c,P),m=s(c,U),f=s(c,z),p=s(c,B),g=s(c,q),y=s(c,W),v=s(c,Z);const w=k("%Temporal.PlainDateTime%"),b=s(this,oe),T=s(this,_),C=Je(b,new w(s(c,I),s(c,O),s(c,P),0,0,0,0,0,0),"compatible"),S=yt(C,b,T,0,0,0,1,0,0,0,0,0,0),D=l.subtract(S,l.BigInt(s(C,j)));if(l.lessThanOrEqual(D,we))throw new RangeError("cannot round a ZonedDateTime in a calendar with zero or negative length days");return{year:d,month:h,day:u,hour:m,minute:f,second:p,millisecond:g,microsecond:y,nanosecond:v}=Ki(d,h,u,m,f,p,g,y,v,n,o,i,l.toNumber(D)),xe(jn(d,h,u,m,f,p,g,y,v,"option",kt(b,s(this,Ue)),b,"compatible","prefer",!1),b,s(this,_))}equals(e){if(!F(this))throw new TypeError("invalid receiver");const t=Xr(e),n=s(this,j),i=s(t,j);return!!l.equal(l.BigInt(n),l.BigInt(i))&&!!Ps(s(this,oe),s(t,oe))&&yn(s(this,_),s(t,_))}toString(e){if(!F(this))throw new TypeError("invalid receiver");const t=ee(e),n=dn(t),i=un(t),o=(function(p){return rr(p,"offset",["auto","never"],"auto")})(t),a=Dt(t,"trunc"),c=ot(t,"smallestUnit","time",void 0);if(c==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const d=(function(p){return rr(p,"timeZoneName",["auto","never","critical"],"auto")})(t),{precision:h,unit:u,increment:m}=hn(c,i);return Po(this,h,n,d,o,{unit:u,increment:m,roundingMode:a})}toLocaleString(e,t){if(!F(this))throw new TypeError("invalid receiver");const n=ee(t),i=Fc(null);if(Sr(i,n,["timeZone"]),n.timeZone!==void 0)throw new TypeError("ZonedDateTime toLocaleString does not accept a timeZone option");i.year===void 0&&i.month===void 0&&i.day===void 0&&i.weekday===void 0&&i.dateStyle===void 0&&i.hour===void 0&&i.minute===void 0&&i.second===void 0&&i.timeStyle===void 0&&i.dayPeriod===void 0&&i.timeZoneName===void 0&&(i.timeZoneName="short");let o=sn(s(this,oe));if(Dr(o))throw new RangeError("toLocaleString does not support offset string time zones");o=Bi(o),i.timeZone=o;const a=new or(e,i),c=x(Mc,a,[]).calendar,d=Ae(s(this,_));if(d!=="iso8601"&&c!=="iso8601"&&c!==d)throw new RangeError(`cannot format ZonedDateTime with calendar ${d} in locale with calendar ${c}`);return a.format(s(this,Ue))}toJSON(){if(!F(this))throw new TypeError("invalid receiver");return Po(this,"auto")}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.ZonedDateTime")}startOfDay(){if(!F(this))throw new TypeError("invalid receiver");const e=ae(this),t=k("%Temporal.PlainDateTime%"),n=s(this,_),i=new t(s(e,I),s(e,O),s(e,P),0,0,0,0,0,0,n),o=s(this,oe);return xe(s(Je(o,i,"compatible"),j),o,n)}toInstant(){if(!F(this))throw new TypeError("invalid receiver");return new(k("%Temporal.Instant%"))(s(this,j))}toPlainDate(){if(!F(this))throw new TypeError("invalid receiver");return Lr(ae(this))}toPlainTime(){if(!F(this))throw new TypeError("invalid receiver");return zi(ae(this))}toPlainDateTime(){if(!F(this))throw new TypeError("invalid receiver");return ae(this)}toPlainYearMonth(){if(!F(this))throw new TypeError("invalid receiver");const e=s(this,_);return yr(e,G(this,ke(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!F(this))throw new TypeError("invalid receiver");const e=s(this,_);return Ar(e,G(this,ke(e,["day","monthCode"]),[]))}getISOFields(){if(!F(this))throw new TypeError("invalid receiver");const e=ae(this),t=s(this,oe);return{calendar:s(this,_),isoDay:s(e,P),isoHour:s(e,U),isoMicrosecond:s(e,W),isoMillisecond:s(e,q),isoMinute:s(e,z),isoMonth:s(e,O),isoNanosecond:s(e,Z),isoSecond:s(e,B),isoYear:s(e,I),offset:Ci(t,s(this,Ue)),timeZone:t}}getCalendar(){if(!F(this))throw new TypeError("invalid receiver");return Hr(s(this,_))}getTimeZone(){if(!F(this))throw new TypeError("invalid receiver");return Os(s(this,oe))}static from(e,t){const n=ee(t);return F(e)?(jr(n),xn(n,"reject"),Ce(n),xe(s(e,j),s(e,oe),s(e,_))):Xr(e,n)}static compare(e,t){const n=Xr(e),i=Xr(t),o=s(n,j),a=s(i,j);return l.lessThan(l.BigInt(o),l.BigInt(a))?-1:l.greaterThan(l.BigInt(o),l.BigInt(a))?1:0}}function ae(r){return ht(s(r,oe),s(r,Ue),s(r,_))}jt(so,"Temporal.ZonedDateTime");var Xo=Object.freeze({__proto__:null,Calendar:ge,Duration:Qt,Instant:bt,Now:fa,PlainDate:bn,PlainDateTime:Tn,PlainMonthDay:no,PlainTime:mr,PlainYearMonth:oo,TimeZone:tn,ZonedDateTime:so});function xc(){const r=l.multiply(l.BigInt(+this),ut);return new bt(r)}const Nc=[bt,ge,bn,Tn,Qt,no,mr,tn,oo,so];for(const r of Nc){const e=Object.getOwnPropertyDescriptor(r,"prototype");(e.configurable||e.enumerable||e.writable)&&(e.configurable=!1,e.enumerable=!1,e.writable=!1,Object.defineProperty(r,"prototype",e))}const jc={props:{isUploading:{type:Boolean,required:!1}},data(){return{isDragging:!1,showMessage:!1}},methods:{onChange(){const r=this.$refs.file;let e=Array.from(r.files);this.$emit("files",e)},dragover(r){r.preventDefault(),this.isDragging=!0},dragleave(){this.isDragging=!1},drop(r){r.preventDefault();const e=this.$refs.file;e.files=r.dataTransfer.files,this.onChange(),this.isDragging=!1},remove(r){},uploadFiles(){}}};var Ac=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("div",{staticClass:"dropzone-container",style:e.isDragging&&"border-color: yellow;",on:{dragover:e.dragover,dragleave:e.dragleave,drop:e.drop}},[t("input",{ref:"file",staticClass:"hidden-input hidden-input",attrs:{type:"file",multiple:"",name:"file",id:"fileInput",accept:"*"},on:{change:e.onChange}}),t("label",{staticClass:"file-label",attrs:{for:"fileInput"}},[e.isUploading?t("div",{staticClass:"uploading"},[t("p",[e._v("Files are uploading! Don't navigate away from this page.")])]):e.isDragging?t("div",[e._v("Release file here to add")]):t("div",[e._v("Drag files here"),e._m(0)])])])])},Lc=[function(){var r=this,e=r._self._c;return e("p",[r._v("or"),e("b",[r._v(" click ")]),r._v("to select files to upload")])}],Yc=mt(jc,Ac,Lc,!1,null,"836dd054");const pa=Yc.exports,Uc=_t({name:"EditableField",components:{},props:{value:String},data:()=>({editing:!1,id:`ref-${Math.random()}`}),mounted(){},computed:{},methods:{activateEditor(){this.editing=!0,this.$nextTick(()=>{this.$refs[this.id].focus()})},lostFocus(r){this.editing=!1,this.$emit("input",r.target.value)}}});var zc=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"editable-field"},[t("span",{directives:[{name:"show",rawName:"v-show",value:!e.editing,expression:"!editing"}],on:{click:e.activateEditor}},[e._v(e._s(e.value||" -     "))]),e.editing?t("span",{staticClass:"editor"},[t("input",{ref:e.id,staticClass:"finger form-control",attrs:{type:"text"},domProps:{value:e.value},on:{blur:function(n){return e.lostFocus(n)},keydown:function(n){if(!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter"))return null;e.editing=!1}}})]):e._e()])},Bc=[],qc=mt(Uc,zc,Bc,!1,null,"66bd846d");const Wc=qc.exports,Zc={messages:{en:{},de:{}}},Hc=_t({name:"SimRunDetails",i18n:Zc,components:{DropFile:pa,EditableField:Wc,VueGoodTable:ss},props:{runId:{type:String,required:!0},server:{type:Object,required:!0}},data:()=>({globalState:be.state,editableFields:new Set(["project","script","cRAM","cProcessors","cEmail"]),files:{},isLoading:!0,isUploadingRightNow:new Set,isShowingRunTemplate:!1,job:{},jobScript:"",jobProject:"",showDropZone:!0,statusMessage:""}),mounted(){this.$store.commit("setShowLeftBar",!0),this.setupPage()},watch:{},computed:{},methods:{async setupPage(){await this.getJobDetails(),await this.getFileList()},getFileSize(r){return r.isUploading?"....":ls(r.size_of||0,{round:2,standard:"si"})},getFormat(r){const[e,t]=r,n={padding:"1px 3px"};if(e=="status")switch(n.color="white",t){case"Draft":n.backgroundColor="blue";break;case"Error":case"Cancelled":n.backgroundColor="red";break;case"Submitted":case"Preparing":case"Queued":n.backgroundColor="#68f";break;case"Running":n.backgroundColor="blueviolet";break;case"Complete":n.backgroundColor="green";break;default:n.backgroundColor="orange";break}return n},async getJobDetails(){const r=`${this.server.url}/jobs/?id=${this.runId}`;let e={},t=await fetch(r,{headers:{Authorization:this.server.key,"Content-Type":"application/json"}}).then(g=>g.json());t.length==1?(e=t[0],"status"in e&&(e.status=Jo[e.status])):console.error("JOB NOT FOUND");const{status:n,project:i,folder:o,start:a,script:c,qsub_id:d,owner:h,id:u,cRAM:m,cProcessors:f,cEmail:p}=e;this.job={status:n,project:i,script:c,cRAM:m,cProcessors:f,cEmail:p,folder:o,start:a,qsub_id:d,owner:h,run_id:u}},jobColumns(){return[]},async handleFieldChanged(r){const e={};e[r]=this.job[r];const t=`${this.server.url}/jobs/${this.runId}`;await fetch(t,{method:"PUT",headers:{Authorization:this.server.key,"Content-Type":"application/json"},body:JSON.stringify(e)}).then(n=>n.json())},async clickedLaunch(){console.log("3-2-1 LAUNCH!"),this.statusMessage="Adding to queue...",await fetch(`${this.server.url}/jobs/${this.runId}`,{method:"PUT",body:JSON.stringify({status:1}),headers:{Authorization:this.server.key,"Content-Type":"application/json"}}).then(r=>r.json()),this.$router.push(`../${this.server.serverNickname}`)},async clickedRunAgain(){console.log("click!",this.job);const{project:r,script:e,cRAM:t,cEmail:n,cProcessors:i,...o}=this.job,a=`${this.server.url}/jobs/`,c=await fetch(a,{method:"POST",headers:{Authorization:this.server.key,"Content-Type":"application/json"},body:JSON.stringify({project:r,script:e,cRAM:t,cEmail:n,cProcessors:i})}).then(d=>d.json());console.log("NEW JOB:",c);for(const d of Object.values(this.files)){const h={...d};delete h.id,h.job_id=c;const u=`${this.server.url}/files/`,m=await fetch(u,{method:"POST",headers:{Authorization:this.server.key,"Content-Type":"application/json"},body:JSON.stringify(h)}).then(f=>f.json());console.log("NEW FILE:",m)}this.$router.push(`${c}`)},async buildSummaryPage(){const r=`${this.server.url}/jobs/`;(await fetch(r,{headers:{Authorization:this.server.key,"Content-Type":"application/json"}}).then(n=>n.json())).map(n=>(n.status=Jo[n.status],n)).sort((n,i)=>n.id>i.id?-1:1),this.isLoading=!1},async getFileList(){const r=`${this.server.url}/files/?job_id=${this.runId}`,e=await fetch(r,{headers:{Authorization:this.server.key,"Content-Type":"application/json"}}).then(t=>t.json());for(const t of e)this.files[t.name]=t;this.sortFiles()},sortFiles(){const r=Object.keys(this.files);r.sort((t,n)=>t.toLocaleLowerCase()<n.toLocaleLowerCase()?-1:1);const e={};for(const t of r)e[t]=this.files[t];this.files=e},clickedNewRun(){this.isShowingRunTemplate=!this.isShowingRunTemplate},async getExistingFileFromServerOrNull(r){const e=await r.arrayBuffer(),t=await crypto.subtle.digest("SHA-1",e),i=Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join(""),o=await fetch(`${this.server.url}/files/?hash=${i}`,{headers:{"Content-Type":"application/json",Authorization:this.server.key}}).then(a=>a.json());return o.length?(console.log("EXISTS!",i),{hash:o[0].hash,size_of:o[0].size_of}):null},async handleFilesAdded(r){console.log("New FILES",r);const e=Math.random();this.isUploadingRightNow.add(e);for(const t of r){this.files[t.name]={isUploading:!0,name:t.name,job_id:this.runId,size_of:t.size},this.sortFiles(),await this.$nextTick();const n=await this.getExistingFileFromServerOrNull(t);if(n){const i=await fetch(`${this.server.url}/files/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.server.key},body:JSON.stringify({name:t.name,job_id:this.runId,...n})}).then(o=>o.json());console.log("Referenced existing file",i)}else{const i=new FormData;i.append("file",t),i.append("job_id",this.runId);const o=await fetch(`${this.server.url}/files/`,{method:"POST",headers:{Authorization:this.server.key},body:i}),a=await o.json();console.log("UPLOADED:",o,a)}this.files[t.name].isUploading=!1}this.showDropZone=!1,await this.$nextTick(),this.showDropZone=!0,this.isUploadingRightNow.delete(e)},cleanName(r){return decodeURIComponent(r)},async submitRun(){if(console.log("SUBMIT!"),console.log(this.files),!this.files.length||!this.jobScript)return;this.statusMessage="Creating job...";const r={"Content-Type":"application/json",Authorization:this.server.key};let e=this.cleanName(this.jobProject);e.startsWith("/")&&(e=e.slice(1)),e.endsWith("/")&&(e=e.slice(0,-1));const t={script:this.jobScript,project:e},n=await fetch(`${this.server.url}/jobs/`,{method:"POST",body:JSON.stringify(t),headers:r}).then(o=>o.json());console.log({job_id:n}),this.statusMessage="Uploading files...",this.statusMessage="Adding to queue...";const i=await fetch(`${this.server.url}/jobs/${n}`,{method:"PUT",body:JSON.stringify({status:1}),headers:r}).then(o=>o.json());console.log({result3:i}),this.statusMessage="",this.isLoading=!0,this.isShowingRunTemplate=!1,this.buildSummaryPage()}}});var Gc=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"xpanel"},[t("h2",{staticStyle:{"margin-top":"1rem"}},[e._v("Run "+e._s(e.runId)),e.job.status&&e.job.status!=="Draft"?t("b-button",{staticClass:"button-run-again floatright",attrs:{type:"is-warning"},on:{click:e.clickedRunAgain}},[e._v("Run again...")]):e._e(),e.job.status=="Draft"?t("b-button",{staticClass:"button-run-again floatright",attrs:{type:"is-success"},on:{click:e.clickedLaunch}},[e._v("Launch Run")]):e._e()],1),t("table",{staticClass:"detail-table"},e._l(Object.entries(this.job),function(n){return t("tr",{key:n[0],staticClass:"job-row"},[t("td",{staticClass:"job-param"},[e._v(e._s(n[0]))]),e.job.status&&e.job.status!=="Draft"?t("td",{staticClass:"job-param-value"},[t("b",{style:e.getFormat(n)},[e._v(e._s(n[1]))])]):e.job.status=="Draft"&&!e.editableFields.has(n[0])?t("td",{staticClass:"job-param-value"},[t("b",{style:e.getFormat(n)},[e._v(e._s(n[1]))])]):t("td",{staticClass:"job-param-value"},[t("b",[t("editable-field",{staticStyle:{backgroundColor:"#ffffff88","margin-bottom":"1px"},attrs:{label:n[1]},on:{input:function(i){return e.handleFieldChanged(n[0])}},model:{value:e.job[n[0]],callback:function(i){e.$set(e.job,n[0],i)},expression:"job[kv[0]]"}})],1)])])}),0),t("div",{staticClass:"files-table"},[t("h3",[e._v("Files")]),t("div",{staticClass:"flex-row"},[t("table",{staticClass:"detail-table flex1"},e._l(Object.values(e.files),function(n){return t("tr",{key:n.name,staticClass:"job-row"},[t("td",{staticClass:"file-param",staticStyle:{"text-align":"right"}},[e._v(e._s(e.getFileSize(n)))]),t("td",{staticClass:"file-param-value"},[t("b",{class:{loading:n.isUploading}},[e._v(e._s(n.name))])])])}),0),e.showDropZone&&e.job.status=="Draft"?t("drop-file",{staticClass:"dropfile flex1",attrs:{isUploading:!!e.isUploadingRightNow.size},on:{files:e.handleFilesAdded}}):e._e()],1)])])},Vc=[],Kc=mt(Hc,Gc,Vc,!1,null,"0ec26edb");const Qc=Kc.exports,Xc={messages:{en:{},de:{}}};Date.prototype.toTemporalInstant=xc;const Jo=["Draft","Submitted","Preparing","Queued","Running","Complete","Cancelled","Error"],Jc={BF:"Error",CA:"Cancelled",CD:"Complete",CF:"Preparing",CG:"Running",DL:"Cancelled",F:"Error",NF:"Error",OOM:"Error",PD:"Submitted",PR:"Cancelled",R:"Running",RD:"Submitted",SO:"Running",ST:"Cancelled",S:"Queued",TO:"Cancelled"},ed=_t({name:"SimRunner",i18n:Xc,components:{DropFile:pa,SimRunDetails:Qc,VueGoodTable:ss},data:()=>({globalState:be.state,servers:{},server:{},isLoading:!0,isShowingRunTemplate:!1,jobs:[],jobScript:"",jobProject:"",files:[],statusMessage:"",runId:"",clusterEmail:"",clusterProcessors:2,clusterRAM:"4g",summaryStats:{runCPUS:0,runGB:0,queueCPUS:0,queueGB:0},cbRefresher:null}),beforeDestroy(){clearInterval(this.cbRefresher)},mounted(){this.$store.commit("setShowLeftBar",!0);const r=localStorage.getItem("simrunner-servers")||"{}";this.servers=JSON.parse(r);const e=this.$route.params.pathMatch.substring(5).split("/"),t=e[0];t&&(this.server=this.servers[t],this.server||console.error("NO SERVER:"+t),this.runId=e[1]||"",this.$store.commit("setWindowTitle",`${t} — SimWrapper Run Manager`),this.runId||(this.cbRefresher=setInterval(this.buildSummaryPage,75*1e3),this.buildSummaryPage()))},watch:{},computed:{isDark(){return this.$store.state.isDarkMode},jobsRunning(){return this.jobs.filter(r=>["R","CF","CG"].includes(r.ST)).sort((r,e)=>r.JOBID<e.JOBID?-1:1)},jobsQueued(){return this.jobs.filter(r=>["S","PD","RD"].includes(r.ST))},jobsOther(){return this.jobs.filter(r=>!["R","CF","CG","S","PD","RD"].includes(r.ST))}},methods:{jobColumns(){return this.jobs.length?Object.keys(this.jobs[0]).map(e=>({label:e,field:e})):[]},getFileSize(r){return r.isUploading?"....":ls(r.size_of||r.size||0,{round:2,standard:"si"})},async buildSummaryPage(){const r=`${this.server.url}/squeue_jobs/`,t=await(await fetch(r,{headers:{Authorization:this.server.key,"Content-Type":"application/json","cache-control":"no-cache",pragma:"no-cache"}})).json();if(!t.squeue?.length){this.jobs=[];return}const i=_a.parse(t.squeue,{delimiter:",",header:!0,dynamicTyping:!0,skipEmptyLines:!0}).data,o=Xo.Now.plainDateTimeISO();let a=0,c=0,d=0,h=0;const u=i.map(m=>{m.status=Jc[m.ST];try{const f=Xo.PlainDateTime.from(m.START_TIME),p=o.since(f);m.ELAPSED_TIME=`${p.days?p.days+"d ":""}${p.hours}h `+`${p.minutes}`.padStart(2,"0")+"m"}catch{}return m.SUBMIT_TIME=m.SUBMIT_TIME.replace("T"," • "),m.START_TIME=m.START_TIME.replace("T"," • "),m.END_TIME=m.END_TIME.replace("T"," • "),m['"COMMAND']&&(m.COMMAND=m['"COMMAND'],delete m['"COMMAND']),["R","CF","CG"].includes(m.ST)&&(c+=m.CPUS,m.MIN_MEMORY.endsWith("G")&&(a+=parseInt(m.MIN_MEMORY.slice(0,-1)))),["S","PD","RD"].includes(m.ST)&&(h+=m.CPUS,m.MIN_MEMORY.endsWith("G")&&(d+=parseInt(m.MIN_MEMORY.slice(0,-1)))),this.summaryStats={runCPUS:c,runGB:a,queueCPUS:h,queueGB:d},m});u.sort((m,f)=>m.id>f.id?-1:1),this.jobs=u,this.isLoading=!1},rowClicked(r){this.$router.push(`${this.server.serverNickname}/${r.row.id}`);const e=this.$route.params.pathMatch.substring(5).split("/");e.length>2&&(this.runId=e[1]||"")},cleanName(r){return decodeURIComponent(r)},clickedNewRun(){this.isShowingRunTemplate=!this.isShowingRunTemplate},filesUpdated(r){console.log("GOT YOU",r),this.files=this.files.concat(r)},async submitRun(){if(console.log(this.files),!this.files.length||!this.jobScript)return;this.statusMessage="Creating job...";const r={"Content-Type":"application/json",Authorization:this.server.key};let e=this.cleanName(this.jobProject);e.startsWith("/")&&(e=e.slice(1)),e.endsWith("/")&&(e=e.slice(0,-1));const t={script:this.jobScript,project:e,cEmail:this.clusterEmail,cProcessors:this.clusterProcessors,cRAM:this.clusterRAM},n=await fetch(`${this.server.url}/jobs/`,{method:"POST",body:JSON.stringify(t),headers:r}).then(o=>o.json());console.log({job_id:n}),this.statusMessage="Uploading files...";for(const o of this.files){this.statusMessage="Uploading files... "+o.name;const a=new FormData;a.append("file",o),a.append("job_id",n),await(await fetch(`${this.server.url}/files/`,{method:"POST",headers:{Authorization:this.server.key},body:a})).json()}this.statusMessage="Adding to queue...";const i=await fetch(`${this.server.url}/jobs/${n}`,{method:"PUT",body:JSON.stringify({status:1}),headers:r}).then(o=>o.json());console.log({result3:i}),this.statusMessage="",this.isLoading=!0,this.isShowingRunTemplate=!1,this.buildSummaryPage()}}});var td=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"mpanel"},[t("div",{staticClass:"scrolly"},[t("div",{staticClass:"middle-panel"},[t("h2",[e._v(e._s(e.server.serverNickname))]),e.server.serverNickname?e._e():t("div",{staticClass:"hint"},[e._m(0),t("p",[e._v("You can connect to any SimWrapper cloud server resources you have access to.")])]),e.server.serverNickname&&!e.runId?t("div",{staticClass:"flex-col"},[t("div",{staticClass:"summary-stats flex-row"},[t("div",{staticClass:"flex-col flex1"},[e._m(1),t("p",[t("b",[e._v(e._s(e.summaryStats.runCPUS))]),e._v(" CPUs running")]),t("p",[t("b",[e._v(e._s(e.summaryStats.runGB)+" GB")]),e._v(" memory allocated")])]),t("div",{staticClass:"flex-col flex1"},[e._m(2),t("p",[t("b",[e._v(e._s(e.summaryStats.queueCPUS))]),e._v(" CPUs requested")]),t("p",[t("b",[e._v(e._s(e.summaryStats.queueGB)+" GB")]),e._v(" memory requested")])])])]):e._e(),e.server.serverNickname&&!e.runId?t("div",{staticClass:"new-run"},[e.statusMessage?t("p",[t("b",[e._v(e._s(e.statusMessage))])]):e._e(),e.statusMessage?e._e():t("b-button",{attrs:{type:"is-danger"},on:{click:e.clickedNewRun}},[e._v("Create new run  "),e.isShowingRunTemplate?t("i",{staticClass:"fa fa-arrow-down"}):t("i",{staticClass:"fa fa-arrow-right"})]),e.isShowingRunTemplate?t("div",{staticClass:"new-run-template"},[t("b-button",{staticClass:"float-right",staticStyle:{marginBottom:"0.5rem"},attrs:{type:"is-success"},on:{click:e.submitRun}},[t("b",[e._v("Launch Run")])]),t("b",[e._v("Command / script")]),t("b-input",{staticClass:"b-input",attrs:{size:"is-small",placeholder:"run-model.sh",maxlength:"255"},model:{value:e.jobScript,callback:function(n){e.jobScript=n},expression:"jobScript"}}),t("b",[e._v("Project folder")]),t("b-input",{staticClass:"b-input",attrs:{size:"is-small",placeholder:"/project",maxlength:"255"},model:{value:e.jobProject,callback:function(n){e.jobProject=n},expression:"jobProject"}}),t("b",[e._v("TU Compute cluster settings")]),t("div",{staticClass:"flex-row"},[t("div",{staticClass:"flex-col flex1"},[t("p",[e._v("Email")]),t("b-input",{staticClass:"b-input",attrs:{size:"is-small",placeholder:"me@tu-berlin.de",maxlength:"255"},model:{value:e.clusterEmail,callback:function(n){e.clusterEmail=n},expression:"clusterEmail"}})],1),t("div",{staticClass:"flex-col flex1"},[t("p",[e._v("Number of processors")]),t("b-input",{staticClass:"b-input",attrs:{size:"is-small",placeholder:"4",maxlength:"20"},model:{value:e.clusterProcessors,callback:function(n){e.clusterProcessors=n},expression:"clusterProcessors"}})],1),t("div",{staticClass:"flex-col flex1"},[t("p",[e._v("Memory per processor")]),t("b-input",{staticClass:"b-input",attrs:{size:"is-small",placeholder:"16g",maxlength:"20"},model:{value:e.clusterRAM,callback:function(n){e.clusterRAM=n},expression:"clusterRAM"}})],1)]),t("b",[e._v("Files")]),t("div",{staticClass:"flex-row"},[t("table",{staticClass:"detail-table flex1"},e._l(e.files,function(n){return t("tr",{key:n.name,staticClass:"job-row"},[t("td",{staticClass:"file-param",staticStyle:{"text-align":"right"}},[e._v(e._s(e.getFileSize(n)))]),t("td",{staticClass:"file-param-value"},[t("b",{class:{loading:n.isUploading}},[e._v(e._s(n.name))])])])}),0),t("drop-file",{on:{files:e.filesUpdated}})],1)],1):e._e()],1):e._e(),e.runId?t("div",{staticClass:"flex-col"},[t("sim-run-details",{attrs:{runId:e.runId,server:e.server}})],1):e._e(),e.server.serverNickname&&!e.runId?t("div",{staticClass:"flex-row",staticStyle:{gap:"1rem"}},[t("div",{staticClass:"flex-col flex1 mb1"},[t("h3",{staticStyle:{"margin-top":"2rem"}},[e._v("RUNNING")]),e._l(e.jobsRunning,function(n){return t("div",{key:n.JOBID,staticClass:"run",on:{click:function(i){return e.rowClicked({row:n})}}},[t("p",[t("b",[e._v(e._s(n.USER)+": ")]),e._v("Job "+e._s(n.JOBID)+",  "+e._s(n.MIN_MEMORY)+" Memory, "+e._s(n.CPUS)+" CPUs, "+e._s(n.NODES)+" Node"+e._s(n.NODES>1?"s":""))]),t("p",{staticClass:"ml1"},[t("b",{staticClass:"mr1",staticStyle:{color:"var(--link)"}},[e._v(e._s(n.ELAPSED_TIME?`Elapsed: ${n.ELAPSED_TIME}`:""))])]),t("p",{staticClass:"ml1"},[t("span",{staticClass:"mr1",staticStyle:{color:"purple"}},[e._v("Started: "+e._s(n.START_TIME))]),t("span",{staticClass:"mr1",staticStyle:{color:"green"}},[e._v("Submitted: "+e._s(n.SUBMIT_TIME))])]),t("p",{staticClass:"ml1 cmdline"},[e._v(e._s(n.COMMAND))])])})],2)]):e._e(),e.jobs.length?t("div",{staticClass:"connect-here"},[t("vue-good-table",{staticClass:"vue-good-table",class:{darktable:e.isDark},attrs:{columns:e.jobColumns(),rows:e.jobs,styleClass:"vgt-table striped condensed"},on:{"on-row-click":e.rowClicked}})],1):e._e()])])])},rd=[function(){var r=this,e=r._self._c;return r._self._setupProxy,e("p",[e("b",[r._v("Select a server resource on the left.")])])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("p",[e("b",[r._v("Current Load (ILS only)")])])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("p",[e("b",[r._v("Queued Jobs (ILS only)")])])}],nd=mt(ed,td,rd,!1,null,"1513abd1");const id=nd.exports,od={__name:"info-bottom",setup(r,{expose:e}){const t={};return e({frontmatter:t}),{__sfc:!0,frontmatter:t}}};var sd=function(){var e=this;return e._self._c,e._self._setupProxy,e._m(0)},ad=[function(){var r=this,e=r._self._c;return r._self._setupProxy,e("div",{staticClass:"markdown-body"},[e("ul",[e("li",[e("p",[e("a",{attrs:{href:"https://simwrapper.github.io/docs"}},[r._v("Documentation and users guide")]),r._v(" including examples and getting started")])]),e("li",[e("p",[e("a",{attrs:{href:"https://github.com/simwrapper/simwrapper"}},[r._v("Source code")]),r._v(" available on Github")])])])])}],ld=mt(od,sd,ad,!1,null,null);const cd=ld.exports,dd="/simwrapper/assets/berlin-C-twquEa.jpg",ud={messages:{en:{"more-info":"Documentation:",tagLine:"the simulation browser and data visualizer from TU&nbsp;Berlin.",privacy:`SimWrapper is a client-side app, which means there is no upstream server collecting or storing data.

SimWrapper does not collect, handle or process any data about you while you use the site. SimWrapper does not contain any tracking devices or analytics software. No user cookies are stored or transmitted.`},de:{"more-info":"Für weitere Informationen:",tagLine:"Der Modellergebnis-Browser der TU Berlin."}}},En="/simwrapper/",hd="626ae10b",md="boop1",fd={commit:hd,tag:md},pd=[{url:"https://tu.berlin",image:"tu-logo.png",name:"TU Berlin"},{url:"https://vsp.berlin/en/",image:"vsp-logo-300dpi.png",name:"VSP TU-Berlin"},{url:"https://matsim.org/",image:"matsim-logo-blue.png",name:"MATSim"},{url:"https://bmbf.de",image:"bmbf-logo.png",name:"German Federal BMBF"},{url:"https://www.dfg.de/",image:"dfg.jpg",name:"Deutsche Forschungsgemeinschaft"},{url:"https://www.sfcta.org/",image:"sfcta.png",name:"SFCTA"},{url:"https://www.sandag.org/",image:"sandag.jpg",name:"SANDAG"},{url:"https://metrocouncil.org/",image:"metcouncil.png",name:"Met Council"},{url:"https://mtc.ca.gov/",image:"mtc.png",name:"MTC"},{url:"https://www.mwcog.org/",image:"mwcog.png",name:"MWCOG"},{url:"https://www.psrc.org/",image:"psrc.png",name:"Puget Sound Regional Council"},{url:"https://www.oregon.gov/ODOT",image:"oregondot.png",name:"Oregon DOT"},{url:"https://www.transportation.ohio.gov/",image:"ohiodot.png",name:"Ohio DOT"},{url:"https://www.semcog.org/",image:"semcog.jpg",name:"SEMCOG"},{url:"https://atlantaregional.org/",image:"arc.png",name:"ARC"}],gd=_t({name:"SplashPage",i18n:ud,components:{FileSystemProjects:as,InfoBottom:cd,SettingsPanel:is},data:()=>({state:be.state,allRoots:[],images:{logo:os,berlin:dd},skimwrapper:`${En}matrix`,git:fd,showSettings:!1}),computed:{allLogos(){return pd.map(r=>({url:r.url,image:`${En}images/logos/${r.image}`}))},exampleRoots(){return this.allRoots.filter(r=>r.example)},mainRoots(){let r=this.allRoots.filter(e=>!e.example);return this.state.flaskConfig.storage?r.filter(e=>e.slug!=="public"):r},isChrome(){return!!window.showDirectoryPicker},localFileHandles(){return this.$store.state.localFileHandles.concat().sort((r,e)=>r.handle.name<e.handle.name?-1:1)},readme(){const r=this.state.flaskConfig.readme;if(!r)return"";try{return new Bn({html:!0,linkify:!0,typographer:!0}).render(r)}catch{return""}},tagline(){return this.state.flaskConfig.tagline||"The transport microsimulation data visualizer from TU Berlin."}},methods:{zapLocalFolder(r){this.clickedDelete(r)},go(r){const e=`${En}${r}`.replaceAll("//","/");console.log({fullPath:e}),this.$router.push(e)},clickedDeleteFavorite(r){this.$store.commit("removeFavorite",r)},clickedOnFavorite(r){const e={component:"TabbedDashboardView",props:{root:r.root,xsubfolder:r.subfolder}};this.$emit("navigate",e)},onNavigate(r){console.log("ZZLDIJFSD",r),this.$emit("navigate",r)},showDocumentation(){window.location.href="https://simwrapper.github.io/docs"},updateShortcuts(){const r=this.state.svnProjects.filter(e=>!e.hidden&&!e.slug.startsWith("fs"));this.allRoots=r},configureSources(){this.$emit("activate",{name:"Settings",class:"SettingsPanel"})},clickedOnFolder(r){const{folder:e,root:t,i:n}=r;this.$emit("navigate",{component:"TabbedDashboardView",props:{root:t,xsubfolder:""}})},async clickedBrowseChromeLocalFolder(r){try{const e=await r.handle.requestPermission({mode:"read"});if(console.log(r.handle,e),e!=="granted")return;$i.find(i=>i.slug==r.key)||Mr(r.handle,r.key);const n={root:r.key};this.clickedOnFolder(n)}catch(e){console.error(""+e)}},async showChromeDirectory(){try{const e=await window.showDirectoryPicker(),t=Mr(e,null);this.$router.push(`${En}${t}/`)}catch{}},async clickedDelete(r){const t=this.$store.state.localFileHandles.filter(n=>n.key!==r.key);await rs("fs",t),this.$store.commit("setLocalFileSystem",t)},openDataStrip(){this.$store.commit("setShowLeftBar",!0)}},mounted(){if(!this.state.breadcrumbs.length){const r=[{label:"SimWrapper",url:"/"}];be.commit("setBreadCrumbs",r)}this.updateShortcuts(),this.$store.commit("setWindowTitle","")}}),yd="/simwrapper/assets/SW_logo_yellow-Btlbhihn.png",vd="/simwrapper/assets/vsp-2023-logo-kcRNuRsU.png";var wd=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"splash-page"},[t("div",{staticClass:"centered"},[t("div",{staticClass:"top-logo-area"},[t("div",{staticClass:"top-center"},[e._m(0),t("div",{staticClass:"tagline"},[e._v(e._s(e.tagline))])])]),t("div",{staticClass:"splash-scroll-area white-text"},[e.readme?t("div",{staticClass:"markdown",domProps:{innerHTML:e._s(e.readme)}}):e._e(),t("h4",{staticClass:"az-title",staticStyle:{"margin-top":"1rem"}},[e._v("Quick start tools")]),t("div",{staticClass:"az-quick-start-items flex-row"},[e.isChrome?t("div",{staticClass:"az-quick-item flex-col",on:{click:e.showChromeDirectory}},[e._m(1),e._m(2)]):e._e(),t("div",{staticClass:"az-quick-item flex-col",on:{click:function(n){return e.go("/matrix")}}},[e._m(3),e._m(4)]),t("div",{staticClass:"az-quick-item flex1 spacer"},[e._v(" ")]),e.showSettings?t("settings-panel",{staticClass:"settings-popup",on:{close:function(n){e.showSettings=!1}}}):t("div",{staticClass:"az-quick-item flex-col",on:{click:function(n){e.showSettings=!e.showSettings}}},[t("div",{staticClass:"az-quick-icon"},[t("i",{staticClass:"fa fa-cog"})]),t("div",{staticClass:"az-quick-label"},[e._v("Settings")])])],1),e.isChrome?t("div",{staticClass:"is-chrome"},[t("h4",{staticClass:"az-title"},[e._v("Local folders")]),e.localFileHandles.length?t("div",{staticClass:"az-grid"},[t("div",{staticClass:"az-cell heading"},[e._v("Folder")]),t("div",{staticClass:"az-cell heading"},[e._v("Description")]),e._l(e.localFileHandles,function(n){return t("div",{key:n.key,staticClass:"az-row"},[t("div",{staticClass:"az-cell"},[t("i",{staticClass:"fa fa-times zap-folder",attrs:{title:"Remove this folder from list"},on:{click:function(i){return e.zapLocalFolder(n)}}}),t("i",{staticClass:"fa fa-folder az-icon",staticStyle:{color:"#ea0"}}),t("a",{on:{click:function(i){return e.clickedBrowseChromeLocalFolder(n)}}},[e._v(e._s(n.handle.name))])]),t("div",{staticClass:"az-cell"},[e._v("Read-only browser access")])])})],2):t("p",{staticClass:"mb1"},[e._v("You can securely browse simulation outputs with this Chromium-based browser."),t("br"),e._v("Your data is "),t("b",[e._v("never uploaded to any server")]),e._v(" — everything stays right here in your browser."),t("br"),e._v("To explore files on your local filesystem right now:")]),t("div",{staticClass:"az-local-folder-button"},[t("b-button",{staticClass:"config-sources",attrs:{type:"is-success"},on:{click:e.showChromeDirectory}},[t("b",[e._v("View local files...")])])],1)]):e._e(),t("h4",{staticClass:"az-title"},[e._v("Data sources")]),t("div",{staticClass:"az-grid"},[t("div",{staticClass:"az-cell heading"},[e._v("Resource")]),t("div",{staticClass:"az-cell heading"},[e._v("Description")]),e._l(e.mainRoots,function(n){return t("div",{key:n.slug,staticClass:"az-row"},[t("div",{staticClass:"az-cell has-link"},[t("i",{staticClass:"fa fa-sitemap az-icon",staticStyle:{color:"#99cc00"}}),t("a",{on:{click:function(i){return e.clickedOnFolder({root:n.slug})}}},[e._v(e._s(n.name))])]),t("div",{staticClass:"az-cell"},[e._v(e._s(n.description))])])})],2),t("p",[e._v("Add more cloud data sources from the "),t("a",{on:{click:function(n){return e.openDataStrip()}}},[t("b",[e._v("data sources")])]),e._v(" tab on the left-side panel.")]),t("h4",{staticClass:"az-title"},[e._v("Favorites ⭐️")]),e.state.favoriteLocations.length?t("div",{staticClass:"az-grid"},[t("div",{staticClass:"az-cell heading"},[e._v("Item")]),t("div",{staticClass:"az-cell heading"},[e._v("Location")]),e._l(e.state.favoriteLocations,function(n){return t("div",{key:n.fullPath,staticClass:"az-row",on:{click:function(i){return e.clickedOnFavorite(n)}}},[t("div",{staticClass:"az-cell"},[t("i",{staticClass:"fa fa-folder",staticStyle:{"padding-right":"0.5rem","font-size":"14px",color:"#ea0"}}),t("a",{on:{click:function(i){return e.clickedOnFavorite(n)}}},[e._v(e._s(n.label))])]),t("div",{staticClass:"az-cell"},[e._v(e._s(`${n.root}/${n.subfolder}`))])])})],2):t("p",[e._v("Click the star ⭐️ in the top right of any view or dashboard to add it to this list.")]),t("h4",{staticClass:"az-title"},[e._v("Documentation and Help")]),e._m(5),t("h4",{staticClass:"az-title"},[e._v("Example dashboards")]),t("p",{staticClass:"mb1"},[e._v("Explore these example dashboards to get a feeling for what SimWrapper can do:")]),t("div",{staticClass:"az-grid"},[t("div",{staticClass:"az-cell heading"},[e._v("Item")]),t("div",{staticClass:"az-cell heading"},[e._v("Description")]),e._l(e.exampleRoots,function(n,i){return t("div",{key:i,staticClass:"az-row"},[t("div",{staticClass:"az-cell"},[t("a",{on:{click:function(o){return e.clickedOnFolder({root:n.slug})}}},[e._v(e._s(n.name))])]),t("div",{staticClass:"az-cell"},[e._v(e._s(n.description||" "))])])})],2),t("h4",{staticClass:"az-title"},[e._v("About SimWrapper")]),t("div",{staticClass:"newbie-area white-text"},[t("div",{staticClass:"content"},[t("img",{staticClass:"screenshot",attrs:{src:e.images.berlin}}),e._m(6),t("p",[e._v("Explore simulation results directly, or create interactive project dashboards with Simwrapper. It provides many statistical views and chart types, just like other visualization frameworks. But SimWrapper also knows a lot about transportation, and has good defaults for producing visualizations of network link volumes, agent movements through time, aggregate area maps, scenario comparison, and a lot more.")]),t("p",[e._v("You don't need to be a coder to use SimWrapper -- you point it at your files and write some small text configuration files to tell SimWrapper what to do. SimWrapper does the rest!")]),t("p",[e._v("The open-source code and plugin architecture of SimWrapper allows developers (you!) to fork the project and create your own visualizations, too. But you don't need to be a software developer to use SimWrapper if it already does what you need.")]),e._m(7)])]),t("div",{staticClass:"sponsors-area dark-text"},[t("div",{staticClass:"content"},[t("b",{staticClass:"section-head zcaps"},[e._v("Funding partners")]),t("div",{staticClass:"links-and-logos"},[t("div",{staticClass:"logos"},e._l(e.allLogos,function(n){return t("div",{key:n.url,staticClass:"one-logo"},[t("a",{attrs:{href:n.url,title:n.name,target:"_blank"}},[t("img",{staticClass:"img-logo",attrs:{src:n.image}})])])}),0)]),t("p",[e._v("Funded by TU Berlin; the German Bundesministerium für Bildung und Forschung; the Deutsche Forschungsgemeinschaft; and the ActivitySim Consortium member agencies listed above. Thank you for your support!")])])]),t("div",{staticClass:"diagonal"},[t("div",{staticClass:"footer-area white-text"},[t("div",{staticClass:"content"},[t("div",{staticClass:"flex-col"},[e._m(8),t("div",{staticClass:"legal flex1"},[t("h4",{staticClass:"section-head"},[e._v("SimWrapper")]),t("p",[e._v("© 2025 Technische Universität Berlin")]),t("h4",[e._v("Build information")]),t("p",[e._v("Version:  "),t("b",[e._v(e._s(e.git.tag))])]),t("p",[e._v("Built from commit:  "),t("b",[e._v(e._s(e.git.commit))])]),e._m(9),e._m(10)])])])])]),e._m(11)])])])},bd=[function(){var r=this,e=r._self._c;return r._self._setupProxy,e("div",{staticClass:"top-banner flex-row"},[e("div",{staticClass:"flex1"},[e("img",{attrs:{width:"256",src:yd}})])])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("div",{staticClass:"az-quick-icon"},[e("i",{staticClass:"fa fa-folder"})])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("div",{staticClass:"az-quick-label"},[r._v("View"),e("br"),r._v("local files")])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("div",{staticClass:"az-quick-icon"},[e("i",{staticClass:"fa fa-th"})])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("div",{staticClass:"az-quick-label"},[r._v("Matrix"),e("br"),r._v("viewer")])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("div",{staticClass:"flex-row az-quick-start-items"},[e("a",{staticClass:"az-quick-item flex-col",attrs:{href:"https://simwrapper.github.io/docs",target:"_blank"}},[e("div",{staticClass:"az-quick-icon"},[e("i",{staticClass:"fa fa-book"})]),e("div",{staticClass:"az-quick-label"},[r._v("Main"),e("br"),r._v("docs")])]),e("a",{staticClass:"az-quick-item flex-col",attrs:{href:"https://simwrapper.github.io/docs/guide-getting-started ",target:"_blank"}},[e("div",{staticClass:"az-quick-icon"},[e("i",{staticClass:"fa fa-flag-checkered"})]),e("div",{staticClass:"az-quick-label"},[r._v("Tutorial")])]),e("a",{staticClass:"az-quick-item flex-col",attrs:{href:"https://github.com/orgs/simwrapper/discussions",target:"_blank"}},[e("div",{staticClass:"az-quick-icon"},[e("i",{staticClass:"fa fa-comments"})]),e("div",{staticClass:"az-quick-label"},[r._v("Ask"),e("br"),r._v("questions")])]),e("a",{staticClass:"az-quick-item flex-col",attrs:{href:"https://github.com/simwrapper/simwrapper/issues",target:"_blank"}},[e("div",{staticClass:"az-quick-icon"},[e("i",{staticClass:"fa fa-spider"})]),e("div",{staticClass:"az-quick-label"},[r._v("Report"),e("br"),r._v("an issue")])])])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("p",[r._v("SimWrapper is a unique, web-based data visualization tool for researchers building disaggregate transportation simulations with software such as "),e("a",{attrs:{href:"https://matsim.org"}},[r._v("MATSim")]),r._v(" and "),e("a",{attrs:{href:"https://activitysim.github.io"}},[r._v("ActivitySim.")])])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("p",[r._v("SimWrapper is a"),e("b",[r._v(" 100% client-side ")]),r._v("browser application. There is no back-end database, no tracking cookies, and no data is transferred from your browser to any server; everything on your computer stays on your local computer.")])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("div",{staticClass:"badges"},[e("a",{attrs:{href:"https://vsp.berlin/",target:"_blank"}},[e("img",{staticClass:"vsp-logo",attrs:{src:vd}})])])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("p",[r._v("SimWrapper is open source and available on "),e("a",{attrs:{href:"https://github.com/simwrapper/simwrapper"}},[r._v("GitHub.")])])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("div",{staticClass:"flex-row",staticStyle:{gap:"1rem","margin-top":"1rem"}},[e("a",{attrs:{href:"https://vsp.berlin/en/",target:"_blank"}},[r._v("VSP TU Berlin")]),e("a",{attrs:{href:"https://vsp.berlin/impressum/",target:"_blank"}},[r._v("Impressum")]),e("a",{attrs:{href:"https://www.vsp.tu-berlin.de/menue/service/privacy/parameter/en/",target:"_blank"}},[r._v("Privacy")])])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("div",{staticClass:"very-bottom"},[e("p",[r._v(". .")])])}],Td=mt(gd,wd,bd,!1,null,"3cd61130");const _d=Td.exports,Cd=_t({name:"ProjectNavBar",components:{},props:{currentFolder:{type:String,required:!0},projectFolder:{type:String,required:!0}},data:()=>({selectedGroup:-1,isDark:!1}),computed:{navbar(){const r=this.$store.state.topNavItems;return r||{left:[],right:[],baseURL:""}}},methods:{hasLabel(r){return r.text||r.text_de||r.text_en},getLabel(r){let e="";return this.$store.state.locale==="de"?e=r.text_de||r.text||r.text_en||"item":e=r.text_en||r.text||r.text_de||"item",e},getUrl(r){return r.startsWith("http")?r:`${this.navbar.baseURL}${r}`},getStyle(r){const e={};return r.style&&Object.assign(e,r.style),e},getNavbarStyle(r){const e={};return r.style&&Object.assign(e,r.style),["black","blue","brown","green","red","purple"].includes(e.backgroundColor)&&(this.isDark=!0),e.backgroundColor&&e.backgroundColor.startsWith("#")&&(this.isDark=va(e.backgroundColor)),"useDarkText"in e&&(this.isDark=!e.useDarkText),e},navigate(r,e){if(e!==void 0&&(this.selectedGroup=e),r.startsWith("http"))window.location.href=r;else{const t=r.startsWith("/")?r:`${this.projectFolder}/${r}`,n={root:this.$store.state.topNavItems.fileSystem.slug||"",xsubfolder:t,thumbnail:!1};this.$emit("navigate",{component:"TabbedDashboardView",props:n})}}}});var Ed=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("b-navbar",{style:e.getNavbarStyle(e.navbar),attrs:{id:"site-nav-bar",type:e.isDark?"is-black":"is-white"},scopedSlots:e._u([e.navbar.logo?{key:"brand",fn:function(){return[t("b-navbar-item",{style:e.getStyle(e.navbar.logo),on:{click:function(n){return e.navigate(e.navbar.logo.url)}}},[t("img",{style:e.getStyle(e.navbar.logo),attrs:{src:e.navbar.logo.image}})])]},proxy:!0}:null,{key:"start",fn:function(){return e._l(e.navbar.left,function(n,i){return t(n.dropdown?"BNavbarDropdown":"BNavbarItem",{key:`${i}`,tag:"component",style:e.getStyle(n),attrs:{hoverable:"",label:n.dropdown?e.getLabel(n):void 0},on:{click:function(o){return e.navigate(n.url)}}},[e._v(e._s(n.dropdown?void 0:e.getLabel(n))),e._l(n.dropdown,function(o){return t("b-navbar-item",{key:`child-${i}`,on:{click:function(a){return e.navigate(o.url)}}},[e._v(e._s(e.getLabel(o)))])})],2)})},proxy:!0},{key:"end",fn:function(){return e._l(e.navbar.right,function(n,i){return t(n.dropdown?"BNavbarDropdown":"BNavbarItem",{key:`${i}`,tag:"component",style:e.getStyle(n),attrs:{hoverable:"",label:n.dropdown?e.getLabel(n):void 0},on:{click:function(o){return e.navigate(n.url)}}},[e._v(e._s(n.dropdown?void 0:e.getLabel(n))),e._l(n.dropdown,function(o,a){return t("b-navbar-item",{key:`child-${a}`,on:{click:function(c){return e.navigate(o.url)}}},[e._v(e._s(e.getLabel(o)))])})],2)})},proxy:!0}],null,!0)})},Dd=[],kd=mt(Cd,Ed,Dd,!1,null,"7f76fd5d");const Sd=kd.exports,Id={messages:{en:{close:"Close panel",back:"Go back"},de:{close:"Schließen",back:"Zurück"}}},sr="/simwrapper/",gi=250,es={"":null,data:{name:"data",class:"LeftSystemPanel",icon:Sa},split:{name:"split",class:"LeftSplitFolderPanel",fontAwesomeIcon:"fa-columns"},runs:{name:"runs",class:"LeftRunnerPanel",fontAwesomeIcon:"fa-network-wired",hidden:!0}},Rd=_t({name:"LayoutManager",i18n:Id,components:Object.assign({BreadCrumbs:Ta,ErrorPanel:ns,FolderBrowser:ba,LeftProjectPanel:Fa,LeftRunnerPanel:Ya,LeftSplitFolderPanel:el,LeftSystemPanel:pl,ProjectNavBar:Sd,SettingsPanel:is,SimRunner:id,SplashPage:_d,TabbedDashboardView:wa},ts),data:()=>({activeLeftSection:{name:"Data",class:"LeftSystemPanel"},authHandles:[],dragX:-1,dragY:-1,dragQuadrant:null,dragStartWidth:0,errorPanelText:"",firstPanelProjectFolder:"",firstPanelSubfolder:"",fullScreenPanel:{x:-1,y:-1},isDraggingDivider:0,isDragHappening:!1,isEmbedded:!1,isLeftPanelHidden:!1,isShowingActiveSection:!0,leftSectionWidth:gi,navRoot:"",panels:[],panelsWithScrollbars:["TabbedDashboardView","FolderBrowser","calc-table"],prevUrl:"BOOP~~",showSettings:!1,zoomed:!1}),computed:{isMultipanel(){return this.panels.length>1?!0:this.panels[0].length>1},showLeftBar(){return this.$store.state.isShowingLeftBar},activeSectionStyle(){return this.activeLeftSection?{width:`${this.leftSectionWidth}px`}:{display:"none"}}},watch:{"$store.state.activeLeftSection"(){this.setActiveLeftSection(es[this.$store.state.activeLeftSection])},"$store.state.statusErrors"(){},async $route(r,e){r.path===sr?this.panels=[[{component:"SplashPage",key:Math.random(),props:{}}]]:(await this.buildLayoutFromURL(),be.commit("resize"))}},methods:{clickedCloseLeftBar(r){this.$store.commit("setActiveLeftSection",""),this.$store.commit("setShowLeftBar",!1)},async setActiveLeftSection(r){if(this.isLeftPanelHidden=!r,!!r&&!(r.onlyIfVisible&&!this.isShowingActiveSection)&&!(this.isShowingActiveSection&&r.name===this.activeLeftSection.name)){if(r.link){window.open(r.link,"_blank");return}r.navRoot&&(this.navRoot=r.navRoot),this.isShowingActiveSection=!0,this.activeLeftSection=r,localStorage.setItem("activeLeftSection",r.name),this.leftSectionWidth<48&&(this.leftSectionWidth=gi)}},setProjectFolder(r){this.firstPanelProjectFolder=r},setPanelError(r){this.errorPanelText=""+(r.msg||r),r&&console.error("LMError: "+(r.msg||r))},async buildGistPage(r){const e=r.substring(r.indexOf("/")+1),t=await ka.load(e,this.$route.params);this.panels=[[{key:Math.random(),component:t.type||"map",title:"",description:"",props:{root:"",subfolder:"",configFromDashboard:t,thumbnail:!1}}]]},async buildLayoutFromURL(){let r=this.$route.params.pathMatch;if(this.prevUrl=r,r.startsWith("/")&&(r=r.slice(1)),!r||r==="/"){this.panels=[[{component:"SplashPage",key:Math.random(),props:{}}]];return}if(r.startsWith("gist")){await this.buildGistPage(r);return}if(r.startsWith("gist")){await this.buildGistPage(r);return}if(r.startsWith("runs")){const p={serverNickname:r.substring(5)};this.panels=[[{component:"SimRunner",key:Math.random(),props:p}]],this.activeLeftSection={name:"Runs",class:"LeftRunnerPanel"};return}if(r.startsWith("split/")){const f=r.substring(6);try{const p=atob(f),g=JSON.parse(p);this.panels=g}catch(p){console.error("PARSING SPLIT"+p),this.$router.replace("/")}return}let e=r,t="";const n=r.indexOf("/");n>-1&&(e=r.substring(0,n),t=r.substring(n+1),t.startsWith("/")&&(t=t.slice(1)),t.endsWith("/")&&(t=t.slice(0,-1)));const i=r.substring(1+r.lastIndexOf("/")),o=i.toLocaleLowerCase();for(const f of be.state.visualizationTypes.values())if(Er.isMatch(o,f.filePatterns)){if(this.panels.length===1&&this.panels[0].length===1)this.panels=[[this.panels[0][0]]];else{let p=Math.random(),g=t.substring(0,t.lastIndexOf("/"));g.startsWith("/")&&(g=g.slice(1)),t=g,this.panels=[[{key:p,component:f.kebabName,title:"",description:"",props:{root:e,subfolder:g,xsubfolder:t,yamlConfig:i,thumbnail:!1}}]]}return}if(o.match(/\.(xml|xml\.gz)$/)){const f=this.$store.state.svnProjects.filter(b=>b.slug===e);if(!f.length)throw Error("no such project");const p=f[0],g=new Oi(p,be);let y=t.substring(0,t.lastIndexOf("/"));y.startsWith("/")&&(y=y.slice(1)),t=y;const v=`${t}/${i}`,w=await g.probeXmlFileType(v);if(w&&uo[w]){let b=Math.random();this.panels=[[{key:b,component:uo[w],title:"",description:"",props:{root:e,subfolder:t,yamlConfig:i,thumbnail:!1}}]]}return}let a=Math.random();this.panels.length===1&&this.panels[0].length===1&&(a=this.panels[0][0].key);const c=this.$store.state.svnProjects.filter(f=>f.slug===e);if(!c.length)throw Error("no such project");const d=c[0],h=t.startsWith("/")?t.slice(1):t,m=h.substring(1+h.lastIndexOf("/"))||d.name;be.commit("setShowFilesTab",!0),this.panels=[[{key:a,title:m,component:"TabbedDashboardView",props:{root:e,xsubfolder:h}}]]},handleDragStartStop(r){this.isDragHappening=r},buildDragHighlightStyle(r,e){if(r==-1){const i=this.dragQuadrant=="rowTop"?"1":"0",o=this.isDragHappening?"auto":"none";return{top:0,opacity:i,pointerEvents:o,backgroundColor:"#ffcc4480"}}if(r==-2){const i=this.dragQuadrant=="rowBottom"?"1":"0",o=this.isDragHappening?"auto":"none";return{bottom:0,opacity:i,pointerEvents:o,backgroundColor:"#ffcc4480"}}if(r!==this.dragX||e!==this.dragY||!this.dragQuadrant)return{};const n={opacity:1,backgroundColor:this.dragQuadrant.quadrant=="center"?"#079f6f80":"#4444dd90"};return Object.entries(this.dragQuadrant).forEach(i=>n[i[0]]=`${i[1]}px`),n},stillDragging(r){const{event:e,x:t,y:n,row:i}=r;if(i){this.dragQuadrant=i;return}this.dragX=t,this.dragY=n;const o=this.$refs[`dragContainer${t}-${n}`],c=this.$refs.tileTable.offsetLeft,d=o[0],h=(e.clientX-d.offsetLeft-c)/d.offsetWidth;(e.clientY-d.offsetTop)/d.offsetHeight;let u=8;if(h<.3)this.dragQuadrant={quadrant:"left",width:d.offsetWidth/2-u*2,height:d.offsetHeight-u*2,marginLeft:u,marginTop:u};else if(h>.7)this.dragQuadrant={quadrant:"right",width:d.offsetWidth/2-u*2,height:d.offsetHeight-u*2,marginLeft:d.offsetWidth/2+u,marginTop:u};else{u*=5;const m=(d.offsetWidth-u*2)*.95,f=(d.offsetHeight-u*2)*.95;this.dragQuadrant={quadrant:"center",width:m,height:f,marginLeft:(d.offsetWidth-m)/2,marginTop:(d.offsetHeight-f)/2}}},dragEnd(){this.dragQuadrant=null,this.dragX=-1,this.dragY=-1},onDrop(r){if(!this.dragQuadrant)return;const{event:e,x:t,y:n,row:i}=r;try{const o=e.dataTransfer?.getData("bundle"),a=JSON.parse(o),d={component:a.component||"TabbedDashboardView",props:a};this.onSplit({x:t,y:n,row:i,quadrant:this.dragQuadrant.quadrant,viz:d})}catch{}this.dragEnd()},splitMainPanel(r){let e=0,t=0;const n={component:"SplashPage",props:{},key:Math.random()};r.root&&(n.component="TabbedDashboardView",n.props.root=r.root,n.props.xsubfolder=r.xsubfolder||""),this.panels[t].splice(e,0,n),this.updateURL(),be.commit("resize")},async onSplit(r){const{x:e,y:t,row:n,quadrant:i,viz:o}=r,a={component:o.component,props:o.props,title:"",description:"",key:Math.random()};if(n)switch(n){case"rowTop":this.panels.unshift([a]);break;case"rowBottom":this.panels.push([a]);break;default:console.warn("HUH?",n);break}else switch(i){case"center":this.panels[t][e]=a;break;case"left":this.panels[t].splice(e,0,a);break;case"right":this.panels[t].splice(e+1,0,a);break;default:console.warn("TOP AND BOTTOM to be added later");return}this.updateURL(),be.commit("resize")},onNavigate(r,e,t){this.showSettings=!1,r.component==="SplashPage"?this.panels[t][e]={component:"SplashPage",props:{},key:Math.random()}:this.panels[t][e]=Object.assign({key:Math.random()},r),r?.props?.xsubfolder&&(r.props?.xsubfolder.endsWith("/")||(r.props.xsubfolder+="/")),this.updateURL(),this.buildLayoutFromURL()},onClose(r,e){this.panels[e][r].component=null,this.panels[e].splice(r,1),this.panels[e].length||(this.panels.length>1?this.panels.splice(e,1):this.panels[0].push({component:"SplashPage",key:Math.random(),props:{}})),this.updateURL(),be.commit("resize")},onBack(r,e){const t=this.panels[e][r];if(t.component=="SplashPage")return;if(t.component!=="TabbedDashboardView"){t.component="TabbedDashboardView",t.props.xsubfolder=this.panels[e][r].props.subfolder,delete t.props.yamlConfig,this.updateURL({showFiles:!0});return}let n=""+t.props.xsubfolder;if(!n||n==="/"){t.component="SplashPage",t.props={},this.updateURL();return}n=n.replaceAll("//","/"),n.endsWith("/")&&(n=n.slice(0,-1));let o=n.split("/").slice(0,-1).join("/");t.props.xsubfolder=o,delete t.props.yamlConfig,this.updateURL()},getShowHeader(r){return!["SplashPage","TabbedDashboardView","SimRunner"].includes(r.component)},updateURL(r){if(this.$store.dispatch("gamepadStop"),this.firstPanelSubfolder=this.panels[0][0]?.props?.xsubfolder||"",this.panels.length>1||this.panels[0].length>1){const o=btoa(JSON.stringify(this.panels));this.$router.push(`${sr}split/${o}`);return}const e=this.panels[0][0].props;if(e.serverNickname){this.$router.replace(`${sr}runs/${e.serverNickname}`);return}const t=e.root||"",n=e.xsubfolder||e.subfolder||"",i=e.yamlConfig||"";if(i.indexOf("/")>-1){const o=i.substring(i.lastIndexOf("/"));this.$router.replace(`${sr}${t}/${n}/${o}`)}else if(i)this.$router.push(`${sr}${t}/${n}/${i}`);else{let o=`${sr}${t}/${n}`;e.config&&(o+=`/${e.config}`),r?.showFiles&&(o+="?tab=files"),this.$router.push(o)}},cleanProps(r){const{title:e,...t}=r;return t},dividerDragStart(r){this.isDraggingDivider=r.clientX,this.dragStartWidth=this.leftSectionWidth},dividerDragEnd(r){this.isDraggingDivider=0},dividerDragging(r){if(!this.isDraggingDivider)return;const e=r.clientX-this.isDraggingDivider;this.leftSectionWidth=Math.max(0,this.dragStartWidth+e),localStorage.setItem("leftPanelWidth",`${this.leftSectionWidth}`)},setCardTitles(r,e){typeof e=="string"?(ga.set(r,"title",e),r.description=""):(r.title=e.title,r.description=e.description||"")},async handleToggleInfoClicked(r){console.log("CARD INFO?",r)},async toggleZoom(r,e,t){console.log("ZOOM",r),this.fullScreenPanel.x>-1?this.fullScreenPanel={x:-1,y:-1}:this.fullScreenPanel={x:e,y:t}},updateDimensions(r){},getTileStyle(r){const e=be.state.isDarkMode,t={overflow:this.panelsWithScrollbars.includes(r.component)?"auto":"hidden"};return this.getShowHeader(r)&&(t.border="0px solid #4dd4ef90",t.backgroundColor=e?"black":"white",t.color=e?"white":"black",t.margin="0 0.25rem 0.25rem 0.25rem",t.padding="0 4px 4px 4px"),t},restoreLeftPanel(){this.$store.commit("setShowLeftBar",!0),this.$store.commit("setManualLeftPanelHidden",!1)},getContainerStyle(r,e,t){const n=e===this.panels[t].length-1?"6px":"0";let i={padding:this.isMultipanel?`6px ${n} 6px 6px`:"0px 0px"};if(this.panels[t].length==1&&this.panels[e].length==1){const o=this.panels[0][0];["TabbedDashboardView","SplashPage"].indexOf(o.component)>-1&&(i.padding="0px 0px")}return this.fullScreenPanel.x==-1||(this.fullScreenPanel.x!==e?i.display="none":i={position:"absolute",top:0,bottom:0,left:0,right:0,margin:"6px 6px"}),i}},async mounted(){"embed"in this.$route.query&&(this.isEmbedded=!0);const r=localStorage.getItem("leftPanelWidth");this.leftSectionWidth=r==null?gi:parseInt(r),this.leftSectionWidth<0&&(this.leftSectionWidth=2);const e=localStorage.getItem("activeLeftSection")||"";this.$store.commit("setActiveLeftSection",e),this.$store.commit("setShowLeftBar",!!e),this.setActiveLeftSection(es[this.$store.state.activeLeftSection]);const t=this.$route.params.pathMatch;if(t&&!t.endsWith("/")&&t.slice(t.lastIndexOf("/")).indexOf(".")==-1){const i=Object.entries(this.$route.query).map(([a,c])=>`${encodeURIComponent(a)}=${encodeURIComponent(c)}`).join("&");let o=`${sr}${t}/`;i&&(o+="?"+i),history.replaceState({},"",o)}await this.buildLayoutFromURL(),this.firstPanelSubfolder=this.panels[0][0]?.props?.xsubfolder||""}});var $d=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{attrs:{id:"layout-manager"}},[e.$store.state.topNavItems?t("project-nav-bar",{attrs:{projectFolder:e.firstPanelProjectFolder,currentFolder:e.firstPanelSubfolder},on:{navigate:function(n){return e.onNavigate(n,0,0)}}}):e._e(),t("div",{style:{userSelect:e.isDraggingDivider?"none":"unset"},attrs:{id:"split-screen"},on:{mousemove:e.dividerDragging,mouseup:e.dividerDragEnd}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.showLeftBar,expression:"showLeftBar"}],staticClass:"left-panel"},[t("div",{staticClass:"left-panel-close-button btn-times",on:{click:e.clickedCloseLeftBar}},[e._m(0)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowingActiveSection,expression:"isShowingActiveSection"}],staticClass:"left-panel-active-section",style:e.activeSectionStyle},[t("div",{staticClass:"left-component"},[t(e.activeLeftSection.class,{tag:"component",attrs:{currentFolder:e.firstPanelSubfolder,projectFolder:e.firstPanelProjectFolder,navRoot:e.navRoot},on:{navigate:function(n){return e.onNavigate(n,0,0)},activate:e.setActiveLeftSection,isDragging:e.handleDragStartStop,split:e.splitMainPanel}})],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.activeLeftSection,expression:"activeLeftSection"}],staticClass:"left-panel-divider",on:{mousedown:e.dividerDragStart,mouseup:e.dividerDragEnd,mousemove:function(n){return n.stopPropagation(),e.dividerDragging.apply(null,arguments)}}})]),t("div",{ref:"tileTable",staticClass:"table-of-tiles"},[e.authHandles.length?t("div",{staticClass:"authorization-strip"},e._l(e.authHandles,function(n){return t("div",{staticClass:"auth-row"},[t("p",{staticClass:"flex1"},[e._v(e._s(""+n))])])}),0):e._e(),t("div",{staticClass:"row-drop-target",style:e.buildDragHighlightStyle(-1,-1),on:{drop:function(n){return e.onDrop({event:n,row:"rowTop"})},dragover:[function(n){return e.stillDragging({event:n,row:"rowTop"})},function(n){n.preventDefault()}],dragenter:function(n){n.preventDefault()},dragleave:e.dragEnd}}),e._l(e.panels,function(n,i){return t("div",{directives:[{name:"show",rawName:"v-show",value:e.fullScreenPanel.y==-1||e.fullScreenPanel.y==i,expression:"fullScreenPanel.y == -1 || fullScreenPanel.y == y"}],key:i,staticClass:"tile-row"},e._l(n,function(o,a){return t("div",{key:o.key,ref:`dragContainer${a}-${i}`,refInFor:!0,staticClass:"drag-container",style:e.getContainerStyle(o,a,i),on:{drop:function(c){return e.onDrop({event:c,x:a,y:i})},dragover:[function(c){c.preventDefault()},function(c){return e.stillDragging({event:c,x:a,y:i})}],dragenter:function(c){c.preventDefault()},dragleave:e.dragEnd}},[e.showSettings&&!a&&!i?t("settings-panel",{staticClass:"settings-popup",on:{close:function(c){e.showSettings=!1}}}):e._e(),e.$store.state.isShowingBreadcrumbs?t("div",{staticClass:"breadcrumb-row"},[t("bread-crumbs",{staticClass:"flex1",attrs:{root:o.props.root||"",subfolder:o.props.xsubfolder||o.props.subfolder||""},on:{navigate:function(c){return e.onNavigate(c,a,i)}}}),o.component!=="SplashPage"&&!a&&!i?t("div",{staticClass:"settings-cog",on:{click:function(c){e.showSettings=!e.showSettings}}},[e._m(1,!0)]):e._e(),e.isMultipanel?t("div",{staticClass:"close-split-panel",on:{click:function(c){return e.onClose(a,i)}}},[e._m(2,!0)]):e._e()],1):e._e(),e.getShowHeader(o)?t("div",{staticClass:"tile-header flex-row"},[o.component!=="SplashPage"?t("div",{staticClass:"tile-buttons"},[t("div",{staticClass:"nav-button btn-header-back is-small",on:{click:function(c){return e.onBack(a,i)}}},[t("i",{staticClass:"fa fa-arrow-left"})])]):e._e(),t("div",{staticClass:"tile-labels",class:{"is-singlepanel":!e.isMultipanel}},[o.title?t("h3",{style:{textAlign:"left"}},[e._v(e._s(o.title))]):e._e(),o.description?t("p",[e._v(e._s(o.description))]):e._e()]),t("div",{staticClass:"flex-row"},[t("div",{staticClass:"tile-buttons"},[o.info?t("div",{staticClass:"nav-button is-small is-white",on:{click:function(c){return e.handleToggleInfoClicked(o)}}},[t("i",{staticClass:"fa fa-info-circle"})]):e._e(),e.panels.length>1||e.panels[0].length>1?t("div",{staticClass:"nav-button is-small is-white",attrs:{title:e.fullScreenPanel.x>-1?"Restore":"Enlarge"},on:{click:function(c){return e.toggleZoom(o,a,i)}}},[t("i",{staticClass:"fa fa-expand"})]):e._e(),e.isMultipanel?t("div",{staticClass:"nav-button is-small is-white",attrs:{title:"Close"},on:{click:function(c){return e.onClose(a,i)}}},[t("i",{staticClass:"fa fa-times-circle"})]):e._e()])])]):e._e(),t(o.component,e._b({tag:"component",staticClass:"map-tile",style:e.getTileStyle(o),attrs:{isMultipanel:e.isMultipanel,split:{row:i,col:a}},on:{navigate:function(c){return e.onNavigate(c,a,i)},title:function(c){return e.setCardTitles(o,c)},activate:e.setActiveLeftSection,projectFolder:e.setProjectFolder,error:e.setPanelError}},"component",e.cleanProps(o.props),!1)),e.errorPanelText?t("p",{staticClass:"error-text"},[e._v(e._s(e.errorPanelText)),t("span",{staticClass:"clear-error",on:{click:function(c){e.errorPanelText=""}}},[e._v("×")])]):e._e(),e.isDragHappening?t("div",{staticClass:"drag-highlight",style:e.buildDragHighlightStyle(a,i)}):e._e()],1)}),0)}),e.isDragHappening?t("div",{staticClass:"row-drop-target",style:e.buildDragHighlightStyle(-2,-2),on:{drop:function(n){return e.onDrop({event:n,row:"rowBottom"})},dragover:[function(n){return e.stillDragging({event:n,row:"rowBottom"})},function(n){n.preventDefault()}],dragenter:function(n){n.preventDefault()},dragleave:e.dragEnd}}):e._e()],2)])],1)},Od=[function(){var r=this,e=r._self._c;return r._self._setupProxy,e("p",[e("i",{staticClass:"fa fa-times"})])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("button",[e("i",{staticClass:"fas fa-cog"})])},function(){var r=this,e=r._self._c;return r._self._setupProxy,e("button",[e("i",{staticClass:"fas fa-times"})])}],Pd=mt(Rd,$d,Od,!1,null,"073c0c3d");const Zd=Pd.exports;export{Zd as default};
