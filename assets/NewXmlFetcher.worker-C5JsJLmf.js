(function(){"use strict";function tt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function tr(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var rr={},nr=Object.freeze({__proto__:null,default:rr}),rt=tr(nr),be={};(function(t){t.isInteger=e=>typeof e=="number"?Number.isInteger(e):typeof e=="string"&&e.trim()!==""?Number.isInteger(Number(e)):!1,t.find=(e,r)=>e.nodes.find(n=>n.type===r),t.exceedsLimit=(e,r,n=1,s)=>s===!1||!t.isInteger(e)||!t.isInteger(r)?!1:(Number(r)-Number(e))/Number(n)>=s,t.escapeNode=(e,r=0,n)=>{const s=e.nodes[r];s&&(n&&s.type===n||s.type==="open"||s.type==="close")&&s.escaped!==!0&&(s.value="\\"+s.value,s.escaped=!0)},t.encloseBrace=e=>e.type!=="brace"||e.commas>>0+e.ranges>>0?!1:(e.invalid=!0,!0),t.isInvalidBrace=e=>e.type!=="brace"?!1:e.invalid===!0||e.dollar?!0:!(e.commas>>0+e.ranges>>0)||e.open!==!0||e.close!==!0?(e.invalid=!0,!0):!1,t.isOpenOrClose=e=>e.type==="open"||e.type==="close"?!0:e.open===!0||e.close===!0,t.reduce=e=>e.reduce((r,n)=>(n.type==="text"&&r.push(n.value),n.type==="range"&&(n.type="text"),r),[]),t.flatten=(...e)=>{const r=[],n=s=>{for(let i=0;i<s.length;i++){const o=s[i];if(Array.isArray(o)){n(o);continue}o!==void 0&&r.push(o)}return r};return n(e),r}})(be);const nt=be;var Se=(t,e={})=>{const r=(n,s={})=>{const i=e.escapeInvalid&&nt.isInvalidBrace(s),o=n.invalid===!0&&e.escapeInvalid===!0;let a="";if(n.value)return(i||o)&&nt.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(const u of n.nodes)a+=r(u);return a};return r(t)};/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */var sr=function(t){return typeof t=="number"?t-t===0:typeof t=="string"&&t.trim()!==""?Number.isFinite?Number.isFinite(+t):isFinite(+t):!1};/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const st=sr,ne=(t,e,r)=>{if(st(t)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(e===void 0||t===e)return String(t);if(st(e)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let n={relaxZeros:!0,...r};typeof n.strictZeros=="boolean"&&(n.relaxZeros=n.strictZeros===!1);let s=String(n.relaxZeros),i=String(n.shorthand),o=String(n.capture),a=String(n.wrap),u=t+":"+e+"="+s+i+o+a;if(ne.cache.hasOwnProperty(u))return ne.cache[u].result;let l=Math.min(t,e),c=Math.max(t,e);if(Math.abs(l-c)===1){let E=t+"|"+e;return n.capture?`(${E})`:n.wrap===!1?E:`(?:${E})`}let h=ct(t)||ct(e),f={min:t,max:e,a:l,b:c},b=[],A=[];if(h&&(f.isPadded=h,f.maxLen=String(f.max).length),l<0){let E=c<0?Math.abs(c):1;A=it(E,Math.abs(l),f,n),l=f.a=0}return c>=0&&(b=it(l,c,f,n)),f.negatives=A,f.positives=b,f.result=ir(A,b),n.capture===!0?f.result=`(${f.result})`:n.wrap!==!1&&b.length+A.length>1&&(f.result=`(?:${f.result})`),ne.cache[u]=f,f.result};function ir(t,e,r){let n=Te(t,e,"-",!1)||[],s=Te(e,t,"",!1)||[],i=Te(t,e,"-?",!0)||[];return n.concat(i).concat(s).join("|")}function or(t,e){let r=1,n=1,s=at(t,r),i=new Set([e]);for(;t<=s&&s<=e;)i.add(s),r+=1,s=at(t,r);for(s=ut(e+1,n)-1;t<s&&s<=e;)i.add(s),n+=1,s=ut(e+1,n)-1;return i=[...i],i.sort(lr),i}function ar(t,e,r){if(t===e)return{pattern:t,count:[],digits:0};let n=ur(t,e),s=n.length,i="",o=0;for(let a=0;a<s;a++){let[u,l]=n[a];u===l?i+=u:u!=="0"||l!=="9"?i+=cr(u,l):o++}return o&&(i+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:i,count:[o],digits:s}}function it(t,e,r,n){let s=or(t,e),i=[],o=t,a;for(let u=0;u<s.length;u++){let l=s[u],c=ar(String(o),String(l),n),h="";if(!r.isPadded&&a&&a.pattern===c.pattern){a.count.length>1&&a.count.pop(),a.count.push(c.count[0]),a.string=a.pattern+lt(a.count),o=l+1;continue}r.isPadded&&(h=fr(l,r,n)),c.string=h+c.pattern+lt(c.count),i.push(c),o=l+1,a=c}return i}function Te(t,e,r,n,s){let i=[];for(let o of t){let{string:a}=o;!n&&!ot(e,"string",a)&&i.push(r+a),n&&ot(e,"string",a)&&i.push(r+a)}return i}function ur(t,e){let r=[];for(let n=0;n<t.length;n++)r.push([t[n],e[n]]);return r}function lr(t,e){return t>e?1:e>t?-1:0}function ot(t,e,r){return t.some(n=>n[e]===r)}function at(t,e){return Number(String(t).slice(0,-e)+"9".repeat(e))}function ut(t,e){return t-t%Math.pow(10,e)}function lt(t){let[e=0,r=""]=t;return r||e>1?`{${e+(r?","+r:"")}}`:""}function cr(t,e,r){return`[${t}${e-t===1?"":"-"}${e}]`}function ct(t){return/^-?(0+)\d/.test(t)}function fr(t,e,r){if(!e.isPadded)return t;let n=Math.abs(e.maxLen-String(t).length),s=r.relaxZeros!==!1;switch(n){case 0:return"";case 1:return s?"0?":"0";case 2:return s?"0{0,2}":"00";default:return s?`0{0,${n}}`:`0{${n}}`}}ne.cache={},ne.clearCache=()=>ne.cache={};var hr=ne;/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const pr=rt,ft=hr,ht=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),dr=t=>e=>t===!0?Number(e):String(e),Oe=t=>typeof t=="number"||typeof t=="string"&&t!=="",ce=t=>Number.isInteger(+t),He=t=>{let e=`${t}`,r=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++r]==="0";);return r>0},gr=(t,e,r)=>typeof t=="string"||typeof e=="string"?!0:r.stringify===!0,Ar=(t,e,r)=>{if(e>0){let n=t[0]==="-"?"-":"";n&&(t=t.slice(1)),t=n+t.padStart(n?e-1:e,"0")}return r===!1?String(t):t},ye=(t,e)=>{let r=t[0]==="-"?"-":"";for(r&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return r?"-"+t:t},br=(t,e,r)=>{t.negatives.sort((a,u)=>a<u?-1:a>u?1:0),t.positives.sort((a,u)=>a<u?-1:a>u?1:0);let n=e.capture?"":"?:",s="",i="",o;return t.positives.length&&(s=t.positives.map(a=>ye(String(a),r)).join("|")),t.negatives.length&&(i=`-(${n}${t.negatives.map(a=>ye(String(a),r)).join("|")})`),s&&i?o=`${s}|${i}`:o=s||i,e.wrap?`(${n}${o})`:o},pt=(t,e,r,n)=>{if(r)return ft(t,e,{wrap:!1,...n});let s=String.fromCharCode(t);if(t===e)return s;let i=String.fromCharCode(e);return`[${s}-${i}]`},dt=(t,e,r)=>{if(Array.isArray(t)){let n=r.wrap===!0,s=r.capture?"":"?:";return n?`(${s}${t.join("|")})`:t.join("|")}return ft(t,e,r)},gt=(...t)=>new RangeError("Invalid range arguments: "+pr.inspect(...t)),At=(t,e,r)=>{if(r.strictRanges===!0)throw gt([t,e]);return[]},yr=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},Er=(t,e,r=1,n={})=>{let s=Number(t),i=Number(e);if(!Number.isInteger(s)||!Number.isInteger(i)){if(n.strictRanges===!0)throw gt([t,e]);return[]}s===0&&(s=0),i===0&&(i=0);let o=s>i,a=String(t),u=String(e),l=String(r);r=Math.max(Math.abs(r),1);let c=He(a)||He(u)||He(l),h=c?Math.max(a.length,u.length,l.length):0,f=c===!1&&gr(t,e,n)===!1,b=n.transform||dr(f);if(n.toRegex&&r===1)return pt(ye(t,h),ye(e,h),!0,n);let A={negatives:[],positives:[]},E=B=>A[B<0?"negatives":"positives"].push(Math.abs(B)),_=[],w=0;for(;o?s>=i:s<=i;)n.toRegex===!0&&r>1?E(s):_.push(Ar(b(s,w),h,f)),s=o?s-r:s+r,w++;return n.toRegex===!0?r>1?br(A,n,h):dt(_,null,{wrap:!1,...n}):_},mr=(t,e,r=1,n={})=>{if(!ce(t)&&t.length>1||!ce(e)&&e.length>1)return At(t,e,n);let s=n.transform||(f=>String.fromCharCode(f)),i=`${t}`.charCodeAt(0),o=`${e}`.charCodeAt(0),a=i>o,u=Math.min(i,o),l=Math.max(i,o);if(n.toRegex&&r===1)return pt(u,l,!1,n);let c=[],h=0;for(;a?i>=o:i<=o;)c.push(s(i,h)),i=a?i-r:i+r,h++;return n.toRegex===!0?dt(c,null,{wrap:!1,options:n}):c},Ee=(t,e,r,n={})=>{if(e==null&&Oe(t))return[t];if(!Oe(t)||!Oe(e))return At(t,e,n);if(typeof r=="function")return Ee(t,e,1,{transform:r});if(ht(r))return Ee(t,e,0,r);let s={...n};return s.capture===!0&&(s.wrap=!0),r=r||s.step||1,ce(r)?ce(t)&&ce(e)?Er(t,e,r,s):mr(t,e,Math.max(Math.abs(r),1),s):r!=null&&!ht(r)?yr(r,s):Ee(t,e,1,r)};var bt=Ee;const Rr=bt,yt=be;var _r=(t,e={})=>{const r=(n,s={})=>{const i=yt.isInvalidBrace(s),o=n.invalid===!0&&e.escapeInvalid===!0,a=i===!0||o===!0,u=e.escapeInvalid===!0?"\\":"";let l="";if(n.isOpen===!0)return u+n.value;if(n.isClose===!0)return console.log("node.isClose",u,n.value),u+n.value;if(n.type==="open")return a?u+n.value:"(";if(n.type==="close")return a?u+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":a?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){const c=yt.reduce(n.nodes),h=Rr(...c,{...e,wrap:!1,toRegex:!0,strictZeros:!0});if(h.length!==0)return c.length>1&&h.length>1?`(${h})`:h}if(n.nodes)for(const c of n.nodes)l+=r(c,n);return l};return r(t)};const Cr=bt,Et=Se,ae=be,se=(t="",e="",r=!1)=>{const n=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return r?ae.flatten(e).map(s=>`{${s}}`):e;for(const s of t)if(Array.isArray(s))for(const i of s)n.push(se(i,e,r));else for(let i of e)r===!0&&typeof i=="string"&&(i=`{${i}}`),n.push(Array.isArray(i)?se(s,i,r):s+i);return ae.flatten(n)};var Nr=(t,e={})=>{const r=e.rangeLimit===void 0?1e3:e.rangeLimit,n=(s,i={})=>{s.queue=[];let o=i,a=i.queue;for(;o.type!=="brace"&&o.type!=="root"&&o.parent;)o=o.parent,a=o.queue;if(s.invalid||s.dollar){a.push(se(a.pop(),Et(s,e)));return}if(s.type==="brace"&&s.invalid!==!0&&s.nodes.length===2){a.push(se(a.pop(),["{}"]));return}if(s.nodes&&s.ranges>0){const h=ae.reduce(s.nodes);if(ae.exceedsLimit(...h,e.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let f=Cr(...h,e);f.length===0&&(f=Et(s,e)),a.push(se(a.pop(),f)),s.nodes=[];return}const u=ae.encloseBrace(s);let l=s.queue,c=s;for(;c.type!=="brace"&&c.type!=="root"&&c.parent;)c=c.parent,l=c.queue;for(let h=0;h<s.nodes.length;h++){const f=s.nodes[h];if(f.type==="comma"&&s.type==="brace"){h===1&&l.push(""),l.push("");continue}if(f.type==="close"){a.push(se(a.pop(),l,u));continue}if(f.value&&f.type!=="open"){l.push(se(l.pop(),f.value));continue}f.nodes&&n(f,s)}return l};return ae.flatten(n(t))},vr={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:" ",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"};const wr=Se,{MAX_LENGTH:mt,CHAR_BACKSLASH:Le,CHAR_BACKTICK:xr,CHAR_COMMA:$r,CHAR_DOT:Sr,CHAR_LEFT_PARENTHESES:Tr,CHAR_RIGHT_PARENTHESES:Or,CHAR_LEFT_CURLY_BRACE:Hr,CHAR_RIGHT_CURLY_BRACE:Lr,CHAR_LEFT_SQUARE_BRACKET:Rt,CHAR_RIGHT_SQUARE_BRACKET:_t,CHAR_DOUBLE_QUOTE:Ir,CHAR_SINGLE_QUOTE:Pr,CHAR_NO_BREAK_SPACE:Fr,CHAR_ZERO_WIDTH_NOBREAK_SPACE:kr}=vr;var Br=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");const r=e||{},n=typeof r.maxLength=="number"?Math.min(mt,r.maxLength):mt;if(t.length>n)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${n})`);const s={type:"root",input:t,nodes:[]},i=[s];let o=s,a=s,u=0;const l=t.length;let c=0,h=0,f;const b=()=>t[c++],A=E=>{if(E.type==="text"&&a.type==="dot"&&(a.type="text"),a&&a.type==="text"&&E.type==="text"){a.value+=E.value;return}return o.nodes.push(E),E.parent=o,E.prev=a,a=E,E};for(A({type:"bos"});c<l;)if(o=i[i.length-1],f=b(),!(f===kr||f===Fr)){if(f===Le){A({type:"text",value:(e.keepEscaping?f:"")+b()});continue}if(f===_t){A({type:"text",value:"\\"+f});continue}if(f===Rt){u++;let E;for(;c<l&&(E=b());){if(f+=E,E===Rt){u++;continue}if(E===Le){f+=b();continue}if(E===_t&&(u--,u===0))break}A({type:"text",value:f});continue}if(f===Tr){o=A({type:"paren",nodes:[]}),i.push(o),A({type:"text",value:f});continue}if(f===Or){if(o.type!=="paren"){A({type:"text",value:f});continue}o=i.pop(),A({type:"text",value:f}),o=i[i.length-1];continue}if(f===Ir||f===Pr||f===xr){const E=f;let _;for(e.keepQuotes!==!0&&(f="");c<l&&(_=b());){if(_===Le){f+=_+b();continue}if(_===E){e.keepQuotes===!0&&(f+=_);break}f+=_}A({type:"text",value:f});continue}if(f===Hr){h++;const _={type:"brace",open:!0,close:!1,dollar:a.value&&a.value.slice(-1)==="$"||o.dollar===!0,depth:h,commas:0,ranges:0,nodes:[]};o=A(_),i.push(o),A({type:"open",value:f});continue}if(f===Lr){if(o.type!=="brace"){A({type:"text",value:f});continue}const E="close";o=i.pop(),o.close=!0,A({type:E,value:f}),h--,o=i[i.length-1];continue}if(f===$r&&h>0){if(o.ranges>0){o.ranges=0;const E=o.nodes.shift();o.nodes=[E,{type:"text",value:wr(o)}]}A({type:"comma",value:f}),o.commas++;continue}if(f===Sr&&h>0&&o.commas===0){const E=o.nodes;if(h===0||E.length===0){A({type:"text",value:f});continue}if(a.type==="dot"){if(o.range=[],a.value+=f,a.type="range",o.nodes.length!==3&&o.nodes.length!==5){o.invalid=!0,o.ranges=0,a.type="text";continue}o.ranges++,o.args=[];continue}if(a.type==="range"){E.pop();const _=E[E.length-1];_.value+=a.value+f,a=_,o.ranges--;continue}A({type:"dot",value:f});continue}A({type:"text",value:f})}do if(o=i.pop(),o.type!=="root"){o.nodes.forEach(w=>{w.nodes||(w.type==="open"&&(w.isOpen=!0),w.type==="close"&&(w.isClose=!0),w.nodes||(w.type="text"),w.invalid=!0)});const E=i[i.length-1],_=E.nodes.indexOf(o);E.nodes.splice(_,1,...o.nodes)}while(i.length>0);return A({type:"eos"}),s};const Ct=Se,Mr=_r,Gr=Nr,Ur=Br,V=(t,e={})=>{let r=[];if(Array.isArray(t))for(const n of t){const s=V.create(n,e);Array.isArray(s)?r.push(...s):r.push(s)}else r=[].concat(V.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(r=[...new Set(r)]),r};V.parse=(t,e={})=>Ur(t,e),V.stringify=(t,e={})=>Ct(typeof t=="string"?V.parse(t,e):t,e),V.compile=(t,e={})=>(typeof t=="string"&&(t=V.parse(t,e)),Mr(t,e)),V.expand=(t,e={})=>{typeof t=="string"&&(t=V.parse(t,e));let r=Gr(t,e);return e.noempty===!0&&(r=r.filter(Boolean)),e.nodupes===!0&&(r=[...new Set(r)]),r},V.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?V.compile(t,e):V.expand(t,e);var Xr=V;function Z(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function Nt(t,e){for(var r="",n=0,s=-1,i=0,o,a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var u=r.lastIndexOf("/");if(u!==r.length-1){u===-1?(r="",n=0):(r=r.slice(0,u),n=r.length-1-r.lastIndexOf("/")),s=a,i=0;continue}}else if(r.length===2||r.length===1){r="",n=0,s=a,i=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+t.slice(s+1,a):r=t.slice(s+1,a),n=a-s-1;s=a,i=0}else o===46&&i!==-1?++i:i=-1}return r}function Kr(t,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+t+n:n}var ue={resolve:function(){for(var e="",r=!1,n,s=arguments.length-1;s>=-1&&!r;s--){var i;s>=0?i=arguments[s]:(n===void 0&&(n=process.cwd()),i=n),Z(i),i.length!==0&&(e=i+"/"+e,r=i.charCodeAt(0)===47)}return e=Nt(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Z(e),e.length===0)return".";var r=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=Nt(e,!r),e.length===0&&!r&&(e="."),e.length>0&&n&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return Z(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];Z(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":ue.normalize(e)},relative:function(e,r){if(Z(e),Z(r),e===r||(e=ue.resolve(e),r=ue.resolve(r),e===r))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var s=e.length,i=s-n,o=1;o<r.length&&r.charCodeAt(o)===47;++o);for(var a=r.length,u=a-o,l=i<u?i:u,c=-1,h=0;h<=l;++h){if(h===l){if(u>l){if(r.charCodeAt(o+h)===47)return r.slice(o+h+1);if(h===0)return r.slice(o+h)}else i>l&&(e.charCodeAt(n+h)===47?c=h:h===0&&(c=0));break}var f=e.charCodeAt(n+h),b=r.charCodeAt(o+h);if(f!==b)break;f===47&&(c=h)}var A="";for(h=n+c+1;h<=s;++h)(h===s||e.charCodeAt(h)===47)&&(A.length===0?A+="..":A+="/..");return A.length>0?A+r.slice(o+c):(o+=c,r.charCodeAt(o)===47&&++o,r.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(Z(e),e.length===0)return".";for(var r=e.charCodeAt(0),n=r===47,s=-1,i=!0,o=e.length-1;o>=1;--o)if(r=e.charCodeAt(o),r===47){if(!i){s=o;break}}else i=!1;return s===-1?n?"/":".":n&&s===1?"//":e.slice(0,s)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');Z(e);var n=0,s=-1,i=!0,o;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var a=r.length-1,u=-1;for(o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(l===47){if(!i){n=o+1;break}}else u===-1&&(i=!1,u=o+1),a>=0&&(l===r.charCodeAt(a)?--a===-1&&(s=o):(a=-1,s=u))}return n===s?s=u:s===-1&&(s=e.length),e.slice(n,s)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!i){n=o+1;break}}else s===-1&&(i=!1,s=o+1);return s===-1?"":e.slice(n,s)}},extname:function(e){Z(e);for(var r=-1,n=0,s=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var u=e.charCodeAt(a);if(u===47){if(!i){n=a+1;break}continue}s===-1&&(i=!1,s=a+1),u===46?r===-1?r=a:o!==1&&(o=1):r!==-1&&(o=-1)}return r===-1||s===-1||o===0||o===1&&r===s-1&&r===n+1?"":e.slice(r,s)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Kr("/",e)},parse:function(e){Z(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var n=e.charCodeAt(0),s=n===47,i;s?(r.root="/",i=1):i=0;for(var o=-1,a=0,u=-1,l=!0,c=e.length-1,h=0;c>=i;--c){if(n=e.charCodeAt(c),n===47){if(!l){a=c+1;break}continue}u===-1&&(l=!1,u=c+1),n===46?o===-1?o=c:h!==1&&(h=1):o!==-1&&(h=-1)}return o===-1||u===-1||h===0||h===1&&o===u-1&&o===a+1?u!==-1&&(a===0&&s?r.base=r.name=e.slice(1,u):r.base=r.name=e.slice(a,u)):(a===0&&s?(r.name=e.slice(1,o),r.base=e.slice(1,u)):(r.name=e.slice(a,o),r.base=e.slice(a,u)),r.ext=e.slice(o,u)),a>0?r.dir=e.slice(0,a-1):s&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};ue.posix=ue;var Ie=ue,fe={};const Vr=Ie,Q="\\\\/",vt=`[^${Q}]`,D="\\.",Wr="\\+",zr="\\?",me="\\/",Zr="(?=.)",wt="[^/]",Pe=`(?:${me}|$)`,xt=`(?:^|${me})`,Fe=`${D}{1,2}${Pe}`,Qr=`(?!${D})`,jr=`(?!${xt}${Fe})`,qr=`(?!${D}{0,1}${Pe})`,Yr=`(?!${Fe})`,Jr=`[^.${me}]`,Dr=`${wt}*?`,$t={DOT_LITERAL:D,PLUS_LITERAL:Wr,QMARK_LITERAL:zr,SLASH_LITERAL:me,ONE_CHAR:Zr,QMARK:wt,END_ANCHOR:Pe,DOTS_SLASH:Fe,NO_DOT:Qr,NO_DOTS:jr,NO_DOT_SLASH:qr,NO_DOTS_SLASH:Yr,QMARK_NO_DOT:Jr,STAR:Dr,START_ANCHOR:xt},en={...$t,SLASH_LITERAL:`[${Q}]`,QMARK:vt,STAR:`${vt}*?`,DOTS_SLASH:`${D}{1,2}(?:[${Q}]|$)`,NO_DOT:`(?!${D})`,NO_DOTS:`(?!(?:^|[${Q}])${D}{1,2}(?:[${Q}]|$))`,NO_DOT_SLASH:`(?!${D}{0,1}(?:[${Q}]|$))`,NO_DOTS_SLASH:`(?!${D}{1,2}(?:[${Q}]|$))`,QMARK_NO_DOT:`[^.${Q}]`,START_ANCHOR:`(?:^|[${Q}])`,END_ANCHOR:`(?:[${Q}]|$)`},tn={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};var Re={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:tn,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:Vr.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?en:$t}};(function(t){const e=Ie,{REGEX_BACKSLASH:r,REGEX_REMOVE_BACKSLASH:n,REGEX_SPECIAL_CHARS:s,REGEX_SPECIAL_CHARS_GLOBAL:i}=Re;t.isObject=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),t.hasRegexChars=o=>s.test(o),t.isRegexChar=o=>o.length===1&&t.hasRegexChars(o),t.escapeRegex=o=>o.replace(i,"\\$1"),t.toPosixSlashes=o=>o.replace(r,"/"),t.removeBackslashes=o=>o.replace(n,a=>a==="\\"?"":a),t.supportsLookbehinds=()=>{const o=process.version.slice(1).split(".").map(Number);return o.length===3&&o[0]>=9||o[0]===8&&o[1]>=10},t.isWindows=o=>o&&typeof o.windows=="boolean"?o.windows:e.sep==="\\",t.escapeLast=(o,a,u)=>{const l=o.lastIndexOf(a,u);return l===-1?o:o[l-1]==="\\"?t.escapeLast(o,a,l-1):`${o.slice(0,l)}\\${o.slice(l)}`},t.removePrefix=(o,a={})=>{let u=o;return u.startsWith("./")&&(u=u.slice(2),a.prefix="./"),u},t.wrapOutput=(o,a={},u={})=>{const l=u.contains?"":"^",c=u.contains?"":"$";let h=`${l}(?:${o})${c}`;return a.negated===!0&&(h=`(?:^(?!${h}).*$)`),h}})(fe);const St=fe,{CHAR_ASTERISK:ke,CHAR_AT:rn,CHAR_BACKWARD_SLASH:he,CHAR_COMMA:nn,CHAR_DOT:Be,CHAR_EXCLAMATION_MARK:Me,CHAR_FORWARD_SLASH:Tt,CHAR_LEFT_CURLY_BRACE:Ge,CHAR_LEFT_PARENTHESES:Ue,CHAR_LEFT_SQUARE_BRACKET:sn,CHAR_PLUS:on,CHAR_QUESTION_MARK:Ot,CHAR_RIGHT_CURLY_BRACE:an,CHAR_RIGHT_PARENTHESES:Ht,CHAR_RIGHT_SQUARE_BRACKET:un}=Re,Lt=t=>t===Tt||t===he,It=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)};var ln=(t,e)=>{const r=e||{},n=t.length-1,s=r.parts===!0||r.scanToEnd===!0,i=[],o=[],a=[];let u=t,l=-1,c=0,h=0,f=!1,b=!1,A=!1,E=!1,_=!1,w=!1,B=!1,S=!1,q=!1,M=!1,te=0,U,R,x={value:"",depth:0,isGlob:!1};const k=()=>l>=n,g=()=>u.charCodeAt(l+1),H=()=>(U=R,u.charCodeAt(++l));for(;l<n;){R=H();let X;if(R===he){B=x.backslashes=!0,R=H(),R===Ge&&(w=!0);continue}if(w===!0||R===Ge){for(te++;k()!==!0&&(R=H());){if(R===he){B=x.backslashes=!0,H();continue}if(R===Ge){te++;continue}if(w!==!0&&R===Be&&(R=H())===Be){if(f=x.isBrace=!0,A=x.isGlob=!0,M=!0,s===!0)continue;break}if(w!==!0&&R===nn){if(f=x.isBrace=!0,A=x.isGlob=!0,M=!0,s===!0)continue;break}if(R===an&&(te--,te===0)){w=!1,f=x.isBrace=!0,M=!0;break}}if(s===!0)continue;break}if(R===Tt){if(i.push(l),o.push(x),x={value:"",depth:0,isGlob:!1},M===!0)continue;if(U===Be&&l===c+1){c+=2;continue}h=l+1;continue}if(r.noext!==!0&&(R===on||R===rn||R===ke||R===Ot||R===Me)===!0&&g()===Ue){if(A=x.isGlob=!0,E=x.isExtglob=!0,M=!0,R===Me&&l===c&&(q=!0),s===!0){for(;k()!==!0&&(R=H());){if(R===he){B=x.backslashes=!0,R=H();continue}if(R===Ht){A=x.isGlob=!0,M=!0;break}}continue}break}if(R===ke){if(U===ke&&(_=x.isGlobstar=!0),A=x.isGlob=!0,M=!0,s===!0)continue;break}if(R===Ot){if(A=x.isGlob=!0,M=!0,s===!0)continue;break}if(R===sn){for(;k()!==!0&&(X=H());){if(X===he){B=x.backslashes=!0,H();continue}if(X===un){b=x.isBracket=!0,A=x.isGlob=!0,M=!0;break}}if(s===!0)continue;break}if(r.nonegate!==!0&&R===Me&&l===c){S=x.negated=!0,c++;continue}if(r.noparen!==!0&&R===Ue){if(A=x.isGlob=!0,s===!0){for(;k()!==!0&&(R=H());){if(R===Ue){B=x.backslashes=!0,R=H();continue}if(R===Ht){M=!0;break}}continue}break}if(A===!0){if(M=!0,s===!0)continue;break}}r.noext===!0&&(E=!1,A=!1);let T=u,re="",p="";c>0&&(re=u.slice(0,c),u=u.slice(c),h-=c),T&&A===!0&&h>0?(T=u.slice(0,h),p=u.slice(h)):A===!0?(T="",p=u):T=u,T&&T!==""&&T!=="/"&&T!==u&&Lt(T.charCodeAt(T.length-1))&&(T=T.slice(0,-1)),r.unescape===!0&&(p&&(p=St.removeBackslashes(p)),T&&B===!0&&(T=St.removeBackslashes(T)));const d={prefix:re,input:t,start:c,base:T,glob:p,isBrace:f,isBracket:b,isGlob:A,isExtglob:E,isGlobstar:_,negated:S,negatedExtglob:q};if(r.tokens===!0&&(d.maxDepth=0,Lt(R)||o.push(x),d.tokens=o),r.parts===!0||r.tokens===!0){let X;for(let v=0;v<i.length;v++){const Y=X?X+1:c,J=i[v],z=t.slice(Y,J);r.tokens&&(v===0&&c!==0?(o[v].isPrefix=!0,o[v].value=re):o[v].value=z,It(o[v]),d.maxDepth+=o[v].depth),(v!==0||z!=="")&&a.push(z),X=J}if(X&&X+1<t.length){const v=t.slice(X+1);a.push(v),r.tokens&&(o[o.length-1].value=v,It(o[o.length-1]),d.maxDepth+=o[o.length-1].depth)}d.slashes=i,d.parts=a}return d};const _e=Re,W=fe,{MAX_LENGTH:Ce,POSIX_REGEX_SOURCE:cn,REGEX_NON_SPECIAL_CHARS:fn,REGEX_SPECIAL_CHARS_BACKREF:hn,REPLACEMENTS:Pt}=_e,pn=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();const r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(s=>W.escapeRegex(s)).join("..")}return r},le=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,Xe=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=Pt[t]||t;const r={...e},n=typeof r.maxLength=="number"?Math.min(Ce,r.maxLength):Ce;let s=t.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);const i={type:"bos",value:"",output:r.prepend||""},o=[i],a=r.capture?"":"?:",u=W.isWindows(e),l=_e.globChars(u),c=_e.extglobChars(l),{DOT_LITERAL:h,PLUS_LITERAL:f,SLASH_LITERAL:b,ONE_CHAR:A,DOTS_SLASH:E,NO_DOT:_,NO_DOT_SLASH:w,NO_DOTS_SLASH:B,QMARK:S,QMARK_NO_DOT:q,STAR:M,START_ANCHOR:te}=l,U=m=>`(${a}(?:(?!${te}${m.dot?E:h}).)*?)`,R=r.dot?"":_,x=r.dot?S:q;let k=r.bash===!0?U(r):M;r.capture&&(k=`(${k})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);const g={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:o};t=W.removePrefix(t,g),s=t.length;const H=[],T=[],re=[];let p=i,d;const X=()=>g.index===s-1,v=g.peek=(m=1)=>t[g.index+m],Y=g.advance=()=>t[++g.index]||"",J=()=>t.slice(g.index+1),z=(m="",O=0)=>{g.consumed+=m,g.index+=O},ve=m=>{g.output+=m.output!=null?m.output:m.value,z(m.value)},Ws=()=>{let m=1;for(;v()==="!"&&(v(2)!=="("||v(3)==="?");)Y(),g.start++,m++;return m%2===0?!1:(g.negated=!0,g.start++,!0)},we=m=>{g[m]++,re.push(m)},oe=m=>{g[m]--,re.pop()},N=m=>{if(p.type==="globstar"){const O=g.braces>0&&(m.type==="comma"||m.type==="brace"),y=m.extglob===!0||H.length&&(m.type==="pipe"||m.type==="paren");m.type!=="slash"&&m.type!=="paren"&&!O&&!y&&(g.output=g.output.slice(0,-p.output.length),p.type="star",p.value="*",p.output=k,g.output+=p.output)}if(H.length&&m.type!=="paren"&&(H[H.length-1].inner+=m.value),(m.value||m.output)&&ve(m),p&&p.type==="text"&&m.type==="text"){p.value+=m.value,p.output=(p.output||"")+m.value;return}m.prev=p,o.push(m),p=m},xe=(m,O)=>{const y={...c[O],conditions:1,inner:""};y.prev=p,y.parens=g.parens,y.output=g.output;const C=(r.capture?"(":"")+y.open;we("parens"),N({type:m,value:O,output:g.output?"":A}),N({type:"paren",extglob:!0,value:Y(),output:C}),H.push(y)},zs=m=>{let O=m.close+(r.capture?")":""),y;if(m.type==="negate"){let C=k;if(m.inner&&m.inner.length>1&&m.inner.includes("/")&&(C=U(r)),(C!==k||X()||/^\)+$/.test(J()))&&(O=m.close=`)$))${C}`),m.inner.includes("*")&&(y=J())&&/^\.[^\\/.]+$/.test(y)){const L=Xe(y,{...e,fastpaths:!1}).output;O=m.close=`)${L})${C})`}m.prev.type==="bos"&&(g.negatedExtglob=!0)}N({type:"paren",extglob:!0,value:d,output:O}),oe("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let m=!1,O=t.replace(hn,(y,C,L,K,F,et)=>K==="\\"?(m=!0,y):K==="?"?C?C+K+(F?S.repeat(F.length):""):et===0?x+(F?S.repeat(F.length):""):S.repeat(L.length):K==="."?h.repeat(L.length):K==="*"?C?C+K+(F?k:""):k:C?y:`\\${y}`);return m===!0&&(r.unescape===!0?O=O.replace(/\\/g,""):O=O.replace(/\\+/g,y=>y.length%2===0?"\\\\":y?"\\":"")),O===t&&r.contains===!0?(g.output=t,g):(g.output=W.wrapOutput(O,g,e),g)}for(;!X();){if(d=Y(),d==="\0")continue;if(d==="\\"){const y=v();if(y==="/"&&r.bash!==!0||y==="."||y===";")continue;if(!y){d+="\\",N({type:"text",value:d});continue}const C=/^\\+/.exec(J());let L=0;if(C&&C[0].length>2&&(L=C[0].length,g.index+=L,L%2!==0&&(d+="\\")),r.unescape===!0?d=Y():d+=Y(),g.brackets===0){N({type:"text",value:d});continue}}if(g.brackets>0&&(d!=="]"||p.value==="["||p.value==="[^")){if(r.posix!==!1&&d===":"){const y=p.value.slice(1);if(y.includes("[")&&(p.posix=!0,y.includes(":"))){const C=p.value.lastIndexOf("["),L=p.value.slice(0,C),K=p.value.slice(C+2),F=cn[K];if(F){p.value=L+F,g.backtrack=!0,Y(),!i.output&&o.indexOf(p)===1&&(i.output=A);continue}}}(d==="["&&v()!==":"||d==="-"&&v()==="]")&&(d=`\\${d}`),d==="]"&&(p.value==="["||p.value==="[^")&&(d=`\\${d}`),r.posix===!0&&d==="!"&&p.value==="["&&(d="^"),p.value+=d,ve({value:d});continue}if(g.quotes===1&&d!=='"'){d=W.escapeRegex(d),p.value+=d,ve({value:d});continue}if(d==='"'){g.quotes=g.quotes===1?0:1,r.keepQuotes===!0&&N({type:"text",value:d});continue}if(d==="("){we("parens"),N({type:"paren",value:d});continue}if(d===")"){if(g.parens===0&&r.strictBrackets===!0)throw new SyntaxError(le("opening","("));const y=H[H.length-1];if(y&&g.parens===y.parens+1){zs(H.pop());continue}N({type:"paren",value:d,output:g.parens?")":"\\)"}),oe("parens");continue}if(d==="["){if(r.nobracket===!0||!J().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(le("closing","]"));d=`\\${d}`}else we("brackets");N({type:"bracket",value:d});continue}if(d==="]"){if(r.nobracket===!0||p&&p.type==="bracket"&&p.value.length===1){N({type:"text",value:d,output:`\\${d}`});continue}if(g.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(le("opening","["));N({type:"text",value:d,output:`\\${d}`});continue}oe("brackets");const y=p.value.slice(1);if(p.posix!==!0&&y[0]==="^"&&!y.includes("/")&&(d=`/${d}`),p.value+=d,ve({value:d}),r.literalBrackets===!1||W.hasRegexChars(y))continue;const C=W.escapeRegex(p.value);if(g.output=g.output.slice(0,-p.value.length),r.literalBrackets===!0){g.output+=C,p.value=C;continue}p.value=`(${a}${C}|${p.value})`,g.output+=p.value;continue}if(d==="{"&&r.nobrace!==!0){we("braces");const y={type:"brace",value:d,output:"(",outputIndex:g.output.length,tokensIndex:g.tokens.length};T.push(y),N(y);continue}if(d==="}"){const y=T[T.length-1];if(r.nobrace===!0||!y){N({type:"text",value:d,output:d});continue}let C=")";if(y.dots===!0){const L=o.slice(),K=[];for(let F=L.length-1;F>=0&&(o.pop(),L[F].type!=="brace");F--)L[F].type!=="dots"&&K.unshift(L[F].value);C=pn(K,r),g.backtrack=!0}if(y.comma!==!0&&y.dots!==!0){const L=g.output.slice(0,y.outputIndex),K=g.tokens.slice(y.tokensIndex);y.value=y.output="\\{",d=C="\\}",g.output=L;for(const F of K)g.output+=F.output||F.value}N({type:"brace",value:d,output:C}),oe("braces"),T.pop();continue}if(d==="|"){H.length>0&&H[H.length-1].conditions++,N({type:"text",value:d});continue}if(d===","){let y=d;const C=T[T.length-1];C&&re[re.length-1]==="braces"&&(C.comma=!0,y="|"),N({type:"comma",value:d,output:y});continue}if(d==="/"){if(p.type==="dot"&&g.index===g.start+1){g.start=g.index+1,g.consumed="",g.output="",o.pop(),p=i;continue}N({type:"slash",value:d,output:b});continue}if(d==="."){if(g.braces>0&&p.type==="dot"){p.value==="."&&(p.output=h);const y=T[T.length-1];p.type="dots",p.output+=d,p.value+=d,y.dots=!0;continue}if(g.braces+g.parens===0&&p.type!=="bos"&&p.type!=="slash"){N({type:"text",value:d,output:h});continue}N({type:"dot",value:d,output:h});continue}if(d==="?"){if(!(p&&p.value==="(")&&r.noextglob!==!0&&v()==="("&&v(2)!=="?"){xe("qmark",d);continue}if(p&&p.type==="paren"){const C=v();let L=d;if(C==="<"&&!W.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(p.value==="("&&!/[!=<:]/.test(C)||C==="<"&&!/<([!=]|\w+>)/.test(J()))&&(L=`\\${d}`),N({type:"text",value:d,output:L});continue}if(r.dot!==!0&&(p.type==="slash"||p.type==="bos")){N({type:"qmark",value:d,output:q});continue}N({type:"qmark",value:d,output:S});continue}if(d==="!"){if(r.noextglob!==!0&&v()==="("&&(v(2)!=="?"||!/[!=<:]/.test(v(3)))){xe("negate",d);continue}if(r.nonegate!==!0&&g.index===0){Ws();continue}}if(d==="+"){if(r.noextglob!==!0&&v()==="("&&v(2)!=="?"){xe("plus",d);continue}if(p&&p.value==="("||r.regex===!1){N({type:"plus",value:d,output:f});continue}if(p&&(p.type==="bracket"||p.type==="paren"||p.type==="brace")||g.parens>0){N({type:"plus",value:d});continue}N({type:"plus",value:f});continue}if(d==="@"){if(r.noextglob!==!0&&v()==="("&&v(2)!=="?"){N({type:"at",extglob:!0,value:d,output:""});continue}N({type:"text",value:d});continue}if(d!=="*"){(d==="$"||d==="^")&&(d=`\\${d}`);const y=fn.exec(J());y&&(d+=y[0],g.index+=y[0].length),N({type:"text",value:d});continue}if(p&&(p.type==="globstar"||p.star===!0)){p.type="star",p.star=!0,p.value+=d,p.output=k,g.backtrack=!0,g.globstar=!0,z(d);continue}let m=J();if(r.noextglob!==!0&&/^\([^?]/.test(m)){xe("star",d);continue}if(p.type==="star"){if(r.noglobstar===!0){z(d);continue}const y=p.prev,C=y.prev,L=y.type==="slash"||y.type==="bos",K=C&&(C.type==="star"||C.type==="globstar");if(r.bash===!0&&(!L||m[0]&&m[0]!=="/")){N({type:"star",value:d,output:""});continue}const F=g.braces>0&&(y.type==="comma"||y.type==="brace"),et=H.length&&(y.type==="pipe"||y.type==="paren");if(!L&&y.type!=="paren"&&!F&&!et){N({type:"star",value:d,output:""});continue}for(;m.slice(0,3)==="/**";){const $e=t[g.index+4];if($e&&$e!=="/")break;m=m.slice(3),z("/**",3)}if(y.type==="bos"&&X()){p.type="globstar",p.value+=d,p.output=U(r),g.output=p.output,g.globstar=!0,z(d);continue}if(y.type==="slash"&&y.prev.type!=="bos"&&!K&&X()){g.output=g.output.slice(0,-(y.output+p.output).length),y.output=`(?:${y.output}`,p.type="globstar",p.output=U(r)+(r.strictSlashes?")":"|$)"),p.value+=d,g.globstar=!0,g.output+=y.output+p.output,z(d);continue}if(y.type==="slash"&&y.prev.type!=="bos"&&m[0]==="/"){const $e=m[1]!==void 0?"|$":"";g.output=g.output.slice(0,-(y.output+p.output).length),y.output=`(?:${y.output}`,p.type="globstar",p.output=`${U(r)}${b}|${b}${$e})`,p.value+=d,g.output+=y.output+p.output,g.globstar=!0,z(d+Y()),N({type:"slash",value:"/",output:""});continue}if(y.type==="bos"&&m[0]==="/"){p.type="globstar",p.value+=d,p.output=`(?:^|${b}|${U(r)}${b})`,g.output=p.output,g.globstar=!0,z(d+Y()),N({type:"slash",value:"/",output:""});continue}g.output=g.output.slice(0,-p.output.length),p.type="globstar",p.output=U(r),p.value+=d,g.output+=p.output,g.globstar=!0,z(d);continue}const O={type:"star",value:d,output:k};if(r.bash===!0){O.output=".*?",(p.type==="bos"||p.type==="slash")&&(O.output=R+O.output),N(O);continue}if(p&&(p.type==="bracket"||p.type==="paren")&&r.regex===!0){O.output=d,N(O);continue}(g.index===g.start||p.type==="slash"||p.type==="dot")&&(p.type==="dot"?(g.output+=w,p.output+=w):r.dot===!0?(g.output+=B,p.output+=B):(g.output+=R,p.output+=R),v()!=="*"&&(g.output+=A,p.output+=A)),N(O)}for(;g.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(le("closing","]"));g.output=W.escapeLast(g.output,"["),oe("brackets")}for(;g.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(le("closing",")"));g.output=W.escapeLast(g.output,"("),oe("parens")}for(;g.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(le("closing","}"));g.output=W.escapeLast(g.output,"{"),oe("braces")}if(r.strictSlashes!==!0&&(p.type==="star"||p.type==="bracket")&&N({type:"maybe_slash",value:"",output:`${b}?`}),g.backtrack===!0){g.output="";for(const m of g.tokens)g.output+=m.output!=null?m.output:m.value,m.suffix&&(g.output+=m.suffix)}return g};Xe.fastpaths=(t,e)=>{const r={...e},n=typeof r.maxLength=="number"?Math.min(Ce,r.maxLength):Ce,s=t.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);t=Pt[t]||t;const i=W.isWindows(e),{DOT_LITERAL:o,SLASH_LITERAL:a,ONE_CHAR:u,DOTS_SLASH:l,NO_DOT:c,NO_DOTS:h,NO_DOTS_SLASH:f,STAR:b,START_ANCHOR:A}=_e.globChars(i),E=r.dot?h:c,_=r.dot?f:c,w=r.capture?"":"?:",B={negated:!1,prefix:""};let S=r.bash===!0?".*?":b;r.capture&&(S=`(${S})`);const q=R=>R.noglobstar===!0?S:`(${w}(?:(?!${A}${R.dot?l:o}).)*?)`,M=R=>{switch(R){case"*":return`${E}${u}${S}`;case".*":return`${o}${u}${S}`;case"*.*":return`${E}${S}${o}${u}${S}`;case"*/*":return`${E}${S}${a}${u}${_}${S}`;case"**":return E+q(r);case"**/*":return`(?:${E}${q(r)}${a})?${_}${u}${S}`;case"**/*.*":return`(?:${E}${q(r)}${a})?${_}${S}${o}${u}${S}`;case"**/.*":return`(?:${E}${q(r)}${a})?${o}${u}${S}`;default:{const x=/^(.*?)\.(\w+)$/.exec(R);if(!x)return;const k=M(x[1]);return k?k+o+x[2]:void 0}}},te=W.removePrefix(t,B);let U=M(te);return U&&r.strictSlashes!==!0&&(U+=`${a}?`),U};var dn=Xe;const gn=Ie,An=ln,Ke=dn,Ve=fe,bn=Re,yn=t=>t&&typeof t=="object"&&!Array.isArray(t),I=(t,e,r=!1)=>{if(Array.isArray(t)){const c=t.map(f=>I(f,e,r));return f=>{for(const b of c){const A=b(f);if(A)return A}return!1}}const n=yn(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");const s=e||{},i=Ve.isWindows(e),o=n?I.compileRe(t,e):I.makeRe(t,e,!1,!0),a=o.state;delete o.state;let u=()=>!1;if(s.ignore){const c={...e,ignore:null,onMatch:null,onResult:null};u=I(s.ignore,c,r)}const l=(c,h=!1)=>{const{isMatch:f,match:b,output:A}=I.test(c,o,e,{glob:t,posix:i}),E={glob:t,state:a,regex:o,posix:i,input:c,output:A,match:b,isMatch:f};return typeof s.onResult=="function"&&s.onResult(E),f===!1?(E.isMatch=!1,h?E:!1):u(c)?(typeof s.onIgnore=="function"&&s.onIgnore(E),E.isMatch=!1,h?E:!1):(typeof s.onMatch=="function"&&s.onMatch(E),h?E:!0)};return r&&(l.state=a),l};I.test=(t,e,r,{glob:n,posix:s}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};const i=r||{},o=i.format||(s?Ve.toPosixSlashes:null);let a=t===n,u=a&&o?o(t):t;return a===!1&&(u=o?o(t):t,a=u===n),(a===!1||i.capture===!0)&&(i.matchBase===!0||i.basename===!0?a=I.matchBase(t,e,r,s):a=e.exec(u)),{isMatch:!!a,match:a,output:u}},I.matchBase=(t,e,r,n=Ve.isWindows(r))=>(e instanceof RegExp?e:I.makeRe(e,r)).test(gn.basename(t)),I.isMatch=(t,e,r)=>I(e,r)(t),I.parse=(t,e)=>Array.isArray(t)?t.map(r=>I.parse(r,e)):Ke(t,{...e,fastpaths:!1}),I.scan=(t,e)=>An(t,e),I.compileRe=(t,e,r=!1,n=!1)=>{if(r===!0)return t.output;const s=e||{},i=s.contains?"":"^",o=s.contains?"":"$";let a=`${i}(?:${t.output})${o}`;t&&t.negated===!0&&(a=`^(?!${a}).*$`);const u=I.toRegex(a,e);return n===!0&&(u.state=t),u},I.makeRe=(t,e={},r=!1,n=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let s={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(s.output=Ke.fastpaths(t,e)),s.output||(s=Ke(t,e)),I.compileRe(s,e,r,n)},I.toRegex=(t,e)=>{try{const r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}},I.constants=bn;var En=I,mn=En;const Ft=rt,kt=Xr,j=mn,We=fe,Bt=t=>t===""||t==="./",Mt=t=>{const e=t.indexOf("{");return e>-1&&t.indexOf("}",e)>-1},$=(t,e,r)=>{e=[].concat(e),t=[].concat(t);let n=new Set,s=new Set,i=new Set,o=0,a=c=>{i.add(c.output),r&&r.onResult&&r.onResult(c)};for(let c=0;c<e.length;c++){let h=j(String(e[c]),{...r,onResult:a},!0),f=h.state.negated||h.state.negatedExtglob;f&&o++;for(let b of t){let A=h(b,!0);(f?!A.isMatch:A.isMatch)&&(f?n.add(A.output):(n.delete(A.output),s.add(A.output)))}}let l=(o===e.length?[...i]:[...s]).filter(c=>!n.has(c));if(r&&l.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${e.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?e.map(c=>c.replace(/\\/g,"")):e}return l};$.match=$,$.matcher=(t,e)=>j(t,e),$.isMatch=(t,e,r)=>j(e,r)(t),$.any=$.isMatch,$.not=(t,e,r={})=>{e=[].concat(e).map(String);let n=new Set,s=[],i=a=>{r.onResult&&r.onResult(a),s.push(a.output)},o=new Set($(t,e,{...r,onResult:i}));for(let a of s)o.has(a)||n.add(a);return[...n]},$.contains=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${Ft.inspect(t)}"`);if(Array.isArray(e))return e.some(n=>$.contains(t,n,r));if(typeof e=="string"){if(Bt(t)||Bt(e))return!1;if(t.includes(e)||t.startsWith("./")&&t.slice(2).includes(e))return!0}return $.isMatch(t,e,{...r,contains:!0})},$.matchKeys=(t,e,r)=>{if(!We.isObject(t))throw new TypeError("Expected the first argument to be an object");let n=$(Object.keys(t),e,r),s={};for(let i of n)s[i]=t[i];return s},$.some=(t,e,r)=>{let n=[].concat(t);for(let s of[].concat(e)){let i=j(String(s),r);if(n.some(o=>i(o)))return!0}return!1},$.every=(t,e,r)=>{let n=[].concat(t);for(let s of[].concat(e)){let i=j(String(s),r);if(!n.every(o=>i(o)))return!1}return!0},$.all=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${Ft.inspect(t)}"`);return[].concat(e).every(n=>j(n,r)(t))},$.capture=(t,e,r)=>{let n=We.isWindows(r),i=j.makeRe(String(t),{...r,capture:!0}).exec(n?We.toPosixSlashes(e):e);if(i)return i.slice(1).map(o=>o===void 0?"":o)},$.makeRe=(...t)=>j.makeRe(...t),$.scan=(...t)=>j.scan(...t),$.parse=(t,e)=>{let r=[];for(let n of[].concat(t||[]))for(let s of kt(String(n),e))r.push(j.parse(s,e));return r},$.braces=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return e&&e.nobrace===!0||!Mt(t)?[t]:kt(t,e)},$.braceExpand=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return $.braces(t,{...e,expand:!0})},$.hasBraces=Mt;var Rn=$,pe=tt(Rn),ze={},Ne={};(function(t){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",n="["+e+"]["+r+"]*",s=new RegExp("^"+n+"$"),i=function(a,u){const l=[];let c=u.exec(a);for(;c;){const h=[];h.startIndex=u.lastIndex-c[0].length;const f=c.length;for(let b=0;b<f;b++)h.push(c[b]);l.push(h),c=u.exec(a)}return l},o=function(a){const u=s.exec(a);return!(u===null||typeof u>"u")};t.isExist=function(a){return typeof a<"u"},t.isEmptyObject=function(a){return Object.keys(a).length===0},t.merge=function(a,u,l){if(u){const c=Object.keys(u),h=c.length;for(let f=0;f<h;f++)l==="strict"?a[c[f]]=[u[c[f]]]:a[c[f]]=u[c[f]]}},t.getValue=function(a){return t.isExist(a)?a:""},t.isName=o,t.getAllMatches=i,t.nameRegexp=n})(Ne);const Ze=Ne,_n={allowBooleanAttributes:!1,unpairedTags:[]};ze.validate=function(t,e){e=Object.assign({},_n,e);const r=[];let n=!1,s=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let i=0;i<t.length;i++)if(t[i]==="<"&&t[i+1]==="?"){if(i+=2,i=Ut(t,i),i.err)return i}else if(t[i]==="<"){let o=i;if(i++,t[i]==="!"){i=Xt(t,i);continue}else{let a=!1;t[i]==="/"&&(a=!0,i++);let u="";for(;i<t.length&&t[i]!==">"&&t[i]!==" "&&t[i]!=="	"&&t[i]!==`
`&&t[i]!=="\r";i++)u+=t[i];if(u=u.trim(),u[u.length-1]==="/"&&(u=u.substring(0,u.length-1),i--),!Tn(u)){let h;return u.trim().length===0?h="Invalid space after '<'.":h="Tag '"+u+"' is an invalid name.",P("InvalidTag",h,G(t,i))}const l=vn(t,i);if(l===!1)return P("InvalidAttr","Attributes for '"+u+"' have open quote.",G(t,i));let c=l.value;if(i=l.index,c[c.length-1]==="/"){const h=i-c.length;c=c.substring(0,c.length-1);const f=Kt(c,e);if(f===!0)n=!0;else return P(f.err.code,f.err.msg,G(t,h+f.err.line))}else if(a)if(l.tagClosed){if(c.trim().length>0)return P("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",G(t,o));if(r.length===0)return P("InvalidTag","Closing tag '"+u+"' has not been opened.",G(t,o));{const h=r.pop();if(u!==h.tagName){let f=G(t,h.tagStartPos);return P("InvalidTag","Expected closing tag '"+h.tagName+"' (opened in line "+f.line+", col "+f.col+") instead of closing tag '"+u+"'.",G(t,o))}r.length==0&&(s=!0)}}else return P("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",G(t,i));else{const h=Kt(c,e);if(h!==!0)return P(h.err.code,h.err.msg,G(t,i-c.length+h.err.line));if(s===!0)return P("InvalidXml","Multiple possible root nodes found.",G(t,i));e.unpairedTags.indexOf(u)!==-1||r.push({tagName:u,tagStartPos:o}),n=!0}for(i++;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="!"){i++,i=Xt(t,i);continue}else if(t[i+1]==="?"){if(i=Ut(t,++i),i.err)return i}else break;else if(t[i]==="&"){const h=$n(t,i);if(h==-1)return P("InvalidChar","char '&' is not expected.",G(t,i));i=h}else if(s===!0&&!Gt(t[i]))return P("InvalidXml","Extra text at the end",G(t,i));t[i]==="<"&&i--}}else{if(Gt(t[i]))continue;return P("InvalidChar","char '"+t[i]+"' is not expected.",G(t,i))}if(n){if(r.length==1)return P("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",G(t,r[0].tagStartPos));if(r.length>0)return P("InvalidXml","Invalid '"+JSON.stringify(r.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return P("InvalidXml","Start tag expected.",1);return!0};function Gt(t){return t===" "||t==="	"||t===`
`||t==="\r"}function Ut(t,e){const r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const n=t.substr(r,e-r);if(e>5&&n==="xml")return P("InvalidXml","XML declaration allowed only at the start of the document.",G(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function Xt(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const Cn='"',Nn="'";function vn(t,e){let r="",n="",s=!1;for(;e<t.length;e++){if(t[e]===Cn||t[e]===Nn)n===""?n=t[e]:n!==t[e]||(n="");else if(t[e]===">"&&n===""){s=!0;break}r+=t[e]}return n!==""?!1:{value:r,index:e,tagClosed:s}}const wn=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Kt(t,e){const r=Ze.getAllMatches(t,wn),n={};for(let s=0;s<r.length;s++){if(r[s][1].length===0)return P("InvalidAttr","Attribute '"+r[s][2]+"' has no space in starting.",de(r[s]));if(r[s][3]!==void 0&&r[s][4]===void 0)return P("InvalidAttr","Attribute '"+r[s][2]+"' is without value.",de(r[s]));if(r[s][3]===void 0&&!e.allowBooleanAttributes)return P("InvalidAttr","boolean attribute '"+r[s][2]+"' is not allowed.",de(r[s]));const i=r[s][2];if(!Sn(i))return P("InvalidAttr","Attribute '"+i+"' is an invalid name.",de(r[s]));if(!n.hasOwnProperty(i))n[i]=1;else return P("InvalidAttr","Attribute '"+i+"' is repeated.",de(r[s]))}return!0}function xn(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}function $n(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,xn(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}function P(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function Sn(t){return Ze.isName(t)}function Tn(t){return Ze.isName(t)}function G(t,e){const r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function de(t){return t.startIndex+t[1].length}var Qe={};const Vt={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,r){return t}},On=function(t){return Object.assign({},Vt,t)};Qe.buildOptions=On,Qe.defaultOptions=Vt;class Hn{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,r){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:r})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}var Ln=Hn;const In=Ne;function Pn(t,e){const r={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let n=1,s=!1,i=!1,o="";for(;e<t.length;e++)if(t[e]==="<"&&!i){if(s&&Bn(t,e)){e+=7;let a,u;[a,u,e]=Fn(t,e+1),u.indexOf("&")===-1&&(r[Xn(a)]={regx:RegExp(`&${a};`,"g"),val:u})}else if(s&&Mn(t,e))e+=8;else if(s&&Gn(t,e))e+=8;else if(s&&Un(t,e))e+=9;else if(kn)i=!0;else throw new Error("Invalid DOCTYPE");n++,o=""}else if(t[e]===">"){if(i?t[e-1]==="-"&&t[e-2]==="-"&&(i=!1,n--):n--,n===0)break}else t[e]==="["?s=!0:o+=t[e];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:e}}function Fn(t,e){let r="";for(;e<t.length&&t[e]!=="'"&&t[e]!=='"';e++)r+=t[e];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");const n=t[e++];let s="";for(;e<t.length&&t[e]!==n;e++)s+=t[e];return[r,s,e]}function kn(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function Bn(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function Mn(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function Gn(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function Un(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function Xn(t){if(In.isName(t))return t;throw new Error(`Invalid entity name ${t}`)}var Kn=Pn;const Vn=/^[-+]?0x[a-fA-F0-9]+$/,Wn=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,zn={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Zn(t,e={}){if(e=Object.assign({},zn,e),!t||typeof t!="string")return t;let r=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(r))return t;if(t==="0")return 0;if(e.hex&&Vn.test(r))return jn(r,16);if(r.search(/[eE]/)!==-1){const n=r.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(n){if(e.leadingZeros)r=(n[1]||"")+n[3];else if(!(n[2]==="0"&&n[3][0]==="."))return t;return e.eNotation?Number(r):t}else return t}else{const n=Wn.exec(r);if(n){const s=n[1],i=n[2];let o=Qn(n[3]);if(!e.leadingZeros&&i.length>0&&s&&r[2]!==".")return t;if(!e.leadingZeros&&i.length>0&&!s&&r[1]!==".")return t;if(e.leadingZeros&&i===t)return 0;{const a=Number(r),u=""+a;return u.search(/[eE]/)!==-1?e.eNotation?a:t:r.indexOf(".")!==-1?u==="0"&&o===""||u===o||s&&u==="-"+o?a:t:i?o===u||s+o===u?a:t:r===u||r===s+u?a:t}}else return t}}function Qn(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}function jn(t,e){if(parseInt)return parseInt(t,e);if(Number.parseInt)return Number.parseInt(t,e);if(window&&window.parseInt)return window.parseInt(t,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}var qn=Zn;function Yn(t){return typeof t=="function"?t:Array.isArray(t)?e=>{for(const r of t)if(typeof r=="string"&&e===r||r instanceof RegExp&&r.test(e))return!0}:()=>!1}var Wt=Yn;const zt=Ne,ge=Ln,Jn=Kn,Dn=qn,es=Wt;let ts=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,16))}},this.addExternalEntities=rs,this.parseXml=as,this.parseTextData=ns,this.resolveNameSpace=ss,this.buildAttributesMap=os,this.isItStopNode=fs,this.replaceEntitiesValue=ls,this.readStopNodeData=ps,this.saveTextToParentTag=cs,this.addChild=us,this.ignoreAttributesFn=es(this.options.ignoreAttributes)}};function rs(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const n=e[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:t[n]}}}function ns(t,e,r,n,s,i,o){if(t!==void 0&&(this.options.trimValues&&!n&&(t=t.trim()),t.length>0)){o||(t=this.replaceEntitiesValue(t));const a=this.options.tagValueProcessor(e,t,r,s,i);return a==null?t:typeof a!=typeof t||a!==t?a:this.options.trimValues?qe(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?qe(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function ss(t){if(this.options.removeNSPrefix){const e=t.split(":"),r=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=r+e[1])}return t}const is=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function os(t,e,r){if(this.options.ignoreAttributes!==!0&&typeof t=="string"){const n=zt.getAllMatches(t,is),s=n.length,i={};for(let o=0;o<s;o++){const a=this.resolveNameSpace(n[o][1]);if(this.ignoreAttributesFn(a,e))continue;let u=n[o][4],l=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),l==="__proto__"&&(l="#__proto__"),u!==void 0){this.options.trimValues&&(u=u.trim()),u=this.replaceEntitiesValue(u);const c=this.options.attributeValueProcessor(a,u,e);c==null?i[l]=u:typeof c!=typeof u||c!==u?i[l]=c:i[l]=qe(u,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[l]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const o={};return o[this.options.attributesGroupName]=i,o}return i}}const as=function(t){t=t.replace(/\r\n?/g,`
`);const e=new ge("!xml");let r=e,n="",s="";for(let i=0;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="/"){const a=ie(t,">",i,"Closing Tag is not closed.");let u=t.substring(i+2,a).trim();if(this.options.removeNSPrefix){const h=u.indexOf(":");h!==-1&&(u=u.substr(h+1))}this.options.transformTagName&&(u=this.options.transformTagName(u)),r&&(n=this.saveTextToParentTag(n,r,s));const l=s.substring(s.lastIndexOf(".")+1);if(u&&this.options.unpairedTags.indexOf(u)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${u}>`);let c=0;l&&this.options.unpairedTags.indexOf(l)!==-1?(c=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):c=s.lastIndexOf("."),s=s.substring(0,c),r=this.tagsNodeStack.pop(),n="",i=a}else if(t[i+1]==="?"){let a=je(t,i,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,s),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const u=new ge(a.tagName);u.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(u[":@"]=this.buildAttributesMap(a.tagExp,s,a.tagName)),this.addChild(r,u,s)}i=a.closeIndex+1}else if(t.substr(i+1,3)==="!--"){const a=ie(t,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){const u=t.substring(i+4,a-2);n=this.saveTextToParentTag(n,r,s),r.add(this.options.commentPropName,[{[this.options.textNodeName]:u}])}i=a}else if(t.substr(i+1,2)==="!D"){const a=Jn(t,i);this.docTypeEntities=a.entities,i=a.i}else if(t.substr(i+1,2)==="!["){const a=ie(t,"]]>",i,"CDATA is not closed.")-2,u=t.substring(i+9,a);n=this.saveTextToParentTag(n,r,s);let l=this.parseTextData(u,r.tagname,s,!0,!1,!0,!0);l==null&&(l=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:u}]):r.add(this.options.textNodeName,l),i=a+2}else{let a=je(t,i,this.options.removeNSPrefix),u=a.tagName;const l=a.rawTagName;let c=a.tagExp,h=a.attrExpPresent,f=a.closeIndex;this.options.transformTagName&&(u=this.options.transformTagName(u)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,s,!1));const b=r;if(b&&this.options.unpairedTags.indexOf(b.tagname)!==-1&&(r=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),u!==e.tagname&&(s+=s?"."+u:u),this.isItStopNode(this.options.stopNodes,s,u)){let A="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)u[u.length-1]==="/"?(u=u.substr(0,u.length-1),s=s.substr(0,s.length-1),c=u):c=c.substr(0,c.length-1),i=a.closeIndex;else if(this.options.unpairedTags.indexOf(u)!==-1)i=a.closeIndex;else{const _=this.readStopNodeData(t,l,f+1);if(!_)throw new Error(`Unexpected end of ${l}`);i=_.i,A=_.tagContent}const E=new ge(u);u!==c&&h&&(E[":@"]=this.buildAttributesMap(c,s,u)),A&&(A=this.parseTextData(A,u,s,!0,h,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),E.add(this.options.textNodeName,A),this.addChild(r,E,s)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){u[u.length-1]==="/"?(u=u.substr(0,u.length-1),s=s.substr(0,s.length-1),c=u):c=c.substr(0,c.length-1),this.options.transformTagName&&(u=this.options.transformTagName(u));const A=new ge(u);u!==c&&h&&(A[":@"]=this.buildAttributesMap(c,s,u)),this.addChild(r,A,s),s=s.substr(0,s.lastIndexOf("."))}else{const A=new ge(u);this.tagsNodeStack.push(r),u!==c&&h&&(A[":@"]=this.buildAttributesMap(c,s,u)),this.addChild(r,A,s),r=A}n="",i=f}}else n+=t[i];return e.child};function us(t,e,r){const n=this.options.updateTag(e.tagname,r,e[":@"]);n===!1||(typeof n=="string"&&(e.tagname=n),t.addChild(e))}const ls=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(let e in this.lastEntities){const r=this.lastEntities[e];t=t.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const r=this.htmlEntities[e];t=t.replace(r.regex,r.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function cs(t,e,r,n){return t&&(n===void 0&&(n=e.child.length===0),t=this.parseTextData(t,e.tagname,r,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,n),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function fs(t,e,r){const n="*."+r;for(const s in t){const i=t[s];if(n===i||e===i)return!0}return!1}function hs(t,e,r=">"){let n,s="";for(let i=e;i<t.length;i++){let o=t[i];if(n)o===n&&(n="");else if(o==='"'||o==="'")n=o;else if(o===r[0])if(r[1]){if(t[i+1]===r[1])return{data:s,index:i}}else return{data:s,index:i};else o==="	"&&(o=" ");s+=o}}function ie(t,e,r,n){const s=t.indexOf(e,r);if(s===-1)throw new Error(n);return s+e.length-1}function je(t,e,r,n=">"){const s=hs(t,e+1,n);if(!s)return;let i=s.data;const o=s.index,a=i.search(/\s/);let u=i,l=!0;a!==-1&&(u=i.substring(0,a),i=i.substring(a+1).trimStart());const c=u;if(r){const h=u.indexOf(":");h!==-1&&(u=u.substr(h+1),l=u!==s.data.substr(h+1))}return{tagName:u,tagExp:i,closeIndex:o,attrExpPresent:l,rawTagName:c}}function ps(t,e,r){const n=r;let s=1;for(;r<t.length;r++)if(t[r]==="<")if(t[r+1]==="/"){const i=ie(t,">",r,`${e} is not closed`);if(t.substring(r+2,i).trim()===e&&(s--,s===0))return{tagContent:t.substring(n,r),i};r=i}else if(t[r+1]==="?")r=ie(t,"?>",r+1,"StopNode is not closed.");else if(t.substr(r+1,3)==="!--")r=ie(t,"-->",r+3,"StopNode is not closed.");else if(t.substr(r+1,2)==="![")r=ie(t,"]]>",r,"StopNode is not closed.")-2;else{const i=je(t,r,">");i&&((i&&i.tagName)===e&&i.tagExp[i.tagExp.length-1]!=="/"&&s++,r=i.closeIndex)}}function qe(t,e,r){if(e&&typeof t=="string"){const n=t.trim();return n==="true"?!0:n==="false"?!1:Dn(t,r)}else return zt.isExist(t)?t:""}var ds=ts,Zt={};function gs(t,e){return Qt(t,e)}function Qt(t,e,r){let n;const s={};for(let i=0;i<t.length;i++){const o=t[i],a=As(o);let u="";if(r===void 0?u=a:u=r+"."+a,a===e.textNodeName)n===void 0?n=o[a]:n+=""+o[a];else{if(a===void 0)continue;if(o[a]){let l=Qt(o[a],e,u);const c=ys(l,e);o[":@"]?bs(l,o[":@"],u,e):Object.keys(l).length===1&&l[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?l=l[e.textNodeName]:Object.keys(l).length===0&&(e.alwaysCreateTextNode?l[e.textNodeName]="":l=""),s[a]!==void 0&&s.hasOwnProperty(a)?(Array.isArray(s[a])||(s[a]=[s[a]]),s[a].push(l)):e.isArray(a,u,c)?s[a]=[l]:s[a]=l}}}return typeof n=="string"?n.length>0&&(s[e.textNodeName]=n):n!==void 0&&(s[e.textNodeName]=n),s}function As(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const n=e[r];if(n!==":@")return n}}function bs(t,e,r,n){if(e){const s=Object.keys(e),i=s.length;for(let o=0;o<i;o++){const a=s[o];n.isArray(a,r+"."+a,!0,!0)?t[a]=[e[a]]:t[a]=e[a]}}}function ys(t,e){const{textNodeName:r}=e,n=Object.keys(t).length;return!!(n===0||n===1&&(t[r]||typeof t[r]=="boolean"||t[r]===0))}Zt.prettify=gs;const{buildOptions:Es}=Qe,ms=ds,{prettify:Rs}=Zt,_s=ze;var Cs=class{constructor(e){this.externalEntities={},this.options=Es(e)}parse(e,r){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});const i=_s.validate(e,r);if(i!==!0)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}const n=new ms(this.options);n.addExternalEntities(this.externalEntities);const s=n.parseXml(e);return this.options.preserveOrder||s===void 0?s:Rs(s,this.options)}addEntity(e,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=r}};const Ns=`
`;function vs(t,e){let r="";return e.format&&e.indentBy.length>0&&(r=Ns),jt(t,e,"",r)}function jt(t,e,r,n){let s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o],u=ws(a);if(u===void 0)continue;let l="";if(r.length===0?l=u:l=`${r}.${u}`,u===e.textNodeName){let A=a[u];xs(l,e)||(A=e.tagValueProcessor(u,A),A=Yt(A,e)),i&&(s+=n),s+=A,i=!1;continue}else if(u===e.cdataPropName){i&&(s+=n),s+=`<![CDATA[${a[u][0][e.textNodeName]}]]>`,i=!1;continue}else if(u===e.commentPropName){s+=n+`<!--${a[u][0][e.textNodeName]}-->`,i=!0;continue}else if(u[0]==="?"){const A=qt(a[":@"],e),E=u==="?xml"?"":n;let _=a[u][0][e.textNodeName];_=_.length!==0?" "+_:"",s+=E+`<${u}${_}${A}?>`,i=!0;continue}let c=n;c!==""&&(c+=e.indentBy);const h=qt(a[":@"],e),f=n+`<${u}${h}`,b=jt(a[u],e,l,c);e.unpairedTags.indexOf(u)!==-1?e.suppressUnpairedNode?s+=f+">":s+=f+"/>":(!b||b.length===0)&&e.suppressEmptyNode?s+=f+"/>":b&&b.endsWith(">")?s+=f+`>${b}${n}</${u}>`:(s+=f+">",b&&n!==""&&(b.includes("/>")||b.includes("</"))?s+=n+e.indentBy+b+n:s+=b,s+=`</${u}>`),i=!0}return s}function ws(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const n=e[r];if(t.hasOwnProperty(n)&&n!==":@")return n}}function qt(t,e){let r="";if(t&&!e.ignoreAttributes)for(let n in t){if(!t.hasOwnProperty(n))continue;let s=e.attributeValueProcessor(n,t[n]);s=Yt(s,e),s===!0&&e.suppressBooleanAttributes?r+=` ${n.substr(e.attributeNamePrefix.length)}`:r+=` ${n.substr(e.attributeNamePrefix.length)}="${s}"`}return r}function xs(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let n in e.stopNodes)if(e.stopNodes[n]===t||e.stopNodes[n]==="*."+r)return!0;return!1}function Yt(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){const n=e.entities[r];t=t.replace(n.regex,n.val)}return t}var $s=vs;const Ss=$s,Ts=Wt,Os={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function ee(t){this.options=Object.assign({},Os,t),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=Ts(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Is),this.processTextOrObjNode=Hs,this.options.format?(this.indentate=Ls,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}ee.prototype.build=function(t){return this.options.preserveOrder?Ss(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0,[]).val)},ee.prototype.j2x=function(t,e,r){let n="",s="";const i=r.join(".");for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o))if(typeof t[o]>"u")this.isAttribute(o)&&(s+="");else if(t[o]===null)this.isAttribute(o)||o===this.options.cdataPropName?s+="":o[0]==="?"?s+=this.indentate(e)+"<"+o+"?"+this.tagEndChar:s+=this.indentate(e)+"<"+o+"/"+this.tagEndChar;else if(t[o]instanceof Date)s+=this.buildTextValNode(t[o],o,"",e);else if(typeof t[o]!="object"){const a=this.isAttribute(o);if(a&&!this.ignoreAttributesFn(a,i))n+=this.buildAttrPairStr(a,""+t[o]);else if(!a)if(o===this.options.textNodeName){let u=this.options.tagValueProcessor(o,""+t[o]);s+=this.replaceEntitiesValue(u)}else s+=this.buildTextValNode(t[o],o,"",e)}else if(Array.isArray(t[o])){const a=t[o].length;let u="",l="";for(let c=0;c<a;c++){const h=t[o][c];if(!(typeof h>"u"))if(h===null)o[0]==="?"?s+=this.indentate(e)+"<"+o+"?"+this.tagEndChar:s+=this.indentate(e)+"<"+o+"/"+this.tagEndChar;else if(typeof h=="object")if(this.options.oneListGroup){const f=this.j2x(h,e+1,r.concat(o));u+=f.val,this.options.attributesGroupName&&h.hasOwnProperty(this.options.attributesGroupName)&&(l+=f.attrStr)}else u+=this.processTextOrObjNode(h,o,e,r);else if(this.options.oneListGroup){let f=this.options.tagValueProcessor(o,h);f=this.replaceEntitiesValue(f),u+=f}else u+=this.buildTextValNode(h,o,"",e)}this.options.oneListGroup&&(u=this.buildObjectNode(u,o,l,e)),s+=u}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){const a=Object.keys(t[o]),u=a.length;for(let l=0;l<u;l++)n+=this.buildAttrPairStr(a[l],""+t[o][a[l]])}else s+=this.processTextOrObjNode(t[o],o,e,r);return{attrStr:n,val:s}},ee.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function Hs(t,e,r,n){const s=this.j2x(t,r+1,n.concat(e));return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,s.attrStr,r):this.buildObjectNode(s.val,e,s.attrStr,r)}ee.prototype.buildObjectNode=function(t,e,r,n){if(t==="")return e[0]==="?"?this.indentate(n)+"<"+e+r+"?"+this.tagEndChar:this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,i="";return e[0]==="?"&&(i="?",s=""),(r||r==="")&&t.indexOf("<")===-1?this.indentate(n)+"<"+e+r+i+">"+t+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&i.length===0?this.indentate(n)+`<!--${t}-->`+this.newLine:this.indentate(n)+"<"+e+r+i+this.tagEndChar+t+this.indentate(n)+s}},ee.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e},ee.prototype.buildTextValNode=function(t,e,r,n){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(n)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(n)+"<"+e+r+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,t);return s=this.replaceEntitiesValue(s),s===""?this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(n)+"<"+e+r+">"+s+"</"+e+this.tagEndChar}},ee.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t};function Ls(t){return this.options.indentBy.repeat(t)}function Is(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}var Ps=ee,Fs={XMLParser:Cs,XMLValidator:ze,XMLBuilder:Ps},ks=function t(e,r){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,s=/(^[ ]*|[ ]*$)/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,o=/^0x[0-9a-f]+$/i,a=/^0/,u=function(S){return t.insensitive&&(""+S).toLowerCase()||""+S},l=u(e).replace(s,"")||"",c=u(r).replace(s,"")||"",h=l.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),b=parseInt(l.match(o),16)||h.length!==1&&l.match(i)&&Date.parse(l),A=parseInt(c.match(o),16)||b&&c.match(i)&&Date.parse(c)||null,E,_;if(A){if(b<A)return-1;if(b>A)return 1}for(var w=0,B=Math.max(h.length,f.length);w<B;w++){if(E=!(h[w]||"").match(a)&&parseFloat(h[w])||h[w]||0,_=!(f[w]||"").match(a)&&parseFloat(f[w])||f[w]||0,isNaN(E)!==isNaN(_))return isNaN(E)?1:-1;if(typeof E!=typeof _&&(E+="",_+=""),E<_)return-1;if(E>_)return 1}return 0},Ye=tt(ks);function Bs(t,e){if(t.indexOf(e)>-1)return[e];const r=pe(t,e);return r.length?r:[]}async function Ms(t,e={}){const r={ignoreAttributes:!1,preserveOrder:!1,attributeNamePrefix:"$",isArray:void 0};e.alwaysArray?r.isArray=(i,o)=>{if(e.alwaysArray.indexOf(o)!==-1)return!0}:delete r.isArray;const n=Object.assign(r,e),s=new Fs.XMLParser(n);return new Promise((i,o)=>{try{const a=s.parse(t);i(a)}catch(a){o(a)}})}async function Je(t){if(new Uint16Array(t,0,2)[0]===35615)try{const r=new Response(t),n=new DecompressionStream("gzip"),s=await r.body?.pipeThrough(n),i=await new Response(s).arrayBuffer();return await Je(i)}catch(r){console.error("eee",r)}return t}const Jt="AAK"+Object.keys({light:"mapbox://styles/mapbox/light-v10",dark:"mapbox://styles/vsp-tu-berlin/ckek59op0011219pbwfar1rex",transparentLight:"mapbox://styles/vsp-tu-berlin/clgxnk7m500dt01p687w8e693",transparentDark:"mapbox://styles/vsp-tu-berlin/clgwrqa0w00av01pg5jox0a35"}).length+"QRQ0EldfvmCW4Cyu";Ye.insensitive=!0;const Gs=/.*\.(avro|dbf|gpkg|gz|h5|jpg|jpeg|omx|png|shp|shx|sqlite|zip|zst)$/,Us=["simwrapper",".simwrapper"],Ae={};class Xs{baseUrl;urlId;slug;needsAuth;fsHandle;store;isGithub;isFlask;type;constructor(e,r){this.urlId=e.slug,this.slug=e.slug,this.needsAuth=!!e.needPassword,this.fsHandle=e.handle||null,this.store=r||null,this.isGithub=!!e.isGithub,this.isFlask=!!e.flask,this.type=0,this.fsHandle&&(this.type=1),this.isGithub&&(this.type=2),this.isFlask&&(this.type=3),this.baseUrl=e.baseURL,e.baseURL.endsWith("/")||(this.baseUrl+="/"),Ae[this.urlId]||(Ae[this.urlId]={})}hasHandle(){return!!this.fsHandle}async getChromePermission(e){return e&&await e.queryPermission({mode:"read"})!=="granted"&&this.store?await new Promise(i=>{this.store.commit("setFileHandleForPermissionRequest",{handle:e,resolve:i})}):!0}clearCache(){Ae[this.urlId]={}}cleanURL(e){let r=this.baseUrl+e.replace(/^0-9a-zA-Z_\-\/:+/i,"");return r=r.replaceAll("//","/"),r=r.replaceAll("//","/"),r=r.replace("https:/","https://"),r=r.replace("http:/","http://"),r=new URL(r).href,r}async _getFileResponse(e){switch(this.type){case 1:return this._getFileFromChromeFileSystem(e);case 2:return this._getFileFromGitHub(e);case 3:return this._getFileFromAzure(e);case 0:default:return this._getFileFetchResponse(e)}}async _getFileFetchResponse(e,r){const n=this.cleanURL(e),s={};r?.maxBytes&&(s.Range=`bytes=0-${r.maxBytes-1}`);const i=new Request(n,{headers:s});return await fetch(i).then(a=>{if(a.status>=300)throw console.warn("Status:",a.status),a;return a})}async _getDirectoryFromAzure(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r=r.replaceAll("//","/");let n=`${this.baseUrl}list/${this.slug}?prefix=${r}`;const s=new URL(n).href,i={};if(this.needsAuth){let l=localStorage.getItem(`auth-token-${this.slug}`);if(l||(l=prompt("This server requires an access token to continue")),l)localStorage.setItem(`auth-token-${this.slug}`,l),i.AZURETOKEN=l;else return{dirs:[],files:[],handles:{}}}const o=new Request(s,{headers:i}),a=await fetch(o);if(a.status==400){let l=prompt("Authorization failure. This server requires a valid access token to continue");return l?(localStorage.setItem(`auth-token-${this.slug}`,l),i.AZURETOKEN=l,await this._getDirectoryFromAzure(e)):{dirs:[],files:[],handles:{}}}if(a.status!=200)throw console.log("Status:",a.status),a;return await a.json()}getSlug(){return this.slug}async _getFileFromAzure(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r=r.replaceAll("//","/");let n=`${this.baseUrl}file/${this.slug}?prefix=${r}`;const s=new URL(n).href,i={},o=new Request(s,{headers:i}),a=await fetch(o);if(a.status!=200)throw console.log("Status:",a.status),a;return a}async _getFileFromChromeFileSystem(e,r){let n=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");n=n.replaceAll("//","/"),n=new URL(`http://local/${n}`).href,n=n.substring(13);const s=n.lastIndexOf("/"),i=n.substring(0,s),o=decodeURIComponent(n.substring(s+1)),u=(await this.getDirectory(i)).handles[o];if(!u)throw Error(`File ${o} missing`);const l=await u.getFile();return l.json=()=>new Promise(async(c,h)=>{const f=await l.text(),b=JSON.parse(f);c(b)}),l.blob=()=>new Promise(async(c,h)=>{c(l)}),new Promise((c,h)=>{c(l)})}async _getFileFromGitHub(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r.startsWith("/")&&(r=r.slice(1));const n=r.split("/").filter(f=>!!f);if(n.length<2)return new Promise((f,b)=>{f(null)});const s=`${n[0]}/${n[1]}`;let i=`https://api.github.com/repos/${s}/contents/`;n.shift(),n.shift(),i+=n.join("/");const u={Authorization:`Bearer ${["11","pat","github"].reverse().join("_")}${Jt}_SyKezxQUoOKXAx3HwTH51I4funGUSFfxdbGG2X4l3WvUHIW62GOOmO0OMWZ`};let l=await await fetch(i,{headers:u}).then(f=>f.json()),c=l.content;if(c||(i=`https://api.github.com/repos/${s}/git/blobs/${l.sha}`,l=await await fetch(i,{headers:u}).then(f=>f.json()),c=l.content),l.encoding=="base64"){const f=Uint8Array.from(atob(l.content),b=>b.charCodeAt(0));Gs.test(e.toLocaleLowerCase())?c=f:c=new TextDecoder().decode(f)}else l.encoding=="utf-8"?c=new TextDecoder().decode(l.content):c=l.content;return{text:()=>new Promise((f,b)=>{f(c)}),json:()=>new Promise(async(f,b)=>{const A=JSON.parse(c);f(A)}),blob:()=>new Promise(async(f,b)=>{f(new Blob([c],{type:"application/octet-stream"}))})}}async _getDirectoryFromGitHub(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r.startsWith("/")&&(r=r.slice(1));const n={dirs:[],files:[],handles:{}},s=r.split("/").filter(c=>!!c);if(s.length<2)return n;let i=`https://api.github.com/repos/${s[0]}/${s[1]}/contents/`;s.shift(),s.shift(),i+=s.join("/");const u={Authorization:`Bearer ${["11","pat","github"].reverse().join("_")}${Jt}_SyKezxQUoOKXAx3HwTH51I4funGUSFfxdbGG2X4l3WvUHIW62GOOmO0OMWZ`};return(await await fetch(i,{headers:u}).then(c=>c.json())).forEach(c=>{c.type=="file"&&n.files.push(c.name),c.type=="dir"&&n.dirs.push(c.name)}),n}async getFileText(e){return(await this._getFileResponse(e)).text()}async getFileJson(e){const s=await(await(await this._getFileResponse(e)).blob()).arrayBuffer(),i=await Je(s),o=new TextDecoder("utf-8").decode(i);return JSON.parse(o)}async getFileBlob(e){return(await this._getFileResponse(e)).blob()}async probeXmlFileType(e){let r=await this.getFileStream(e,{maxBytes:1024});e.toLocaleLowerCase().endsWith(".gz")&&(r=r.pipeThrough(new DecompressionStream("gzip")));const n=await r.getReader().read(),s=new Uint8Array(n.value),o=new TextDecoder("utf-8").decode(s.slice(0,Math.min(s.length,1024))).match(/<!DOCTYPE\s+(\w+)\s*(?:\[\s*([^\]]*)\s*\])?(?:\s+PUBLIC\s+"([^"]+)"\s+"([^"]+)"|(?:\s+SYSTEM\s+)?"([^"]+)")?/is);return o?o[1]:null}async getFileStream(e,r){let n;switch(this.type){case 1:return n=await this._getFileFromChromeFileSystem(e,r).then(i=>i.blob()).then(i=>i.stream()),n;case 0:return n=await this._getFileFetchResponse(e,r).then(i=>i.body),n;case 3:const s=`/file/${this.slug}?prefix=${e}`;return n=await this._getFileFetchResponse(s,r).then(i=>i.body),n;default:throw Error(`FileSystemType ${this.type} not implemented`)}}async getDirectory(e){let r=e.replaceAll("//","/");r.endsWith("/")||(r+="/");const n=Ae[this.urlId][r];if(n)return n;r=r.replaceAll("/./","/");try{let s;switch(this.type){case 1:s=await this._getDirectoryFromHandle(r);break;case 2:s=await this._getDirectoryFromGitHub(r);break;case 3:s=await this._getDirectoryFromAzure(r);break;case 0:default:s=await this._getDirectoryFromURL(r);break}return s.dirs.sort((i,o)=>Ye(i,o)),s.files.sort((i,o)=>Ye(i,o)),Ae[this.urlId][r]=s,s}catch(s){throw Error(""+s)}}async _getDirectoryFromHandle(e,r){const n={files:[],dirs:[],handles:{}};if(!this.fsHandle||!await this.getChromePermission(this.fsHandle))return n;let i=e.split("/").filter(l=>!!l);function o(l){const c=l.indexOf("..");if(c<=0)return l;const h=l.filter((f,b)=>b!==c-1&&b!==c);return o(h)}const a=o(i);let u=this.fsHandle;if(a.length)for(const l of a){let c=!1;for await(let[h,f]of u)if(h===l){u=f,c=!0;break}if(!c)throw Error(`Could not find folder "${l}"`)}for await(let l of u.values())n.handles&&(n.handles[l.name]=l),l.kind==="file"?n.files.push(l.name):n.dirs.push(l.name);return n}async _getDirectoryFromURL(e){const n=await(await this._getFileResponse(e).then()).text();return this.buildListFromHtml(n)}async findAllYamlConfigs(e){const r={dashboards:{},topsheets:{},vizes:{},configs:{}},n=[];let s="/";const o=(e.startsWith("/")?e:"/"+e).split("/");for(const h of o.slice(0,o.length-1)){s=`${s}${h}/`.replaceAll("//","/");try{const{dirs:f}=await this.getDirectory(s);for(const b of f)Us.includes(b.toLocaleLowerCase())&&n.push(`${s}/${b}`.replaceAll("//","/"))}catch{}}n.push(e);const a="dashboard*.y?(a)ml",u="(topsheet|table)*.y?(a)ml",l="viz*.y?(a)ml",c="simwrapper-config.y?(a)ml";for(const h of n){const{files:f}=await this.getDirectory(h);pe.match(f,a).map(b=>r.dashboards[b]=`${h}/${b}`.replaceAll("//","/")),pe.match(f,u).map(b=>r.topsheets[b]=`${h}/${b}`.replaceAll("//","/")),pe.match(f,l).map(b=>r.vizes[b]=`${h}/${b}`.replaceAll("//","/")),pe.match(f,c).map(b=>r.configs[b]=`${h}/${b}`.replaceAll("//","/"))}return r}buildListFromHtml(e){return e.indexOf("SimpleWebServer")>-1?this.buildListFromSimpleWebServer(e):e.indexOf("<ul>")>-1?this.buildListFromSVN(e):e.indexOf('<ul id="files">')>-1?this.buildListFromNpxServe(e):e.indexOf("<table>")>-1?this.buildListFromApache24(e):e.indexOf(`
<a `)>-1?this.buildListFromNGINX(e):{dirs:[],files:[],handles:{}}}buildListFromSimpleWebServer(e){const r=/">(.*?)<\/a/,n=[],s=[],i=e.split(`
`);for(const o of i){if(o.indexOf('<li><a href="')<0)continue;const u=o.match(r);if(!u)continue;const l=u[1];l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l)}return{dirs:n,files:s,handles:{}}}buildListFromNpxServe(e){const r=/"(.*?)"/;let n=[],s=[];const i=e.split("</li>").map(o=>o.slice(o.lastIndexOf("<li")));for(const o of i){const a=o.indexOf('<li> <a href="');if(a<0||a>512)continue;const u=o.match(r);if(!u)continue;let l=u[1];l=l.replaceAll("&#47;","/"),l!=="/"&&l!=="../"&&(l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l))}return n=n.map(o=>o.slice(1+o.lastIndexOf("/"))),s=s.map(o=>o.slice(1+o.lastIndexOf("/"))),{dirs:n,files:s,handles:{}}}buildListFromSVN(e){const r=/"(.*?)"/,n=[],s=[],i=e.split(`
`);for(const o of i){if(o.indexOf('<li><a href="')<0)continue;const u=o.match(r);if(!u)continue;let l=u[1];l!=="../"&&(l.startsWith("./")&&(l=l.substring(2)),l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l))}return{dirs:n,files:s,handles:{}}}buildListFromApache24(e){const r=/"(.*?)"/,n=[],s=[],i=e.split(`
`);for(const o of i){if(o.indexOf('<th "')>-1||o.indexOf("[PARENTDIR]")>-1)continue;const a=o.indexOf('<td><a href="');if(a<0)continue;const u=o.substring(a).match(r);if(!u)continue;const l=u[1];l!=="../"&&(l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l))}return{dirs:n,files:s,handles:{}}}buildListFromNGINX(e){const r=/"(.*?)"/,n=[],s=[],i=e.split(`
`);for(const o of i){const a=o.indexOf('<a href="');if(a<0)continue;const u=o.substring(a).match(r);if(!u)continue;const l=u[1];l!=="../"&&(l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l))}return{dirs:n,files:s,handles:{}}}}let De="",Dt="";onmessage=async function(t){De=t.data.id;const e=await Ks(t.data.fileSystem,t.data.filePath,t.data.options);postMessage({xml:e,id:De,resolvedFilename:Dt})};async function Ks(t,e,r){try{const n=new Xs(t);let s=e;if(e.indexOf("*")>-1||e.indexOf("?")>-1){const u=e.substring(1+e.lastIndexOf("/")),l=e.substring(0,e.lastIndexOf("/")),{files:c}=await n.getDirectory(l),h=Bs(c,u);if(h.length==0)throw Error(`No files matched "${u}"`);if(h.length>1)throw Error(`More than one file matched "${u}": ${h}`);s=`${l}/${h[0]}`,Dt=s}const i=await n.getFileBlob(s);i||er("BLOB IS NULL");const o=await Vs(i);return Ms(o,r)}catch{er("Error loading "+e)}}async function Vs(t){const e=await t.arrayBuffer(),r=await Je(e);return new TextDecoder("utf-8").decode(r)}function er(t){postMessage({error:t,id:De}),close()}})();
